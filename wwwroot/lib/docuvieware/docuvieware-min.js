/*
 jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license  jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license  Context menu plugin
 Radio buttons to regular buttons plugin, based on jQuery UI Button 1.11.2
 This has been done to avoid name collision
 Dialog plugin, based on jQuery UI Dialog 1.11.2
 This has been done to avoid name collision
 Menu plugin, based on jQuery UI Menu 1.11.2
 This has been done to avoid name collision
*/
!function(d,A){"object"==typeof module&&"object"==typeof module.exports?module.exports=d.document?A(d,!0):function(L){if(!L.document)throw Error("jQuery requires a window with a document");return A(L)}:A(d)}("undefined"!=typeof window?window:this,function(d,A){function L(f,m,r){var v,z,G=(r=r||Ja).createElement("script");if(G.text=f,m)for(v in Fb)(z=m[v]||m.getAttribute&&m.getAttribute(v))&&G.setAttribute(v,z);r.head.appendChild(G).parentNode.removeChild(G)}function S(f){return null==f?f+"":"object"==
typeof f||"function"==typeof f?Ya[jb.call(f)]||"object":typeof f}function x(f){var m=!!f&&"length"in f&&f.length,r=S(f);return!za(f)&&!xa(f)&&("array"===r||0===m||"number"==typeof m&&0<m&&m-1 in f)}function t(f,m){return f.nodeName&&f.nodeName.toLowerCase()===m.toLowerCase()}function h(f,m,r){return za(m)?u.grep(f,function(v,z){return!!m.call(v,z,v)!==r}):m.nodeType?u.grep(f,function(v){return v===m!==r}):"string"!=typeof m?u.grep(f,function(v){return-1<Va.call(m,v)!==r}):u.filter(m,f,r)}function l(f,
m){for(;(f=f[m])&&1!==f.nodeType;);return f}function q(f){return f}function y(f){throw f;}function D(f,m,r,v){var z;try{f&&za(z=f.promise)?z.call(f).done(m).fail(r):f&&za(z=f.then)?z.call(f,m,r):m.apply(void 0,[f].slice(v))}catch(G){r.apply(void 0,[G])}}function K(){Ja.removeEventListener("DOMContentLoaded",K);d.removeEventListener("load",K);u.ready()}function M(f,m){return m.toUpperCase()}function O(f){return f.replace($c,"ms-").replace(ad,M)}function R(){this.expando=u.expando+R.uid++}function Y(f,
m,r){var v,z;if(void 0===r&&1===f.nodeType)if(v="data-"+m.replace(bd,"-$&").toLowerCase(),"string"==typeof(r=f.getAttribute(v))){try{r="true"===(z=r)||"false"!==z&&("null"===z?null:z===+z+""?+z:cd.test(z)?JSON.parse(z):z)}catch(G){}qb.set(f,m,r)}else r=void 0;return r}function fa(f,m,r,v){var z,G,H=20,P=v?function(){return v.cur()}:function(){return u.css(f,m,"")},Q=P(),Z=r&&r[3]||(u.cssNumber[m]?"":"px"),ia=f.nodeType&&(u.cssNumber[m]||"px"!==Z&&+Q)&&Wb.exec(u.css(f,m));if(ia&&ia[3]!==Z){Q/=2;Z=
Z||ia[3];for(ia=+Q||1;H--;)u.style(f,m,ia+Z),0>=(1-G)*(1-(G=P()/Q||.5))&&(H=0),ia/=G;ia*=2;u.style(f,m,ia+Z);r=r||[]}return r&&(ia=+ia||+Q||0,z=r[1]?ia+(r[1]+1)*r[2]:+r[2],v&&(v.unit=Z,v.start=ia,v.end=z)),z}function ha(f,m){for(var r,v,z,G,H,P,Q,Z=[],ia=0,W=f.length;ia<W;ia++)(v=f[ia]).style&&(r=v.style.display,m?("none"===r&&(Z[ia]=Ia.get(v,"display")||null,Z[ia]||(v.style.display="")),""===v.style.display&&ec(v)&&(Z[ia]=(Q=H=G=void 0,H=(z=v).ownerDocument,P=z.nodeName,(Q=wc[P])||(G=H.body.appendChild(H.createElement(P)),
Q=u.css(G,"display"),G.parentNode.removeChild(G),"none"===Q&&(Q="block"),wc[P]=Q)))):"none"!==r&&(Z[ia]="none",Ia.set(v,"display",r)));for(ia=0;ia<W;ia++)null!=Z[ia]&&(f[ia].style.display=Z[ia]);return f}function sa(f,m){var r;return r="undefined"!=typeof f.getElementsByTagName?f.getElementsByTagName(m||"*"):"undefined"!=typeof f.querySelectorAll?f.querySelectorAll(m||"*"):[],void 0===m||m&&t(f,m)?u.merge([f],r):r}function X(f,m){for(var r=0,v=f.length;r<v;r++)Ia.set(f[r],"globalEval",!m||Ia.get(m[r],
"globalEval"))}function ja(f,m,r,v,z){for(var G,H,P,Q,Z=m.createDocumentFragment(),ia=[],W=0,ta=f.length;W<ta;W++)if((G=f[W])||0===G)if("object"===S(G))u.merge(ia,G.nodeType?[G]:G);else if(dd.test(G)){H=H||Z.appendChild(m.createElement("div"));P=(xc.exec(G)||["",""])[1].toLowerCase();P=yb[P]||yb._default;H.innerHTML=P[1]+u.htmlPrefilter(G)+P[2];for(P=P[0];P--;)H=H.lastChild;u.merge(ia,H.childNodes);(H=Z.firstChild).textContent=""}else ia.push(m.createTextNode(G));Z.textContent="";for(W=0;G=ia[W++];)if(v&&
-1<u.inArray(G,v))z&&z.push(G);else if(Q=Tb(G),H=sa(Z.appendChild(G),"script"),Q&&X(H),r)for(P=0;G=H[P++];)yc.test(G.type||"")&&r.push(G);return Z}function ka(){return!0}function ma(){return!1}function ra(f,m){a:{try{var r=Ja.activeElement;break a}catch(v){}r=void 0}return f===r==("focus"===m)}function Ca(f,m,r,v,z,G){var H,P;if("object"==typeof m){for(P in"string"!=typeof r&&(v=v||r,r=void 0),m)Ca(f,P,r,v,m[P],G);return f}if(null==v&&null==z?(z=r,v=r=void 0):null==z&&("string"==typeof r?(z=v,v=void 0):
(z=v,v=r,r=void 0)),!1===z)z=ma;else if(!z)return f;return 1===G&&(H=z,(z=function(Q){return u().off(Q),H.apply(this,arguments)}).guid=H.guid||(H.guid=u.guid++)),f.each(function(){u.event.add(this,m,z,v,r)})}function a(f,m,r){r?(Ia.set(f,m,!1),u.event.add(f,m,{namespace:!1,handler:function(v){var z,G,H=Ia.get(this,m);if(1&v.isTrigger&&this[m])if(H.length)(u.event.special[m]||{}).delegateType&&v.stopPropagation();else{if(H=gb.call(arguments),Ia.set(this,m,H),z=r(this,m),this[m](),H!==(G=Ia.get(this,
m))||z?Ia.set(this,m,!1):G={},H!==G)return v.stopImmediatePropagation(),v.preventDefault(),G&&G.value}else H.length&&(Ia.set(this,m,{value:u.event.trigger(u.extend(H[0],u.Event.prototype),H.slice(1),this)}),v.stopImmediatePropagation())}})):void 0===Ia.get(f,m)&&u.event.add(f,m,ka)}function C(f,m){return t(f,"table")&&t(11!==m.nodeType?m:m.firstChild,"tr")&&u(f).children("tbody")[0]||f}function J(f){return f.type=(null!==f.getAttribute("type"))+"/"+f.type,f}function b(f){return"true/"===(f.type||
"").slice(0,5)?f.type=f.type.slice(5):f.removeAttribute("type"),f}function c(f,m){var r,v,z,G,H;if(1===m.nodeType){if(Ia.hasData(f)&&(H=Ia.get(f).events))for(v in Ia.remove(m,"handle events"),H){var P=0;for(r=H[v].length;P<r;P++)u.event.add(m,v,H[v][P])}qb.hasData(f)&&(z=qb.access(f),G=u.extend({},z),qb.set(m,G))}}function e(f,m,r,v){m=sb(m);var z,G,H,P=0,Q=f.length,Z=Q-1,ia=m[0],W=za(ia);if(W||1<Q&&"string"==typeof ia&&!aa.checkClone&&ed.test(ia))return f.each(function(ya){var Aa=f.eq(ya);W&&(m[0]=
ia.call(this,ya,Aa.html()));e(Aa,m,r,v)});if(Q&&(G=(z=ja(m,f[0].ownerDocument,!1,f,v)).firstChild,1===z.childNodes.length&&(z=G),G||v)){for(H=(G=u.map(sa(z,"script"),J)).length;P<Q;P++){var ta=z;P!==Z&&(ta=u.clone(ta,!0,!0),H&&u.merge(G,sa(ta,"script")));r.call(f[P],ta,P)}if(H)for(z=G[G.length-1].ownerDocument,u.map(G,b),P=0;P<H;P++)ta=G[P],yc.test(ta.type||"")&&!Ia.access(ta,"globalEval")&&u.contains(z,ta)&&(ta.src&&"module"!==(ta.type||"").toLowerCase()?u._evalUrl&&!ta.noModule&&u._evalUrl(ta.src,
{nonce:ta.nonce||ta.getAttribute("nonce")},z):L(ta.textContent.replace(fd,""),ta,z))}return f}function g(f,m,r){for(var v=m?u.filter(m,f):f,z=0;null!=(m=v[z]);z++)r||1!==m.nodeType||u.cleanData(sa(m)),m.parentNode&&(r&&Tb(m)&&X(sa(m,"script")),m.parentNode.removeChild(m));return f}function k(f,m,r){var v,z,G,H,P=f.style;return(r=r||fc(f))&&(""!==(H=r.getPropertyValue(m)||r[m])||Tb(f)||(H=u.style(f,m)),!aa.pixelBoxStyles()&&mc.test(H)&&gd.test(m)&&(v=P.width,z=P.minWidth,G=P.maxWidth,P.minWidth=P.maxWidth=
P.width=H,H=r.width,P.width=v,P.minWidth=z,P.maxWidth=G)),void 0!==H?H+"":H}function p(f,m){return{get:function(){if(!f())return(this.get=m).apply(this,arguments);delete this.get}}}function n(f){var m;if(!(m=u.cssProps[f]||zc[f])){if(!(f in Ac)){a:{m=f;for(var r=m[0].toUpperCase()+m.slice(1),v=Bc.length;v--;)if((m=Bc[v]+r)in Ac)break a;m=void 0}f=zc[f]=m||f}m=f}return m}function w(f,m,r){return(f=Wb.exec(m))?Math.max(0,f[2]-(r||0))+(f[3]||"px"):m}function B(f,m,r,v,z,G){var H="width"===m?1:0,P=0,
Q=0;if(r===(v?"border":"content"))return 0;for(;4>H;H+=2)"margin"===r&&(Q+=u.css(f,r+Gb[H],!0,z)),v?("content"===r&&(Q-=u.css(f,"padding"+Gb[H],!0,z)),"margin"!==r&&(Q-=u.css(f,"border"+Gb[H]+"Width",!0,z))):(Q+=u.css(f,"padding"+Gb[H],!0,z),"padding"!==r?Q+=u.css(f,"border"+Gb[H]+"Width",!0,z):P+=u.css(f,"border"+Gb[H]+"Width",!0,z));return!v&&0<=G&&(Q+=Math.max(0,Math.ceil(f["offset"+m[0].toUpperCase()+m.slice(1)]-G-Q-P-.5))||0),Q}function I(f,m,r){var v=fc(f),z=(!aa.boxSizingReliable()||r)&&"border-box"===
u.css(f,"boxSizing",!1,v),G=z,H=k(f,m,v),P="offset"+m[0].toUpperCase()+m.slice(1);if(mc.test(H)){if(!r)return H;H="auto"}return(!aa.boxSizingReliable()&&z||!aa.reliableTrDimensions()&&t(f,"tr")||"auto"===H||!parseFloat(H)&&"inline"===u.css(f,"display",!1,v))&&f.getClientRects().length&&(z="border-box"===u.css(f,"boxSizing",!1,v),(G=P in f)&&(H=f[P])),(H=parseFloat(H)||0)+B(f,m,r||(z?"border":"content"),G,v,H)+"px"}function E(f,m,r,v,z){return new E.prototype.init(f,m,r,v,z)}function V(){gc&&(!1===
Ja.hidden&&d.requestAnimationFrame?d.requestAnimationFrame(V):d.setTimeout(V,u.fx.interval),u.fx.tick())}function ba(){return d.setTimeout(function(){Ub=void 0}),Ub=Date.now()}function da(f,m){var r,v=0,z={height:f};for(m=m?1:0;4>v;v+=2-m)z["margin"+(r=Gb[v])]=z["padding"+r]=f;return m&&(z.opacity=z.width=f),z}function ea(f,m,r){for(var v,z=(la.tweeners[m]||[]).concat(la.tweeners["*"]),G=0,H=z.length;G<H;G++)if(v=z[G].call(r,m,f))return v}function la(f,m,r){var v,z=0,G=la.prefilters.length,H=u.Deferred().always(function(){delete P.elem}),
P=function(){if(v)return!1;var Z=Ub||ba();Z=Math.max(0,Q.startTime+Q.duration-Z);for(var ia=1-(Z/Q.duration||0),W=0,ta=Q.tweens.length;W<ta;W++)Q.tweens[W].run(ia);return H.notifyWith(f,[Q,ia,Z]),1>ia&&ta?Z:(ta||H.notifyWith(f,[Q,1,0]),H.resolveWith(f,[Q]),!1)},Q=H.promise({elem:f,props:u.extend({},m),opts:u.extend(!0,{specialEasing:{},easing:u.easing._default},r),originalProperties:m,originalOptions:r,startTime:Ub||ba(),duration:r.duration,tweens:[],createTween:function(Z,ia){Z=u.Tween(f,Q.opts,
Z,ia,Q.opts.specialEasing[Z]||Q.opts.easing);return Q.tweens.push(Z),Z},stop:function(Z){var ia=0,W=Z?Q.tweens.length:0;if(v)return this;for(v=!0;ia<W;ia++)Q.tweens[ia].run(1);return Z?(H.notifyWith(f,[Q,1,0]),H.resolveWith(f,[Q,Z])):H.rejectWith(f,[Q,Z]),this}});r=Q.props;!function(Z,ia){var W,ta,ya,Aa,Qa;for(W in Z)if(ya=ia[ta=O(W)],Aa=Z[W],Array.isArray(Aa)&&(ya=Aa[1],Aa=Z[W]=Aa[0]),W!==ta&&(Z[ta]=Aa,delete Z[W]),(Qa=u.cssHooks[ta])&&"expand"in Qa)for(W in Aa=Qa.expand(Aa),delete Z[ta],Aa)W in
Z||(Z[W]=Aa[W],ia[W]=ya);else ia[ta]=ya}(r,Q.opts.specialEasing);for(;z<G;z++)if(m=la.prefilters[z].call(Q,f,r,Q.opts))return za(m.stop)&&(u._queueHooks(Q.elem,Q.opts.queue).stop=m.stop.bind(m)),m;return u.map(r,ea,Q),za(Q.opts.start)&&Q.opts.start.call(f,Q),Q.progress(Q.opts.progress).done(Q.opts.done,Q.opts.complete).fail(Q.opts.fail).always(Q.opts.always),u.fx.timer(u.extend(P,{elem:f,anim:Q,queue:Q.opts.queue})),Q}function Ha(f){return(f.match(Cb)||[]).join(" ")}function wa(f){return f.getAttribute&&
f.getAttribute("class")||""}function va(f){return Array.isArray(f)?f:"string"==typeof f&&f.match(Cb)||[]}function ua(f,m,r,v){var z;if(Array.isArray(m))u.each(m,function(G,H){r||hd.test(f)?v(f,H):ua(f+"["+("object"==typeof H&&null!=H?G:"")+"]",H,r,v)});else if(r||"object"!==S(m))v(f,m);else for(z in m)ua(f+"["+z+"]",m[z],r,v)}function Da(f){return function(m,r){"string"!=typeof m&&(r=m,m="*");var v=0,z=m.toLowerCase().match(Cb)||[];if(za(r))for(;m=z[v++];)"+"===m[0]?(m=m.slice(1)||"*",(f[m]=f[m]||
[]).unshift(r)):(f[m]=f[m]||[]).push(r)}}function Ua(f,m,r,v){function z(P){var Q;return G[P]=!0,u.each(f[P]||[],function(Z,ia){Z=ia(m,r,v);return"string"!=typeof Z||H||G[Z]?H?!(Q=Z):void 0:(m.dataTypes.unshift(Z),z(Z),!1)}),Q}var G={},H=f===nc;return z(m.dataTypes[0])||!G["*"]&&z("*")}function Ka(f,m){var r,v,z=u.ajaxSettings.flatOptions||{};for(r in m)void 0!==m[r]&&((z[r]?f:v||={})[r]=m[r]);return v&&u.extend(!0,f,v),f}var pa=[],Fa=Object.getPrototypeOf,gb=pa.slice,sb=pa.flat?function(f){return pa.flat.call(f)}:
function(f){return pa.concat.apply([],f)},mb=pa.push,Va=pa.indexOf,Ya={},jb=Ya.toString,Ma=Ya.hasOwnProperty,kb=Ma.toString,Hb=kb.call(Object),aa={},za=function(f){return"function"==typeof f&&"number"!=typeof f.nodeType&&"function"!=typeof f.item},xa=function(f){return null!=f&&f===f.window},Ja=d.document,Fb={type:!0,src:!0,nonce:!0,noModule:!0},u=function(f,m){return new u.fn.init(f,m)};u.fn=u.prototype={jquery:"3.6.0",constructor:u,length:0,toArray:function(){return gb.call(this)},get:function(f){return null==
f?gb.call(this):0>f?this[f+this.length]:this[f]},pushStack:function(f){f=u.merge(this.constructor(),f);return f.prevObject=this,f},each:function(f){return u.each(this,f)},map:function(f){return this.pushStack(u.map(this,function(m,r){return f.call(m,r,m)}))},slice:function(){return this.pushStack(gb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(u.grep(this,function(f,m){return(m+1)%2}))},odd:function(){return this.pushStack(u.grep(this,
function(f,m){return m%2}))},eq:function(f){var m=this.length;f=+f+(0>f?m:0);return this.pushStack(0<=f&&f<m?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:mb,sort:pa.sort,splice:pa.splice};u.extend=u.fn.extend=function(){var f,m,r,v,z,G=arguments[0]||{},H=1,P=arguments.length,Q=!1;"boolean"==typeof G&&(Q=G,G=arguments[H]||{},H++);"object"==typeof G||za(G)||(G={});for(H===P&&(G=this,H--);H<P;H++)if(null!=(f=arguments[H]))for(m in f){var Z=f[m];"__proto__"!==m&&G!==
Z&&(Q&&Z&&(u.isPlainObject(Z)||(v=Array.isArray(Z)))?(r=G[m],z=v&&!Array.isArray(r)?[]:v||u.isPlainObject(r)?r:{},v=!1,G[m]=u.extend(Q,z,Z)):void 0!==Z&&(G[m]=Z))}return G};u.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(f){throw Error(f);},noop:function(){},isPlainObject:function(f){var m,r;return!(!f||"[object Object]"!==jb.call(f))&&(!(m=Fa(f))||"function"==typeof(r=Ma.call(m,"constructor")&&m.constructor)&&kb.call(r)===Hb)},isEmptyObject:function(f){for(var m in f)return!1;
return!0},globalEval:function(f,m,r){L(f,{nonce:m&&m.nonce},r)},each:function(f,m){var r,v=0;if(x(f))for(r=f.length;v<r&&!1!==m.call(f[v],v,f[v]);v++);else for(v in f)if(!1===m.call(f[v],v,f[v]))break;return f},makeArray:function(f,m){m=m||[];return null!=f&&(x(Object(f))?u.merge(m,"string"==typeof f?[f]:f):mb.call(m,f)),m},inArray:function(f,m,r){return null==m?-1:Va.call(m,f,r)},merge:function(f,m){for(var r=+m.length,v=0,z=f.length;v<r;v++)f[z++]=m[v];return f.length=z,f},grep:function(f,m,r){var v=
[],z=0,G=f.length;for(r=!r;z<G;z++)!m(f[z],z)!==r&&v.push(f[z]);return v},map:function(f,m,r){var v,z,G=0,H=[];if(x(f))for(v=f.length;G<v;G++)null!=(z=m(f[G],G,r))&&H.push(z);else for(G in f)null!=(z=m(f[G],G,r))&&H.push(z);return sb(H)},guid:1,support:aa});"function"==typeof Symbol&&(u.fn[Symbol.iterator]=pa[Symbol.iterator]);u.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(f,m){Ya["[object "+m+"]"]=m.toLowerCase()});var xb=function(f){function m(F,
N,U,T){var ca,oa,na,Ea,qa=N&&N.ownerDocument;var Ga=N?N.nodeType:9;if(U=U||[],"string"!=typeof F||!F||1!==Ga&&9!==Ga&&11!==Ga)return U;if(!T&&(tb(N),N=N||Oa,cb)){if(11!==Ga&&(Ea=id.exec(F)))if(ca=Ea[1])if(9===Ga){if(!(oa=N.getElementById(ca)))return U;if(oa.id===ca)return U.push(oa),U}else{if(qa&&(oa=qa.getElementById(ca))&&Xa(N,oa)&&oa.id===ca)return U.push(oa),U}else{if(Ea[2])return Lb.apply(U,N.getElementsByTagName(F)),U;if((ca=Ea[3])&&Ba.getElementsByClassName&&N.getElementsByClassName)return Lb.apply(U,
N.getElementsByClassName(ca)),U}if(!(!Ba.qsa||hc[F+" "]||bb&&bb.test(F)||1===Ga&&"object"===N.nodeName.toLowerCase())){if(ca=F,qa=N,1===Ga&&(jd.test(F)||Cc.test(F))){(qa=oc.test(F)&&W(N.parentNode)||N)===N&&Ba.scope||((na=N.getAttribute("id"))?na=na.replace(Dc,Ec):N.setAttribute("id",na=Pa));for(Ga=(ca=Mb(F)).length;Ga--;)ca[Ga]=(na?"#"+na:":scope")+" "+ya(ca[Ga]);ca=ca.join(",")}try{return Lb.apply(U,qa.querySelectorAll(ca)),U}catch(Ra){hc(F,!0)}finally{na===Pa&&N.removeAttribute("id")}}}return zb(F.replace(ic,
"$1"),N,U,T)}function r(){var F=[];return function ca(U,T){return F.push(U+" ")>La.cacheLength&&delete ca[F.shift()],ca[U+" "]=T}}function v(F){return F[Pa]=!0,F}function z(F){var N=Oa.createElement("fieldset");try{return!!F(N)}catch(U){return!1}finally{N.parentNode&&N.parentNode.removeChild(N)}}function G(F,N){F=F.split("|");for(var U=F.length;U--;)La.attrHandle[F[U]]=N}function H(F,N){var U=N&&F,T=U&&1===F.nodeType&&1===N.nodeType&&F.sourceIndex-N.sourceIndex;if(T)return T;if(U)for(;U=U.nextSibling;)if(U===
N)return-1;return F?1:-1}function P(F){return function(N){return"input"===N.nodeName.toLowerCase()&&N.type===F}}function Q(F){return function(N){var U=N.nodeName.toLowerCase();return("input"===U||"button"===U)&&N.type===F}}function Z(F){return function(N){return"form"in N?N.parentNode&&!1===N.disabled?"label"in N?"label"in N.parentNode?N.parentNode.disabled===F:N.disabled===F:N.isDisabled===F||N.isDisabled!==!F&&kd(N)===F:N.disabled===F:"label"in N&&N.disabled===F}}function ia(F){return v(function(N){return N=
+N,v(function(U,T){for(var ca,oa=F([],U.length,N),na=oa.length;na--;)U[ca=oa[na]]&&(U[ca]=!(T[ca]=U[ca]))})})}function W(F){return F&&"undefined"!=typeof F.getElementsByTagName&&F}function ta(){}function ya(F){for(var N=0,U=F.length,T="";N<U;N++)T+=F[N].value;return T}function Aa(F,N,U){var T=N.dir,ca=N.next,oa=ca||T,na=U&&"parentNode"===oa,Ea=Db++;return N.first?function(qa,Ga,Ra){for(;qa=qa[T];)if(1===qa.nodeType||na)return F(qa,Ga,Ra);return!1}:function(qa,Ga,Ra){var eb,db,Na,Ta=[Za,Ea];if(Ra)for(;qa=
qa[T];){if((1===qa.nodeType||na)&&F(qa,Ga,Ra))return!0}else for(;qa=qa[T];)if(1===qa.nodeType||na)if(db=(Na=qa[Pa]||(qa[Pa]={}))[qa.uniqueID]||(Na[qa.uniqueID]={}),ca&&ca===qa.nodeName.toLowerCase())qa=qa[T]||qa;else{if((eb=db[oa])&&eb[0]===Za&&eb[1]===Ea)return Ta[2]=eb[2];if((db[oa]=Ta)[2]=F(qa,Ga,Ra))return!0}return!1}}function Qa(F){return 1<F.length?function(N,U,T){for(var ca=F.length;ca--;)if(!F[ca](N,U,T))return!1;return!0}:F[0]}function $a(F,N,U,T,ca){for(var oa,na=[],Ea=0,qa=F.length,Ga=
null!=N;Ea<qa;Ea++)(oa=F[Ea])&&(U&&!U(oa,T,ca)||(na.push(oa),Ga&&N.push(Ea)));return na}function Ab(F,N,U,T,ca,oa){return T&&!T[Pa]&&(T=Ab(T)),ca&&!ca[Pa]&&(ca=Ab(ca,oa)),v(function(na,Ea,qa,Ga){var Ra,eb=[],db=[],Na=Ea.length,Ta;if(!(Ta=na)){Ta=N||"*";for(var Wa=qa.nodeType?[qa]:qa,Bb=[],pb=0,lb=Wa.length;pb<lb;pb++)m(Ta,Wa[pb],Bb);Ta=Bb}Ta=!F||!na&&N?Ta:$a(Ta,eb,F,qa,Ga);Wa=U?ca||(na?F:Na||T)?[]:Ea:Ta;if(U&&U(Ta,Wa,qa,Ga),T){var fb=$a(Wa,db);T(fb,[],qa,Ga);for(qa=fb.length;qa--;)(Ra=fb[qa])&&(Wa[db[qa]]=
!(Ta[db[qa]]=Ra))}if(na){if(ca||F){if(ca){fb=[];for(qa=Wa.length;qa--;)(Ra=Wa[qa])&&fb.push(Ta[qa]=Ra);ca(null,Wa=[],fb,Ga)}for(qa=Wa.length;qa--;)(Ra=Wa[qa])&&-1<(fb=ca?Pb(na,Ra):eb[qa])&&(na[fb]=!(Ea[fb]=Ra))}}else Wa=$a(Wa===Ea?Wa.splice(Na,Wa.length):Wa),ca?ca(null,Ea,Wa,Ga):Lb.apply(Ea,Wa)})}function nb(F){var N,U,T=F.length,ca=La.relative[F[0].type];var oa=ca||La.relative[" "];for(var na=ca?1:0,Ea=Aa(function(Ra){return Ra===N},oa,!0),qa=Aa(function(Ra){return-1<Pb(N,Ra)},oa,!0),Ga=[function(Ra,
eb,db){Ra=!ca&&(db||eb!==Nb)||((N=eb).nodeType?Ea(Ra,eb,db):qa(Ra,eb,db));return N=null,Ra}];na<T;na++)if(oa=La.relative[F[na].type])Ga=[Aa(Qa(Ga),oa)];else{if((oa=La.filter[F[na].type].apply(null,F[na].matches))[Pa]){for(U=++na;U<T&&!La.relative[F[U].type];U++);return Ab(1<na&&Qa(Ga),1<na&&ya(F.slice(0,na-1).concat({value:" "===F[na-2].type?"*":""})).replace(ic,"$1"),oa,na<U&&nb(F.slice(na,U)),U<T&&nb(F=F.slice(U)),U<T&&ya(F))}Ga.push(oa)}return Qa(Ga)}var ub,Ba,La,Sa,ib,Mb,Xb,zb,Nb,vb,wb,tb,Oa,
ab,cb,bb,rb,ob,Xa,Pa="sizzle"+1*new Date,hb=f.document,Za=0,Db=0,Qb=r(),jc=r(),Fc=r(),hc=r(),pc=function(F,N){return F===N&&(wb=!0),0},ld={}.hasOwnProperty,Rb=[],md=Rb.pop,nd=Rb.push,Lb=Rb.push,Gc=Rb.slice,Pb=function(F,N){for(var U=0,T=F.length;U<T;U++)if(F[U]===N)return U;return-1},qc=":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)",
od=RegExp("[\\x20\\t\\r\\n\\f]+","g"),ic=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),pd=RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),Cc=RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),jd=RegExp("[\\x20\\t\\r\\n\\f]|>"),qd=new RegExp(qc),rd=RegExp("^(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+$"),kc={ID:RegExp("^#((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),
CLASS:RegExp("^\\.((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),TAG:RegExp("^((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+|[*])"),ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\]"),
PSEUDO:new RegExp("^"+qc),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},sd=/HTML$/i,td=/^(?:input|select|textarea|button)$/i,ud=/^h\d$/i,Yb=/^[^{]+\{\s*\[native \w/,id=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oc=/[+~]/,Ib=RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),Jb=function(F,N){F="0x"+F.slice(1)-65536;return N||(0>F?String.fromCharCode(F+65536):String.fromCharCode(F>>10|55296,1023&F|56320))},Dc=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ec=function(F,N){return N?"\x00"===F?"\ufffd":F.slice(0,-1)+"\\"+F.charCodeAt(F.length-
1).toString(16)+" ":"\\"+F},Hc=function(){tb()},kd=Aa(function(F){return!0===F.disabled&&"fieldset"===F.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Lb.apply(Rb=Gc.call(hb.childNodes),hb.childNodes),Rb[hb.childNodes.length].nodeType}catch(F){Lb={apply:Rb.length?function(N,U){nd.apply(N,Gc.call(U))}:function(N,U){for(var T=N.length,ca=0;N[T++]=U[ca++];);N.length=T-1}}}for(ub in Ba=m.support={},ib=m.isXML=function(F){var N=F&&(F.ownerDocument||F).documentElement;return!sd.test(F&&F.namespaceURI||
N&&N.nodeName||"HTML")},tb=m.setDocument=function(F){var N,U;F=F?F.ownerDocument||F:hb;return F!=Oa&&9===F.nodeType&&F.documentElement&&(ab=(Oa=F).documentElement,cb=!ib(Oa),hb!=Oa&&(U=Oa.defaultView)&&U.top!==U&&(U.addEventListener?U.addEventListener("unload",Hc,!1):U.attachEvent&&U.attachEvent("onunload",Hc)),Ba.scope=z(function(T){return ab.appendChild(T).appendChild(Oa.createElement("div")),"undefined"!=typeof T.querySelectorAll&&!T.querySelectorAll(":scope fieldset div").length}),Ba.attributes=
z(function(T){return T.className="i",!T.getAttribute("className")}),Ba.getElementsByTagName=z(function(T){return T.appendChild(Oa.createComment("")),!T.getElementsByTagName("*").length}),Ba.getElementsByClassName=Yb.test(Oa.getElementsByClassName),Ba.getById=z(function(T){return ab.appendChild(T).id=Pa,!Oa.getElementsByName||!Oa.getElementsByName(Pa).length}),Ba.getById?(La.filter.ID=function(T){var ca=T.replace(Ib,Jb);return function(oa){return oa.getAttribute("id")===ca}},La.find.ID=function(T,
ca){if("undefined"!=typeof ca.getElementById&&cb)return(T=ca.getElementById(T))?[T]:[]}):(La.filter.ID=function(T){var ca=T.replace(Ib,Jb);return function(oa){return(oa="undefined"!=typeof oa.getAttributeNode&&oa.getAttributeNode("id"))&&oa.value===ca}},La.find.ID=function(T,ca){if("undefined"!=typeof ca.getElementById&&cb){var oa,na=ca.getElementById(T);if(na){if((oa=na.getAttributeNode("id"))&&oa.value===T)return[na];var Ea=ca.getElementsByName(T);for(ca=0;na=Ea[ca++];)if((oa=na.getAttributeNode("id"))&&
oa.value===T)return[na]}return[]}}),La.find.TAG=Ba.getElementsByTagName?function(T,ca){return"undefined"!=typeof ca.getElementsByTagName?ca.getElementsByTagName(T):Ba.qsa?ca.querySelectorAll(T):void 0}:function(T,ca){var oa=[],na=0;ca=ca.getElementsByTagName(T);if("*"===T){for(;T=ca[na++];)1===T.nodeType&&oa.push(T);return oa}return ca},La.find.CLASS=Ba.getElementsByClassName&&function(T,ca){if("undefined"!=typeof ca.getElementsByClassName&&cb)return ca.getElementsByClassName(T)},rb=[],bb=[],(Ba.qsa=
Yb.test(Oa.querySelectorAll))&&(z(function(T){var ca;ab.appendChild(T).innerHTML="<a id='"+Pa+"'></a><select id='"+Pa+"-\r\\' msallowcapture=''><option selected=''></option></select>";T.querySelectorAll("[msallowcapture^='']").length&&bb.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");T.querySelectorAll("[selected]").length||bb.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");T.querySelectorAll("[id~="+
Pa+"-]").length||bb.push("~=");(ca=Oa.createElement("input")).setAttribute("name","");T.appendChild(ca);T.querySelectorAll("[name='']").length||bb.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");T.querySelectorAll(":checked").length||bb.push(":checked");T.querySelectorAll("a#"+Pa+"+*").length||bb.push(".#.+[+~]");T.querySelectorAll("\\\f");bb.push("[\\r\\n\\f]")}),z(function(T){T.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
var ca=Oa.createElement("input");ca.setAttribute("type","hidden");T.appendChild(ca).setAttribute("name","D");T.querySelectorAll("[name=d]").length&&bb.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==T.querySelectorAll(":enabled").length&&bb.push(":enabled",":disabled");ab.appendChild(T).disabled=!0;2!==T.querySelectorAll(":disabled").length&&bb.push(":enabled",":disabled");T.querySelectorAll("*,:x");bb.push(",.*:")})),(Ba.matchesSelector=Yb.test(ob=ab.matches||ab.webkitMatchesSelector||ab.mozMatchesSelector||
ab.oMatchesSelector||ab.msMatchesSelector))&&z(function(T){Ba.disconnectedMatch=ob.call(T,"*");ob.call(T,"[s!='']:x");rb.push("!=",qc)}),bb=bb.length&&new RegExp(bb.join("|")),rb=rb.length&&new RegExp(rb.join("|")),N=Yb.test(ab.compareDocumentPosition),Xa=N||Yb.test(ab.contains)?function(T,ca){var oa=9===T.nodeType?T.documentElement:T;ca=ca&&ca.parentNode;return T===ca||!(!ca||1!==ca.nodeType||!(oa.contains?oa.contains(ca):T.compareDocumentPosition&&16&T.compareDocumentPosition(ca)))}:function(T,
ca){if(ca)for(;ca=ca.parentNode;)if(ca===T)return!0;return!1},pc=N?function(T,ca){if(T===ca)return wb=!0,0;var oa=!T.compareDocumentPosition-!ca.compareDocumentPosition;return oa||(1&(oa=(T.ownerDocument||T)==(ca.ownerDocument||ca)?T.compareDocumentPosition(ca):1)||!Ba.sortDetached&&ca.compareDocumentPosition(T)===oa?T==Oa||T.ownerDocument==hb&&Xa(hb,T)?-1:ca==Oa||ca.ownerDocument==hb&&Xa(hb,ca)?1:vb?Pb(vb,T)-Pb(vb,ca):0:4&oa?-1:1)}:function(T,ca){if(T===ca)return wb=!0,0;var oa=0,na=T.parentNode,
Ea=ca.parentNode,qa=[T],Ga=[ca];if(!na||!Ea)return T==Oa?-1:ca==Oa?1:na?-1:Ea?1:vb?Pb(vb,T)-Pb(vb,ca):0;if(na===Ea)return H(T,ca);for(;T=T.parentNode;)qa.unshift(T);for(T=ca;T=T.parentNode;)Ga.unshift(T);for(;qa[oa]===Ga[oa];)oa++;return oa?H(qa[oa],Ga[oa]):qa[oa]==hb?-1:Ga[oa]==hb?1:0}),Oa},m.matches=function(F,N){return m(F,null,null,N)},m.matchesSelector=function(F,N){if(tb(F),!(!Ba.matchesSelector||!cb||hc[N+" "]||rb&&rb.test(N)||bb&&bb.test(N)))try{var U=ob.call(F,N);if(U||Ba.disconnectedMatch||
F.document&&11!==F.document.nodeType)return U}catch(T){hc(N,!0)}return 0<m(N,Oa,null,[F]).length},m.contains=function(F,N){return(F.ownerDocument||F)!=Oa&&tb(F),Xa(F,N)},m.attr=function(F,N){(F.ownerDocument||F)!=Oa&&tb(F);var U=La.attrHandle[N.toLowerCase()];U=U&&ld.call(La.attrHandle,N.toLowerCase())?U(F,N,!cb):void 0;return void 0!==U?U:Ba.attributes||!cb?F.getAttribute(N):(U=F.getAttributeNode(N))&&U.specified?U.value:null},m.escape=function(F){return(F+"").replace(Dc,Ec)},m.error=function(F){throw Error("Syntax error, unrecognized expression: "+
F);},m.uniqueSort=function(F){var N,U=[],T=0,ca=0;if(wb=!Ba.detectDuplicates,vb=!Ba.sortStable&&F.slice(0),F.sort(pc),wb){for(;N=F[ca++];)N===F[ca]&&(T=U.push(ca));for(;T--;)F.splice(U[T],1)}return vb=null,F},Sa=m.getText=function(F){var N,U="",T=0;if(N=F.nodeType)if(1===N||9===N||11===N){if("string"==typeof F.textContent)return F.textContent;for(F=F.firstChild;F;F=F.nextSibling)U+=Sa(F)}else{if(3===N||4===N)return F.nodeValue}else for(;N=F[T++];)U+=Sa(N);return U},(La=m.selectors={cacheLength:50,
createPseudo:v,match:kc,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(F){return F[1]=F[1].replace(Ib,Jb),F[3]=(F[3]||F[4]||F[5]||"").replace(Ib,Jb),"~="===F[2]&&(F[3]=" "+F[3]+" "),F.slice(0,4)},CHILD:function(F){return F[1]=F[1].toLowerCase(),"nth"===F[1].slice(0,3)?(F[3]||m.error(F[0]),F[4]=+(F[4]?F[5]+(F[6]||1):2*("even"===F[3]||"odd"===F[3])),F[5]=+(F[7]+F[8]||"odd"===
F[3])):F[3]&&m.error(F[0]),F},PSEUDO:function(F){var N,U=!F[6]&&F[2];return kc.CHILD.test(F[0])?null:(F[3]?F[2]=F[4]||F[5]||"":U&&qd.test(U)&&(N=Mb(U,!0))&&(N=U.indexOf(")",U.length-N)-U.length)&&(F[0]=F[0].slice(0,N),F[2]=U.slice(0,N)),F.slice(0,3))}},filter:{TAG:function(F){var N=F.replace(Ib,Jb).toLowerCase();return"*"===F?function(){return!0}:function(U){return U.nodeName&&U.nodeName.toLowerCase()===N}},CLASS:function(F){var N=Qb[F+" "];return N||(N=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+F+"([\\x20\\t\\r\\n\\f]|$)"),
Qb(F,function(U){return N.test("string"==typeof U.className&&U.className||"undefined"!=typeof U.getAttribute&&U.getAttribute("class")||"")}))},ATTR:function(F,N,U){return function(T){T=m.attr(T,F);return null==T?"!="===N:!N||(T+="","="===N?T===U:"!="===N?T!==U:"^="===N?U&&0===T.indexOf(U):"*="===N?U&&-1<T.indexOf(U):"$="===N?U&&T.slice(-U.length)===U:"~="===N?-1<(" "+T.replace(od," ")+" ").indexOf(U):"|="===N&&(T===U||T.slice(0,U.length+1)===U+"-"))}},CHILD:function(F,N,U,T,ca){var oa="nth"!==F.slice(0,
3),na="last"!==F.slice(-4),Ea="of-type"===N;return 1===T&&0===ca?function(qa){return!!qa.parentNode}:function(qa,Ga,Ra){var eb,db,Na,Ta;Ga=oa!==na?"nextSibling":"previousSibling";var Wa=qa.parentNode,Bb=Ea&&qa.nodeName.toLowerCase(),pb=!Ra&&!Ea,lb=!1;if(Wa){if(oa){for(;Ga;){for(Na=qa;Na=Na[Ga];)if(Ea?Na.nodeName.toLowerCase()===Bb:1===Na.nodeType)return!1;var fb=Ga="only"===F&&!fb&&"nextSibling"}return!0}if(fb=[na?Wa.firstChild:Wa.lastChild],na&&pb)for(lb=(Ta=(eb=(Ra=(db=(Na=Wa)[Pa]||(Na[Pa]={}))[Na.uniqueID]||
(db[Na.uniqueID]={}))[F]||[])[0]===Za&&eb[1])&&eb[2],Na=Ta&&Wa.childNodes[Ta];Na=++Ta&&Na&&Na[Ga]||(lb=Ta=0)||fb.pop();){if(1===Na.nodeType&&++lb&&Na===qa){Ra[F]=[Za,Ta,lb];break}}else if(pb&&(lb=Ta=(eb=((db=(Na=qa)[Pa]||(Na[Pa]={}))[Na.uniqueID]||(db[Na.uniqueID]={}))[F]||[])[0]===Za&&eb[1]),!1===lb)for(;(Na=++Ta&&Na&&Na[Ga]||(lb=Ta=0)||fb.pop())&&((Ea?Na.nodeName.toLowerCase()!==Bb:1!==Na.nodeType)||!++lb||(pb&&((Ra=(db=Na[Pa]||(Na[Pa]={}))[Na.uniqueID]||(db[Na.uniqueID]={}))[F]=[Za,lb]),Na!==qa)););
return(lb-=ca)===T||0==lb%T&&0<=lb/T}}},PSEUDO:function(F,N){var U,T=La.pseudos[F]||La.setFilters[F.toLowerCase()]||m.error("unsupported pseudo: "+F);return T[Pa]?T(N):1<T.length?(U=[F,F,"",N],La.setFilters.hasOwnProperty(F.toLowerCase())?v(function(ca,oa){for(var na,Ea=T(ca,N),qa=Ea.length;qa--;)ca[na=Pb(ca,Ea[qa])]=!(oa[na]=Ea[qa])}):function(ca){return T(ca,0,U)}):T}},pseudos:{not:v(function(F){var N=[],U=[],T=Xb(F.replace(ic,"$1"));return T[Pa]?v(function(ca,oa,na,Ea){var qa;na=T(ca,null,Ea,[]);
for(Ea=ca.length;Ea--;)(qa=na[Ea])&&(ca[Ea]=!(oa[Ea]=qa))}):function(ca,oa,na){return N[0]=ca,T(N,null,na,U),N[0]=null,!U.pop()}}),has:v(function(F){return function(N){return 0<m(F,N).length}}),contains:v(function(F){return F=F.replace(Ib,Jb),function(N){return-1<(N.textContent||Sa(N)).indexOf(F)}}),lang:v(function(F){return rd.test(F||"")||m.error("unsupported lang: "+F),F=F.replace(Ib,Jb).toLowerCase(),function(N){var U;do if(U=cb?N.lang:N.getAttribute("xml:lang")||N.getAttribute("lang"))return(U=
U.toLowerCase())===F||0===U.indexOf(F+"-");while((N=N.parentNode)&&1===N.nodeType);return!1}}),target:function(F){var N=f.location&&f.location.hash;return N&&N.slice(1)===F.id},root:function(F){return F===ab},focus:function(F){return F===Oa.activeElement&&(!Oa.hasFocus||Oa.hasFocus())&&!!(F.type||F.href||~F.tabIndex)},enabled:Z(!1),disabled:Z(!0),checked:function(F){var N=F.nodeName.toLowerCase();return"input"===N&&!!F.checked||"option"===N&&!!F.selected},selected:function(F){return F.parentNode&&
F.parentNode.selectedIndex,!0===F.selected},empty:function(F){for(F=F.firstChild;F;F=F.nextSibling)if(6>F.nodeType)return!1;return!0},parent:function(F){return!La.pseudos.empty(F)},header:function(F){return ud.test(F.nodeName)},input:function(F){return td.test(F.nodeName)},button:function(F){var N=F.nodeName.toLowerCase();return"input"===N&&"button"===F.type||"button"===N},text:function(F){var N;return"input"===F.nodeName.toLowerCase()&&"text"===F.type&&(null==(N=F.getAttribute("type"))||"text"===
N.toLowerCase())},first:ia(function(){return[0]}),last:ia(function(F,N){return[N-1]}),eq:ia(function(F,N,U){return[0>U?U+N:U]}),even:ia(function(F,N){for(var U=0;U<N;U+=2)F.push(U);return F}),odd:ia(function(F,N){for(var U=1;U<N;U+=2)F.push(U);return F}),lt:ia(function(F,N,U){for(N=0>U?U+N:N<U?N:U;0<=--N;)F.push(N);return F}),gt:ia(function(F,N,U){for(U=0>U?U+N:U;++U<N;)F.push(U);return F})}}).pseudos.nth=La.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})La.pseudos[ub]=P(ub);for(ub in{submit:!0,
reset:!0})La.pseudos[ub]=Q(ub);return ta.prototype=La.filters=La.pseudos,La.setFilters=new ta,Mb=m.tokenize=function(F,N){var U,T,ca,oa,na,Ea;if(na=jc[F+" "])return N?0:na.slice(0);na=F;var qa=[];for(Ea=La.preFilter;na;){for(oa in U&&!(T=pd.exec(na))||(T&&(na=na.slice(T[0].length)||na),qa.push(ca=[])),U=!1,(T=Cc.exec(na))&&(U=T.shift(),ca.push({value:U,type:T[0].replace(ic," ")}),na=na.slice(U.length)),La.filter)!(T=kc[oa].exec(na))||Ea[oa]&&!(T=Ea[oa](T))||(U=T.shift(),ca.push({value:U,type:oa,matches:T}),
na=na.slice(U.length));if(!U)break}return N?na.length:na?m.error(F):jc(F,qa).slice(0)},Xb=m.compile=function(F,N){var U,T,ca,oa,na=[],Ea=[],qa=Fc[F+" "];if(!qa){N||=Mb(F);for(U=N.length;U--;)(qa=nb(N[U]))[Pa]?na.push(qa):Ea.push(qa);(qa=Fc(F,(T=0<na.length,ca=0<Ea.length,oa=function(Ga,Ra,eb,db,Na){var Ta,Wa,Bb=0,pb="0",lb=Ga&&[],fb=[],Ic=Nb,Jc=Ga||ca&&La.find.TAG("*",Na),Kc=Za+=null==Ic?1:Math.random()||.1,vd=Jc.length;for(Na&&(Nb=Ra==Oa||Ra||Na);pb!==vd&&null!=(Ta=Jc[pb]);pb++){if(ca&&Ta){var rc=
0;for(Ra||Ta.ownerDocument==Oa||(tb(Ta),eb=!cb);Wa=Ea[rc++];)if(Wa(Ta,Ra||Oa,eb)){db.push(Ta);break}Na&&(Za=Kc)}T&&((Ta=!Wa&&Ta)&&Bb--,Ga&&lb.push(Ta))}if(Bb+=pb,T&&pb!==Bb){for(rc=0;Wa=na[rc++];)Wa(lb,fb,Ra,eb);if(Ga){if(0<Bb)for(;pb--;)lb[pb]||fb[pb]||(fb[pb]=md.call(db));fb=$a(fb)}Lb.apply(db,fb);Na&&!Ga&&0<fb.length&&1<Bb+na.length&&m.uniqueSort(db)}return Na&&(Za=Kc,Nb=Ic),lb},T?v(oa):oa))).selector=F}return qa},zb=m.select=function(F,N,U,T){var ca,oa,na,Ea,qa,Ga="function"==typeof F&&F,Ra=!T&&
Mb(F=Ga.selector||F);if(U=U||[],1===Ra.length){if(2<(oa=Ra[0]=Ra[0].slice(0)).length&&"ID"===(na=oa[0]).type&&9===N.nodeType&&cb&&La.relative[oa[1].type]){if(!(N=(La.find.ID(na.matches[0].replace(Ib,Jb),N)||[])[0]))return U;Ga&&(N=N.parentNode);F=F.slice(oa.shift().value.length)}for(ca=kc.needsContext.test(F)?0:oa.length;ca--&&(na=oa[ca],!La.relative[Ea=na.type]);)if((qa=La.find[Ea])&&(T=qa(na.matches[0].replace(Ib,Jb),oc.test(oa[0].type)&&W(N.parentNode)||N))){if(oa.splice(ca,1),!(F=T.length&&ya(oa)))return Lb.apply(U,
T),U;break}}return(Ga||Xb(F,Ra))(T,N,!cb,U,!N||oc.test(F)&&W(N.parentNode)||N),U},Ba.sortStable=Pa.split("").sort(pc).join("")===Pa,Ba.detectDuplicates=!!wb,tb(),Ba.sortDetached=z(function(F){return 1&F.compareDocumentPosition(Oa.createElement("fieldset"))}),z(function(F){return F.innerHTML="<a href='#'></a>","#"===F.firstChild.getAttribute("href")})||G("type|href|height|width",function(F,N,U){if(!U)return F.getAttribute(N,"type"===N.toLowerCase()?1:2)}),Ba.attributes&&z(function(F){return F.innerHTML=
"<input/>",F.firstChild.setAttribute("value",""),""===F.firstChild.getAttribute("value")})||G("value",function(F,N,U){if(!U&&"input"===F.nodeName.toLowerCase())return F.defaultValue}),z(function(F){return null==F.getAttribute("disabled")})||G("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(F,N,U){var T;if(!U)return!0===F[N]?N.toLowerCase():(T=F.getAttributeNode(N))&&T.specified?T.value:null}),m}(d);u.find=xb;u.expr=
xb.selectors;u.expr[":"]=u.expr.pseudos;u.uniqueSort=u.unique=xb.uniqueSort;u.text=xb.getText;u.isXMLDoc=xb.isXML;u.contains=xb.contains;u.escapeSelector=xb.escape;var Eb=function(f,m,r){for(var v=[],z=void 0!==r;(f=f[m])&&9!==f.nodeType;)if(1===f.nodeType){if(z&&u(f).is(r))break;v.push(f)}return v},Ob=function(f,m){for(var r=[];f;f=f.nextSibling)1===f.nodeType&&f!==m&&r.push(f);return r},Lc=u.expr.match.needsContext,Mc=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;u.filter=function(f,
m,r){var v=m[0];return r&&(f=":not("+f+")"),1===m.length&&1===v.nodeType?u.find.matchesSelector(v,f)?[v]:[]:u.find.matches(f,u.grep(m,function(z){return 1===z.nodeType}))};u.fn.extend({find:function(f){var m,r=this.length,v=this;if("string"!=typeof f)return this.pushStack(u(f).filter(function(){for(m=0;m<r;m++)if(u.contains(v[m],this))return!0}));var z=this.pushStack([]);for(m=0;m<r;m++)u.find(f,v[m],z);return 1<r?u.uniqueSort(z):z},filter:function(f){return this.pushStack(h(this,f||[],!1))},not:function(f){return this.pushStack(h(this,
f||[],!0))},is:function(f){return!!h(this,"string"==typeof f&&Lc.test(f)?u(f):f||[],!1).length}});var wd=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(u.fn.init=function(f,m,r){var v,z;if(!f)return this;if(r=r||xd,"string"==typeof f){if(!(v="<"===f[0]&&">"===f[f.length-1]&&3<=f.length?[null,f,null]:wd.exec(f))||!v[1]&&m)return!m||m.jquery?(m||r).find(f):this.constructor(m).find(f);if(v[1]){if(m=m instanceof u?m[0]:m,u.merge(this,u.parseHTML(v[1],m&&m.nodeType?m.ownerDocument||m:Ja,!0)),Mc.test(v[1])&&u.isPlainObject(m))for(v in m)za(this[v])?
this[v](m[v]):this.attr(v,m[v]);return this}return(z=Ja.getElementById(v[2]))&&(this[0]=z,this.length=1),this}return f.nodeType?(this[0]=f,this.length=1,this):za(f)?void 0!==r.ready?r.ready(f):f(u):u.makeArray(f,this)}).prototype=u.fn;var xd=u(Ja);var yd=/^(?:parents|prev(?:Until|All))/,zd={children:!0,contents:!0,next:!0,prev:!0};u.fn.extend({has:function(f){var m=u(f,this),r=m.length;return this.filter(function(){for(var v=0;v<r;v++)if(u.contains(this,m[v]))return!0})},closest:function(f,m){var r,
v=0,z=this.length,G=[],H="string"!=typeof f&&u(f);if(!Lc.test(f))for(;v<z;v++)for(r=this[v];r&&r!==m;r=r.parentNode)if(11>r.nodeType&&(H?-1<H.index(r):1===r.nodeType&&u.find.matchesSelector(r,f))){G.push(r);break}return this.pushStack(1<G.length?u.uniqueSort(G):G)},index:function(f){return f?"string"==typeof f?Va.call(u(f),this[0]):Va.call(this,f.jquery?f[0]:f):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(f,m){return this.pushStack(u.uniqueSort(u.merge(this.get(),u(f,
m))))},addBack:function(f){return this.add(null==f?this.prevObject:this.prevObject.filter(f))}});u.each({parent:function(f){return(f=f.parentNode)&&11!==f.nodeType?f:null},parents:function(f){return Eb(f,"parentNode")},parentsUntil:function(f,m,r){return Eb(f,"parentNode",r)},next:function(f){return l(f,"nextSibling")},prev:function(f){return l(f,"previousSibling")},nextAll:function(f){return Eb(f,"nextSibling")},prevAll:function(f){return Eb(f,"previousSibling")},nextUntil:function(f,m,r){return Eb(f,
"nextSibling",r)},prevUntil:function(f,m,r){return Eb(f,"previousSibling",r)},siblings:function(f){return Ob((f.parentNode||{}).firstChild,f)},children:function(f){return Ob(f.firstChild)},contents:function(f){return null!=f.contentDocument&&Fa(f.contentDocument)?f.contentDocument:(t(f,"template")&&(f=f.content||f),u.merge([],f.childNodes))}},function(f,m){u.fn[f]=function(r,v){var z=u.map(this,m,r);return"Until"!==f.slice(-5)&&(v=r),v&&"string"==typeof v&&(z=u.filter(v,z)),1<this.length&&(zd[f]||
u.uniqueSort(z),yd.test(f)&&z.reverse()),this.pushStack(z)}});var Cb=/[^\x20\t\r\n\f]+/g;u.Callbacks=function(f){var m,r;f="string"==typeof f?(m=f,r={},u.each(m.match(Cb)||[],function(ta,ya){r[ya]=!0}),r):u.extend({},f);var v,z,G,H,P=[],Q=[],Z=-1,ia=function(){H=H||f.once;for(G=v=!0;Q.length;Z=-1)for(z=Q.shift();++Z<P.length;)!1===P[Z].apply(z[0],z[1])&&f.stopOnFalse&&(Z=P.length,z=!1);f.memory||(z=!1);v=!1;H&&(P=z?[]:"")},W={add:function(){return P&&(z&&!v&&(Z=P.length-1,Q.push(z)),function Aa(ya){u.each(ya,
function(Qa,$a){za($a)?f.unique&&W.has($a)||P.push($a):$a&&$a.length&&"string"!==S($a)&&Aa($a)})}(arguments),z&&!v&&ia()),this},remove:function(){return u.each(arguments,function(ta,ya){for(var Aa;-1<(Aa=u.inArray(ya,P,Aa));)P.splice(Aa,1),Aa<=Z&&Z--}),this},has:function(ta){return ta?-1<u.inArray(ta,P):0<P.length},empty:function(){return P&&=[],this},disable:function(){return H=Q=[],P=z="",this},disabled:function(){return!P},lock:function(){return H=Q=[],z||v||(P=z=""),this},locked:function(){return!!H},
fireWith:function(ta,ya){return H||(ya=[ta,(ya=ya||[]).slice?ya.slice():ya],Q.push(ya),v||ia()),this},fire:function(){return W.fireWith(this,arguments),this},fired:function(){return!!G}};return W};u.extend({Deferred:function(f){var m=[["notify","progress",u.Callbacks("memory"),u.Callbacks("memory"),2],["resolve","done",u.Callbacks("once memory"),u.Callbacks("once memory"),0,"resolved"],["reject","fail",u.Callbacks("once memory"),u.Callbacks("once memory"),1,"rejected"]],r="pending",v={state:function(){return r},
always:function(){return z.done(arguments).fail(arguments),this},"catch":function(G){return v.then(null,G)},pipe:function(){var G=arguments;return u.Deferred(function(H){u.each(m,function(P,Q){var Z=za(G[Q[4]])&&G[Q[4]];z[Q[1]](function(){var ia=Z&&Z.apply(this,arguments);ia&&za(ia.promise)?ia.promise().progress(H.notify).done(H.resolve).fail(H.reject):H[Q[0]+"With"](this,Z?[ia]:arguments)})});G=null}).promise()},then:function(G,H,P){function Q(ia,W,ta,ya){return function(){var Aa=this,Qa=arguments,
$a=function(){var nb;if(!(ia<Z)){if((nb=ta.apply(Aa,Qa))===W.promise())throw new TypeError("Thenable self-resolution");var ub=nb&&("object"==typeof nb||"function"==typeof nb)&&nb.then;za(ub)?ya?ub.call(nb,Q(Z,W,q,ya),Q(Z,W,y,ya)):(Z++,ub.call(nb,Q(Z,W,q,ya),Q(Z,W,y,ya),Q(Z,W,q,W.notifyWith))):(ta!==q&&(Aa=void 0,Qa=[nb]),(ya||W.resolveWith)(Aa,Qa))}},Ab=ya?$a:function(){try{$a()}catch(nb){u.Deferred.exceptionHook&&u.Deferred.exceptionHook(nb,Ab.stackTrace),Z<=ia+1&&(ta!==y&&(Aa=void 0,Qa=[nb]),W.rejectWith(Aa,
Qa))}};ia?Ab():(u.Deferred.getStackHook&&(Ab.stackTrace=u.Deferred.getStackHook()),d.setTimeout(Ab))}}var Z=0;return u.Deferred(function(ia){m[0][3].add(Q(0,ia,za(P)?P:q,ia.notifyWith));m[1][3].add(Q(0,ia,za(G)?G:q));m[2][3].add(Q(0,ia,za(H)?H:y))}).promise()},promise:function(G){return null!=G?u.extend(G,v):v}},z={};return u.each(m,function(G,H){var P=H[2],Q=H[5];v[H[1]]=P.add;Q&&P.add(function(){r=Q},m[3-G][2].disable,m[3-G][3].disable,m[0][2].lock,m[0][3].lock);P.add(H[3].fire);z[H[0]]=function(){return z[H[0]+
"With"](this===z?void 0:this,arguments),this};z[H[0]+"With"]=P.fireWith}),v.promise(z),f&&f.call(z,z),z},when:function(f){var m=arguments.length,r=m,v=Array(r),z=gb.call(arguments),G=u.Deferred(),H=function(P){return function(Q){v[P]=this;z[P]=1<arguments.length?gb.call(arguments):Q;--m||G.resolveWith(v,z)}};if(1>=m&&(D(f,G.done(H(r)).resolve,G.reject,!m),"pending"===G.state()||za(z[r]&&z[r].then)))return G.then();for(;r--;)D(z[r],H(r),G.reject);return G.promise()}});var Ad=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
u.Deferred.exceptionHook=function(f,m){d.console&&d.console.warn&&f&&Ad.test(f.name)&&d.console.warn("jQuery.Deferred exception: "+f.message,f.stack,m)};u.readyException=function(f){d.setTimeout(function(){throw f;})};var sc=u.Deferred();u.fn.ready=function(f){return sc.then(f)["catch"](function(m){u.readyException(m)}),this};u.extend({isReady:!1,readyWait:1,ready:function(f){(!0===f?--u.readyWait:u.isReady)||(u.isReady=!0)!==f&&0<--u.readyWait||sc.resolveWith(Ja,[u])}});u.ready.then=sc.then;"complete"===
Ja.readyState||"loading"!==Ja.readyState&&!Ja.documentElement.doScroll?d.setTimeout(u.ready):(Ja.addEventListener("DOMContentLoaded",K),d.addEventListener("load",K));var Kb=function(f,m,r,v,z,G,H){var P=0,Q=f.length,Z=null==r;if("object"===S(r))for(P in z=!0,r)Kb(f,m,P,r[P],!0,G,H);else if(void 0!==v&&(z=!0,za(v)||(H=!0),Z&&(H?(m.call(f,v),m=null):(Z=m,m=function(ia,W,ta){return Z.call(u(ia),ta)})),m))for(;P<Q;P++)m(f[P],r,H?v:v.call(f[P],P,m(f[P],r)));return z?f:Z?m.call(f):Q?m(f[0],r):G},$c=/^-ms-/,
ad=/-([a-z])/g,Zb=function(f){return 1===f.nodeType||9===f.nodeType||!+f.nodeType};R.uid=1;R.prototype={cache:function(f){var m=f[this.expando];return m||(m={},Zb(f)&&(f.nodeType?f[this.expando]=m:Object.defineProperty(f,this.expando,{value:m,configurable:!0}))),m},set:function(f,m,r){var v;f=this.cache(f);if("string"==typeof m)f[O(m)]=r;else for(v in m)f[O(v)]=m[v];return f},get:function(f,m){return void 0===m?this.cache(f):f[this.expando]&&f[this.expando][O(m)]},access:function(f,m,r){return void 0===
m||m&&"string"==typeof m&&void 0===r?this.get(f,m):(this.set(f,m,r),void 0!==r?r:m)},remove:function(f,m){var r=f[this.expando];if(void 0!==r){if(void 0!==m){var v=(m=Array.isArray(m)?m.map(O):(m=O(m))in r?[m]:m.match(Cb)||[]).length;for(;v--;)delete r[m[v]]}(void 0===m||u.isEmptyObject(r))&&(f.nodeType?f[this.expando]=void 0:delete f[this.expando])}},hasData:function(f){f=f[this.expando];return void 0!==f&&!u.isEmptyObject(f)}};var Ia=new R,qb=new R,cd=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bd=/[A-Z]/g;
u.extend({hasData:function(f){return qb.hasData(f)||Ia.hasData(f)},data:function(f,m,r){return qb.access(f,m,r)},removeData:function(f,m){qb.remove(f,m)},_data:function(f,m,r){return Ia.access(f,m,r)},_removeData:function(f,m){Ia.remove(f,m)}});u.fn.extend({data:function(f,m){var r,v,z,G=this[0],H=G&&G.attributes;if(void 0===f){if(this.length&&(z=qb.get(G),1===G.nodeType&&!Ia.get(G,"hasDataAttrs"))){for(r=H.length;r--;)H[r]&&0===(v=H[r].name).indexOf("data-")&&(v=O(v.slice(5)),Y(G,v,z[v]));Ia.set(G,
"hasDataAttrs",!0)}return z}return"object"==typeof f?this.each(function(){qb.set(this,f)}):Kb(this,function(P){var Q;if(G&&void 0===P)return void 0!==(Q=qb.get(G,f))?Q:void 0!==(Q=Y(G,f))?Q:void 0;this.each(function(){qb.set(this,f,P)})},null,m,1<arguments.length,null,!0)},removeData:function(f){return this.each(function(){qb.remove(this,f)})}});u.extend({queue:function(f,m,r){var v;if(f)return m=(m||"fx")+"queue",v=Ia.get(f,m),r&&(!v||Array.isArray(r)?v=Ia.access(f,m,u.makeArray(r)):v.push(r)),v||
[]},dequeue:function(f,m){m=m||"fx";var r=u.queue(f,m),v=r.length,z=r.shift(),G=u._queueHooks(f,m);"inprogress"===z&&(z=r.shift(),v--);z&&("fx"===m&&r.unshift("inprogress"),delete G.stop,z.call(f,function(){u.dequeue(f,m)},G));!v&&G&&G.empty.fire()},_queueHooks:function(f,m){var r=m+"queueHooks";return Ia.get(f,r)||Ia.access(f,r,{empty:u.Callbacks("once memory").add(function(){Ia.remove(f,[m+"queue",r])})})}});u.fn.extend({queue:function(f,m){var r=2;return"string"!=typeof f&&(m=f,f="fx",r--),arguments.length<
r?u.queue(this[0],f):void 0===m?this:this.each(function(){var v=u.queue(this,f,m);u._queueHooks(this,f);"fx"===f&&"inprogress"!==v[0]&&u.dequeue(this,f)})},dequeue:function(f){return this.each(function(){u.dequeue(this,f)})},clearQueue:function(f){return this.queue(f||"fx",[])},promise:function(f,m){var r,v=1,z=u.Deferred(),G=this,H=this.length,P=function(){--v||z.resolveWith(G,[G])};"string"!=typeof f&&(m=f,f=void 0);for(f=f||"fx";H--;)(r=Ia.get(G[H],f+"queueHooks"))&&r.empty&&(v++,r.empty.add(P));
return P(),z.promise(m)}});var Nc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Wb=new RegExp("^(?:([+-])=|)("+Nc+")([a-z%]*)$","i"),Gb=["Top","Right","Bottom","Left"],Sb=Ja.documentElement,Tb=function(f){return u.contains(f.ownerDocument,f)},Bd={composed:!0};Sb.getRootNode&&(Tb=function(f){return u.contains(f.ownerDocument,f)||f.getRootNode(Bd)===f.ownerDocument});var ec=function(f,m){return"none"===(f=m||f).style.display||""===f.style.display&&Tb(f)&&"none"===u.css(f,"display")},wc={};u.fn.extend({show:function(){return ha(this,
!0)},hide:function(){return ha(this)},toggle:function(f){return"boolean"==typeof f?f?this.show():this.hide():this.each(function(){ec(this)?u(this).show():u(this).hide()})}});var lc,$b=/^(?:checkbox|radio)$/i,xc=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yc=/^$|^module$|\/(?:java|ecma)script/i;var Vb=Ja.createDocumentFragment().appendChild(Ja.createElement("div"));(lc=Ja.createElement("input")).setAttribute("type","radio");lc.setAttribute("checked","checked");lc.setAttribute("name","t");Vb.appendChild(lc);aa.checkClone=
Vb.cloneNode(!0).cloneNode(!0).lastChild.checked;Vb.innerHTML="<textarea>x</textarea>";aa.noCloneChecked=!!Vb.cloneNode(!0).lastChild.defaultValue;Vb.innerHTML="<option></option>";aa.option=!!Vb.lastChild;var yb={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};yb.tbody=yb.tfoot=yb.colgroup=yb.caption=yb.thead;yb.th=yb.td;aa.option||(yb.optgroup=yb.option=
[1,"<select multiple='multiple'>","</select>"]);var dd=/<|&#?\w+;/,Oc=/^([^.]*)(?:\.(.+)|)/;u.event={global:{},add:function(f,m,r,v,z){var G,H,P,Q,Z,ia,W,ta;var ya=Ia.get(f);if(Zb(f))for(r.handler&&(r=(G=r).handler,z=G.selector),z&&u.find.matchesSelector(Sb,z),r.guid||(r.guid=u.guid++),(Q=ya.events)||(Q=ya.events=Object.create(null)),(H=ya.handle)||(H=ya.handle=function(Qa){return"undefined"!=typeof u&&u.event.triggered!==Qa.type?u.event.dispatch.apply(f,arguments):void 0}),ya=(m=(m||"").match(Cb)||
[""]).length;ya--;){var Aa=ta=(P=Oc.exec(m[ya])||[])[1];P=(P[2]||"").split(".").sort();Aa&&(ia=u.event.special[Aa]||{},Aa=(z?ia.delegateType:ia.bindType)||Aa,ia=u.event.special[Aa]||{},Z=u.extend({type:Aa,origType:ta,data:v,handler:r,guid:r.guid,selector:z,needsContext:z&&u.expr.match.needsContext.test(z),namespace:P.join(".")},G),(W=Q[Aa])||((W=Q[Aa]=[]).delegateCount=0,ia.setup&&!1!==ia.setup.call(f,v,P,H)||f.addEventListener&&f.addEventListener(Aa,H)),ia.add&&(ia.add.call(f,Z),Z.handler.guid||
(Z.handler.guid=r.guid)),z?W.splice(W.delegateCount++,0,Z):W.push(Z),u.event.global[Aa]=!0)}},remove:function(f,m,r,v,z){var G,H,P,Q,Z,ia,W,ta,ya=Ia.hasData(f)&&Ia.get(f);if(ya&&(Q=ya.events)){for(Z=(m=(m||"").match(Cb)||[""]).length;Z--;)if(ia=ta=(P=Oc.exec(m[Z])||[])[1],W=(P[2]||"").split(".").sort(),ia){var Aa=u.event.special[ia]||{};var Qa=Q[ia=(v?Aa.delegateType:Aa.bindType)||ia]||[];P=P[2]&&new RegExp("(^|\\.)"+W.join("\\.(?:.*\\.|)")+"(\\.|$)");for(H=G=Qa.length;G--;){var $a=Qa[G];!z&&ta!==
$a.origType||r&&r.guid!==$a.guid||P&&!P.test($a.namespace)||v&&v!==$a.selector&&("**"!==v||!$a.selector)||(Qa.splice(G,1),$a.selector&&Qa.delegateCount--,Aa.remove&&Aa.remove.call(f,$a))}H&&!Qa.length&&(Aa.teardown&&!1!==Aa.teardown.call(f,W,ya.handle)||u.removeEvent(f,ia,ya.handle),delete Q[ia])}else for(ia in Q)u.event.remove(f,ia+m[Z],r,v,!0);u.isEmptyObject(Q)&&Ia.remove(f,"handle events")}},dispatch:function(f){var m,r,v,z,G=Array(arguments.length),H=u.event.fix(f);var P=(Ia.get(this,"events")||
Object.create(null))[H.type]||[];var Q=u.event.special[H.type]||{};G[0]=H;for(m=1;m<arguments.length;m++)G[m]=arguments[m];if(H.delegateTarget=this,!Q.preDispatch||!1!==Q.preDispatch.call(this,H)){var Z=u.event.handlers.call(this,H,P);for(m=0;(v=Z[m++])&&!H.isPropagationStopped();)for(H.currentTarget=v.elem,P=0;(z=v.handlers[P++])&&!H.isImmediatePropagationStopped();)H.rnamespace&&!1!==z.namespace&&!H.rnamespace.test(z.namespace)||(H.handleObj=z,H.data=z.data,void 0!==(r=((u.event.special[z.origType]||
{}).handle||z.handler).apply(v.elem,G))&&!1===(H.result=r)&&(H.preventDefault(),H.stopPropagation()));return Q.postDispatch&&Q.postDispatch.call(this,H),H.result}},handlers:function(f,m){var r,v,z,G=[],H=m.delegateCount,P=f.target;if(H&&P.nodeType&&!("click"===f.type&&1<=f.button))for(;P!==this;P=P.parentNode||this)if(1===P.nodeType&&("click"!==f.type||!0!==P.disabled)){var Q=[];var Z={};for(r=0;r<H;r++)void 0===Z[z=(v=m[r]).selector+" "]&&(Z[z]=v.needsContext?-1<u(z,this).index(P):u.find(z,this,
null,[P]).length),Z[z]&&Q.push(v);Q.length&&G.push({elem:P,handlers:Q})}return P=this,H<m.length&&G.push({elem:P,handlers:m.slice(H)}),G},addProp:function(f,m){Object.defineProperty(u.Event.prototype,f,{enumerable:!0,configurable:!0,get:za(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[f]},set:function(r){Object.defineProperty(this,f,{enumerable:!0,configurable:!0,writable:!0,value:r})}})},fix:function(f){return f[u.expando]?
f:new u.Event(f)},special:{load:{noBubble:!0},click:{setup:function(f){f=this||f;return $b.test(f.type)&&f.click&&t(f,"input")&&a(f,"click",ka),!1},trigger:function(f){f=this||f;return $b.test(f.type)&&f.click&&t(f,"input")&&a(f,"click"),!0},_default:function(f){f=f.target;return $b.test(f.type)&&f.click&&t(f,"input")&&Ia.get(f,"click")||t(f,"a")}},beforeunload:{postDispatch:function(f){void 0!==f.result&&f.originalEvent&&(f.originalEvent.returnValue=f.result)}}}};u.removeEvent=function(f,m,r){f.removeEventListener&&
f.removeEventListener(m,r)};u.Event=function(f,m){if(!(this instanceof u.Event))return new u.Event(f,m);f&&f.type?(this.originalEvent=f,this.type=f.type,this.isDefaultPrevented=f.defaultPrevented||void 0===f.defaultPrevented&&!1===f.returnValue?ka:ma,this.target=f.target&&3===f.target.nodeType?f.target.parentNode:f.target,this.currentTarget=f.currentTarget,this.relatedTarget=f.relatedTarget):this.type=f;m&&u.extend(this,m);this.timeStamp=f&&f.timeStamp||Date.now();this[u.expando]=!0};u.Event.prototype=
{constructor:u.Event,isDefaultPrevented:ma,isPropagationStopped:ma,isImmediatePropagationStopped:ma,isSimulated:!1,preventDefault:function(){var f=this.originalEvent;this.isDefaultPrevented=ka;f&&!this.isSimulated&&f.preventDefault()},stopPropagation:function(){var f=this.originalEvent;this.isPropagationStopped=ka;f&&!this.isSimulated&&f.stopPropagation()},stopImmediatePropagation:function(){var f=this.originalEvent;this.isImmediatePropagationStopped=ka;f&&!this.isSimulated&&f.stopImmediatePropagation();
this.stopPropagation()}};u.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},u.event.addProp);u.each({focus:"focusin",blur:"focusout"},function(f,m){u.event.special[f]={setup:function(){return a(this,
f,ra),!1},trigger:function(){return a(this,f),!0},_default:function(){return!0},delegateType:m}});u.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(f,m){u.event.special[f]={delegateType:m,bindType:m,handle:function(r){var v,z=r.relatedTarget,G=r.handleObj;return z&&(z===this||u.contains(this,z))||(r.type=G.origType,v=G.handler.apply(this,arguments),r.type=m),v}}});u.fn.extend({on:function(f,m,r,v){return Ca(this,f,m,r,v)},one:function(f,
m,r,v){return Ca(this,f,m,r,v,1)},off:function(f,m,r){var v,z;if(f&&f.preventDefault&&f.handleObj)return v=f.handleObj,u(f.delegateTarget).off(v.namespace?v.origType+"."+v.namespace:v.origType,v.selector,v.handler),this;if("object"==typeof f){for(z in f)this.off(z,m,f[z]);return this}return!1!==m&&"function"!=typeof m||(r=m,m=void 0),!1===r&&(r=ma),this.each(function(){u.event.remove(this,f,r,m)})}});var Cd=/<script|<style|<link/i,ed=/checked\s*(?:[^=]|=\s*.checked.)/i,fd=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
u.extend({htmlPrefilter:function(f){return f},clone:function(f,m,r){var v,z,G,H=f.cloneNode(!0),P=Tb(f);if(!(aa.noCloneChecked||1!==f.nodeType&&11!==f.nodeType||u.isXMLDoc(f))){var Q=sa(H);var Z=0;for(v=(z=sa(f)).length;Z<v;Z++){var ia=z[Z];var W=Q[Z];void 0;"input"===(G=W.nodeName.toLowerCase())&&$b.test(ia.type)?W.checked=ia.checked:"input"!==G&&"textarea"!==G||(W.defaultValue=ia.defaultValue)}}if(m)if(r)for(z=z||sa(f),Q=Q||sa(H),Z=0,v=z.length;Z<v;Z++)c(z[Z],Q[Z]);else c(f,H);return 0<(Q=sa(H,
"script")).length&&X(Q,!P&&sa(f,"script")),H},cleanData:function(f){for(var m,r,v,z=u.event.special,G=0;void 0!==(r=f[G]);G++)if(Zb(r)){if(m=r[Ia.expando]){if(m.events)for(v in m.events)z[v]?u.event.remove(r,v):u.removeEvent(r,v,m.handle);r[Ia.expando]=void 0}r[qb.expando]&&(r[qb.expando]=void 0)}}});u.fn.extend({detach:function(f){return g(this,f,!0)},remove:function(f){return g(this,f)},text:function(f){return Kb(this,function(m){return void 0===m?u.text(this):this.empty().each(function(){1!==this.nodeType&&
11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,f,arguments.length)},append:function(){return e(this,arguments,function(f){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||C(this,f).appendChild(f)})},prepend:function(){return e(this,arguments,function(f){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=C(this,f);m.insertBefore(f,m.firstChild)}})},before:function(){return e(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this)})},
after:function(){return e(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this.nextSibling)})},empty:function(){for(var f,m=0;null!=(f=this[m]);m++)1===f.nodeType&&(u.cleanData(sa(f,!1)),f.textContent="");return this},clone:function(f,m){return f=null!=f&&f,m=null==m?f:m,this.map(function(){return u.clone(this,f,m)})},html:function(f){return Kb(this,function(m){var r=this[0]||{},v=0,z=this.length;if(void 0===m&&1===r.nodeType)return r.innerHTML;if("string"==typeof m&&!Cd.test(m)&&
!yb[(xc.exec(m)||["",""])[1].toLowerCase()]){m=u.htmlPrefilter(m);try{for(;v<z;v++)1===(r=this[v]||{}).nodeType&&(u.cleanData(sa(r,!1)),r.innerHTML=m);r=0}catch(G){}}r&&this.empty().append(m)},null,f,arguments.length)},replaceWith:function(){var f=[];return e(this,arguments,function(m){var r=this.parentNode;0>u.inArray(this,f)&&(u.cleanData(sa(this)),r&&r.replaceChild(m,this))},f)}});u.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},
function(f,m){u.fn[f]=function(r){for(var v=[],z=u(r),G=z.length-1,H=0;H<=G;H++)r=H===G?this:this.clone(!0),u(z[H])[m](r),mb.apply(v,r.get());return this.pushStack(v)}});var mc=new RegExp("^("+Nc+")(?!px)[a-z%]+$","i"),fc=function(f){var m=f.ownerDocument.defaultView;return m&&m.opener||(m=d),m.getComputedStyle(f)},Pc=function(f,m,r){var v,z={};for(v in m)z[v]=f.style[v],f.style[v]=m[v];for(v in r=r.call(f),m)f.style[v]=z[v];return r},gd=new RegExp(Gb.join("|"),"i");!function(){function f(){if(Q){P.style.cssText=
"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";Q.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";Sb.appendChild(P).appendChild(Q);var Z=d.getComputedStyle(Q);m="1%"!==Z.top;H=12===Math.round(parseFloat(Z.marginLeft));Q.style.right="60%";z=36===Math.round(parseFloat(Z.right));r=36===Math.round(parseFloat(Z.width));Q.style.position="absolute";v=12===Math.round(parseFloat(Q.offsetWidth/
3));Sb.removeChild(P);Q=null}}var m,r,v,z,G,H,P=Ja.createElement("div"),Q=Ja.createElement("div");Q.style&&(Q.style.backgroundClip="content-box",Q.cloneNode(!0).style.backgroundClip="",aa.clearCloneStyle="content-box"===Q.style.backgroundClip,u.extend(aa,{boxSizingReliable:function(){return f(),r},pixelBoxStyles:function(){return f(),z},pixelPosition:function(){return f(),m},reliableMarginLeft:function(){return f(),H},scrollboxSize:function(){return f(),v},reliableTrDimensions:function(){var Z,ia,
W,ta;return null==G&&(Z=Ja.createElement("table"),ia=Ja.createElement("tr"),W=Ja.createElement("div"),Z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ia.style.cssText="border:1px solid",ia.style.height="1px",W.style.height="9px",W.style.display="block",Sb.appendChild(Z).appendChild(ia).appendChild(W),ta=d.getComputedStyle(ia),G=parseInt(ta.height,10)+parseInt(ta.borderTopWidth,10)+parseInt(ta.borderBottomWidth,10)===ia.offsetHeight,Sb.removeChild(Z)),G}}))}();var Bc=["Webkit",
"Moz","ms"],Ac=Ja.createElement("div").style,zc={},Dd=/^(none|table(?!-c[ea]).+)/,Qc=/^--/,Ed={position:"absolute",visibility:"hidden",display:"block"},Rc={letterSpacing:"0",fontWeight:"400"};u.extend({cssHooks:{opacity:{get:function(f,m){if(m)return f=k(f,"opacity"),""===f?"1":f}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,
opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(f,m,r,v){if(f&&3!==f.nodeType&&8!==f.nodeType&&f.style){var z,G,H,P=O(m),Q=Qc.test(m),Z=f.style;if(Q||(m=n(P)),H=u.cssHooks[m]||u.cssHooks[P],void 0===r)return H&&"get"in H&&void 0!==(z=H.get(f,!1,v))?z:Z[m];"string"===(G=typeof r)&&(z=Wb.exec(r))&&z[1]&&(r=fa(f,m,z),G="number");null!=r&&r==r&&("number"!==G||Q||(r+=z&&z[3]||(u.cssNumber[P]?"":"px")),aa.clearCloneStyle||""!==r||0!==m.indexOf("background")||(Z[m]=
"inherit"),H&&"set"in H&&void 0===(r=H.set(f,r,v))||(Q?Z.setProperty(m,r):Z[m]=r))}},css:function(f,m,r,v){var z,G,H,P=O(m);return Qc.test(m)||(m=n(P)),(H=u.cssHooks[m]||u.cssHooks[P])&&"get"in H&&(z=H.get(f,!0,r)),void 0===z&&(z=k(f,m,v)),"normal"===z&&m in Rc&&(z=Rc[m]),""===r||r?(G=parseFloat(z),!0===r||isFinite(G)?G||0:z):z}});u.each(["height","width"],function(f,m){u.cssHooks[m]={get:function(r,v,z){if(v)return!Dd.test(u.css(r,"display"))||r.getClientRects().length&&r.getBoundingClientRect().width?
I(r,m,z):Pc(r,Ed,function(){return I(r,m,z)})},set:function(r,v,z){var G,H=fc(r),P=!aa.scrollboxSize()&&"absolute"===H.position,Q=(P||z)&&"border-box"===u.css(r,"boxSizing",!1,H);z=z?B(r,m,z,Q,H):0;return Q&&P&&(z-=Math.ceil(r["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(H[m])-B(r,m,"border",!1,H)-.5)),z&&(G=Wb.exec(v))&&"px"!==(G[3]||"px")&&(r.style[m]=v,v=u.css(r,m)),w(0,v,z)}}});u.cssHooks.marginLeft=p(aa.reliableMarginLeft,function(f,m){if(m)return(parseFloat(k(f,"marginLeft"))||f.getBoundingClientRect().left-
Pc(f,{marginLeft:0},function(){return f.getBoundingClientRect().left}))+"px"});u.each({margin:"",padding:"",border:"Width"},function(f,m){u.cssHooks[f+m]={expand:function(r){var v=0,z={};for(r="string"==typeof r?r.split(" "):[r];4>v;v++)z[f+Gb[v]+m]=r[v]||r[v-2]||r[0];return z}};"margin"!==f&&(u.cssHooks[f+m].set=w)});u.fn.extend({css:function(f,m){return Kb(this,function(r,v,z){var G,H={},P=0;if(Array.isArray(v)){z=fc(r);for(G=v.length;P<G;P++)H[v[P]]=u.css(r,v[P],!1,z);return H}return void 0!==
z?u.style(r,v,z):u.css(r,v)},f,m,1<arguments.length)}});((u.Tween=E).prototype={constructor:E,init:function(f,m,r,v,z,G){this.elem=f;this.prop=r;this.easing=z||u.easing._default;this.options=m;this.start=this.now=this.cur();this.end=v;this.unit=G||(u.cssNumber[r]?"":"px")},cur:function(){var f=E.propHooks[this.prop];return f&&f.get?f.get(this):E.propHooks._default.get(this)},run:function(f){var m,r=E.propHooks[this.prop];return this.options.duration?this.pos=m=u.easing[this.easing](f,this.options.duration*
f,0,1,this.options.duration):this.pos=m=f,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):E.propHooks._default.set(this),this}}).init.prototype=E.prototype;(E.propHooks={_default:{get:function(f){var m;return 1!==f.elem.nodeType||null!=f.elem[f.prop]&&null==f.elem.style[f.prop]?f.elem[f.prop]:(m=u.css(f.elem,f.prop,""))&&"auto"!==m?m:0},set:function(f){u.fx.step[f.prop]?u.fx.step[f.prop](f):1!==f.elem.nodeType||!u.cssHooks[f.prop]&&
null==f.elem.style[n(f.prop)]?f.elem[f.prop]=f.now:u.style(f.elem,f.prop,f.now+f.unit)}}}).scrollTop=E.propHooks.scrollLeft={set:function(f){f.elem.nodeType&&f.elem.parentNode&&(f.elem[f.prop]=f.now)}};u.easing={linear:function(f){return f},swing:function(f){return.5-Math.cos(f*Math.PI)/2},_default:"swing"};u.fx=E.prototype.init;u.fx.step={};var Ub,gc,Fd=/^(?:toggle|show|hide)$/,Gd=/queueHooks$/;u.Animation=u.extend(la,{tweeners:{"*":[function(f,m){var r=this.createTween(f,m);return fa(r.elem,f,Wb.exec(m),
r),r}]},tweener:function(f,m){za(f)?(m=f,f=["*"]):f=f.match(Cb);for(var r,v=0,z=f.length;v<z;v++)r=f[v],la.tweeners[r]=la.tweeners[r]||[],la.tweeners[r].unshift(m)},prefilters:[function(f,m,r){var v,z,G,H,P,Q,Z,ia="width"in m||"height"in m,W=this,ta={},ya=f.style,Aa=f.nodeType&&ec(f),Qa=Ia.get(f,"fxshow");for(v in r.queue||(null==(H=u._queueHooks(f,"fx")).unqueued&&(H.unqueued=0,P=H.empty.fire,H.empty.fire=function(){H.unqueued||P()}),H.unqueued++,W.always(function(){W.always(function(){H.unqueued--;
u.queue(f,"fx").length||H.empty.fire()})})),m)if(z=m[v],Fd.test(z)){if(delete m[v],G=G||"toggle"===z,z===(Aa?"hide":"show")){if("show"!==z||!Qa||void 0===Qa[v])continue;Aa=!0}ta[v]=Qa&&Qa[v]||u.style(f,v)}if((m=!u.isEmptyObject(m))||!u.isEmptyObject(ta))for(v in ia&&1===f.nodeType&&(r.overflow=[ya.overflow,ya.overflowX,ya.overflowY],null==(Q=Qa&&Qa.display)&&(Q=Ia.get(f,"display")),"none"===(Z=u.css(f,"display"))&&(Q?Z=Q:(ha([f],!0),Q=f.style.display||Q,Z=u.css(f,"display"),ha([f]))),("inline"===
Z||"inline-block"===Z&&null!=Q)&&"none"===u.css(f,"float")&&(m||(W.done(function(){ya.display=Q}),null==Q&&(Z=ya.display,Q="none"===Z?"":Z)),ya.display="inline-block")),r.overflow&&(ya.overflow="hidden",W.always(function(){ya.overflow=r.overflow[0];ya.overflowX=r.overflow[1];ya.overflowY=r.overflow[2]})),m=!1,ta)m||(Qa?"hidden"in Qa&&(Aa=Qa.hidden):Qa=Ia.access(f,"fxshow",{display:Q}),G&&(Qa.hidden=!Aa),Aa&&ha([f],!0),W.done(function(){for(v in Aa||ha([f]),Ia.remove(f,"fxshow"),ta)u.style(f,v,ta[v])})),
m=ea(Aa?Qa[v]:0,v,W),v in Qa||(Qa[v]=m.start,Aa&&(m.end=m.start,m.start=0))}],prefilter:function(f,m){m?la.prefilters.unshift(f):la.prefilters.push(f)}});u.speed=function(f,m,r){var v=f&&"object"==typeof f?u.extend({},f):{complete:r||!r&&m||za(f)&&f,duration:f,easing:r&&m||m&&!za(m)&&m};return u.fx.off?v.duration=0:"number"!=typeof v.duration&&(v.duration in u.fx.speeds?v.duration=u.fx.speeds[v.duration]:v.duration=u.fx.speeds._default),null!=v.queue&&!0!==v.queue||(v.queue="fx"),v.old=v.complete,
v.complete=function(){za(v.old)&&v.old.call(this);v.queue&&u.dequeue(this,v.queue)},v};u.fn.extend({fadeTo:function(f,m,r,v){return this.filter(ec).css("opacity",0).show().end().animate({opacity:m},f,r,v)},animate:function(f,m,r,v){var z=u.isEmptyObject(f),G=u.speed(m,r,v);m=function(){var H=la(this,u.extend({},f),G);(z||Ia.get(this,"finish"))&&H.stop(!0)};return m.finish=m,z||!1===G.queue?this.each(m):this.queue(G.queue,m)},stop:function(f,m,r){var v=function(z){var G=z.stop;delete z.stop;G(r)};
return"string"!=typeof f&&(r=m,m=f,f=void 0),m&&this.queue(f||"fx",[]),this.each(function(){var z=!0,G=null!=f&&f+"queueHooks",H=u.timers,P=Ia.get(this);if(G)P[G]&&P[G].stop&&v(P[G]);else for(G in P)P[G]&&P[G].stop&&Gd.test(G)&&v(P[G]);for(G=H.length;G--;)H[G].elem!==this||null!=f&&H[G].queue!==f||(H[G].anim.stop(r),z=!1,H.splice(G,1));!z&&r||u.dequeue(this,f)})},finish:function(f){return!1!==f&&(f=f||"fx"),this.each(function(){var m=Ia.get(this),r=m[f+"queue"];var v=m[f+"queueHooks"];var z=u.timers,
G=r?r.length:0;m.finish=!0;u.queue(this,f,[]);v&&v.stop&&v.stop.call(this,!0);for(v=z.length;v--;)z[v].elem===this&&z[v].queue===f&&(z[v].anim.stop(!0),z.splice(v,1));for(v=0;v<G;v++)r[v]&&r[v].finish&&r[v].finish.call(this);delete m.finish})}});u.each(["toggle","show","hide"],function(f,m){var r=u.fn[m];u.fn[m]=function(v,z,G){return null==v||"boolean"==typeof v?r.apply(this,arguments):this.animate(da(m,!0),v,z,G)}});u.each({slideDown:da("show"),slideUp:da("hide"),slideToggle:da("toggle"),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(f,m){u.fn[f]=function(r,v,z){return this.animate(m,r,v,z)}});u.timers=[];u.fx.tick=function(){var f,m=0,r=u.timers;for(Ub=Date.now();m<r.length;m++)(f=r[m])()||r[m]!==f||r.splice(m--,1);r.length||u.fx.stop();Ub=void 0};u.fx.timer=function(f){u.timers.push(f);u.fx.start()};u.fx.interval=13;u.fx.start=function(){gc||(gc=!0,V())};u.fx.stop=function(){gc=null};u.fx.speeds={slow:600,fast:200,_default:400};u.fn.delay=function(f,m){return f=
u.fx&&u.fx.speeds[f]||f,m=m||"fx",this.queue(m,function(r,v){var z=d.setTimeout(r,f);v.stop=function(){d.clearTimeout(z)}})};var ac=Ja.createElement("input");var Hd=Ja.createElement("select").appendChild(Ja.createElement("option"));ac.type="checkbox";aa.checkOn=""!==ac.value;aa.optSelected=Hd.selected;(ac=Ja.createElement("input")).value="t";ac.type="radio";aa.radioValue="t"===ac.value;var bc=u.expr.attrHandle;u.fn.extend({attr:function(f,m){return Kb(this,u.attr,f,m,1<arguments.length)},removeAttr:function(f){return this.each(function(){u.removeAttr(this,
f)})}});u.extend({attr:function(f,m,r){var v,z,G=f.nodeType;if(3!==G&&8!==G&&2!==G)return"undefined"==typeof f.getAttribute?u.prop(f,m,r):(1===G&&u.isXMLDoc(f)||(z=u.attrHooks[m.toLowerCase()]||(u.expr.match.bool.test(m)?Id:void 0)),void 0!==r?null===r?void u.removeAttr(f,m):z&&"set"in z&&void 0!==(v=z.set(f,r,m))?v:(f.setAttribute(m,r+""),r):z&&"get"in z&&null!==(v=z.get(f,m))?v:null==(v=u.find.attr(f,m))?void 0:v)},attrHooks:{type:{set:function(f,m){if(!aa.radioValue&&"radio"===m&&t(f,"input")){var r=
f.value;return f.setAttribute("type",m),r&&(f.value=r),m}}}},removeAttr:function(f,m){var r=0,v=m&&m.match(Cb);if(v&&1===f.nodeType)for(;m=v[r++];)f.removeAttribute(m)}});var Id={set:function(f,m,r){return!1===m?u.removeAttr(f,r):f.setAttribute(r,r),r}};u.each(u.expr.match.bool.source.match(/\w+/g),function(f,m){var r=bc[m]||u.find.attr;bc[m]=function(v,z,G){var H,P,Q=z.toLowerCase();return G||(P=bc[Q],bc[Q]=H,H=null!=r(v,z,G)?Q:null,bc[Q]=P),H}});var Jd=/^(?:input|select|textarea|button)$/i,Kd=/^(?:a|area)$/i;
u.fn.extend({prop:function(f,m){return Kb(this,u.prop,f,m,1<arguments.length)},removeProp:function(f){return this.each(function(){delete this[u.propFix[f]||f]})}});u.extend({prop:function(f,m,r){var v,z,G=f.nodeType;if(3!==G&&8!==G&&2!==G)return 1===G&&u.isXMLDoc(f)||(m=u.propFix[m]||m,z=u.propHooks[m]),void 0!==r?z&&"set"in z&&void 0!==(v=z.set(f,r,m))?v:f[m]=r:z&&"get"in z&&null!==(v=z.get(f,m))?v:f[m]},propHooks:{tabIndex:{get:function(f){var m=u.find.attr(f,"tabindex");return m?parseInt(m,10):
Jd.test(f.nodeName)||Kd.test(f.nodeName)&&f.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});aa.optSelected||(u.propHooks.selected={get:function(f){f=f.parentNode;return f&&f.parentNode&&f.parentNode.selectedIndex,null},set:function(f){f=f.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}});u.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){u.propFix[this.toLowerCase()]=this});u.fn.extend({addClass:function(f){var m,
r,v,z,G,H,P,Q=0;if(za(f))return this.each(function(Z){u(this).addClass(f.call(this,Z,wa(this)))});if((m=va(f)).length)for(;r=this[Q++];)if(z=wa(r),v=1===r.nodeType&&" "+Ha(z)+" "){for(H=0;G=m[H++];)0>v.indexOf(" "+G+" ")&&(v+=G+" ");z!==(P=Ha(v))&&r.setAttribute("class",P)}return this},removeClass:function(f){var m,r,v,z,G,H,P,Q=0;if(za(f))return this.each(function(Z){u(this).removeClass(f.call(this,Z,wa(this)))});if(!arguments.length)return this.attr("class","");if((m=va(f)).length)for(;r=this[Q++];)if(z=
wa(r),v=1===r.nodeType&&" "+Ha(z)+" "){for(H=0;G=m[H++];)for(;-1<v.indexOf(" "+G+" ");)v=v.replace(" "+G+" "," ");z!==(P=Ha(v))&&r.setAttribute("class",P)}return this},toggleClass:function(f,m){var r=typeof f,v="string"===r||Array.isArray(f);return"boolean"==typeof m&&v?m?this.addClass(f):this.removeClass(f):za(f)?this.each(function(z){u(this).toggleClass(f.call(this,z,wa(this),m),m)}):this.each(function(){var z,G;if(v){var H=0;var P=u(this);for(G=va(f);z=G[H++];)P.hasClass(z)?P.removeClass(z):P.addClass(z)}else void 0!==
f&&"boolean"!==r||((z=wa(this))&&Ia.set(this,"__className__",z),this.setAttribute&&this.setAttribute("class",z||!1===f?"":Ia.get(this,"__className__")||""))})},hasClass:function(f){var m,r=0;for(f=" "+f+" ";m=this[r++];)if(1===m.nodeType&&-1<(" "+Ha(wa(m))+" ").indexOf(f))return!0;return!1}});var Ld=/\r/g;u.fn.extend({val:function(f){var m,r,v,z=this[0];return arguments.length?(v=za(f),this.each(function(G){var H;1===this.nodeType&&(null==(H=v?f.call(this,G,u(this).val()):f)?H="":"number"==typeof H?
H+="":Array.isArray(H)&&(H=u.map(H,function(P){return null==P?"":P+""})),(m=u.valHooks[this.type]||u.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,H,"value")||(this.value=H))})):z?(m=u.valHooks[z.type]||u.valHooks[z.nodeName.toLowerCase()])&&"get"in m&&void 0!==(r=m.get(z,"value"))?r:"string"==typeof(r=z.value)?r.replace(Ld,""):null==r?"":r:void 0}});u.extend({valHooks:{option:{get:function(f){var m=u.find.attr(f,"value");return null!=m?m:Ha(u.text(f))}},select:{get:function(f){var m,
r,v=f.options,z=f.selectedIndex,G="select-one"===f.type,H=G?null:[],P=G?z+1:v.length;for(r=0>z?P:G?z:0;r<P;r++)if(!(!(m=v[r]).selected&&r!==z||m.disabled||m.parentNode.disabled&&t(m.parentNode,"optgroup"))){if(f=u(m).val(),G)return f;H.push(f)}return H},set:function(f,m){var r,v,z=f.options;m=u.makeArray(m);for(var G=z.length;G--;)((v=z[G]).selected=-1<u.inArray(u.valHooks.option.get(v),m))&&(r=!0);return r||(f.selectedIndex=-1),m}}}});u.each(["radio","checkbox"],function(){u.valHooks[this]={set:function(f,
m){if(Array.isArray(m))return f.checked=-1<u.inArray(u(f).val(),m)}};aa.checkOn||(u.valHooks[this].get=function(f){return null===f.getAttribute("value")?"on":f.value})});aa.focusin="onfocusin"in d;var Sc=/^(?:focusinfocus|focusoutblur)$/,Tc=function(f){f.stopPropagation()};u.extend(u.event,{trigger:function(f,m,r,v){var z,G,H,P,Q,Z,ia=[r||Ja],W=Ma.call(f,"type")?f.type:f;var ta=Ma.call(f,"namespace")?f.namespace.split("."):[];if(z=Z=G=r=r||Ja,3!==r.nodeType&&8!==r.nodeType&&!Sc.test(W+u.event.triggered)&&
(-1<W.indexOf(".")&&(W=(ta=W.split(".")).shift(),ta.sort()),H=0>W.indexOf(":")&&"on"+W,(f=f[u.expando]?f:new u.Event(W,"object"==typeof f&&f)).isTrigger=v?2:3,f.namespace=ta.join("."),f.rnamespace=f.namespace?new RegExp("(^|\\.)"+ta.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f.result=void 0,f.target||(f.target=r),m=null==m?[f]:u.makeArray(m,[f]),Q=u.event.special[W]||{},v||!Q.trigger||!1!==Q.trigger.apply(r,m))){if(!v&&!Q.noBubble&&!xa(r)){var ya=Q.delegateType||W;for(Sc.test(ya+W)||(z=z.parentNode);z;z=
z.parentNode)ia.push(z),G=z;G===(r.ownerDocument||Ja)&&ia.push(G.defaultView||G.parentWindow||d)}for(ta=0;(z=ia[ta++])&&!f.isPropagationStopped();)Z=z,f.type=1<ta?ya:Q.bindType||W,(P=(Ia.get(z,"events")||Object.create(null))[f.type]&&Ia.get(z,"handle"))&&P.apply(z,m),(P=H&&z[H])&&P.apply&&Zb(z)&&(f.result=P.apply(z,m),!1===f.result&&f.preventDefault());return f.type=W,v||f.isDefaultPrevented()||Q._default&&!1!==Q._default.apply(ia.pop(),m)||!Zb(r)||H&&za(r[W])&&!xa(r)&&((G=r[H])&&(r[H]=null),u.event.triggered=
W,f.isPropagationStopped()&&Z.addEventListener(W,Tc),r[W](),f.isPropagationStopped()&&Z.removeEventListener(W,Tc),u.event.triggered=void 0,G&&(r[H]=G)),f.result}},simulate:function(f,m,r){f=u.extend(new u.Event,r,{type:f,isSimulated:!0});u.event.trigger(f,null,m)}});u.fn.extend({trigger:function(f,m){return this.each(function(){u.event.trigger(f,m,this)})},triggerHandler:function(f,m){var r=this[0];if(r)return u.event.trigger(f,m,r,!0)}});aa.focusin||u.each({focus:"focusin",blur:"focusout"},function(f,
m){var r=function(v){u.event.simulate(m,v.target,u.event.fix(v))};u.event.special[m]={setup:function(){var v=this.ownerDocument||this.document||this,z=Ia.access(v,m);z||v.addEventListener(f,r,!0);Ia.access(v,m,(z||0)+1)},teardown:function(){var v=this.ownerDocument||this.document||this,z=Ia.access(v,m)-1;z?Ia.access(v,m,z):(v.removeEventListener(f,r,!0),Ia.remove(v,m))}}});var cc=d.location,Uc=Date.now(),tc=/\?/;u.parseXML=function(f){var m;if(!f||"string"!=typeof f)return null;try{var r=(new d.DOMParser).parseFromString(f,
"text/xml")}catch(v){}return m=r&&r.getElementsByTagName("parsererror")[0],r&&!m||u.error("Invalid XML: "+(m?u.map(m.childNodes,function(v){return v.textContent}).join("\n"):f)),r};var hd=/\[\]$/,Vc=/\r?\n/g,Md=/^(?:submit|button|image|reset|file)$/i,Nd=/^(?:input|select|textarea|keygen)/i;u.param=function(f,m){var r,v=[],z=function(G,H){H=za(H)?H():H;v[v.length]=encodeURIComponent(G)+"="+encodeURIComponent(null==H?"":H)};if(null==f)return"";if(Array.isArray(f)||f.jquery&&!u.isPlainObject(f))u.each(f,
function(){z(this.name,this.value)});else for(r in f)ua(r,f[r],m,z);return v.join("&")};u.fn.extend({serialize:function(){return u.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var f=u.prop(this,"elements");return f?u.makeArray(f):this}).filter(function(){var f=this.type;return this.name&&!u(this).is(":disabled")&&Nd.test(this.nodeName)&&!Md.test(f)&&(this.checked||!$b.test(f))}).map(function(f,m){f=u(this).val();return null==f?null:Array.isArray(f)?u.map(f,function(r){return{name:m.name,
value:r.replace(Vc,"\r\n")}}):{name:m.name,value:f.replace(Vc,"\r\n")}}).get()}});var Od=/%20/g,Pd=/#.*$/,Qd=/([?&])_=[^&]*/,Rd=/^(.*?):[ \t]*([^\r\n]*)$/gm,Sd=/^(?:GET|HEAD)$/,Td=/^\/\//,Wc={},nc={},Xc="*/".concat("*"),uc=Ja.createElement("a");uc.href=cc.href;u.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:cc.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(cc.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
accepts:{"*":Xc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":u.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(f,m){return m?Ka(Ka(f,u.ajaxSettings),m):Ka(u.ajaxSettings,f)},ajaxPrefilter:Da(Wc),ajaxTransport:Da(nc),
ajax:function(f,m){function r(Sa,ib,Mb,Xb){var zb,Nb,vb,wb,tb,Oa=ib;La||(La=!0,P&&d.clearTimeout(P),v=void 0,G=Xb||"",Ba.readyState=0<Sa?4:0,zb=200<=Sa&&300>Sa||304===Sa,Mb&&(wb=function(ab,cb,bb){for(var rb,ob,Xa,Pa,hb=ab.contents,Za=ab.dataTypes;"*"===Za[0];)Za.shift(),void 0===rb&&(rb=ab.mimeType||cb.getResponseHeader("Content-Type"));if(rb)for(ob in hb)if(hb[ob]&&hb[ob].test(rb)){Za.unshift(ob);break}if(Za[0]in bb)Xa=Za[0];else{for(ob in bb){if(!Za[0]||ab.converters[ob+" "+Za[0]]){Xa=ob;break}Pa||=
ob}Xa=Xa||Pa}if(Xa)return Xa!==Za[0]&&Za.unshift(Xa),bb[Xa]}(W,Ba,Mb)),!zb&&-1<u.inArray("script",W.dataTypes)&&0>u.inArray("json",W.dataTypes)&&(W.converters["text script"]=function(){}),wb=function(ab,cb,bb,rb){var ob,Xa,Pa,hb,Za,Db={},Qb=ab.dataTypes.slice();if(Qb[1])for(Pa in ab.converters)Db[Pa.toLowerCase()]=ab.converters[Pa];for(Xa=Qb.shift();Xa;)if(ab.responseFields[Xa]&&(bb[ab.responseFields[Xa]]=cb),!Za&&rb&&ab.dataFilter&&(cb=ab.dataFilter(cb,ab.dataType)),Za=Xa,Xa=Qb.shift())if("*"===
Xa)Xa=Za;else if("*"!==Za&&Za!==Xa){if(!(Pa=Db[Za+" "+Xa]||Db["* "+Xa]))for(ob in Db)if((hb=ob.split(" "))[1]===Xa&&(Pa=Db[Za+" "+hb[0]]||Db["* "+hb[0]])){!0===Pa?Pa=Db[ob]:!0!==Db[ob]&&(Xa=hb[0],Qb.unshift(hb[1]));break}if(!0!==Pa)if(Pa&&ab["throws"])cb=Pa(cb);else try{cb=Pa(cb)}catch(jc){return{state:"parsererror",error:Pa?jc:"No conversion from "+Za+" to "+Xa}}}return{state:"success",data:cb}}(W,wb,Ba,zb),zb?(W.ifModified&&((tb=Ba.getResponseHeader("Last-Modified"))&&(u.lastModified[z]=tb),(tb=
Ba.getResponseHeader("etag"))&&(u.etag[z]=tb)),204===Sa||"HEAD"===W.type?Oa="nocontent":304===Sa?Oa="notmodified":(Oa=wb.state,Nb=wb.data,zb=!(vb=wb.error))):(vb=Oa,!Sa&&Oa||(Oa="error",0>Sa&&(Sa=0))),Ba.status=Sa,Ba.statusText=(ib||Oa)+"",zb?Aa.resolveWith(ta,[Nb,Oa,Ba]):Aa.rejectWith(ta,[Ba,Oa,vb]),Ba.statusCode($a),$a=void 0,Q&&ya.trigger(zb?"ajaxSuccess":"ajaxError",[Ba,W,zb?Nb:vb]),Qa.fireWith(ta,[Ba,Oa]),Q&&(ya.trigger("ajaxComplete",[Ba,W]),--u.active||u.event.trigger("ajaxStop")))}"object"==
typeof f&&(m=f,f=void 0);m=m||{};var v,z,G,H,P,Q,Z,ia,W=u.ajaxSetup({},m),ta=W.context||W,ya=W.context&&(ta.nodeType||ta.jquery)?u(ta):u.event,Aa=u.Deferred(),Qa=u.Callbacks("once memory"),$a=W.statusCode||{},Ab={},nb={},ub="canceled",Ba={readyState:0,getResponseHeader:function(Sa){var ib;if(La){if(!H)for(H={};ib=Rd.exec(G);)H[ib[1].toLowerCase()+" "]=(H[ib[1].toLowerCase()+" "]||[]).concat(ib[2]);ib=H[Sa.toLowerCase()+" "]}return null==ib?null:ib.join(", ")},getAllResponseHeaders:function(){return La?
G:null},setRequestHeader:function(Sa,ib){return null==La&&(Sa=nb[Sa.toLowerCase()]=nb[Sa.toLowerCase()]||Sa,Ab[Sa]=ib),this},overrideMimeType:function(Sa){return null==La&&(W.mimeType=Sa),this},statusCode:function(Sa){var ib;if(Sa)if(La)Ba.always(Sa[Ba.status]);else for(ib in Sa)$a[ib]=[$a[ib],Sa[ib]];return this},abort:function(Sa){Sa=Sa||ub;return v&&v.abort(Sa),r(0,Sa),this}};if(Aa.promise(Ba),W.url=((f||W.url||cc.href)+"").replace(Td,cc.protocol+"//"),W.type=m.method||m.type||W.method||W.type,
W.dataTypes=(W.dataType||"*").toLowerCase().match(Cb)||[""],null==W.crossDomain){f=Ja.createElement("a");try{f.href=W.url,f.href=f.href,W.crossDomain=uc.protocol+"//"+uc.host!=f.protocol+"//"+f.host}catch(Sa){W.crossDomain=!0}}if(W.data&&W.processData&&"string"!=typeof W.data&&(W.data=u.param(W.data,W.traditional)),Ua(Wc,W,m,Ba),La)return Ba;for(Z in(Q=u.event&&W.global)&&0==u.active++&&u.event.trigger("ajaxStart"),W.type=W.type.toUpperCase(),W.hasContent=!Sd.test(W.type),z=W.url.replace(Pd,""),W.hasContent?
W.data&&W.processData&&0===(W.contentType||"").indexOf("application/x-www-form-urlencoded")&&(W.data=W.data.replace(Od,"+")):(ia=W.url.slice(z.length),W.data&&(W.processData||"string"==typeof W.data)&&(z+=(tc.test(z)?"&":"?")+W.data,delete W.data),!1===W.cache&&(z=z.replace(Qd,"$1"),ia=(tc.test(z)?"&":"?")+"_="+Uc++ +ia),W.url=z+ia),W.ifModified&&(u.lastModified[z]&&Ba.setRequestHeader("If-Modified-Since",u.lastModified[z]),u.etag[z]&&Ba.setRequestHeader("If-None-Match",u.etag[z])),(W.data&&W.hasContent&&
!1!==W.contentType||m.contentType)&&Ba.setRequestHeader("Content-Type",W.contentType),Ba.setRequestHeader("Accept",W.dataTypes[0]&&W.accepts[W.dataTypes[0]]?W.accepts[W.dataTypes[0]]+("*"!==W.dataTypes[0]?", "+Xc+"; q=0.01":""):W.accepts["*"]),W.headers)Ba.setRequestHeader(Z,W.headers[Z]);if(W.beforeSend&&(!1===W.beforeSend.call(ta,Ba,W)||La))return Ba.abort();if(ub="abort",Qa.add(W.complete),Ba.done(W.success),Ba.fail(W.error),v=Ua(nc,W,m,Ba)){if(Ba.readyState=1,Q&&ya.trigger("ajaxSend",[Ba,W]),
La)return Ba;W.async&&0<W.timeout&&(P=d.setTimeout(function(){Ba.abort("timeout")},W.timeout));try{var La=!1;v.send(Ab,r)}catch(Sa){if(La)throw Sa;r(-1,Sa)}}else r(-1,"No Transport");return Ba},getJSON:function(f,m,r){return u.get(f,m,r,"json")},getScript:function(f,m){return u.get(f,void 0,m,"script")}});u.each(["get","post"],function(f,m){u[m]=function(r,v,z,G){return za(v)&&(G=G||z,z=v,v=void 0),u.ajax(u.extend({url:r,type:m,dataType:G,data:v,success:z},u.isPlainObject(r)&&r))}});u.ajaxPrefilter(function(f){for(var m in f.headers)"content-type"===
m.toLowerCase()&&(f.contentType=f.headers[m]||"")});u._evalUrl=function(f,m,r){return u.ajax({url:f,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(v){u.globalEval(v,m,r)}})};u.fn.extend({wrapAll:function(f){var m;return this[0]&&(za(f)&&(f=f.call(this[0])),m=u(f,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var r=this;r.firstElementChild;)r=r.firstElementChild;return r}).append(this)),
this},wrapInner:function(f){return za(f)?this.each(function(m){u(this).wrapInner(f.call(this,m))}):this.each(function(){var m=u(this),r=m.contents();r.length?r.wrapAll(f):m.append(f)})},wrap:function(f){var m=za(f);return this.each(function(r){u(this).wrapAll(m?f.call(this,r):f)})},unwrap:function(f){return this.parent(f).not("body").each(function(){u(this).replaceWith(this.childNodes)}),this}});u.expr.pseudos.hidden=function(f){return!u.expr.pseudos.visible(f)};u.expr.pseudos.visible=function(f){return!!(f.offsetWidth||
f.offsetHeight||f.getClientRects().length)};u.ajaxSettings.xhr=function(){try{return new d.XMLHttpRequest}catch(f){}};var Ud={0:200,1223:204},dc=u.ajaxSettings.xhr();aa.cors=!!dc&&"withCredentials"in dc;aa.ajax=dc=!!dc;u.ajaxTransport(function(f){var m,r;if(aa.cors||dc&&!f.crossDomain)return{send:function(v,z){var G,H=f.xhr();if(H.open(f.type,f.url,f.async,f.username,f.password),f.xhrFields)for(G in f.xhrFields)H[G]=f.xhrFields[G];for(G in f.mimeType&&H.overrideMimeType&&H.overrideMimeType(f.mimeType),
f.crossDomain||v["X-Requested-With"]||(v["X-Requested-With"]="XMLHttpRequest"),v)H.setRequestHeader(G,v[G]);m=function(P){return function(){m&&(m=r=H.onload=H.onerror=H.onabort=H.ontimeout=H.onreadystatechange=null,"abort"===P?H.abort():"error"===P?"number"!=typeof H.status?z(0,"error"):z(H.status,H.statusText):z(Ud[H.status]||H.status,H.statusText,"text"!==(H.responseType||"text")||"string"!=typeof H.responseText?{binary:H.response}:{text:H.responseText},H.getAllResponseHeaders()))}};H.onload=m();
r=H.onerror=H.ontimeout=m("error");void 0!==H.onabort?H.onabort=r:H.onreadystatechange=function(){4===H.readyState&&d.setTimeout(function(){m&&r()})};m=m("abort");try{H.send(f.hasContent&&f.data||null)}catch(P){if(m)throw P;}},abort:function(){m&&m()}}});u.ajaxPrefilter(function(f){f.crossDomain&&(f.contents.script=!1)});u.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(f){return u.globalEval(f),
f}}});u.ajaxPrefilter("script",function(f){void 0===f.cache&&(f.cache=!1);f.crossDomain&&(f.type="GET")});u.ajaxTransport("script",function(f){var m,r;if(f.crossDomain||f.scriptAttrs)return{send:function(v,z){m=u("<script>").attr(f.scriptAttrs||{}).prop({charset:f.scriptCharset,src:f.url}).on("load error",r=function(G){m.remove();r=null;G&&z("error"===G.type?404:200,G.type)});Ja.head.appendChild(m[0])},abort:function(){r&&r()}}});var Yc,Zc=[],vc=/(=)\?(?=&|$)|\?\?/;u.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var f=
Zc.pop()||u.expando+"_"+Uc++;return this[f]=!0,f}});u.ajaxPrefilter("json jsonp",function(f,m,r){var v,z,G,H=!1!==f.jsonp&&(vc.test(f.url)?"url":"string"==typeof f.data&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&vc.test(f.data)&&"data");if(H||"jsonp"===f.dataTypes[0])return v=f.jsonpCallback=za(f.jsonpCallback)?f.jsonpCallback():f.jsonpCallback,H?f[H]=f[H].replace(vc,"$1"+v):!1!==f.jsonp&&(f.url+=(tc.test(f.url)?"&":"?")+f.jsonp+"="+v),f.converters["script json"]=function(){return G||
u.error(v+" was not called"),G[0]},f.dataTypes[0]="json",z=d[v],d[v]=function(){G=arguments},r.always(function(){void 0===z?u(d).removeProp(v):d[v]=z;f[v]&&(f.jsonpCallback=m.jsonpCallback,Zc.push(v));G&&za(z)&&z(G[0]);G=z=void 0}),"script"});aa.createHTMLDocument=((Yc=Ja.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Yc.childNodes.length);u.parseHTML=function(f,m,r){return"string"!=typeof f?[]:("boolean"==typeof m&&(r=m,m=!1),m||(aa.createHTMLDocument?((v=
(m=Ja.implementation.createHTMLDocument("")).createElement("base")).href=Ja.location.href,m.head.appendChild(v)):m=Ja),G=!r&&[],(z=Mc.exec(f))?[m.createElement(z[1])]:(z=ja([f],m,G),G&&G.length&&u(G).remove(),u.merge([],z.childNodes)));var v,z,G};u.fn.load=function(f,m,r){var v,z,G,H=this,P=f.indexOf(" ");return-1<P&&(v=Ha(f.slice(P)),f=f.slice(0,P)),za(m)?(r=m,m=void 0):m&&"object"==typeof m&&(z="POST"),0<H.length&&u.ajax({url:f,type:z||"GET",dataType:"html",data:m}).done(function(Q){G=arguments;
H.html(v?u("<div>").append(u.parseHTML(Q)).find(v):Q)}).always(r&&function(Q,Z){H.each(function(){r.apply(this,G||[Q.responseText,Z,Q])})}),this};u.expr.pseudos.animated=function(f){return u.grep(u.timers,function(m){return f===m.elem}).length};u.offset={setOffset:function(f,m,r){var v,z,G,H=u.css(f,"position"),P=u(f),Q={};"static"===H&&(f.style.position="relative");var Z=P.offset();var ia=u.css(f,"top");var W=u.css(f,"left");("absolute"===H||"fixed"===H)&&-1<(ia+W).indexOf("auto")?(G=(v=P.position()).top,
z=v.left):(G=parseFloat(ia)||0,z=parseFloat(W)||0);za(m)&&(m=m.call(f,r,u.extend({},Z)));null!=m.top&&(Q.top=m.top-Z.top+G);null!=m.left&&(Q.left=m.left-Z.left+z);"using"in m?m.using.call(f,Q):P.css(Q)}};u.fn.extend({offset:function(f){if(arguments.length)return void 0===f?this:this.each(function(z){u.offset.setOffset(this,f,z)});var m,r,v=this[0];return v?v.getClientRects().length?(m=v.getBoundingClientRect(),r=v.ownerDocument.defaultView,{top:m.top+r.pageYOffset,left:m.left+r.pageXOffset}):{top:0,
left:0}:void 0},position:function(){if(this[0]){var f,m=this[0],r={top:0,left:0};if("fixed"===u.css(m,"position"))var v=m.getBoundingClientRect();else{v=this.offset();var z=m.ownerDocument;for(f=m.offsetParent||z.documentElement;f&&(f===z.body||f===z.documentElement)&&"static"===u.css(f,"position");)f=f.parentNode;f&&f!==m&&1===f.nodeType&&((r=u(f).offset()).top+=u.css(f,"borderTopWidth",!0),r.left+=u.css(f,"borderLeftWidth",!0))}return{top:v.top-r.top-u.css(m,"marginTop",!0),left:v.left-r.left-u.css(m,
"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var f=this.offsetParent;f&&"static"===u.css(f,"position");)f=f.offsetParent;return f||Sb})}});u.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(f,m){var r="pageYOffset"===m;u.fn[f]=function(v){return Kb(this,function(z,G,H){var P;if(xa(z)?P=z:9===z.nodeType&&(P=z.defaultView),void 0===H)return P?P[m]:z[G];P?P.scrollTo(r?P.pageXOffset:H,r?H:P.pageYOffset):z[G]=H},f,v,arguments.length)}});u.each(["top","left"],
function(f,m){u.cssHooks[m]=p(aa.pixelPosition,function(r,v){if(v)return v=k(r,m),mc.test(v)?u(r).position()[m]+"px":v})});u.each({Height:"height",Width:"width"},function(f,m){u.each({padding:"inner"+f,content:m,"":"outer"+f},function(r,v){u.fn[v]=function(z,G){var H=arguments.length&&(r||"boolean"!=typeof z),P=r||(!0===z||!0===G?"margin":"border");return Kb(this,function(Q,Z,ia){var W;return xa(Q)?0===v.indexOf("outer")?Q["inner"+f]:Q.document.documentElement["client"+f]:9===Q.nodeType?(W=Q.documentElement,
Math.max(Q.body["scroll"+f],W["scroll"+f],Q.body["offset"+f],W["offset"+f],W["client"+f])):void 0===ia?u.css(Q,Z,P):u.style(Q,Z,ia,P)},m,H?z:void 0,H)}})});u.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(f,m){u.fn[m]=function(r){return this.on(m,r)}});u.fn.extend({bind:function(f,m,r){return this.on(f,null,m,r)},unbind:function(f,m){return this.off(f,null,m)},delegate:function(f,m,r,v){return this.on(m,f,r,v)},undelegate:function(f,m,r){return 1===arguments.length?
this.off(f,"**"):this.off(m,f||"**",r)},hover:function(f,m){return this.mouseenter(f).mouseleave(m||f)}});u.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(f,m){u.fn[m]=function(r,v){return 0<arguments.length?this.on(m,null,r,v):this.trigger(m)}});var Vd=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;u.proxy=function(f,m){var r,v,z;if("string"==typeof m&&
(r=f[m],m=f,f=r),za(f))return v=gb.call(arguments,2),(z=function(){return f.apply(m||this,v.concat(gb.call(arguments)))}).guid=f.guid=f.guid||u.guid++,z};u.holdReady=function(f){f?u.readyWait++:u.ready(!0)};u.isArray=Array.isArray;u.parseJSON=JSON.parse;u.nodeName=t;u.isFunction=za;u.isWindow=xa;u.camelCase=O;u.type=S;u.now=Date.now;u.isNumeric=function(f){var m=u.type(f);return("number"===m||"string"===m)&&!isNaN(f-parseFloat(f))};u.trim=function(f){return null==f?"":(f+"").replace(Vd,"")};"function"==
typeof define&&define.amd&&define("jquery",[],function(){return u});var Wd=d.jQuery,Xd=d.$;return u.noConflict=function(f){return d.$===u&&(d.$=Xd),f&&d.jQuery===u&&(d.jQuery=Wd),u},"undefined"==typeof A&&(d.jQuery=d.$=u),u});
var dvJQuery=jQuery.noConflict(!0),DocuViewarejQueryPlugins={areRegistered:function(){return dvJQuery&&dvJQuery.fn&&dvJQuery.fn.HasDocuViewarePlugins?!0:!1},register:function(){DocuViewarejQueryPlugins.areRegistered()||(dvJQuery&&dvJQuery.fn&&dvJQuery.fn.jquery&&3<=parseInt(dvJQuery.fn.jquery)&&("undefined"==typeof dvJQuery.migrateMute&&(dvJQuery.migrateMute=!0),function(d,A){function L(a){x[a]||(x[a]=!0,d.migrateWarnings.push(a))}function S(a,C,J,b){Object.defineProperty(a,C,{configurable:!0,enumerable:!0,
get:function(){L(b);return J}})}d.migrateVersion="3.0.0";var x={};d.migrateWarnings=[];void 0===d.migrateTrace&&(d.migrateTrace=!0);d.migrateReset=function(){x={};d.migrateWarnings.length=0};"BackCompat"===document.compatMode&&L("jQuery is not compatible with Quirks Mode");var t=d.fn.init,h=d.isNumeric,l=d.find,q=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,y=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;d.fn.init=function(a){var C=Array.prototype.slice.call(arguments);"string"===
typeof a&&"#"===a&&(L("jQuery( '#' ) is not a valid selector"),C[0]=[]);return t.apply(this,C)};d.fn.init.prototype=d.fn;d.find=function(a){var C=Array.prototype.slice.call(arguments);if("string"===typeof a&&q.test(a))try{document.querySelector(a)}catch(J){a=a.replace(y,function(b,c,e,g){return"["+c+e+'"'+g+'"]'});try{document.querySelector(a),L("Attribute selector with '#' must be quoted: "+C[0]),C[0]=a}catch(b){L("Attribute selector with '#' was not fixed: "+C[0])}}return l.apply(this,C)};for(var D in l)Object.prototype.hasOwnProperty.call(l,
D)&&(d.find[D]=l[D]);d.fn.size=function(){L("jQuery.fn.size() is deprecated; use the .length property");return this.length};d.parseJSON=function(){L("jQuery.parseJSON is deprecated; use JSON.parse");return JSON.parse.apply(null,arguments)};d.isNumeric=function(a){var C=h(a),J=a&&a.toString();a=!d.isArray(a)&&0<=J-parseFloat(J)+1;C!==a&&L("jQuery.isNumeric() should not be called on constructed objects");return a};S(d,"unique",d.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort");S(d.expr,
"filters",d.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos");S(d.expr,":",d.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var K=d.ajax;d.ajax=function(){var a=K.apply(this,arguments);a.promise&&(S(a,"success",a.done,"jQXHR.success is deprecated and removed"),S(a,"error",a.fail,"jQXHR.error is deprecated and removed"),S(a,"complete",a.always,"jQXHR.complete is deprecated and removed"));return a};var M=d.fn.removeAttr,O=d.fn.toggleClass,R=/\S+/g;d.fn.removeAttr=function(a){var C=
this;d.each(a.match(R),function(J,b){d.expr.match.bool.test(b)&&(L("jQuery.fn.removeAttr no longer sets boolean properties: "+b),C.prop(b,!1))});return M.apply(this,arguments)};d.fn.toggleClass=function(a){if(void 0!==a&&"boolean"!==typeof a)return O.apply(this,arguments);L("jQuery.fn.toggleClass( boolean ) is deprecated");return this.each(function(){var C=this.getAttribute&&this.getAttribute("class")||"";C&&d.data(this,"__className__",C);this.setAttribute&&this.setAttribute("class",C||!1===a?"":
d.data(this,"__className__")||"")})};var Y=!1;d.swap&&d.each(["height","width","reliableMarginRight"],function(a,C){var J=d.cssHooks[C]&&d.cssHooks[C].get;J&&(d.cssHooks[C].get=function(){Y=!0;var b=J.apply(this,arguments);Y=!1;return b})});d.swap=function(a,C,J,b){var c,e={};Y||L("jQuery.swap() is undocumented and deprecated");for(c in C)e[c]=a.style[c],a.style[c]=C[c];J=J.apply(a,b||[]);for(c in C)a.style[c]=e[c];return J};var fa=d.data;d.data=function(a,C,J){var b;return C&&C!==d.camelCase(C)&&
(b=d.hasData(a)&&fa.call(this,a))&&C in b?(L("jQuery.data() always sets/gets camelCased names: "+C),2<arguments.length&&(b[C]=J),b[C]):fa.apply(this,arguments)};var ha=d.Tween.prototype.run;d.Tween.prototype.run=function(a){1<d.easing[this.easing].length&&(L('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),d.easing[this.easing]=d.easing[this.easing].bind(d.easing,a,this.options.duration*a,0,1,this.options.duration));ha.apply(this,arguments)};var sa=d.fn.load,
X=d.event.fix;d.event.props=[];d.event.fixHooks={};d.event.fix=function(a){var C=a.type;var J=this.fixHooks[C],b=d.event.props;if(b.length)for(L("jQuery.event.props are deprecated and removed: "+b.join());b.length;)d.event.addProp(b.pop());if(J&&!J._migrated_&&(J._migrated_=!0,L("jQuery.event.fixHooks are deprecated and removed: "+C),(b=J.props)&&b.length))for(;b.length;)d.event.addProp(b.pop());C=X.call(this,a);return J&&J.filter?J.filter(C,a):C};d.each(["load","unload","error"],function(a,C){d.fn[C]=
function(){var J=Array.prototype.slice.call(arguments,0);if("load"===C&&"string"===typeof J[0])return sa.apply(this,J);L("jQuery.fn."+C+"() is deprecated");J.splice(0,0,C);if(arguments.length)return this.on.apply(this,J);this.triggerHandler.apply(this,J);return this}});d(function(){d(document).triggerHandler("ready")});d.event.special.ready={setup:function(){this===document&&L("'ready' event is deprecated")}};d.fn.extend({bind:function(a,C,J){L("jQuery.fn.bind() is deprecated");return this.on(a,null,
C,J)},unbind:function(a,C){L("jQuery.fn.unbind() is deprecated");return this.off(a,null,C)},delegate:function(a,C,J,b){L("jQuery.fn.delegate() is deprecated");return this.on(C,a,J,b)},undelegate:function(a,C,J){L("jQuery.fn.undelegate() is deprecated");return 1===arguments.length?this.off(a,"**"):this.off(C,a||"**",J)}});var ja=d.fn.offset;d.fn.offset=function(){var a=this[0],C={top:0,left:0};return a&&a.nodeType?d.contains((a.ownerDocument||document).documentElement,a)?ja.apply(this,arguments):(L("jQuery.fn.offset() requires an element connected to a document"),
C):(L("jQuery.fn.offset() requires a valid DOM element"),C)};var ka=d.param;d.param=function(a,C){var J=d.ajaxSettings&&d.ajaxSettings.traditional;void 0===C&&J&&(L("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),C=J);return ka.call(this,a,C)};var ma=d.fn.andSelf||d.fn.addBack;d.fn.andSelf=function(){L("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return ma.apply(this,arguments)};var ra=d.Deferred,Ca=[["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),
"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),"rejected"],["notify","progress",d.Callbacks("memory"),d.Callbacks("memory")]];d.Deferred=function(a){var C=ra(),J=C.promise();C.pipe=J.pipe=function(){var b=arguments;L("deferred.pipe() is deprecated");return d.Deferred(function(c){d.each(Ca,function(e,g){var k=d.isFunction(b[e])&&b[e];C[g[1]](function(){var p=k&&k.apply(this,arguments);if(p&&d.isFunction(p.promise))p.promise().done(c.resolve).fail(c.reject).progress(c.notify);
else c[g[0]+"With"](this===J?c.promise():this,k?[p]:arguments)})});b=null}).promise()};a&&a.call(C,C);return C}}(dvJQuery,window)),function(d){function A(h,l){var q,y,D,K=h.nodeName.toLowerCase();return"area"===K?(q=h.parentNode,y=q.name,h.href&&y&&"map"===q.nodeName.toLowerCase()?(D=d("img[usemap='#"+y+"']")[0],!!D&&L(D)):!1):(/input|select|textarea|button|object/.test(K)?!h.disabled:"a"===K?h.href||l:l)&&L(h)}function L(h){return d.expr.filters.visible(h)&&!d(h).parents().addBack().filter(function(){return"hidden"===
d.css(this,"visibility")}).length}d.dvUi=d.dvUi||{};d.extend(d.dvUi,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});d.fn.extend({scrollParent:function(h){var l=this.css("position"),q="absolute"===l,y=h?/(auto|scroll|hidden)/:/(auto|scroll)/;h=this.parents().filter(function(){var D=d(this);return q&&"static"===D.css("position")?!1:y.test(D.css("overflow")+D.css("overflow-y")+
D.css("overflow-x"))}).eq(0);return"fixed"!==l&&h.length?h:d(this[0].ownerDocument||document)},uniqueId:function(){var h=0;return function(){return this.each(function(){this.id||(this.id="dvUi-id-"+ ++h)})}}(),removeUniqueId:function(){return this.each(function(){/^dvUi-id-\d+$/.test(this.id)&&d(this).removeAttr("id")})}});d.extend(d.expr[":"],{data:d.expr.createPseudo?d.expr.createPseudo(function(h){return function(l){return!!d.data(l,h)}}):function(h,l,q){return!!d.data(h,q[3])},focusable:function(h){return A(h,
!isNaN(d.attr(h,"tabindex")))},tabbable:function(h){var l=d.attr(h,"tabindex"),q=isNaN(l);return(q||0<=l)&&A(h,!q)}});d("<a>").outerWidth(1).jquery||d.each(["Width","Height"],function(h,l){function q(M,O,R,Y){return d.each(y,function(){O-=parseFloat(d.css(M,"padding"+this))||0;R&&(O-=parseFloat(d.css(M,"border"+this+"Width"))||0);Y&&(O-=parseFloat(d.css(M,"margin"+this))||0)}),O}var y="Width"===l?["Left","Right"]:["Top","Bottom"],D=l.toLowerCase(),K={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,
outerWidth:d.fn.outerWidth,outerHeight:d.fn.outerHeight};d.fn["inner"+l]=function(M){return void 0===M?K["inner"+l].call(this):this.each(function(){d(this).css(D,q(this,M)+"px")})};d.fn["outer"+l]=function(M,O){return"number"!=typeof M?K["outer"+l].call(this,M):this.each(function(){d(this).css(D,q(this,M,!0,O)+"px")})}});d.fn.addBack||(d.fn.addBack=function(h){return this.add(null==h?this.prevObject:this.prevObject.filter(h))});d("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(d.fn.removeData=
function(h){return function(l){return arguments.length?h.call(this,d.camelCase(l)):h.call(this)}}(d.fn.removeData));d.dvUi.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());d.fn.extend({focus:function(h){return function(l,q){return"number"==typeof l?this.each(function(){var y=this;setTimeout(function(){d(y).focus();q&&q.call(y)},l)}):h.apply(this,arguments)}}(d.fn.focus),disableSelection:function(){var h="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(h+
".dvUi-disableSelection",function(l){l.preventDefault()})}}(),enableSelection:function(){return this.unbind(".dvUi-disableSelection")},zIndex:function(h){if(void 0!==h)return this.css("zIndex",h);if(this.length){var l,q;for(h=d(this[0]);h.length&&h[0]!==document;){if(l=h.css("position"),("absolute"===l||"relative"===l||"fixed"===l)&&(q=parseInt(h.css("zIndex"),10),!isNaN(q)&&0!==q))return q;h=h.parent()}}return 0}});d.dvUi.plugin={add:function(h,l,q){var y;h=d.dvUi[h].prototype;for(y in q)h.plugins[y]=
h.plugins[y]||[],h.plugins[y].push([l,q[y]])},call:function(h,l,q,y){if((l=h.plugins[l])&&(y||h.element[0].parentNode&&11!==h.element[0].parentNode.nodeType))for(y=0;l.length>y;y++)h.options[l[y][0]]&&l[y][1].apply(h.element,q)}};var S=0,x=Array.prototype.slice;d.cleanData=function(h){return function(l){var q,y,D;for(D=0;null!=(y=l[D]);D++)try{(q=d._data(y,"events"))&&q.remove&&d(y).triggerHandler("remove")}catch(K){}h(l)}}(d.cleanData);d.widget=function(h,l,q){var y,D,K,M,O={},R=h.split(".")[0];
return h=h.split(".")[1],y=R+"-"+h,q||(q=l,l=d.Widget),d.expr[":"][y.toLowerCase()]=function(Y){return!!d.data(Y,y)},d[R]=d[R]||{},D=d[R][h],K=d[R][h]=function(Y,fa){return this._createWidget?(arguments.length&&this._createWidget(Y,fa),void 0):new K(Y,fa)},d.extend(K,D,{version:q.version,_proto:d.extend({},q),_childConstructors:[]}),M=new l,M.options=d.widget.extend({},M.options),d.each(q,function(Y,fa){return d.isFunction(fa)?(O[Y]=function(){var ha=function(){return l.prototype[Y].apply(this,arguments)},
sa=function(X){return l.prototype[Y].apply(this,X)};return function(){var X,ja=this._super,ka=this._superApply;return this._super=ha,this._superApply=sa,X=fa.apply(this,arguments),this._super=ja,this._superApply=ka,X}}(),void 0):(O[Y]=fa,void 0)}),K.prototype=d.widget.extend(M,{widgetEventPrefix:D?M.widgetEventPrefix||h:h},O,{constructor:K,namespace:R,widgetName:h,widgetFullName:y}),D?(d.each(D._childConstructors,function(Y,fa){Y=fa.prototype;d.widget(Y.namespace+"."+Y.widgetName,K,fa._proto)}),delete D._childConstructors):
l._childConstructors.push(K),d.widget.bridge(h,K),K};d.widget.extend=function(h){for(var l,q,y=x.call(arguments,1),D=0,K=y.length;K>D;D++)for(l in y[D])q=y[D][l],y[D].hasOwnProperty(l)&&void 0!==q&&(h[l]=d.isPlainObject(q)?d.isPlainObject(h[l])?d.widget.extend({},h[l],q):d.widget.extend({},q):q);return h};d.widget.bridge=function(h,l){var q=l.prototype.widgetFullName||h;d.fn[h]=function(y){var D="string"==typeof y,K=x.call(arguments,1),M=this;return y=!D&&K.length?d.widget.extend.apply(null,[y].concat(K)):
y,D?this.each(function(){var O,R=d.data(this,q);return"instance"===y?(M=R,!1):R?d.isFunction(R[y])&&"_"!==y.charAt(0)?(O=R[y].apply(R,K),O!==R&&void 0!==O?(M=O&&O.jquery?M.pushStack(O.get()):O,!1):void 0):d.error("no such method '"+y+"' for "+h+" widget instance"):d.error("cannot call methods on "+h+" prior to initialization; attempted to call method '"+y+"'")}):this.each(function(){var O=d.data(this,q);O?(O.option(y||{}),O._init&&O._init()):d.data(this,q,new l(y,this))}),M}};d.Widget=function(){};
d.Widget._childConstructors=[];d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(h,l){l=d(l||this.defaultElement||this)[0];this.element=d(l);this.uuid=S++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=d();this.hoverable=d();this.focusable=d();l!==this&&(d.data(l,this.widgetFullName,this),this._on(!0,this.element,{remove:function(q){q.target===l&&this.destroy()}}),this.document=d(l.style?l.ownerDocument:
l.document||l),this.window=d(this.document[0].defaultView||this.document[0].parentWindow));this.options=d.widget.extend({},this.options,this._getCreateOptions(),h);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:d.noop,_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(d.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+
"-disabled dvUi-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("dvUi-state-hover");this.focusable.removeClass("dvUi-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(h,l){var q,y,D=h;if(0===arguments.length)return d.widget.extend({},this.options);if("string"==typeof h)if(D={},q=h.split("."),h=q.shift(),q.length){var K=D[h]=d.widget.extend({},this.options[h]);for(y=0;q.length-1>y;y++)K[q[y]]=K[q[y]]||{},K=K[q[y]];if(h=q.pop(),
1===arguments.length)return void 0===K[h]?null:K[h];K[h]=l}else{if(1===arguments.length)return void 0===this.options[h]?null:this.options[h];D[h]=l}return this._setOptions(D),this},_setOptions:function(h){for(var l in h)this._setOption(l,h[l]);return this},_setOption:function(h,l){return this.options[h]=l,"disabled"===h&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!l),l&&(this.hoverable.removeClass("dvUi-state-hover"),this.focusable.removeClass("dvUi-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},
disable:function(){return this._setOptions({disabled:!0})},_on:function(h,l,q){var y,D=this;"boolean"!=typeof h&&(q=l,l=h,h=!1);q?(l=y=d(l),this.bindings=this.bindings.add(l)):(q=l,l=this.element,y=this.widget());d.each(q,function(K,M){function O(){return h||!0!==D.options.disabled&&!d(this).hasClass("dvUi-state-disabled")?("string"==typeof M?D[M]:M).apply(D,arguments):void 0}"string"!=typeof M&&(O.guid=M.guid=M.guid||O.guid||d.guid++);var R=K.match(/^([\w:-]*)\s*(.*)$/);K=R[1]+D.eventNamespace;(R=
R[2])?y.delegate(R,K,O):l.bind(K,O)})},_off:function(h,l){l=(l||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;h.unbind(l).undelegate(l);this.bindings=d(this.bindings.not(h).get());this.focusable=d(this.focusable.not(h).get());this.hoverable=d(this.hoverable.not(h).get())},_delay:function(h,l){var q=this;return setTimeout(function(){return("string"==typeof h?q[h]:h).apply(q,arguments)},l||0)},_hoverable:function(h){this.hoverable=this.hoverable.add(h);this._on(h,{mouseenter:function(l){d(l.currentTarget).addClass("dvUi-state-hover")},
mouseleave:function(l){d(l.currentTarget).removeClass("dvUi-state-hover")}})},_focusable:function(h){this.focusable=this.focusable.add(h);this._on(h,{focusin:function(l){d(l.currentTarget).addClass("dvUi-state-focus")},focusout:function(l){d(l.currentTarget).removeClass("dvUi-state-focus")}})},_trigger:function(h,l,q){var y,D,K=this.options[h];if(q=q||{},l=d.Event(l),l.type=(h===this.widgetEventPrefix?h:this.widgetEventPrefix+h).toLowerCase(),l.target=this.element[0],D=l.originalEvent)for(y in D)y in
l||(l[y]=D[y]);return this.element.trigger(l,q),!(d.isFunction(K)&&!1===K.apply(this.element[0],[l].concat(q))||l.isDefaultPrevented())}};d.each({show:"fadeIn",hide:"fadeOut"},function(h,l){d.Widget.prototype["_"+h]=function(q,y,D){"string"==typeof y&&(y={effect:y});var K=y?!0===y||"number"==typeof y?l:y.effect||l:h;y=y||{};"number"==typeof y&&(y={duration:y});var M=!d.isEmptyObject(y);y.complete=D;y.delay&&q.delay(y.delay);M&&d.effects&&d.effects.effect[K]?q[h](y):K!==h&&q[K]?q[K](y.duration,y.easing,
D):q.queue(function(O){d(this)[h]();D&&D.call(q[0]);O()})}});d.widget;var t=!1;d(document).mouseup(function(){t=!1});d.widget("dvUi.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var h=this;this.element.bind("mousedown."+this.widgetName,function(l){return h._mouseDown(l)}).bind("click."+this.widgetName,function(l){return!0===d.data(l.target,h.widgetName+".preventClickEvent")?(d.removeData(l.target,h.widgetName+".preventClickEvent"),
l.stopImmediatePropagation(),!1):void 0});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(h){if(!t){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(h);this._mouseDownEvent=h;var l=this,q=1===h.which,y="string"==typeof this.options.cancel&&h.target.nodeName?d(h.target).closest(this.options.cancel).length:
!1;return q&&!y&&this._mouseCapture(h)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){l.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(h)&&this._mouseDelayMet(h)&&(this._mouseStarted=!1!==this._mouseStart(h),!this._mouseStarted)?(h.preventDefault(),!0):(!0===d.data(h.target,this.widgetName+".preventClickEvent")&&d.removeData(h.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(D){return l._mouseMove(D)},
this._mouseUpDelegate=function(D){return l._mouseUp(D)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),h.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(h){return this._mouseMoved&&(d.dvUi.ie&&(!document.documentMode||9>document.documentMode)&&!h.button||!h.which)?this._mouseUp(h):((h.which||h.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(h),h.preventDefault()):(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)&&
(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,h),this._mouseStarted?this._mouseDrag(h):this._mouseUp(h)),!this._mouseStarted))},_mouseUp:function(h){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,h.target===this._mouseDownEvent.target&&d.data(h.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(h)),t=!1,!1},_mouseDistanceMet:function(h){return Math.max(Math.abs(this._mouseDownEvent.pageX-
h.pageX),Math.abs(this._mouseDownEvent.pageY-h.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});(function(){function h(X,ja,ka){return[parseFloat(X[0])*(ha.test(X[0])?ja/100:1),parseFloat(X[1])*(ha.test(X[1])?ka/100:1)]}function l(X){var ja=X[0];return 9===ja.nodeType?{width:X.width(),height:X.height(),offset:{top:0,left:0}}:d.isWindow(ja)?{width:X.width(),
height:X.height(),offset:{top:X.scrollTop(),left:X.scrollLeft()}}:ja.preventDefault?{width:0,height:0,offset:{top:ja.pageY,left:ja.pageX}}:{width:X.outerWidth(),height:X.outerHeight(),offset:X.offset()}}d.dvUi=d.dvUi||{};var q,y,D=Math.max,K=Math.abs,M=Math.round,O=/left|center|right/,R=/top|center|bottom/,Y=/[\+\-]\d+(\.[\d]+)?%?/,fa=/^\w+/,ha=/%$/,sa=d.fn.position;d.position={scrollbarWidth:function(){if(void 0!==q)return q;var X,ja,ka=d("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
ma=ka.children()[0];return d("body").append(ka),X=ma.offsetWidth,ka.css("overflow","scroll"),ja=ma.offsetWidth,X===ja&&(ja=ka[0].clientWidth),ka.remove(),q=X-ja},getScrollInfo:function(X){var ja=X.isWindow||X.isDocument?"":X.element.css("overflow-x"),ka=X.isWindow||X.isDocument?"":X.element.css("overflow-y");ja="scroll"===ja||"auto"===ja&&X.width<X.element[0].scrollWidth;return{width:"scroll"===ka||"auto"===ka&&X.height<X.element[0].scrollHeight?d.position.scrollbarWidth():0,height:ja?d.position.scrollbarWidth():
0}},getWithinInfo:function(X){X=d(X||window);var ja=d.isWindow(X[0]),ka=!!X[0]&&9===X[0].nodeType;return{element:X,isWindow:ja,isDocument:ka,offset:X.offset()||{left:0,top:0},scrollLeft:X.scrollLeft(),scrollTop:X.scrollTop(),width:ja||ka?X.width():X.outerWidth(),height:ja||ka?X.height():X.outerHeight()}}};d.fn.position=function(X){if(!X||!X.of)return sa.apply(this,arguments);X=d.extend({},X);var ja,ka,ma,ra,Ca,a,C=d(X.of),J=d.position.getWithinInfo(X.within),b=d.position.getScrollInfo(J),c=(X.collision||
"flip").split(" "),e={};return a=l(C),C[0].preventDefault&&(X.at="left top"),ka=a.width,ma=a.height,ra=a.offset,Ca=d.extend({},ra),d.each(["my","at"],function(){var g=(X[this]||"").split(" ");1===g.length&&(g=O.test(g[0])?g.concat(["center"]):R.test(g[0])?["center"].concat(g):["center","center"]);g[0]=O.test(g[0])?g[0]:"center";g[1]=R.test(g[1])?g[1]:"center";var k=Y.exec(g[0]);var p=Y.exec(g[1]);e[this]=[k?k[0]:0,p?p[0]:0];X[this]=[fa.exec(g[0])[0],fa.exec(g[1])[0]]}),1===c.length&&(c[1]=c[0]),"right"===
X.at[0]?Ca.left+=ka:"center"===X.at[0]&&(Ca.left+=ka/2),"bottom"===X.at[1]?Ca.top+=ma:"center"===X.at[1]&&(Ca.top+=ma/2),ja=h(e.at,ka,ma),Ca.left+=ja[0],Ca.top+=ja[1],this.each(function(){var g,k=d(this),p=k.outerWidth(),n=k.outerHeight(),w=parseInt(d.css(this,"marginLeft"),10)||0,B=parseInt(d.css(this,"marginTop"),10)||0,I=p+w+(parseInt(d.css(this,"marginRight"),10)||0)+b.width,E=n+B+(parseInt(d.css(this,"marginBottom"),10)||0)+b.height,V=d.extend({},Ca),ba=h(e.my,k.outerWidth(),k.outerHeight());
"right"===X.my[0]?V.left-=p:"center"===X.my[0]&&(V.left-=p/2);"bottom"===X.my[1]?V.top-=n:"center"===X.my[1]&&(V.top-=n/2);V.left+=ba[0];V.top+=ba[1];y||(V.left=M(V.left),V.top=M(V.top));var da={marginLeft:w,marginTop:B};d.each(["left","top"],function(ea,la){d.dvUi.position[c[ea]]&&d.dvUi.position[c[ea]][la](V,{targetWidth:ka,targetHeight:ma,elemWidth:p,elemHeight:n,collisionPosition:da,collisionWidth:I,collisionHeight:E,offset:[ja[0]+ba[0],ja[1]+ba[1]],my:X.my,at:X.at,within:J,elem:k})});X.using&&
(g=function(ea){var la=ra.left-V.left,Ha=la+ka-p,wa=ra.top-V.top,va=wa+ma-n,ua={target:{element:C,left:ra.left,top:ra.top,width:ka,height:ma},element:{element:k,left:V.left,top:V.top,width:p,height:n},horizontal:0>Ha?"left":0<la?"right":"center",vertical:0>va?"top":0<wa?"bottom":"middle"};p>ka&&ka>K(la+Ha)&&(ua.horizontal="center");n>ma&&ma>K(wa+va)&&(ua.vertical="middle");ua.important=D(K(la),K(Ha))>D(K(wa),K(va))?"horizontal":"vertical";X.using.call(this,ea,ua)});k.offset(d.extend(V,{using:g}))})};
d.dvUi.position={fit:{left:function(X,ja){var ka,ma=ja.within,ra=ma.isWindow?ma.scrollLeft:ma.offset.left;ma=ma.width;var Ca=X.left-ja.collisionPosition.marginLeft,a=ra-Ca,C=Ca+ja.collisionWidth-ma-ra;ja.collisionWidth>ma?0<a&&0>=C?(ka=X.left+a+ja.collisionWidth-ma-ra,X.left+=a-ka):X.left=0<C&&0>=a?ra:a>C?ra+ma-ja.collisionWidth:ra:0<a?X.left+=a:0<C?X.left-=C:X.left=D(X.left-Ca,X.left)},top:function(X,ja){var ka,ma=ja.within;ma=ma.isWindow?ma.scrollTop:ma.offset.top;var ra=ja.within.height,Ca=X.top-
ja.collisionPosition.marginTop,a=ma-Ca,C=Ca+ja.collisionHeight-ra-ma;ja.collisionHeight>ra?0<a&&0>=C?(ka=X.top+a+ja.collisionHeight-ra-ma,X.top+=a-ka):X.top=0<C&&0>=a?ma:a>C?ma+ra-ja.collisionHeight:ma:0<a?X.top+=a:0<C?X.top-=C:X.top=D(X.top-Ca,X.top)}},flip:{left:function(X,ja){var ka,ma,ra=ja.within,Ca=ra.offset.left+ra.scrollLeft,a=ra.width;ra=ra.isWindow?ra.scrollLeft:ra.offset.left;var C=X.left-ja.collisionPosition.marginLeft,J=C-ra;C=C+ja.collisionWidth-a-ra;var b="left"===ja.my[0]?-ja.elemWidth:
"right"===ja.my[0]?ja.elemWidth:0,c="left"===ja.at[0]?ja.targetWidth:"right"===ja.at[0]?-ja.targetWidth:0,e=-2*ja.offset[0];0>J?(ka=X.left+b+c+e+ja.collisionWidth-a-Ca,(0>ka||K(J)>ka)&&(X.left+=b+c+e)):0<C&&(ma=X.left-ja.collisionPosition.marginLeft+b+c+e-ra,(0<ma||C>K(ma))&&(X.left+=b+c+e))},top:function(X,ja){var ka,ma,ra=ja.within,Ca=ra.offset.top+ra.scrollTop,a=ra.height;ra=ra.isWindow?ra.scrollTop:ra.offset.top;var C=X.top-ja.collisionPosition.marginTop,J=C-ra;C=C+ja.collisionHeight-a-ra;var b=
"top"===ja.my[1]?-ja.elemHeight:"bottom"===ja.my[1]?ja.elemHeight:0,c="top"===ja.at[1]?ja.targetHeight:"bottom"===ja.at[1]?-ja.targetHeight:0,e=-2*ja.offset[1];0>J?(ma=X.top+b+c+e+ja.collisionHeight-a-Ca,X.top+b+c+e>J&&(0>ma||K(J)>ma)&&(X.top+=b+c+e)):0<C&&(ka=X.top-ja.collisionPosition.marginTop+b+c+e-ra,X.top+b+c+e>C&&(0<ka||C>K(ka))&&(X.top+=b+c+e))}},flipfit:{left:function(){d.dvUi.position.flip.left.apply(this,arguments);d.dvUi.position.fit.left.apply(this,arguments)},top:function(){d.dvUi.position.flip.top.apply(this,
arguments);d.dvUi.position.fit.top.apply(this,arguments)}}};(function(){var X,ja=document.getElementsByTagName("body")[0];var ka=document.createElement("div");var ma=document.createElement(ja?"div":"body");var ra={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};ja&&d.extend(ra,{position:"absolute",left:"-1000px",top:"-1000px"});for(X in ra)ma.style[X]=ra[X];ma.appendChild(ka);ra=ja||document.documentElement;ra.insertBefore(ma,ra.firstChild);ka.style.cssText="position: absolute; left: 10.7432222px;";
ka=d(ka).offset().left;y=10<ka&&11>ka;ma.innerHTML="";ra.removeChild(ma)})()})();d.dvUi.position;d.widget("dvUi.draggable",d.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,
stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this.element.addClass("dvUi-draggable");this.options.disabled&&this.element.addClass("dvUi-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(h,l){this._super(h,l);"handle"===h&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".dvUi-draggable-dragging")?
(this.destroyOnClear=!0,void 0):(this.element.removeClass("dvUi-draggable dvUi-draggable-dragging dvUi-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(h){var l=this.options;return this._blurActiveElement(h),this.helper||l.disabled||0<d(h.target).closest(".dvUi-resizable-handle").length?!1:(this.handle=this._getHandle(h),this.handle?(this._blockFrames(!0===l.iframeFix?"iframe":l.iframeFix),!0):!1)},_blockFrames:function(h){this.iframeBlocks=this.document.find(h).map(function(){var l=
d(this);return d("<div>").css("position","absolute").appendTo(l.parent()).outerWidth(l.outerWidth()).outerHeight(l.outerHeight()).offset(l.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(h){var l=this.document[0];if(this.handleElement.is(h.target))try{l.activeElement&&"body"!==l.activeElement.nodeName.toLowerCase()&&d(l.activeElement).blur()}catch(q){}},_mouseStart:function(h){var l=this.options;return this.helper=
this._createHelper(h),this.helper.addClass("dvUi-draggable-dragging"),this._cacheHelperProportions(),d.dvUi.ddmanager&&(d.dvUi.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===d(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(h),this.originalPosition=
this.position=this._generatePosition(h,!1),this.originalPageX=h.pageX,this.originalPageY=h.pageY,l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this._setContainment(),!1===this._trigger("start",h)?(this._clear(),!1):(this._cacheHelperProportions(),d.dvUi.ddmanager&&!l.dropBehaviour&&d.dvUi.ddmanager.prepareOffsets(this,h),this._normalizeRightBottom(),this._mouseDrag(h,!0),d.dvUi.ddmanager&&d.dvUi.ddmanager.dragStart(this,h),!0)},_refreshOffsets:function(h){this.offset={top:this.positionAbs.top-
this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:h.pageX-this.offset.left,top:h.pageY-this.offset.top}},_mouseDrag:function(h,l){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(h,!0),this.positionAbs=this._convertPositionTo("absolute"),!l){l=this._uiHash();if(!1===this._trigger("drag",h,l))return this._mouseUp({}),!1;this.position=
l.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",d.dvUi.ddmanager&&d.dvUi.ddmanager.drag(this,h),!1},_mouseStop:function(h){var l=this,q=!1;return d.dvUi.ddmanager&&!this.options.dropBehaviour&&(q=d.dvUi.ddmanager.drop(this,h)),this.dropped&&(q=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!q||"valid"===this.options.revert&&q||!0===this.options.revert||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,
q)?d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==l._trigger("stop",h)&&l._clear()}):!1!==this._trigger("stop",h)&&this._clear(),!1},_mouseUp:function(h){return this._unblockFrames(),d.dvUi.ddmanager&&d.dvUi.ddmanager.dragStop(this,h),this.handleElement.is(h.target)&&this.element.focus(),d.dvUi.mouse.prototype._mouseUp.call(this,h)},cancel:function(){return this.helper.is(".dvUi-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(h){return this.options.handle?
!!d(h.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("dvUi-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("dvUi-draggable-handle")},_createHelper:function(h){var l=this.options,q=d.isFunction(l.helper);h=q?d(l.helper.apply(this.element[0],[h])):"clone"===l.helper?this.element.clone().removeAttr("id"):
this.element;return h.parents("body").length||h.appendTo("parent"===l.appendTo?this.element[0].parentNode:l.appendTo),q&&h[0]===this.element[0]&&this._setPositionRelative(),h[0]===this.element[0]||/(fixed|absolute)/.test(h.css("position"))||h.css("position","absolute"),h},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(h){"string"==typeof h&&(h=h.split(" "));d.isArray(h)&&(h={left:+h[0],
top:+h[1]||0});"left"in h&&(this.offset.click.left=h.left+this.margins.left);"right"in h&&(this.offset.click.left=this.helperProportions.width-h.right+this.margins.left);"top"in h&&(this.offset.click.top=h.top+this.margins.top);"bottom"in h&&(this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top)},_isRootNode:function(h){return/(html|body)/i.test(h.tagName)||h===this.document[0]},_getParentOffset:function(){var h=this.offsetParent.offset(),l=this.document[0];return"absolute"===
this.cssPosition&&this.scrollParent[0]!==l&&d.contains(this.scrollParent[0],this.offsetParent[0])&&(h.left+=this.scrollParent.scrollLeft(),h.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(h={top:0,left:0}),{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var h=this.element.position(),l=this._isRootNode(this.scrollParent[0]);
return{top:h.top-(parseInt(this.helper.css("top"),10)||0)+(l?0:this.scrollParent.scrollTop()),left:h.left-(parseInt(this.helper.css("left"),10)||0)+(l?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var h,l,q,y=this.options,D=this.document[0];return this.relativeContainer=null,y.containment?"window"===y.containment?(this.containment=[d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,d(window).scrollLeft()+d(window).width()-this.helperProportions.width-this.margins.left,d(window).scrollTop()+(d(window).height()||D.body.parentNode.scrollHeight)-
this.helperProportions.height-this.margins.top],void 0):"document"===y.containment?(this.containment=[0,0,d(D).width()-this.helperProportions.width-this.margins.left,(d(D).height()||D.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):y.containment.constructor===Array?(this.containment=y.containment,void 0):("parent"===y.containment&&(y.containment=this.helper[0].parentNode),l=d(y.containment),q=l[0],q&&(h=/(scroll|auto)/.test(l.css("overflow")),this.containment=
[(parseInt(l.css("borderLeftWidth"),10)||0)+(parseInt(l.css("paddingLeft"),10)||0),(parseInt(l.css("borderTopWidth"),10)||0)+(parseInt(l.css("paddingTop"),10)||0),(h?Math.max(q.scrollWidth,q.offsetWidth):q.offsetWidth)-(parseInt(l.css("borderRightWidth"),10)||0)-(parseInt(l.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(h?Math.max(q.scrollHeight,q.offsetHeight):q.offsetHeight)-(parseInt(l.css("borderBottomWidth"),10)||0)-(parseInt(l.css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=l),void 0):(this.containment=null,void 0)},_convertPositionTo:function(h,l){l||=this.position;h="absolute"===h?1:-1;var q=this._isRootNode(this.scrollParent[0]);return{top:l.top+this.offset.relative.top*h+this.offset.parent.top*h-("fixed"===this.cssPosition?-this.offset.scroll.top:q?0:this.offset.scroll.top)*h,left:l.left+this.offset.relative.left*h+this.offset.parent.left*h-("fixed"===this.cssPosition?
-this.offset.scroll.left:q?0:this.offset.scroll.left)*h}},_generatePosition:function(h,l){var q,y,D,K,M=this.options,O=this._isRootNode(this.scrollParent[0]),R=h.pageX,Y=h.pageY;return O&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),l&&(this.containment&&(this.relativeContainer?(y=this.relativeContainer.offset(),q=[this.containment[0]+y.left,this.containment[1]+y.top,this.containment[2]+y.left,this.containment[3]+y.top]):q=this.containment,
h.pageX-this.offset.click.left<q[0]&&(R=q[0]+this.offset.click.left),h.pageY-this.offset.click.top<q[1]&&(Y=q[1]+this.offset.click.top),h.pageX-this.offset.click.left>q[2]&&(R=q[2]+this.offset.click.left),h.pageY-this.offset.click.top>q[3]&&(Y=q[3]+this.offset.click.top)),M.grid&&(D=M.grid[1]?this.originalPageY+Math.round((Y-this.originalPageY)/M.grid[1])*M.grid[1]:this.originalPageY,Y=q?D-this.offset.click.top>=q[1]||D-this.offset.click.top>q[3]?D:D-this.offset.click.top>=q[1]?D-M.grid[1]:D+M.grid[1]:
D,K=M.grid[0]?this.originalPageX+Math.round((R-this.originalPageX)/M.grid[0])*M.grid[0]:this.originalPageX,R=q?K-this.offset.click.left>=q[0]||K-this.offset.click.left>q[2]?K:K-this.offset.click.left>=q[0]?K-M.grid[0]:K+M.grid[0]:K),"y"===M.axis&&(R=this.originalPageX),"x"===M.axis&&(Y=this.originalPageY)),{top:Y-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:O?0:this.offset.scroll.top),left:R-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:O?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("dvUi-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));
"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(h,l,q){return q=q||this._uiHash(),d.dvUi.plugin.call(this,h,[l,q,this],!0),/^(drag|start|stop)/.test(h)&&(this.positionAbs=this._convertPositionTo("absolute"),q.offset=this.positionAbs),d.Widget.prototype._trigger.call(this,h,l,q)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,
offset:this.positionAbs}}});d.dvUi.plugin.add("draggable","connectToSortable",{start:function(h,l,q){var y=d.extend({},l,{item:q.element});q.sortables=[];d(q.options.connectToSortable).each(function(){var D=d(this).sortable("instance");D&&!D.options.disabled&&(q.sortables.push(D),D.refreshPositions(),D._trigger("activate",h,y))})},stop:function(h,l,q){var y=d.extend({},l,{item:q.element});q.cancelHelperRemoval=!1;d.each(q.sortables,function(){this.isOver?(this.isOver=0,q.cancelHelperRemoval=!0,this.cancelHelperRemoval=
!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(h),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",h,y))})},drag:function(h,l,q){d.each(q.sortables,function(){var y=!1,D=this;D.positionAbs=q.positionAbs;D.helperProportions=q.helperProportions;D.offset.click=q.offset.click;D._intersectsWith(D.containerCache)&&(y=!0,d.each(q.sortables,function(){return this.positionAbs=
q.positionAbs,this.helperProportions=q.helperProportions,this.offset.click=q.offset.click,this!==D&&this._intersectsWith(this.containerCache)&&d.contains(D.element[0],this.element[0])&&(y=!1),y}));y?(D.isOver||(D.isOver=1,D.currentItem=l.helper.appendTo(D.element).data("dvUi-sortable-item",!0),D.options._helper=D.options.helper,D.options.helper=function(){return l.helper[0]},h.target=D.currentItem[0],D._mouseCapture(h,!0),D._mouseStart(h,!0,!0),D.offset.click.top=q.offset.click.top,D.offset.click.left=
q.offset.click.left,D.offset.parent.left-=q.offset.parent.left-D.offset.parent.left,D.offset.parent.top-=q.offset.parent.top-D.offset.parent.top,q._trigger("toSortable",h),q.dropped=D.element,d.each(q.sortables,function(){this.refreshPositions()}),q.currentItem=q.element,D.fromOutside=q),D.currentItem&&(D._mouseDrag(h),l.position=D.position)):D.isOver&&(D.isOver=0,D.cancelHelperRemoval=!0,D.options._revert=D.options.revert,D.options.revert=!1,D._trigger("out",h,D._uiHash(D)),D._mouseStop(h,!0),D.options.revert=
D.options._revert,D.options.helper=D.options._helper,D.placeholder&&D.placeholder.remove(),q._refreshOffsets(h),l.position=q._generatePosition(h,!0),q._trigger("fromSortable",h),q.dropped=!1,d.each(q.sortables,function(){this.refreshPositions()}))})}});d.dvUi.plugin.add("draggable","cursor",{start:function(h,l,q){h=d("body");q=q.options;h.css("cursor")&&(q._cursor=h.css("cursor"));h.css("cursor",q.cursor)},stop:function(h,l,q){h=q.options;h._cursor&&d("body").css("cursor",h._cursor)}});d.dvUi.plugin.add("draggable",
"opacity",{start:function(h,l,q){h=d(l.helper);q=q.options;h.css("opacity")&&(q._opacity=h.css("opacity"));h.css("opacity",q.opacity)},stop:function(h,l,q){h=q.options;h._opacity&&d(l.helper).css("opacity",h._opacity)}});d.dvUi.plugin.add("draggable","scroll",{start:function(h,l,q){q.scrollParentNotHidden||(q.scrollParentNotHidden=q.helper.scrollParent(!1));q.scrollParentNotHidden[0]!==q.document[0]&&"HTML"!==q.scrollParentNotHidden[0].tagName&&(q.overflowOffset=q.scrollParentNotHidden.offset())},
drag:function(h,l,q){l=q.options;var y=!1,D=q.scrollParentNotHidden[0],K=q.document[0];D!==K&&"HTML"!==D.tagName?(l.axis&&"x"===l.axis||(q.overflowOffset.top+D.offsetHeight-h.pageY<l.scrollSensitivity?D.scrollTop=y=D.scrollTop+l.scrollSpeed:h.pageY-q.overflowOffset.top<l.scrollSensitivity&&(D.scrollTop=y=D.scrollTop-l.scrollSpeed)),l.axis&&"y"===l.axis||(q.overflowOffset.left+D.offsetWidth-h.pageX<l.scrollSensitivity?D.scrollLeft=y=D.scrollLeft+l.scrollSpeed:h.pageX-q.overflowOffset.left<l.scrollSensitivity&&
(D.scrollLeft=y=D.scrollLeft-l.scrollSpeed))):(l.axis&&"x"===l.axis||(h.pageY-d(K).scrollTop()<l.scrollSensitivity?y=d(K).scrollTop(d(K).scrollTop()-l.scrollSpeed):d(window).height()-(h.pageY-d(K).scrollTop())<l.scrollSensitivity&&(y=d(K).scrollTop(d(K).scrollTop()+l.scrollSpeed))),l.axis&&"y"===l.axis||(h.pageX-d(K).scrollLeft()<l.scrollSensitivity?y=d(K).scrollLeft(d(K).scrollLeft()-l.scrollSpeed):d(window).width()-(h.pageX-d(K).scrollLeft())<l.scrollSensitivity&&(y=d(K).scrollLeft(d(K).scrollLeft()+
l.scrollSpeed))));!1!==y&&d.dvUi.ddmanager&&!l.dropBehaviour&&d.dvUi.ddmanager.prepareOffsets(q,h)}});d.dvUi.plugin.add("draggable","snap",{start:function(h,l,q){h=q.options;q.snapElements=[];d(h.snap.constructor!==String?h.snap.items||":data(dvUi-draggable)":h.snap).each(function(){var y=d(this),D=y.offset();this!==q.element[0]&&q.snapElements.push({item:this,width:y.outerWidth(),height:y.outerHeight(),top:D.top,left:D.left})})},drag:function(h,l,q){var y,D,K,M,O,R,Y=q.options,fa=Y.snapTolerance,
ha=l.offset.left,sa=ha+q.helperProportions.width,X=l.offset.top,ja=X+q.helperProportions.height;for(O=q.snapElements.length-1;0<=O;O--){var ka=q.snapElements[O].left-q.margins.left;var ma=ka+q.snapElements[O].width;var ra=q.snapElements[O].top-q.margins.top;var Ca=ra+q.snapElements[O].height;ka-fa>sa||ha>ma+fa||ra-fa>ja||X>Ca+fa||!d.contains(q.snapElements[O].item.ownerDocument,q.snapElements[O].item)?(q.snapElements[O].snapping&&q.options.snap.release&&q.options.snap.release.call(q.element,h,d.extend(q._uiHash(),
{snapItem:q.snapElements[O].item})),q.snapElements[O].snapping=!1):("inner"!==Y.snapMode&&(y=fa>=Math.abs(ra-ja),D=fa>=Math.abs(Ca-X),K=fa>=Math.abs(ka-sa),M=fa>=Math.abs(ma-ha),y&&(l.position.top=q._convertPositionTo("relative",{top:ra-q.helperProportions.height,left:0}).top),D&&(l.position.top=q._convertPositionTo("relative",{top:Ca,left:0}).top),K&&(l.position.left=q._convertPositionTo("relative",{top:0,left:ka-q.helperProportions.width}).left),M&&(l.position.left=q._convertPositionTo("relative",
{top:0,left:ma}).left)),R=y||D||K||M,"outer"!==Y.snapMode&&(y=fa>=Math.abs(ra-X),D=fa>=Math.abs(Ca-ja),K=fa>=Math.abs(ka-ha),M=fa>=Math.abs(ma-sa),y&&(l.position.top=q._convertPositionTo("relative",{top:ra,left:0}).top),D&&(l.position.top=q._convertPositionTo("relative",{top:Ca-q.helperProportions.height,left:0}).top),K&&(l.position.left=q._convertPositionTo("relative",{top:0,left:ka}).left),M&&(l.position.left=q._convertPositionTo("relative",{top:0,left:ma-q.helperProportions.width}).left)),!q.snapElements[O].snapping&&
(y||D||K||M||R)&&q.options.snap.snap&&q.options.snap.snap.call(q.element,h,d.extend(q._uiHash(),{snapItem:q.snapElements[O].item})),q.snapElements[O].snapping=y||D||K||M||R)}}});d.dvUi.plugin.add("draggable","stack",{start:function(h,l,q){var y;h=d.makeArray(d(q.options.stack)).sort(function(D,K){return(parseInt(d(D).css("zIndex"),10)||0)-(parseInt(d(K).css("zIndex"),10)||0)});h.length&&(y=parseInt(d(h[0]).css("zIndex"),10)||0,d(h).each(function(D){d(this).css("zIndex",y+D)}),this.css("zIndex",y+
h.length))}});d.dvUi.plugin.add("draggable","zIndex",{start:function(h,l,q){h=d(l.helper);q=q.options;h.css("zIndex")&&(q._zIndex=h.css("zIndex"));h.css("zIndex",q.zIndex)},stop:function(h,l,q){h=q.options;h._zIndex&&d(l.helper).css("zIndex",h._zIndex)}});d.dvUi.draggable;d.widget("dvUi.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,
over:null},_create:function(){var h,l=this.options,q=l.accept;this.isover=!1;this.isout=!0;this.accept=d.isFunction(q)?q:function(y){return y.is(q)};this.proportions=function(){return arguments.length?(h=arguments[0],void 0):h?h:h={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(l.scope);l.addClasses&&this.element.addClass("dvUi-droppable")},_addToManager:function(h){d.dvUi.ddmanager.droppables[h]=d.dvUi.ddmanager.droppables[h]||[];d.dvUi.ddmanager.droppables[h].push(this)},
_splice:function(h){for(var l=0;h.length>l;l++)h[l]===this&&h.splice(l,1)},_destroy:function(){this._splice(d.dvUi.ddmanager.droppables[this.options.scope]);this.element.removeClass("dvUi-droppable dvUi-droppable-disabled")},_setOption:function(h,l){"accept"===h?this.accept=d.isFunction(l)?l:function(q){return q.is(l)}:"scope"===h&&(this._splice(d.dvUi.ddmanager.droppables[this.options.scope]),this._addToManager(l));this._super(h,l)},_activate:function(h){var l=d.dvUi.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);l&&this._trigger("activate",h,this.ui(l))},_deactivate:function(h){var l=d.dvUi.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);l&&this._trigger("deactivate",h,this.ui(l))},_over:function(h){var l=d.dvUi.ddmanager.current;l&&(l.currentItem||l.element)[0]!==this.element[0]&&this.accept.call(this.element[0],l.currentItem||l.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),
this._trigger("over",h,this.ui(l)))},_out:function(h){var l=d.dvUi.ddmanager.current;l&&(l.currentItem||l.element)[0]!==this.element[0]&&this.accept.call(this.element[0],l.currentItem||l.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",h,this.ui(l)))},_drop:function(h,l){var q=l||d.dvUi.ddmanager.current,y=!1;return q&&(q.currentItem||q.element)[0]!==this.element[0]?(this.element.find(":data(dvUi-droppable)").not(".dvUi-draggable-dragging").each(function(){var D=
d(this).droppable("instance");return D.options.greedy&&!D.options.disabled&&D.options.scope===q.options.scope&&D.accept.call(D.element[0],q.currentItem||q.element)&&d.dvUi.intersect(q,d.extend(D,{offset:D.element.offset()}),D.options.tolerance,h)?(y=!0,!1):void 0}),y?!1:this.accept.call(this.element[0],q.currentItem||q.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",
h,this.ui(q)),this.element):!1):!1},ui:function(h){return{draggable:h.currentItem||h.element,helper:h.helper,position:h.position,offset:h.positionAbs}}});d.dvUi.intersect=function(){return function(h,l,q,y){if(!l.offset)return!1;var D=(h.positionAbs||h.position.absolute).left+h.margins.left,K=(h.positionAbs||h.position.absolute).top+h.margins.top,M=D+h.helperProportions.width,O=K+h.helperProportions.height,R=l.offset.left,Y=l.offset.top,fa=R+l.proportions().width,ha=Y+l.proportions().height;switch(q){case "fit":return D>=
R&&fa>=M&&K>=Y&&ha>=O;case "intersect":return D+h.helperProportions.width/2>R&&fa>M-h.helperProportions.width/2&&K+h.helperProportions.height/2>Y&&ha>O-h.helperProportions.height/2;case "pointer":h=y.pageY;q=l.proportions().height;if(Y=h>=Y&&Y+q>h)y=y.pageX,l=l.proportions().width,Y=y>=R&&R+l>y;return Y;case "touch":return(K>=Y&&ha>=K||O>=Y&&ha>=O||Y>K&&O>ha)&&(D>=R&&fa>=D||M>=R&&fa>=M||R>D&&M>fa);default:return!1}}}();d.dvUi.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(h,
l){var q,y=d.dvUi.ddmanager.droppables[h.options.scope]||[],D=l?l.type:null,K=(h.currentItem||h.element).find(":data(dvUi-droppable)").addBack();var M=0;a:for(;y.length>M;M++)if(!(y[M].options.disabled||h&&!y[M].accept.call(y[M].element[0],h.currentItem||h.element))){for(q=0;K.length>q;q++)if(K[q]===y[M].element[0]){y[M].proportions().height=0;continue a}y[M].visible="none"!==y[M].element.css("display");y[M].visible&&("mousedown"===D&&y[M]._activate.call(y[M],l),y[M].offset=y[M].element.offset(),
y[M].proportions({width:y[M].element[0].offsetWidth,height:y[M].element[0].offsetHeight}))}},drop:function(h,l){var q=!1;return d.each((d.dvUi.ddmanager.droppables[h.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&d.dvUi.intersect(h,this,this.options.tolerance,l)&&(q=this._drop.call(this,l)||q),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],h.currentItem||h.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,l)))}),
q},dragStart:function(h,l){h.element.parentsUntil("body").bind("scroll.droppable",function(){h.options.refreshPositions||d.dvUi.ddmanager.prepareOffsets(h,l)})},drag:function(h,l){h.options.refreshPositions&&d.dvUi.ddmanager.prepareOffsets(h,l);d.each(d.dvUi.ddmanager.droppables[h.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var q,y,D,K=d.dvUi.intersect(h,this,this.options.tolerance,l);(K=!K&&this.isover?"isout":K&&!this.isover?"isover":null)&&(this.options.greedy&&
(y=this.options.scope,D=this.element.parents(":data(dvUi-droppable)").filter(function(){return d(this).droppable("instance").options.scope===y}),D.length&&(q=d(D[0]).droppable("instance"),q.greedyChild="isover"===K)),q&&"isover"===K&&(q.isover=!1,q.isout=!0,q._out.call(q,l)),this[K]=!0,this["isout"===K?"isover":"isout"]=!1,this["isover"===K?"_over":"_out"].call(this,l),q&&"isout"===K&&(q.isout=!1,q.isover=!0,q._over.call(q,l)))}})},dragStop:function(h,l){h.element.parentsUntil("body").unbind("scroll.droppable");
h.options.refreshPositions||d.dvUi.ddmanager.prepareOffsets(h,l)}};d.dvUi.droppable;d.widget("dvUi.resizable",d.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(h){return parseInt(h,10)||0},_isNumber:function(h){return!isNaN(parseInt(h,
10))},_hasScroll:function(h,l){if("hidden"===d(h).css("overflow"))return!1;l=l&&"left"===l?"scrollLeft":"scrollTop";var q=!1;return 0<h[l]?!0:(h[l]=1,q=0<h[l],h[l]=0,q)},_create:function(){var h,l=this,q=this.options;if(this.element.addClass("dvUi-resizable"),d.extend(this,{_aspectRatio:!!q.aspectRatio,aspectRatio:q.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:q.helper||q.ghost||q.animate?q.helper||"dvUi-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&
(this.element.wrap(d("<div class='dvUi-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("dvUi-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),
marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=q.handles||(d(".dvUi-resizable-handle",
this.element).length?{n:".dvUi-resizable-n",e:".dvUi-resizable-e",s:".dvUi-resizable-s",w:".dvUi-resizable-w",se:".dvUi-resizable-se",sw:".dvUi-resizable-sw",ne:".dvUi-resizable-ne",nw:".dvUi-resizable-nw"}:"e,s,se"),this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var y=this.handles.split(",");this.handles={};for(h=0;y.length>h;h++){var D=d.trim(y[h]);var K="dvUi-resizable-"+D;var M=d("<div class='dvUi-resizable-handle "+K+"'></div>");M.css({zIndex:q.zIndex});
"se"===D&&M.addClass("dvUi-icon dvUi-icon-gripsmall-diagonal-se");this.handles[D]=".dvUi-resizable-"+D;this.element.append(M)}}this._renderAxis=function(O){var R,Y,fa,ha;O=O||this.element;for(R in this.handles)this.handles[R].constructor===String&&(this.handles[R]=this.element.children(this.handles[R]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(Y=d(this.handles[R],this.element),ha=/sw|ne|nw|se|n|s/.test(R)?Y.outerHeight():Y.outerWidth(),
fa=["padding",/ne|nw|n/.test(R)?"Top":/se|sw|s/.test(R)?"Bottom":/^e$/.test(R)?"Right":"Left"].join(""),O.css(fa,ha),this._proportionallyResize()),d(this.handles[R]).length};this._renderAxis(this.element);this._handles=d(".dvUi-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){l.resizing||(this.className&&(M=this.className.match(/dvUi-resizable-(se|sw|ne|nw|n|e|s|w)/i)),l.axis=M&&M[1]?M[1]:"se")});q.autoHide&&(this._handles.hide(),d(this.element).addClass("dvUi-resizable-autohide").mouseenter(function(){q.disabled||
(d(this).removeClass("dvUi-resizable-autohide"),l._handles.show())}).mouseleave(function(){q.disabled||l.resizing||(d(this).addClass("dvUi-resizable-autohide"),l._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var h,l=function(q){d(q).removeClass("dvUi-resizable dvUi-resizable-disabled dvUi-resizable-resizing").removeData("resizable").removeData("dvUi-resizable").unbind(".resizable").find(".dvUi-resizable-handle").remove()};return this.elementIsWrapper&&(l(this.element),
h=this.element,this.originalElement.css({position:h.css("position"),width:h.outerWidth(),height:h.outerHeight(),top:h.css("top"),left:h.css("left")}).insertAfter(h),h.remove()),this.originalElement.css("resize",this.originalResizeStyle),l(this.originalElement),this},_mouseCapture:function(h){var l,q=!1;for(l in this.handles){var y=d(this.handles[l])[0];(y===h.target||d.contains(y,h.target))&&(q=!0)}return!this.options.disabled&&q},_mouseStart:function(h){var l,q,y,D=this.options,K=this.element;return this.resizing=
!0,this._renderProxy(),l=this._num(this.helper.css("left")),q=this._num(this.helper.css("top")),D.containment&&(l+=d(D.containment).scrollLeft()||0,q+=d(D.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:l,top:q},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:K.width(),height:K.height()},this.originalSize=this._helper?{width:K.outerWidth(),height:K.outerHeight()}:{width:K.width(),height:K.height()},this.sizeDiff={width:K.outerWidth()-
K.width(),height:K.outerHeight()-K.height()},this.originalPosition={left:l,top:q},this.originalMousePosition={left:h.pageX,top:h.pageY},this.aspectRatio="number"==typeof D.aspectRatio?D.aspectRatio:this.originalSize.width/this.originalSize.height||1,y=d(".dvUi-resizable-"+this.axis).css("cursor"),d("body").css("cursor","auto"===y?this.axis+"-resize":y),K.addClass("dvUi-resizable-resizing"),this._propagate("start",h),!0},_mouseDrag:function(h){var l,q,y=this.originalMousePosition,D=h.pageX-y.left||
0;y=h.pageY-y.top||0;var K=this._change[this.axis];return this._updatePrevProperties(),K?(l=K.apply(this,[h,D,y]),this._updateVirtualBoundaries(h.shiftKey),(this._aspectRatio||h.shiftKey)&&(l=this._updateRatio(l,h)),l=this._respectSize(l,h),this._updateCache(l),this._propagate("resize",h),q=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),d.isEmptyObject(q)||(this._updatePrevProperties(),this._trigger("resize",h,this.ui()),this._applyChanges()),
!1):!1},_mouseStop:function(h){this.resizing=!1;var l,q,y,D,K,M,O,R=this.options;return this._helper&&(l=this._proportionallyResizeElements,q=l.length&&/textarea/i.test(l[0].nodeName),y=q&&this._hasScroll(l[0],"left")?0:this.sizeDiff.height,D=q?0:this.sizeDiff.width,K={width:this.helper.width()-D,height:this.helper.height()-y},M=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,O=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||
null,R.animate||this.element.css(d.extend(K,{top:O,left:M})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!R.animate&&this._proportionallyResize()),d("body").css("cursor","auto"),this.element.removeClass("dvUi-resizable-resizing"),this._propagate("stop",h),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var h=
{};return this.position.top!==this.prevPosition.top&&(h.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(h.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(h.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(h.height=this.size.height+"px"),this.helper.css(h),h},_updateVirtualBoundaries:function(h){var l,q,y,D;var K=this.options;K={minWidth:this._isNumber(K.minWidth)?K.minWidth:0,maxWidth:this._isNumber(K.maxWidth)?K.maxWidth:1/0,minHeight:this._isNumber(K.minHeight)?
K.minHeight:0,maxHeight:this._isNumber(K.maxHeight)?K.maxHeight:1/0};(this._aspectRatio||h)&&(l=K.minHeight*this.aspectRatio,y=K.minWidth/this.aspectRatio,q=K.maxHeight*this.aspectRatio,D=K.maxWidth/this.aspectRatio,l>K.minWidth&&(K.minWidth=l),y>K.minHeight&&(K.minHeight=y),K.maxWidth>q&&(K.maxWidth=q),K.maxHeight>D&&(K.maxHeight=D));this._vBoundaries=K},_updateCache:function(h){this.offset=this.helper.offset();this._isNumber(h.left)&&(this.position.left=h.left);this._isNumber(h.top)&&(this.position.top=
h.top);this._isNumber(h.height)&&(this.size.height=h.height);this._isNumber(h.width)&&(this.size.width=h.width)},_updateRatio:function(h){var l=this.position,q=this.size,y=this.axis;return this._isNumber(h.height)?h.width=h.height*this.aspectRatio:this._isNumber(h.width)&&(h.height=h.width/this.aspectRatio),"sw"===y&&(h.left=l.left+(q.width-h.width),h.top=null),"nw"===y&&(h.top=l.top+(q.height-h.height),h.left=l.left+(q.width-h.width)),h},_respectSize:function(h){var l=this._vBoundaries,q=this.axis,
y=this._isNumber(h.width)&&l.maxWidth&&l.maxWidth<h.width,D=this._isNumber(h.height)&&l.maxHeight&&l.maxHeight<h.height,K=this._isNumber(h.width)&&l.minWidth&&l.minWidth>h.width,M=this._isNumber(h.height)&&l.minHeight&&l.minHeight>h.height,O=this.originalPosition.left+this.originalSize.width,R=this.position.top+this.size.height,Y=/sw|nw|w/.test(q);q=/nw|ne|n/.test(q);return K&&(h.width=l.minWidth),M&&(h.height=l.minHeight),y&&(h.width=l.maxWidth),D&&(h.height=l.maxHeight),K&&Y&&(h.left=O-l.minWidth),
y&&Y&&(h.left=O-l.maxWidth),M&&q&&(h.top=R-l.minHeight),D&&q&&(h.top=R-l.maxHeight),h.width||h.height||h.left||!h.top?h.width||h.height||h.top||!h.left||(h.left=null):h.top=null,h},_getPaddingPlusBorderDimensions:function(h){var l=0,q=[],y=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")];for(h=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")];4>l;l++)q[l]=parseInt(y[l],10)||0,q[l]+=parseInt(h[l],10)||0;return{height:q[0]+
q[2],width:q[1]+q[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var h,l=0,q=this.helper||this.element;this._proportionallyResizeElements.length>l;l++)h=this._proportionallyResizeElements[l],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(h)),h.css({height:q.height()-this.outerDimensions.height||0,width:q.width()-this.outerDimensions.width||0})},_renderProxy:function(){var h=this.options;this.elementOffset=this.element.offset();
this._helper?(this.helper=this.helper||d("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++h.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(h,l){return{width:this.originalSize.width+l}},w:function(h,l){return{left:this.originalPosition.left+l,width:this.originalSize.width-
l}},n:function(h,l,q){return{top:this.originalPosition.top+q,height:this.originalSize.height-q}},s:function(h,l,q){return{height:this.originalSize.height+q}},se:function(h,l,q){return d.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[h,l,q]))},sw:function(h,l,q){return d.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[h,l,q]))},ne:function(h,l,q){return d.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[h,l,q]))},nw:function(h,l,
q){return d.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[h,l,q]))}},_propagate:function(h,l){d.dvUi.plugin.call(this,h,[l,this.ui()]);"resize"!==h&&this._trigger(h,l,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});d.dvUi.plugin.add("resizable","animate",{stop:function(h){var l=d(this).resizable("instance"),
q=l.options,y=l._proportionallyResizeElements,D=y.length&&/textarea/i.test(y[0].nodeName),K=D&&l._hasScroll(y[0],"left")?0:l.sizeDiff.height;D={width:l.size.width-(D?0:l.sizeDiff.width),height:l.size.height-K};K=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null;var M=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null;l.element.animate(d.extend(D,M&&K?{top:M,left:K}:{}),{duration:q.animateDuration,easing:q.animateEasing,step:function(){var O=
{width:parseInt(l.element.css("width"),10),height:parseInt(l.element.css("height"),10),top:parseInt(l.element.css("top"),10),left:parseInt(l.element.css("left"),10)};y&&y.length&&d(y[0]).css({width:O.width,height:O.height});l._updateCache(O);l._propagate("resize",h)}})}});d.dvUi.plugin.add("resizable","containment",{start:function(){var h,l,q,y,D,K,M,O=d(this).resizable("instance"),R=O.element,Y=O.options.containment;(R=Y instanceof d?Y.get(0):/parent/.test(Y)?R.parent().get(0):Y)&&(O.containerElement=
d(R),/document/.test(Y)||Y===document?(O.containerOffset={left:0,top:0},O.containerPosition={left:0,top:0},O.parentData={element:d(document),left:0,top:0,width:d(document).width(),height:d(document).height()||document.body.parentNode.scrollHeight}):(h=d(R),l=[],d(["Top","Right","Left","Bottom"]).each(function(fa,ha){l[fa]=O._num(h.css("padding"+ha))}),O.containerOffset=h.offset(),O.containerPosition=h.position(),O.containerSize={height:h.innerHeight()-l[3],width:h.innerWidth()-l[1]},q=O.containerOffset,
y=O.containerSize.height,D=O.containerSize.width,K=O._hasScroll(R,"left")?R.scrollWidth:D,M=O._hasScroll(R)?R.scrollHeight:y,O.parentData={element:R,left:q.left,top:q.top,width:K,height:M}))},resize:function(h){var l=d(this).resizable("instance");var q=l.options;var y=l.containerOffset;var D=l.position;h=l._aspectRatio||h.shiftKey;var K={top:0,left:0},M=l.containerElement,O=!0;M[0]!==document&&/static/.test(M.css("position"))&&(K=y);D.left<(l._helper?y.left:0)&&(l.size.width+=l._helper?l.position.left-
y.left:l.position.left-K.left,h&&(l.size.height=l.size.width/l.aspectRatio,O=!1),l.position.left=q.helper?y.left:0);D.top<(l._helper?y.top:0)&&(l.size.height+=l._helper?l.position.top-y.top:l.position.top,h&&(l.size.width=l.size.height*l.aspectRatio,O=!1),l.position.top=l._helper?y.top:0);q=l.containerElement.get(0)===l.element.parent().get(0);D=/relative|absolute/.test(l.containerElement.css("position"));q&&D?(l.offset.left=l.parentData.left+l.position.left,l.offset.top=l.parentData.top+l.position.top):
(l.offset.left=l.element.offset().left,l.offset.top=l.element.offset().top);q=Math.abs(l.sizeDiff.width+(l._helper?l.offset.left-K.left:l.offset.left-y.left));y=Math.abs(l.sizeDiff.height+(l._helper?l.offset.top-K.top:l.offset.top-y.top));q+l.size.width>=l.parentData.width&&(l.size.width=l.parentData.width-q,h&&(l.size.height=l.size.width/l.aspectRatio,O=!1));y+l.size.height>=l.parentData.height&&(l.size.height=l.parentData.height-y,h&&(l.size.width=l.size.height*l.aspectRatio,O=!1));O||(l.position.left=
l.prevPosition.left,l.position.top=l.prevPosition.top,l.size.width=l.prevSize.width,l.size.height=l.prevSize.height)},stop:function(){var h=d(this).resizable("instance"),l=h.options,q=h.containerOffset,y=h.containerPosition,D=h.containerElement,K=d(h.helper),M=K.offset(),O=K.outerWidth()-h.sizeDiff.width;K=K.outerHeight()-h.sizeDiff.height;h._helper&&!l.animate&&/relative/.test(D.css("position"))&&d(this).css({left:M.left-y.left-q.left,width:O,height:K});h._helper&&!l.animate&&/static/.test(D.css("position"))&&
d(this).css({left:M.left-y.left-q.left,width:O,height:K})}});d.dvUi.plugin.add("resizable","alsoResize",{start:function(){var h=d(this).resizable("instance").options,l=function(q){d(q).each(function(){var y=d(this);y.data("dvUi-resizable-alsoresize",{width:parseInt(y.width(),10),height:parseInt(y.height(),10),left:parseInt(y.css("left"),10),top:parseInt(y.css("top"),10)})})};"object"!=typeof h.alsoResize||h.alsoResize.parentNode?l(h.alsoResize):h.alsoResize.length?(h.alsoResize=h.alsoResize[0],l(h.alsoResize)):
d.each(h.alsoResize,function(q){l(q)})},resize:function(h,l){h=d(this).resizable("instance");var q=h.options,y=h.originalSize,D=h.originalPosition,K={height:h.size.height-y.height||0,width:h.size.width-y.width||0,top:h.position.top-D.top||0,left:h.position.left-D.left||0},M=function(O,R){d(O).each(function(){var Y=d(this),fa=d(this).data("dvUi-resizable-alsoresize"),ha={},sa=R&&R.length?R:Y.parents(l.originalElement[0]).length?["width","height"]:["width","height","top","left"];d.each(sa,function(X,
ja){(X=(fa[ja]||0)+(K[ja]||0))&&0<=X&&(ha[ja]=X||null)});Y.css(ha)})};"object"!=typeof q.alsoResize||q.alsoResize.nodeType?M(q.alsoResize):d.each(q.alsoResize,function(O,R){M(O,R)})},stop:function(){d(this).removeData("resizable-alsoresize")}});d.dvUi.plugin.add("resizable","ghost",{start:function(){var h=d(this).resizable("instance"),l=h.options,q=h.size;h.ghost=h.originalElement.clone();h.ghost.css({opacity:.25,display:"block",position:"relative",height:q.height,width:q.width,margin:0,left:0,top:0}).addClass("dvUi-resizable-ghost").addClass("string"==
typeof l.ghost?l.ghost:"");h.ghost.appendTo(h.helper)},resize:function(){var h=d(this).resizable("instance");h.ghost&&h.ghost.css({position:"relative",height:h.size.height,width:h.size.width})},stop:function(){var h=d(this).resizable("instance");h.ghost&&h.helper&&h.helper.get(0).removeChild(h.ghost.get(0))}});d.dvUi.plugin.add("resizable","grid",{resize:function(){var h,l=d(this).resizable("instance"),q=l.options,y=l.size,D=l.originalSize,K=l.originalPosition,M=l.axis,O="number"==typeof q.grid?[q.grid,
q.grid]:q.grid,R=O[0]||1,Y=O[1]||1,fa=Math.round((y.width-D.width)/R)*R;y=Math.round((y.height-D.height)/Y)*Y;var ha=D.width+fa,sa=D.height+y,X=q.maxWidth&&ha>q.maxWidth,ja=q.maxHeight&&sa>q.maxHeight,ka=q.minWidth&&q.minWidth>ha,ma=q.minHeight&&q.minHeight>sa;q.grid=O;ka&&(ha+=R);ma&&(sa+=Y);X&&(ha-=R);ja&&(sa-=Y);/^(se|s|e)$/.test(M)?(l.size.width=ha,l.size.height=sa):/^(ne)$/.test(M)?(l.size.width=ha,l.size.height=sa,l.position.top=K.top-y):/^(sw)$/.test(M)?(l.size.width=ha,l.size.height=sa,l.position.left=
K.left-fa):((0>=sa-Y||0>=ha-R)&&(h=l._getPaddingPlusBorderDimensions(this)),0<sa-Y?(l.size.height=sa,l.position.top=K.top-y):(sa=Y-h.height,l.size.height=sa,l.position.top=K.top+D.height-sa),0<ha-R?(l.size.width=ha,l.position.left=K.left-fa):(ha=Y-h.height,l.size.width=ha,l.position.left=K.left+D.width-ha))}});d.dvUi.resizable;d.widget("dvUi.selectable",d.dvUi.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,
stop:null,unselected:null,unselecting:null},_create:function(){var h,l=this;this.element.addClass("dvUi-selectable");this.dragged=!1;this.refresh=function(){h=d(l.options.filter,l.element[0]);h.addClass("dvUi-selectee");h.each(function(){var q=d(this),y=q.offset();d.data(this,"selectable-item",{element:this,$element:q,left:y.left,top:y.top,right:y.left+q.outerWidth(),bottom:y.top+q.outerHeight(),startselected:!1,selected:q.hasClass("dvUi-selected"),selecting:q.hasClass("dvUi-selecting"),unselecting:q.hasClass("dvUi-unselecting")})})};
this.refresh();this.selectees=h.addClass("dvUi-selectee");this._mouseInit();this.helper=d("<div class='dvUi-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("dvUi-selectee").removeData("selectable-item");this.element.removeClass("dvUi-selectable dvUi-selectable-disabled");this._mouseDestroy()},_mouseStart:function(h){var l=this,q=this.options;this.opos=[h.pageX,h.pageY];this.options.disabled||(this.selectees=d(q.filter,this.element[0]),this._trigger("start",h),d(q.appendTo).append(this.helper),
this.helper.css({left:h.pageX,top:h.pageY,width:0,height:0}),q.autoRefresh&&this.refresh(),this.selectees.filter(".dvUi-selected").each(function(){var y=d.data(this,"selectable-item");y.startselected=!0;h.metaKey||h.ctrlKey||(y.$element.removeClass("dvUi-selected"),y.selected=!1,y.$element.addClass("dvUi-unselecting"),y.unselecting=!0,l._trigger("unselecting",h,{unselecting:y.element}))}),d(h.target).parents().addBack().each(function(){var y,D=d.data(this,"selectable-item");return D?(y=!h.metaKey&&
!h.ctrlKey||!D.$element.hasClass("dvUi-selected"),D.$element.removeClass(y?"dvUi-unselecting":"dvUi-selected").addClass(y?"dvUi-selecting":"dvUi-unselecting"),D.unselecting=!y,D.selecting=y,D.selected=y,y?l._trigger("selecting",h,{selecting:D.element}):l._trigger("unselecting",h,{unselecting:D.element}),!1):void 0}))},_mouseDrag:function(h){if(this.dragged=!0,!this.options.disabled){var l,q=this,y=this.options,D=this.opos[0],K=this.opos[1],M=h.pageX,O=h.pageY;return D>M&&(l=M,M=D,D=l),K>O&&(l=O,O=
K,K=l),this.helper.css({left:D,top:K,width:M-D,height:O-K}),this.selectees.each(function(){var R=d.data(this,"selectable-item"),Y=!1;R&&R.element!==q.element[0]&&("touch"===y.tolerance?Y=!(R.left>M||D>R.right||R.top>O||K>R.bottom):"fit"===y.tolerance&&(Y=R.left>D&&M>R.right&&R.top>K&&O>R.bottom),Y?(R.selected&&(R.$element.removeClass("dvUi-selected"),R.selected=!1),R.unselecting&&(R.$element.removeClass("dvUi-unselecting"),R.unselecting=!1),R.selecting||(R.$element.addClass("dvUi-selecting"),R.selecting=
!0,q._trigger("selecting",h,{selecting:R.element}))):(R.selecting&&((h.metaKey||h.ctrlKey)&&R.startselected?(R.$element.removeClass("dvUi-selecting"),R.selecting=!1,R.$element.addClass("dvUi-selected"),R.selected=!0):(R.$element.removeClass("dvUi-selecting"),R.selecting=!1,R.startselected&&(R.$element.addClass("dvUi-unselecting"),R.unselecting=!0),q._trigger("unselecting",h,{unselecting:R.element}))),R.selected&&(h.metaKey||h.ctrlKey||R.startselected||(R.$element.removeClass("dvUi-selected"),R.selected=
!1,R.$element.addClass("dvUi-unselecting"),R.unselecting=!0,q._trigger("unselecting",h,{unselecting:R.element})))))}),!1}},_mouseStop:function(h){var l=this;return this.dragged=!1,d(".dvUi-unselecting",this.element[0]).each(function(){var q=d.data(this,"selectable-item");q.$element.removeClass("dvUi-unselecting");q.unselecting=!1;q.startselected=!1;l._trigger("unselected",h,{unselected:q.element})}),d(".dvUi-selecting",this.element[0]).each(function(){var q=d.data(this,"selectable-item");q.$element.removeClass("dvUi-selecting").addClass("dvUi-selected");
q.selecting=!1;q.selected=!0;q.startselected=!0;l._trigger("selected",h,{selected:q.element})}),this._trigger("stop",h),this.helper.remove(),!1}});d.widget("dvUi.sortable",d.dvUi.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,
scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(h,l,q){return h>=l&&l+q>h},_isFloating:function(h){return/left|right/.test(h.css("float"))||/inline|table-cell/.test(h.css("display"))},_create:function(){var h=this.options;this.containerCache={};this.element.addClass("dvUi-sortable");this.refresh();this.floating=this.items.length?
"x"===h.axis||this._isFloating(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(h,l){this._super(h,l);"handle"===h&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");d.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("dvUi-sortable-handle")})},_destroy:function(){this.element.removeClass("dvUi-sortable dvUi-sortable-disabled").find(".dvUi-sortable-handle").removeClass("dvUi-sortable-handle");
this._mouseDestroy();for(var h=this.items.length-1;0<=h;h--)this.items[h].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(h,l){var q=null,y=!1,D=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(h),d(h.target).parents().each(function(){return d.data(this,D.widgetName+"-item")===D?(q=d(this),!1):void 0}),d.data(h.target,D.widgetName+"-item")===D&&(q=d(h.target)),q?!this.options.handle||l||(d(this.options.handle,q).find("*").addBack().each(function(){this===
h.target&&(y=!0)}),y)?(this.currentItem=q,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(h,l,q){var y;l=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(h),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:h.pageX-this.offset.left,
top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),
l.containment&&this._setContainment(),l.cursor&&"auto"!==l.cursor&&(y=this.document.find("body"),this.storedCursor=y.css("cursor"),y.css("cursor",l.cursor),this.storedStylesheet=d("<style>*{ cursor: "+l.cursor+" !important; }</style>").appendTo(y)),l.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",l.opacity)),l.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",l.zIndex)),this.scrollParent[0]!==
document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",h,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!q)for(q=this.containers.length-1;0<=q;q--)this.containers[q]._trigger("activate",h,this._uiHash(this));return d.dvUi.ddmanager&&(d.dvUi.ddmanager.current=this),d.dvUi.ddmanager&&!l.dropBehaviour&&d.dvUi.ddmanager.prepareOffsets(this,h),this.dragging=!0,this.helper.addClass("dvUi-sortable-helper"),
this._mouseDrag(h),!0},_mouseDrag:function(h){var l,q,y;var D=this.options;var K=!1;this.position=this._generatePosition(h);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-h.pageY<D.scrollSensitivity?this.scrollParent[0].scrollTop=K=this.scrollParent[0].scrollTop+D.scrollSpeed:h.pageY-
this.overflowOffset.top<D.scrollSensitivity&&(this.scrollParent[0].scrollTop=K=this.scrollParent[0].scrollTop-D.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-h.pageX<D.scrollSensitivity?this.scrollParent[0].scrollLeft=K=this.scrollParent[0].scrollLeft+D.scrollSpeed:h.pageX-this.overflowOffset.left<D.scrollSensitivity&&(this.scrollParent[0].scrollLeft=K=this.scrollParent[0].scrollLeft-D.scrollSpeed)):(h.pageY-d(document).scrollTop()<D.scrollSensitivity?K=d(document).scrollTop(d(document).scrollTop()-
D.scrollSpeed):d(window).height()-(h.pageY-d(document).scrollTop())<D.scrollSensitivity&&(K=d(document).scrollTop(d(document).scrollTop()+D.scrollSpeed)),h.pageX-d(document).scrollLeft()<D.scrollSensitivity?K=d(document).scrollLeft(d(document).scrollLeft()-D.scrollSpeed):d(window).width()-(h.pageX-d(document).scrollLeft())<D.scrollSensitivity&&(K=d(document).scrollLeft(d(document).scrollLeft()+D.scrollSpeed))),!1!==K&&d.dvUi.ddmanager&&!D.dropBehaviour&&d.dvUi.ddmanager.prepareOffsets(this,h));this.positionAbs=
this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(D=this.items.length-1;0<=D;D--)if(l=this.items[D],q=l.item[0],y=this._intersectsWithPointer(l),y&&l.instance===this.currentContainer&&q!==this.currentItem[0]&&this.placeholder[1===y?"next":"prev"]()[0]!==q&&!d.contains(this.placeholder[0],q)&&("semi-dynamic"===this.options.type?
!d.contains(this.element[0],q):!0)){if(this.direction=1===y?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(l))break;this._rearrange(h,l);this._trigger("change",h,this._uiHash());break}return this._contactContainers(h),d.dvUi.ddmanager&&d.dvUi.ddmanager.drag(this,h),this._trigger("sort",h,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(h,l){if(h){if(d.dvUi.ddmanager&&!this.options.dropBehaviour&&d.dvUi.ddmanager.drop(this,h),this.options.revert){var q=
this;l=this.placeholder.offset();var y=this.options.axis,D={};y&&"x"!==y||(D.left=l.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));y&&"y"!==y||(D.top=l.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;d(this.helper).animate(D,parseInt(this.options.revert,10)||500,function(){q._clear(h)})}else this._clear(h,l);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});
"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper"):this.currentItem.show();for(var h=this.containers.length-1;0<=h;h--)this.containers[h]._trigger("deactivate",null,this._uiHash(this)),this.containers[h].containerCache.over&&(this.containers[h]._trigger("out",null,this._uiHash(this)),this.containers[h].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(h){var l=this._getItemsAsjQuery(h&&h.connected),q=[];return h=h||{},d(l).each(function(){var y=(d(h.item||this).attr(h.attribute||"id")||"").match(h.expression||/(.+)[\-=_](.+)/);y&&q.push((h.key||
y[1]+"[]")+"="+(h.key&&h.expression?y[1]:y[2]))}),!q.length&&h.key&&q.push(h.key+"="),q.join("&")},toArray:function(h){var l=this._getItemsAsjQuery(h&&h.connected),q=[];return h=h||{},l.each(function(){q.push(d(h.item||this).attr(h.attribute||"id")||"")}),q},_intersectsWith:function(h){var l=this.positionAbs.left,q=l+this.helperProportions.width,y=this.positionAbs.top,D=y+this.helperProportions.height,K=h.left,M=K+h.width,O=h.top,R=O+h.height,Y=this.offset.click.top,fa=this.offset.click.left;Y="x"===
this.options.axis||y+Y>O&&R>y+Y;fa="y"===this.options.axis||l+fa>K&&M>l+fa;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>h[this.floating?"width":"height"]?Y&&fa:l+this.helperProportions.width/2>K&&M>q-this.helperProportions.width/2&&y+this.helperProportions.height/2>O&&R>D-this.helperProportions.height/2},_intersectsWithPointer:function(h){var l="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+
this.offset.click.top,h.top,h.height);h="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,h.left,h.width);l=l&&h;h=this._getDragVerticalDirection();var q=this._getDragHorizontalDirection();return l?this.floating?q&&"right"===q||"down"===h?2:1:h&&("down"===h?2:1):!1},_intersectsWithSides:function(h){var l=this._isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height);h=this._isOverAxis(this.positionAbs.left+this.offset.click.left,h.left+
h.width/2,h.width);var q=this._getDragVerticalDirection(),y=this._getDragHorizontalDirection();return this.floating&&y?"right"===y&&h||"left"===y&&!h:q&&("down"===q&&l||"up"===q&&!l)},_getDragVerticalDirection:function(){var h=this.positionAbs.top-this.lastPositionAbs.top;return 0!==h&&(0<h?"down":"up")},_getDragHorizontalDirection:function(){var h=this.positionAbs.left-this.lastPositionAbs.left;return 0!==h&&(0<h?"right":"left")},refresh:function(h){return this._refreshItems(h),this._setHandleClassName(),
this.refreshPositions(),this},_connectWith:function(){var h=this.options;return h.connectWith.constructor===String?[h.connectWith]:h.connectWith},_getItemsAsjQuery:function(h){function l(){D.push(this)}var q,y,D=[],K=[],M=this._connectWith();if(M&&h)for(h=M.length-1;0<=h;h--){var O=d(M[h]);for(q=O.length-1;0<=q;q--)(y=d.data(O[q],this.widgetFullName))&&y!==this&&!y.options.disabled&&K.push([d.isFunction(y.options.items)?y.options.items.call(y.element):d(y.options.items,y.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),
y])}K.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".dvUi-sortable-helper").not(".dvUi-sortable-placeholder"),this]);for(h=K.length-1;0<=h;h--)K[h][0].each(l);return d(D)},_removeCurrentsFromItems:function(){var h=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=d.grep(this.items,function(l){for(var q=0;h.length>q;q++)if(h[q]===l.item[0])return!1;return!0})},
_refreshItems:function(h){this.items=[];this.containers=[this];var l,q,y,D,K=this.items,M=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],h,{item:this.currentItem}):d(this.options.items,this.element),this]];if((D=this._connectWith())&&this.ready)for(l=D.length-1;0<=l;l--){var O=d(D[l]);for(q=O.length-1;0<=q;q--)(y=d.data(O[q],this.widgetFullName))&&y!==this&&!y.options.disabled&&(M.push([d.isFunction(y.options.items)?y.options.items.call(y.element[0],h,{item:this.currentItem}):
d(y.options.items,y.element),y]),this.containers.push(y))}for(l=M.length-1;0<=l;l--)for(h=M[l][1],O=M[l][0],q=0,D=O.length;D>q;q++)y=d(O[q]),y.data(this.widgetName+"-item",h),K.push({item:y,instance:h,width:0,height:0,left:0,top:0})},refreshPositions:function(h){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var l,q,y;for(l=this.items.length-1;0<=l;l--){var D=this.items[l];D.instance!==this.currentContainer&&this.currentContainer&&D.item[0]!==this.currentItem[0]||(q=
this.options.toleranceElement?d(this.options.toleranceElement,D.item):D.item,h||(D.width=q.outerWidth(),D.height=q.outerHeight()),y=q.offset(),D.left=y.left,D.top=y.top)}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(l=this.containers.length-1;0<=l;l--)y=this.containers[l].element.offset(),this.containers[l].containerCache.left=y.left,this.containers[l].containerCache.top=y.top,this.containers[l].containerCache.width=this.containers[l].element.outerWidth(),
this.containers[l].containerCache.height=this.containers[l].element.outerHeight();return this},_createPlaceholder:function(h){h=h||this;var l,q=h.options;q.placeholder&&q.placeholder.constructor!==String||(l=q.placeholder,q.placeholder={element:function(){var y=h.currentItem[0].nodeName.toLowerCase(),D=d("<"+y+">",h.document[0]).addClass(l||h.currentItem[0].className+" dvUi-sortable-placeholder").removeClass("dvUi-sortable-helper");return"tr"===y?h.currentItem.children().each(function(){d("<td>&#160;</td>",
h.document[0]).attr("colspan",d(this).attr("colspan")||1).appendTo(D)}):"img"===y&&D.attr("src",h.currentItem.attr("src")),l||D.css("visibility","hidden"),D},update:function(y,D){(!l||q.forcePlaceholderSize)&&(D.height()||D.height(h.currentItem.innerHeight()-parseInt(h.currentItem.css("paddingTop")||0,10)-parseInt(h.currentItem.css("paddingBottom")||0,10)),D.width()||D.width(h.currentItem.innerWidth()-parseInt(h.currentItem.css("paddingLeft")||0,10)-parseInt(h.currentItem.css("paddingRight")||0,10)))}});
h.placeholder=d(q.placeholder.element.call(h.element,h.currentItem));h.currentItem.after(h.placeholder);q.placeholder.update(h,h.placeholder)},_contactContainers:function(h){var l,q,y,D,K,M=y=null;for(l=this.containers.length-1;0<=l;l--)d.contains(this.currentItem[0],this.containers[l].element[0])||(this._intersectsWith(this.containers[l].containerCache)?y&&d.contains(this.containers[l].element[0],y.element[0])||(y=this.containers[l],M=l):this.containers[l].containerCache.over&&(this.containers[l]._trigger("out",
h,this._uiHash(this)),this.containers[l].containerCache.over=0));if(y)if(1===this.containers.length)this.containers[M].containerCache.over||(this.containers[M]._trigger("over",h,this._uiHash(this)),this.containers[M].containerCache.over=1);else{l=1E4;var O=null;y=(q=y.floating||this._isFloating(this.currentItem))?"left":"top";var R=q?"width":"height";var Y=q?"clientX":"clientY";for(q=this.items.length-1;0<=q;q--)d.contains(this.containers[M].element[0],this.items[q].item[0])&&this.items[q].item[0]!==
this.currentItem[0]&&(D=this.items[q].item.offset()[y],K=!1,h[Y]-D>this.items[q][R]/2&&(K=!0),l>Math.abs(h[Y]-D)&&(l=Math.abs(h[Y]-D),O=this.items[q],this.direction=K?"up":"down"));if(O||this.options.dropOnEmpty){if(this.currentContainer===this.containers[M])return this.currentContainer.containerCache.over||(this.containers[M]._trigger("over",h,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;O?this._rearrange(h,O,null,!0):this._rearrange(h,null,this.containers[M].element,!0);this._trigger("change",
h,this._uiHash());this.containers[M]._trigger("change",h,this._uiHash(this));this.currentContainer=this.containers[M];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[M]._trigger("over",h,this._uiHash(this));this.containers[M].containerCache.over=1}}},_createHelper:function(h){var l=this.options;h=d.isFunction(l.helper)?d(l.helper.apply(this.element[0],[h,this.currentItem])):"clone"===l.helper?this.currentItem.clone():this.currentItem;return h.parents("body").length||
d("parent"!==l.appendTo?l.appendTo:this.currentItem[0].parentNode)[0].appendChild(h[0]),h[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!h[0].style.width||l.forceHelperSize)&&h.width(this.currentItem.width()),(!h[0].style.height||l.forceHelperSize)&&h.height(this.currentItem.height()),h},_adjustOffsetFromHelper:function(h){"string"==
typeof h&&(h=h.split(" "));d.isArray(h)&&(h={left:+h[0],top:+h[1]||0});"left"in h&&(this.offset.click.left=h.left+this.margins.left);"right"in h&&(this.offset.click.left=this.helperProportions.width-h.right+this.margins.left);"top"in h&&(this.offset.click.top=h.top+this.margins.top);"bottom"in h&&(this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var h=this.offsetParent.offset();return"absolute"===
this.cssPosition&&this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])&&(h.left+=this.scrollParent.scrollLeft(),h.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&d.dvUi.ie)&&(h={top:0,left:0}),{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===
this.cssPosition){var h=this.currentItem.position();return{top:h.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:h.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var h,l,q,y=this.options;"parent"===y.containment&&(y.containment=this.helper[0].parentNode);"document"!==y.containment&&"window"!==y.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d("document"===y.containment?document:window).width()-this.helperProportions.width-this.margins.left,(d("document"===y.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top]);/^(document|window|parent)$/.test(y.containment)||(h=d(y.containment)[0],l=d(y.containment).offset(),q="hidden"!==d(h).css("overflow"),this.containment=[l.left+(parseInt(d(h).css("borderLeftWidth"),10)||0)+(parseInt(d(h).css("paddingLeft"),10)||0)-this.margins.left,l.top+(parseInt(d(h).css("borderTopWidth"),10)||0)+(parseInt(d(h).css("paddingTop"),10)||0)-this.margins.top,l.left+(q?Math.max(h.scrollWidth,h.offsetWidth):h.offsetWidth)-(parseInt(d(h).css("borderLeftWidth"),10)||0)-
(parseInt(d(h).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,l.top+(q?Math.max(h.scrollHeight,h.offsetHeight):h.offsetHeight)-(parseInt(d(h).css("borderTopWidth"),10)||0)-(parseInt(d(h).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(h,l){l||=this.position;h="absolute"===h?1:-1;var q="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:
this.offsetParent,y=/(html|body)/i.test(q[0].tagName);return{top:l.top+this.offset.relative.top*h+this.offset.parent.top*h-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():y?0:q.scrollTop())*h,left:l.left+this.offset.relative.left*h+this.offset.parent.left*h-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():y?0:q.scrollLeft())*h}},_generatePosition:function(h){var l,q,y=this.options,D=h.pageX,K=h.pageY,M="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],
this.offsetParent[0])?this.scrollParent:this.offsetParent,O=/(html|body)/i.test(M[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(h.pageX-this.offset.click.left<this.containment[0]&&(D=this.containment[0]+this.offset.click.left),h.pageY-this.offset.click.top<this.containment[1]&&(K=this.containment[1]+this.offset.click.top),h.pageX-
this.offset.click.left>this.containment[2]&&(D=this.containment[2]+this.offset.click.left),h.pageY-this.offset.click.top>this.containment[3]&&(K=this.containment[3]+this.offset.click.top)),y.grid&&(l=this.originalPageY+Math.round((K-this.originalPageY)/y.grid[1])*y.grid[1],K=this.containment?l-this.offset.click.top>=this.containment[1]&&l-this.offset.click.top<=this.containment[3]?l:l-this.offset.click.top>=this.containment[1]?l-y.grid[1]:l+y.grid[1]:l,q=this.originalPageX+Math.round((D-this.originalPageX)/
y.grid[0])*y.grid[0],D=this.containment?q-this.offset.click.left>=this.containment[0]&&q-this.offset.click.left<=this.containment[2]?q:q-this.offset.click.left>=this.containment[0]?q-y.grid[0]:q+y.grid[0]:q)),{top:K-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():O?0:M.scrollTop()),left:D-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():
O?0:M.scrollLeft())}},_rearrange:function(h,l,q,y){q?q[0].appendChild(this.placeholder[0]):l.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?l.item[0]:l.item[0].nextSibling);var D=this.counter=this.counter?++this.counter:1;this._delay(function(){D===this.counter&&this.refreshPositions(!y)})},_clear:function(h,l){function q(K,M,O){return function(R){O._trigger(K,R,M._uiHash(M))}}this.reverting=!1;var y,D=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),
this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(y in this._storedCSS)"auto"!==this._storedCSS[y]&&"static"!==this._storedCSS[y]||(this._storedCSS[y]="");this.currentItem.css(this._storedCSS).removeClass("dvUi-sortable-helper")}else this.currentItem.show();this.fromOutside&&!l&&D.push(function(K){this._trigger("receive",K,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".dvUi-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||
l||D.push(function(K){this._trigger("update",K,this._uiHash())});this!==this.currentContainer&&(l||(D.push(function(K){this._trigger("remove",K,this._uiHash())}),D.push(function(K){return function(M){K._trigger("receive",M,this._uiHash(this))}}.call(this,this.currentContainer)),D.push(function(K){return function(M){K._trigger("update",M,this._uiHash(this))}}.call(this,this.currentContainer))));for(y=this.containers.length-1;0<=y;y--)l||D.push(q("deactivate",this,this.containers[y])),this.containers[y].containerCache.over&&
(D.push(q("out",this,this.containers[y])),this.containers[y].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,l||this._trigger("beforeStop",h,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||
(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!l){for(y=0;D.length>y;y++)D[y].call(this,h);this._trigger("stop",h,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===d.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(h){var l=h||this;return{helper:l.helper,placeholder:l.placeholder||d([]),position:l.position,originalPosition:l.originalPosition,offset:l.positionAbs,item:l.currentItem,sender:h?
h.element:null}}})}(dvJQuery),dvJQuery&&function(d){(function(){function A(a){var C=a.css("color"),J;a=a[0];for(var b=!1;a&&!J&&!b;){try{var c=d(a).css("background-color")}catch(k){c="transparent"}"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c&&(J=c);b=a.body;a=a.parentNode}a=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/;b=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;var e;c=void 0;(c=C.match(a))?e={r:parseInt(c[1],10),g:parseInt(c[2],10),b:parseInt(c[3],10)}:(c=C.match(b))&&(e={r:parseInt(c[1],
16),g:parseInt(c[2],16),b:parseInt(c[3],16)});var g;J?(c=void 0,(c=J.match(a))?g={r:parseInt(c[1],10),g:parseInt(c[2],10),b:parseInt(c[3],10)}:(c=J.match(b))&&(g={r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)})):g=e?127<Math.max.apply(null,[e.r,e.g,e.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255}:{r:255,g:255,b:255};c=function(k){return"rgb("+[k.r,k.g,k.b].join(", ")+")"};e&&g?(a=Math.max.apply(null,[e.r,e.g,e.b]),e=Math.max.apply(null,[g.r,g.g,g.b]),e=Math.round(e+-.75*(e-a)),e={r:e,g:e,b:e}):
e?(e=Math.max.apply(null,[e.r,e.g,e.b]),a=1,127<e&&(a=-1),e=Math.round(e+96*a),e={r:e,g:e,b:e}):e={r:191,g:191,b:191};return{color:C,"background-color":g?c(g):J,"decor-color":c(e)}}function L(a,C){this.x=a;this.y=C;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var J=function(b){return Math.round(b/Math.abs(b))};this.resizeTo=function(b){if(0===
this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=b,this.y=b*J(this.y);else if(0===this.y)this._length=b,this.x=b*J(this.x);else{var c=Math.abs(this.y/this.x),e=Math.sqrt(Math.pow(b,2)/(1+Math.pow(c,2)));c*=e;this._length=b;this.x=e*J(this.x);this.y=c*J(this.y)}return this};this.angleTo=function(b){var c=this.getLength()*b.getLength();return 0===c?0:Math.acos(Math.min(Math.max((this.x*b.x+this.y*b.y)/c,-1),1))/Math.PI}}function S(a,C){this.x=a;this.y=C;this.getVectorToCoordinates=
function(J,b){return new L(J-this.x,b-this.y)};this.getVectorFromCoordinates=function(J,b){return this.getVectorToCoordinates(J,b).reverse()};this.getVectorToPoint=function(J){return new L(J.x-this.x,J.y-this.y)};this.getVectorFromPoint=function(J){return this.getVectorToPoint(J).reverse()}}function x(a,C,J,b,c){this.data=a;this.context=C;if(a.length)for(var e=a.length,g,k,p=0;p<e;p++){g=a[p];k=g.x.length;J.call(C,g);for(var n=1;n<k;n++)b.call(C,g,n);c.call(C,g)}this.changed=function(){};this.startStrokeFn=
J;this.addToStrokeFn=b;this.endStrokeFn=c;this.inStroke=!1;this._stroke=this._lastPoint=null;this.startStroke=function(w){if(w&&"number"==typeof w.x&&"number"==typeof w.y){this._stroke={x:[w.x],y:[w.y]};this.data.push(this._stroke);this._lastPoint=w;this.inStroke=!0;var B=this._stroke,I=this.startStrokeFn,E=this.context;setTimeout(function(){I.call(E,B)},3);return w}return null};this.addToStroke=function(w){if(this.inStroke&&"number"===typeof w.x&&"number"===typeof w.y&&4<Math.abs(w.x-this._lastPoint.x)+
Math.abs(w.y-this._lastPoint.y)){var B=this._stroke.x.length;this._stroke.x.push(w.x);this._stroke.y.push(w.y);this._lastPoint=w;var I=this._stroke,E=this.addToStrokeFn,V=this.context;setTimeout(function(){E.call(V,I,B)},3);return w}return null};this.endStroke=function(){var w=this.inStroke;this.inStroke=!1;this._lastPoint=null;if(w){var B=this._stroke,I=this.endStrokeFn,E=this.context,V=this.changed;setTimeout(function(){I.call(E,B);V.call(E)},3);return!0}return null}}function t(a,C,J){var b=this.$parent=
d(a);a=this.eventTokens={};this.events=new q(this);var c=d.fn[h]("globalEvents"),e={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};d.extend(e,A(b));C&&d.extend(e,C);this.settings=e;for(var g in J)J.hasOwnProperty(g)&&J[g].call(this,g);this.events.publish(h+".initializing");this.$controlbarUpper=d('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(b);
this.isCanvasEmulator=!1;J=this.canvas=this.initializeCanvas(e);C=d(J);this.$controlbarLower=d('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(b);this.canvasContext=J.getContext("2d");C.data(h+".this",this);b=(b=e.lineWidth)?b:Math.max(Math.round(J.width/400),2);e.lineWidth=b;this.lineCurveThreshold=3*e.lineWidth;e.cssclass&&""!=d.trim(e.cssclass)&&C.addClass(e.cssclass);
this.fatFingerCompensation=0;b=function(E){var V,ba,da=function(la){la=la.changedTouches&&0<la.changedTouches.length?la.changedTouches[0]:la;return new S(Math.round(la.pageX+V),Math.round(la.pageY+ba)+E.fatFingerCompensation)},ea=new l(750,function(){E.dataEngine.endStroke()});this.drawEndHandler=function(la){try{la.preventDefault()}catch(Ha){}ea.clear();E.dataEngine.endStroke()};this.drawStartHandler=function(la){la.preventDefault();var Ha=d(E.canvas).offset();V=-1*Ha.left;ba=-1*Ha.top;E.dataEngine.startStroke(da(la));
ea.kick()};this.drawMoveHandler=function(la){la.preventDefault();E.dataEngine.inStroke&&(E.dataEngine.addToStroke(da(la)),ea.kick())};return this}.call({},this);var k=b.drawEndHandler,p=b.drawStartHandler,n=b.drawMoveHandler,w=this.canvas;C=d(w);this.isCanvasEmulator?(C.bind("mousemove."+h,n),C.bind("mouseup."+h,k),C.bind("mousedown."+h,p)):(w.ontouchstart=function(E){w.onmousedown=void 0;w.onmouseup=void 0;w.onmousemove=void 0;this.fatFingerCompensation=e.minFatFingerCompensation&&-3*e.lineWidth>
e.minFatFingerCompensation?-3*e.lineWidth:e.minFatFingerCompensation;p(E);w.ontouchend=k;w.ontouchstart=p;w.ontouchmove=n},w.onmousedown=function(E){w.ontouchstart=void 0;w.ontouchend=void 0;w.ontouchmove=void 0;p(E);w.onmousedown=p;w.onmouseup=k;w.onmousemove=n});a[h+".windowmouseup"]=c.subscribe(h+".windowmouseup",b.drawEndHandler);this.events.publish(h+".attachingEventHandlers");var B=this;a=e.width.toString(10);var I=h;if("ratio"===a||"%"===a.split("")[a.length-1])this.eventTokens[I+".parentresized"]=
c.subscribe(I+".parentresized",function(E,V,ba){return function(){var da=V.width();if(da!==ba){for(var ea in E)E.hasOwnProperty(ea)&&(c.unsubscribe(E[ea]),delete E[ea]);var la=B.settings;B.$parent.children().remove();for(ea in B)B.hasOwnProperty(ea)&&delete B[ea];ea=la.data;da=1*da/ba;var Ha=[],wa,va;var ua=0;for(wa=ea.length;ua<wa;ua++){var Da=ea[ua];var Ua={x:[],y:[]};var Ka=0;for(va=Da.x.length;Ka<va;Ka++)Ua.x.push(Da.x[Ka]*da),Ua.y.push(Da.y[Ka]*da);Ha.push(Ua)}la.data=Ha;V[I](la)}}}(this.eventTokens,
this.$parent,this.$parent.width(),1*this.canvas.width/this.canvas.height));this.resetCanvas(e.data);this.events.publish(h+".initialized");return this}var h="jSignature",l=function(a,C){var J;this.kick=function(){clearTimeout(J);J=setTimeout(C,a)};this.clear=function(){clearTimeout(J)};return this},q=function(a){this.topics={};this.context=a?a:this;this.publish=function(C,J,b,c){if(this.topics[C]){var e=this.topics[C],g=Array.prototype.slice.call(arguments,1),k=[],p;var n=0;for(p=e.length;n<p;n++){var w=
e[n];var B=w[0];w[1]&&(w[0]=function(){},k.push(n));B.apply(this.context,g)}n=0;for(p=k.length;n<p;n++)e.splice(k[n],1)}};this.subscribe=function(C,J,b){this.topics[C]?this.topics[C].push([J,b]):this.topics[C]=[[J,b]];return{topic:C,callback:J}};this.unsubscribe=function(C){if(this.topics[C.topic])for(var J=this.topics[C.topic],b=0,c=J.length;b<c;b++)J[b][0]===C.callback&&J.splice(b,1)}},y=function(a){var C=this.canvasContext,J=a.x[0];a=a.y[0];var b=this.settings.lineWidth,c=C.fillStyle;C.fillStyle=
C.strokeStyle;C.fillRect(J+b/-2,a+b/-2,b,b);C.fillStyle=c},D=function(a,C){var J=new S(a.x[C-1],a.y[C-1]),b=new S(a.x[C],a.y[C]),c=J.getVectorToPoint(b);if(1<C){var e=new S(a.x[C-2],a.y[C-2]),g=e.getVectorToPoint(J);if(g.getLength()>this.lineCurveThreshold){var k=2<C?(new S(a.x[C-3],a.y[C-3])).getVectorToPoint(e):new L(0,0);a=.35*g.getLength();C=g.angleTo(k.reverse());var p=c.angleTo(g.reverse());k=(new L(k.x+g.x,k.y+g.y)).resizeTo(Math.max(.05,C)*a);var n=(new L(g.x+c.x,g.y+c.y)).reverse().resizeTo(Math.max(.05,
p)*a);g=this.canvasContext;a=e.x;p=e.y;C=J.x;var w=J.y,B=e.x+k.x;e=e.y+k.y;k=J.x+n.x;n=J.y+n.y;g.beginPath();g.moveTo(a,p);g.bezierCurveTo(B,e,k,n,C,w);g.stroke()}}c.getLength()<=this.lineCurveThreshold&&(c=this.canvasContext,e=J.x,J=J.y,k=b.x,b=b.y,c.beginPath(),c.moveTo(e,J),c.lineTo(k,b),c.stroke())},K=function(a){var C=a.x.length-1;if(0<C){var J=new S(a.x[C],a.y[C]),b=new S(a.x[C-1],a.y[C-1]),c=b.getVectorToPoint(J);if(c.getLength()>this.lineCurveThreshold){if(1<C){a=(new S(a.x[C-2],a.y[C-2])).getVectorToPoint(b);
var e=(new L(a.x+c.x,a.y+c.y)).resizeTo(c.getLength()/2);c=this.canvasContext;a=b.x;C=b.y;var g=J.x,k=J.y,p=b.x+e.x;b=b.y+e.y;e=J.x;J=J.y;c.beginPath();c.moveTo(a,C);c.bezierCurveTo(p,b,e,J,g,k)}else c=this.canvasContext,a=b.x,b=b.y,C=J.x,J=J.y,c.beginPath(),c.moveTo(a,b),c.lineTo(C,J);c.stroke()}}};t.prototype.resetCanvas=function(a){var C=this.canvas,J=this.settings,b=this.canvasContext,c=this.isCanvasEmulator,e=C.width,g=C.height;b.clearRect(0,0,e+30,g+30);b.shadowColor=b.fillStyle=J["background-color"];
c&&b.fillRect(0,0,e+30,g+30);b.lineWidth=Math.ceil(parseInt(J.lineWidth,10));b.lineCap=b.lineJoin="round";b.strokeStyle=J["decor-color"];b.shadowOffsetX=0;b.shadowOffsetY=0;var k=Math.round(g/5),p=1.5*k,n=g-k;e-=1.5*k;g-=k;b.beginPath();b.moveTo(p,n);b.lineTo(e,g);b.stroke();b.strokeStyle=J.color;c||(b.shadowColor=b.strokeStyle,b.shadowOffsetX=.5*b.lineWidth,b.shadowOffsetY=-.6*b.lineWidth,b.shadowBlur=0);a||=[];b=this.dataEngine=new x(a,this,y,D,K);J.data=a;d(C).data(h+".data",a).data(h+".settings",
J);var w=this.$parent,B=this.events,I=h;b.changed=function(){B.publish(I+".change");w.trigger("change")};b.changed();return!0};t.prototype.initializeCanvas=function(a){var C=document.createElement("canvas"),J=d(C);a.width===a.height&&"ratio"===a.height&&(a.width="100%");J.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==a.height&&a.height?a.height.toString(10):1).css("width","ratio"!==a.width&&a.width?a.width.toString(10):1);J.appendTo(this.$parent);"ratio"===a.height?
J.css("height",Math.round(J.width()/a.sizeRatio)):"ratio"===a.width&&J.css("width",Math.round(J.height()*a.sizeRatio));J.addClass(h);C.width=J.width();C.height=J.height();a=C;if(a.getContext)a=!1;else{J=a.ownerDocument.parentWindow;var b=J.FlashCanvas?a.ownerDocument.parentWindow.FlashCanvas:"undefined"===typeof FlashCanvas?void 0:FlashCanvas;if(b){a=b.initElement(a);b=1;J&&J.screen&&J.screen.deviceXDPI&&J.screen.logicalXDPI&&(b=1*J.screen.deviceXDPI/J.screen.logicalXDPI);if(1!==b)try{d(a).children("object").get(0).resize(Math.ceil(a.width*
b),Math.ceil(a.height*b)),a.getContext("2d").scale(b,b)}catch(c){}a=!0}else throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");}this.isCanvasEmulator=a;C.onselectstart=function(c){c&&c.preventDefault&&c.preventDefault();c&&c.stopPropagation&&c.stopPropagation();return!1};return C};var M=window,O=function(a,C){var J=new Image,b=this;J.onload=function(){b.getContext("2d").drawImage(J,0,0,J.width<b.width?J.width:b.width,J.height<b.height?J.height:b.height)};J.src="data:"+
C+","+a},R=function(a){this.find("canvas."+h).add(this.filter("canvas."+h)).data(h+".this").resetCanvas(a);return this},Y=function(a,C){if(void 0!==C||"string"!==typeof a||"data:"!==a.substr(0,5)||(C=a.slice(5).split(",")[0],a=a.slice(6+C.length),C!==a)){var J=this.find("canvas."+h).add(this.filter("canvas."+h));if(ma.hasOwnProperty(C))0!==J.length&&ma[C].call(J[0],a,C,function(b){return function(){return b.resetCanvas.apply(b,arguments)}}(J.data(h+".this")));else throw Error(h+" is unable to find import plugin with for format '"+
String(C)+"'");return this}},fa=new q,ha=h,sa,X=function(){fa.publish(ha+".parentresized")};d(M).bind("resize."+ha,function(){sa&&clearTimeout(sa);sa=setTimeout(X,500)}).bind("mouseup."+ha,function(){fa.publish(ha+".windowmouseup")});var ja={},ka={"default":function(){return this.toDataURL()},"native":function(a){return a},image:function(){var a=this.toDataURL();if("string"===typeof a&&4<a.length&&"data:"===a.slice(0,5)&&-1!==a.indexOf(",")){var C=a.indexOf(",");return[a.slice(5,C),a.substr(C+1)]}return[]}},
ma={"native":function(a,C,J){J(a)},image:O,"image/png;base64":O,"image/jpeg;base64":O,"image/jpg;base64":O},ra={"export":ka,"import":ma,instance:ja},Ca={init:function(a){return this.each(function(){var C,J=!1;for(C=this.parentNode;C&&!J;)J=C.body,C=C.parentNode;!J||new t(this,a,ja)})},getSettings:function(){return this.find("canvas."+h).add(this.filter("canvas."+h)).data(h+".this").settings},clear:R,reset:R,addPlugin:function(a,C,J){ra.hasOwnProperty(a)&&(ra[a][C]=J);return this},listPlugins:function(a){var C=
[];if(ra.hasOwnProperty(a)){a=ra[a];for(var J in a)a.hasOwnProperty(J)&&C.push(J)}return C},getData:function(a){var C=this.find("canvas."+h).add(this.filter("canvas."+h));void 0===a&&(a="default");if(0!==C.length&&ka.hasOwnProperty(a))return ka[a].call(C.get(0),C.data(h+".data"))},importData:Y,setData:Y,globalEvents:function(){return fa},events:function(){return this.find("canvas."+h).add(this.filter("canvas."+h)).data(h+".this").events}};d.fn[h]=function(a){if(!a||"object"===typeof a)return Ca.init.apply(this,
arguments);if("string"===typeof a&&Ca[a])return Ca[a].apply(this,Array.prototype.slice.call(arguments,1));d.error("Method "+String(a)+" does not exist on dvJQuery."+h)}})();(function(){d.fn.jSignature("addPlugin","instance","UndoButton",function(A){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[A]){var L=this.settings[A];"function"!==typeof L&&(L=function(){var l=d('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),
q=l.width();l.css("left",Math.round((this.canvas.width-q)/2));q!==l.width()&&l.width(q);return l});var S=L.call(this),x=this;x.events.subscribe("jSignature.change",function(){x.dataEngine.data.length?S.show():S.hide()});var t=this,h=(this.events.topics.hasOwnProperty("jSignature.undo")?A:"jSignature")+".undo";S.bind("click",function(){t.events.publish(h)});t.events.subscribe(h,function(){var l=t.dataEngine.data;l.length&&(l.pop(),t.resetCanvas(l))})}})})})();(function(){for(var A={},L={},S="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),
x=S.length/2,t=x-1;-1<t;t--)A[S[t]]=S[t+x],L[S[t+x]]=S[t];var h=function(M){M=M.split("");for(var O=M.length,R=1;R<O;R++)M[R]=A[M[R]];return M.join("")},l=function(M){for(var O=[],R=0,Y=1,fa=M.length,ha,sa,X=0;X<fa;X++)ha=Math.round(M[X]),sa=ha-R,R=ha,0>sa&&0<Y?(Y=-1,O.push("Z")):0<sa&&0>Y&&(Y=1,O.push("Y")),ha=Math.abs(sa),ha>=x?O.push(h(ha.toString(x))):O.push(ha.toString(x));return O.join("")},q=function(M){var O=[];M=M.split("");for(var R=M.length,Y,fa=1,ha=[],sa=0,X=0;X<R;X++)Y=M[X],Y in A||
"Z"===Y||"Y"===Y?(0!==ha.length&&(ha=parseInt(ha.join(""),x)*fa+sa,O.push(ha),sa=ha),"Z"===Y?(fa=-1,ha=[]):"Y"===Y?(fa=1,ha=[]):ha=[Y]):ha.push(L[Y]);O.push(parseInt(ha.join(""),x)*fa+sa);return O},y=function(M){for(var O=[],R=M.length,Y,fa=0;fa<R;fa++)Y=M[fa],O.push(l(Y.x)),O.push(l(Y.y));return O.join("_")},D=function(M){var O=[];M=M.split("_");for(var R=M.length/2,Y=0;Y<R;Y++)O.push({x:q(M[2*Y]),y:q(M[2*Y+1])});return O};S=function(M){return["image/jsignature;base30",y(M)]};t=function(M,O,R){"string"===
typeof M&&("image/jsignature;base30"===M.substring(0,23).toLowerCase()&&(M=M.substring(24)),R(D(M)))};if(null==this.dvJQuery)throw Error("We need dvJQuery for some of the functionality. dvJQuery is not detected. Failing to initialize...");var K=this.dvJQuery.fn.jSignature;K("addPlugin","export","base30",S);K("addPlugin","export","image/jsignature;base30",S);K("addPlugin","import","base30",t);K("addPlugin","import","image/jsignature;base30",t);this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:h,
compressstrokeleg:l,uncompressstrokeleg:q,compressstrokes:y,uncompressstrokes:D,charmap:A})}).call("undefined"!==typeof window?window:this);(function(){function A(K,M){this.x=K;this.y=M;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var O=function(R){return Math.round(R/Math.abs(R))};this.resizeTo=function(R){if(0===this.x&&0===this.y)this._length=
0;else if(0===this.x)this._length=R,this.y=R*O(this.y);else if(0===this.y)this._length=R,this.x=R*O(this.x);else{var Y=Math.abs(this.y/this.x),fa=Math.sqrt(Math.pow(R,2)/(1+Math.pow(Y,2)));Y*=fa;this._length=R;this.x=fa*O(this.x);this.y=Y*O(this.y)}return this};this.angleTo=function(R){var Y=this.getLength()*R.getLength();return 0===Y?0:Math.acos(Math.min(Math.max((this.x*R.x+this.y*R.y)/Y,-1),1))/Math.PI}}function L(K,M){this.x=K;this.y=M;this.getVectorToCoordinates=function(O,R){return new A(O-
this.x,R-this.y)};this.getVectorFromCoordinates=function(O,R){return this.getVectorToCoordinates(O,R).reverse()};this.getVectorToPoint=function(O){return new A(O.x-this.x,O.y-this.y)};this.getVectorFromPoint=function(O){return this.getVectorToPoint(O).reverse()}}function S(K,M){M=Math.pow(10,M);return Math.round(K*M)/M}function x(K){var M=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],
O,R=K.length,Y,fa=[],ha=[],sa=Y=O=0,X=0,ja=[];if(0!==R){for(O=0;O<R;O++){sa=K[O];X=[];Y={x:[],y:[]};var ka;var ma=0;for(ka=sa.x.length;ma<ka;ma++)X.push({x:sa.x[ma],y:sa.y[ma]});X=simplify(X,.7,!0);ma=0;for(ka=X.length;ma<ka;ma++)Y.x.push(X[ma].x),Y.y.push(X[ma].y);ja.push(Y);fa=fa.concat(Y.x);ha=ha.concat(Y.y)}K=Math.min.apply(null,fa)-1;R=Math.max.apply(null,fa)+1;fa=Math.min.apply(null,ha)-1;ha=Math.max.apply(null,ha)+1;sa=0>K?0:K;X=0>fa?0:fa;O=R-K;Y=ha-fa}M.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+
O.toString()+'" height="'+Y.toString()+'">');O=0;for(R=ja.length;O<R;O++){Y=ja[O];K=M;fa=K.push;ma=Y;Y=sa;ha=X;Y=["M",S(ma.x[0]-Y,2),S(ma.y[0]-ha,2)];ha=1;for(ka=ma.x.length-1;ha<ka;ha++){var ra=Y.push,Ca=ra.apply,a=Y,C=ma,J=ha,b=1;J+=1;var c=new L(C.x[J-1],C.y[J-1]),e=new L(C.x[J],C.y[J]);e=c.getVectorToPoint(e);var g=new L(C.x[J-2],C.y[J-2]);c=g.getVectorToPoint(c);var k=c.getLength()>b?(b=2<J?(new L(C.x[J-3],C.y[J-3])).getVectorToPoint(g):new A(0,0),C=.35*c.getLength(),g=c.angleTo(b.reverse()),
J=e.angleTo(c.reverse()),b=(new A(b.x+c.x,b.y+c.y)).resizeTo(Math.max(.05,g)*C),e=(new A(c.x+e.x,c.y+e.y)).reverse().resizeTo(Math.max(.05,J)*C),e=new A(c.x+e.x,c.y+e.y),["c",S(b.x,2),S(b.y,2),S(e.x,2),S(e.y,2),S(c.x,2),S(c.y,2)]):["l",S(c.x,2),S(c.y,2)];Ca.call(ra,a,k)}0<ka?(ka=Y.push,ra=ka.apply,Ca=Y,C=ha,ha=ma.x.length-1,a=new L(ma.x[ha],ma.y[ha]),k=new L(ma.x[ha-1],ma.y[ha-1]),a=k.getVectorToPoint(a),1<ha&&a.getLength()>C?(ha=(new L(ma.x[ha-2],ma.y[ha-2])).getVectorToPoint(k),k=a.angleTo(ha.reverse()),
ma=.35*a.getLength(),ha=(new A(ha.x+a.x,ha.y+a.y)).resizeTo(Math.max(.05,k)*ma),ha=["c",S(ha.x,2),S(ha.y,2),S(a.x,2),S(a.y,2),S(a.x,2),S(a.y,2)]):ha=["l",S(a.x,2),S(a.y,2)],ra.call(ka,Ca,ha)):0===ka&&Y.push.apply(Y,["l",1,1]);Y=Y.join(" ");fa.call(K,'<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+Y+'"/>')}M.push("</svg>");return M.join("")}function t(K){return[y,x(K)]}function h(K){return[D,q(x(K))]}var l=window;"use strict";("undefined"!=typeof exports?
exports:l).simplify=function(K,M,O){M=void 0!==M?M*M:1;if(!O){var R=K.length,Y=K[0],fa=[Y];for(O=1;O<R;O++){var ha=K[O];var sa=ha.x-Y.x,X=ha.y-Y.y;sa*sa+X*X>M&&(fa.push(ha),Y=ha)}K=(Y!==ha&&fa.push(ha),fa)}ha=K;O=ha.length;R=new ("undefined"!=typeof Uint8Array?Uint8Array:Array)(O);Y=0;fa=O-1;var ja,ka=[],ma=[],ra=[];for(R[Y]=R[fa]=1;fa;){X=0;for(sa=Y+1;sa<fa;sa++){var Ca=ha[sa];var a=ha[Y],C=ha[fa],J=a.x,b=a.y;a=C.x-J;var c=C.y-b;if(0!==a||0!==c){var e=((Ca.x-J)*a+(Ca.y-b)*c)/(a*a+c*c);1<e?(J=C.x,
b=C.y):0<e&&(J+=a*e,b+=c*e)}Ca=(a=Ca.x-J,c=Ca.y-b,a*a+c*c);Ca>X&&(ja=sa,X=Ca)}X>M&&(R[ja]=1,ka.push(Y),ma.push(ja),ka.push(ja),ma.push(fa));Y=ka.pop();fa=ma.pop()}for(sa=0;sa<O;sa++)R[sa]&&ra.push(ha[sa]);return K=ra,K};if("function"!==typeof q)var q=function(K){var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),O=0,R=0;var Y=[];do{var fa=K.charCodeAt(O++);var ha=K.charCodeAt(O++);var sa=K.charCodeAt(O++);var X=fa<<16|ha<<8|sa;fa=X>>18&63;ha=X>>12&63;sa=X>>6&63;X&=
63;Y[R++]=M[fa]+M[ha]+M[sa]+M[X]}while(O<K.length);Y=Y.join("");K=K.length%3;return(K?Y.slice(0,K-3):Y)+"===".slice(K||3)};var y="image/svg+xml",D="image/svg+xml;base64";if("undefined"===typeof d)throw Error("We need dvJQuery for some of the functionality. dvJQuery is not detected. Failing to initialize...");l=d.fn.jSignature;l("addPlugin","export","svg",t);l("addPlugin","export",y,t);l("addPlugin","export","svgbase64",h);l("addPlugin","export",D,h)})()}(dvJQuery),dvJQuery&&function(d){var A=!1,L=
{x:null,y:null},S=null,x={init:function(t){function h(){"none"!==d("#"+t.idMenu).css("display")&&(d("#"+t.idMenu).css("opacity",1),clearTimeout(S),S=null)}function l(){"none"!==d("#"+t.idMenu).css("display")&&(d("#"+t.idMenu).css("opacity",.85),clearTimeout(S),S=setTimeout(function(){d("#"+t.idMenu).hide()},2E3))}"string"===typeof t&&(t={idMenu:t});t=d.extend(!0,{},d.fn.dvContextMenu.defaults,t);t.idMenu?null===document.getElementById(t.idMenu)&&d.error("The menu specified does not exist"):d.error("No menu specified");
x.destroy.call(this);this.data("dv-context-menu",t);var q="dv-context-menu-"+t.idMenu;d("html").on("contextmenu."+q+" click."+q,function(){A?A=!1:d("#"+t.idMenu).hide()});d(t.referrer).on("contextmenu."+q+" scroll."+q,function(y){if("none"!==d("#"+t.idMenu).css("display")){var D={x:y.target.scrollLeft,y:y.target.scrollTop};y=D.x-L.x;var K=D.y-L.y;L=D;D=parseInt(d("#"+t.idMenu).css("top").slice(0,-2))-K;y=parseInt(d("#"+t.idMenu).css("left").slice(0,-2))-y;d("#"+t.idMenu).css({left:y+"px",top:D+"px"})}});
d("#"+t.idMenu).on("contextmenu."+q+" mouseenter."+q,h);d("#"+t.idMenu).on("contextmenu."+q+" mouseleave."+q,l);this.on("contextmenu."+q,function(y){y.preventDefault();y.stopPropagation();if(null==t.beforeShow||"function"!==typeof t.beforeShow||t.beforeShow()){var D={x:y.clientX,y:y.clientY};null!=t.translateMouse&&"function"===typeof t.translateMouse&&t.translateMouse(D);d("#"+t.idMenu).css({left:D.x+"px",top:D.y+"px"});d("#"+t.idMenu).css("opacity",1);d("#"+t.idMenu).show();L={x:y.currentTarget.scrollLeft,
y:y.currentTarget.scrollTop};y.skipNextCloseEvent&&(A=y.skipNextCloseEvent);t.dependsOnTextSelection&&(y=d(t.referrer).children('[data-dv-sel-type="us"]'),y.on("contextmenu."+q+" mouseenter."+q,h),y.on("contextmenu."+q+" mouseleave."+q,l))}});return this},destroy:function(){this.each(function(){var t=d(this),h=t.data("dv-context-menu");void 0!==h&&(d("#"+h.idMenu).hide(),t.removeData("dv-context-menu").off(".dv-context-menu-"+h.idMenu))});d("html").off(".dv-context-menu");return this}};d.fn.dvContextMenu=
function(t){if(x[t])return x[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof t&&"string"!==typeof t&&t)d.error("Method "+t+" does not exist on dvJQuery.dvContextMenu");else return x.init.apply(this,arguments)};d.fn.dvContextMenu.defaults={idMenu:null,translateMouse:null,beforeShow:null,dependsOnTextSelection:!1}}(dvJQuery),dvJQuery&&function(d){function A(a,C){Ca();var J=d('<div class="minicolors" />'),b=d.minicolors.defaults,c;if(!a.data("minicolors-initialized")){C=d.extend(!0,
{},b,C);J.addClass("minicolors-theme-"+C.theme).toggleClass("minicolors-with-opacity",C.opacity);void 0!==C.position&&d.each(C.position.split(" "),function(){J.addClass("minicolors-position-"+this)});b="rgb"===C.format?C.opacity?"25":"20":C.keywords?"11":"7";a.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",C).prop("size",b).wrap(J).after('<div class="minicolors-panel minicolors-slider-'+C.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>');
C.inline||(a.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),a.next(".minicolors-input-swatch").on("click",function(g){g.preventDefault();a.focus()}));b=a.parent().find(".minicolors-panel");b.on("selectstart",function(){return!1}).end();if(C.swatches&&0!==C.swatches.length)for(b.addClass("minicolors-with-swatches"),b=d('<ul class="minicolors-swatches"></ul>').appendTo(b),c=0;c<C.swatches.length;++c){var e=C.swatches[c];
e=ha(e)?R(e,!0):ra(O(e,!0));d('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(b).data("swatch-color",C.swatches[c]).find(".minicolors-swatch-color").css({backgroundColor:ja(e),opacity:e.a});C.swatches[c]=e}C.inline&&a.parent().addClass("minicolors-inline");q(a,!1);a.data("minicolors-initialized",!0)}}function L(a){var C=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");
C.before(a).remove();d(C).off(".minicolors")}function S(a){var C=a.parent(),J=C.find(".minicolors-panel"),b=a.data("minicolors-settings");!a.data("minicolors-initialized")||a.prop("disabled")||C.hasClass("minicolors-inline")||C.hasClass("minicolors-focus")||(x(),C.addClass("minicolors-focus"),J.stop(!0,!0).fadeIn(b.showSpeed,function(){b.show&&b.show.call(a.get(0))}))}function x(){d(".minicolors-focus").each(function(){var a=d(this),C=a.find(".minicolors-input"),J=a.find(".minicolors-panel"),b=C.data("minicolors-settings");
J.fadeOut(b.hideSpeed,function(){b.hide&&"function"===typeof b.hide&&b.hide.call(C.get(0));a.removeClass("minicolors-focus")})})}function t(a,C,J){var b=a.parents(".minicolors").find(".minicolors-input"),c=b.data("minicolors-settings"),e=a.find("[class$=-picker]"),g=a.offset().left,k=a.offset().top,p=Math.round(C.pageX-g),n=Math.round(C.pageY-k);J=J?c.animationSpeed:0;C.originalEvent.changedTouches&&(p=C.originalEvent.changedTouches[0].pageX-g,n=C.originalEvent.changedTouches[0].pageY-k);0>p&&(p=
0);0>n&&(n=0);p>a.width()&&(p=a.width());n>a.height()&&(n=a.height());a.parent().is(".minicolors-slider-wheel")&&e.parent().is(".minicolors-grid")&&(g=75-p,k=75-n,C=Math.sqrt(g*g+k*k),g=Math.atan2(k,g),0>g&&(g+=2*Math.PI),75<C&&(C=75,p=75-75*Math.cos(g),n=75-75*Math.sin(g)),p=Math.round(p),n=Math.round(n));a.is(".minicolors-grid")?e.stop(!0).animate({top:n+"px",left:p+"px"},J,c.animationEasing,function(){h(b,a)}):e.stop(!0).animate({top:n+"px"},J,c.animationEasing,function(){h(b,a)})}function h(a,
C){function J(V,ba){if(!V.length||!ba)return null;var da=V.offset().left;var ea=V.offset().top;return{x:da-ba.offset().left+V.outerWidth()/2,y:ea-ba.offset().top+V.outerHeight()/2}}var b=a.val();var c=a.attr("data-opacity");var e=a.parent();var g=a.data("minicolors-settings"),k=e.find(".minicolors-input-swatch");var p=e.find(".minicolors-grid");var n=e.find(".minicolors-slider"),w=e.find(".minicolors-opacity-slider");var B=p.find("[class$=-picker]");var I=n.find("[class$=-picker]"),E=w.find("[class$=-picker]");
B=J(B,p);I=J(I,n);E=J(E,w);if(C.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(g.control){case "wheel":b=p.width()/2-B.x;e=p.height()/2-B.y;p=Math.sqrt(b*b+e*e);b=Math.atan2(e,b);0>b&&(b+=2*Math.PI);75<p&&(p=75,B.x=69-75*Math.cos(b),B.y=69-75*Math.sin(b));C=fa(p/.75,0,100);c=fa(180*b/Math.PI,0,360);B=fa(100-Math.floor(I.y*(100/n.height())),0,100);b=ka({h:c,s:C,b:B});n.css("backgroundColor",ka({h:c,s:C,b:100}));break;case "saturation":c=fa(parseInt(B.x*(360/p.width()),
10),0,360);C=fa(100-Math.floor(I.y*(100/n.height())),0,100);B=fa(100-Math.floor(B.y*(100/p.height())),0,100);b=ka({h:c,s:C,b:B});n.css("backgroundColor",ka({h:c,s:100,b:B}));e.find(".minicolors-grid-inner").css("opacity",C/100);break;case "brightness":c=fa(parseInt(B.x*(360/p.width()),10),0,360);C=fa(100-Math.floor(B.y*(100/p.height())),0,100);B=fa(100-Math.floor(I.y*(100/n.height())),0,100);b=ka({h:c,s:C,b:B});n.css("backgroundColor",ka({h:c,s:C,b:100}));e.find(".minicolors-grid-inner").css("opacity",
1-B/100);break;default:c=fa(360-parseInt(I.y*(360/n.height()),10),0,360),C=fa(Math.floor(B.x*(100/p.width())),0,100),B=fa(100-Math.floor(B.y*(100/p.height())),0,100),b=ka({h:c,s:C,b:B}),p.css("backgroundColor",ka({h:c,s:100,b:100}))}c=g.opacity?parseFloat(1-E.y/w.height()).toFixed(2):1;l(a,b,c)}else k.find("span").css({backgroundColor:b,opacity:c}),y(a,b,c)}function l(a,C,J){var b=a.parent(),c=a.data("minicolors-settings");b=b.find(".minicolors-input-swatch");c.opacity&&a.attr("data-opacity",J);if("rgb"===
c.format){C=ha(C)?R(C,!0):ra(O(C,!0));J=""===a.attr("data-opacity")?1:fa(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);if(isNaN(J)||!c.opacity)J=1;C=1>=a.minicolors("rgbObject").a&&C&&c.opacity?"rgba("+C.r+", "+C.g+", "+C.b+", "+parseFloat(J)+")":"rgb("+C.r+", "+C.g+", "+C.b+")"}else ha(C)&&(C=X(C)),C=M(C,c.letterCase);a.val(C);b.find("span").css({backgroundColor:C,opacity:J});y(a,C,J)}function q(a,C){var J;var b=a.parent();var c=a.data("minicolors-settings");var e=b.find(".minicolors-input-swatch");
var g=b.find(".minicolors-grid"),k=b.find(".minicolors-slider"),p=b.find(".minicolors-opacity-slider"),n=g.find("[class$=-picker]"),w=k.find("[class$=-picker]"),B=p.find("[class$=-picker]");if(ha(a.val())){var I=X(a.val());(J=fa(parseFloat(sa(a.val())).toFixed(2),0,1))&&a.attr("data-opacity",J)}else I=M(O(a.val(),!0),c.letterCase);I||=M(Y(c.defaultValue,!0),c.letterCase);J=ma(I);var E=c.keywords?d.map(c.keywords.split(","),function(ba){return d.trim(ba.toLowerCase())}):[];E=""!==a.val()&&-1<d.inArray(a.val().toLowerCase(),
E)?M(a.val()):ha(a.val())?R(a.val()):I;C||a.val(E);if(c.opacity){var V=""===a.attr("data-opacity")?1:fa(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);isNaN(V)&&(V=1);a.attr("data-opacity",V);e.find("span").css("opacity",V);C=fa(p.height()-p.height()*V,0,p.height());B.css("top",C+"px")}"transparent"===a.val().toLowerCase()&&e.find("span").css("opacity",0);e.find("span").css("backgroundColor",I);switch(c.control){case "wheel":b=fa(Math.ceil(.75*J.s),0,g.height()/2);e=J.h*Math.PI/180;c=fa(75-Math.cos(e)*
b,0,g.width());C=fa(75-Math.sin(e)*b,0,g.height());n.css({top:C+"px",left:c+"px"});C=150-J.b/(100/g.height());""===I&&(C=0);w.css("top",C+"px");k.css("backgroundColor",ka({h:J.h,s:J.s,b:100}));break;case "saturation":c=fa(5*J.h/12,0,150);C=fa(g.height()-Math.ceil(J.b/(100/g.height())),0,g.height());n.css({top:C+"px",left:c+"px"});C=fa(k.height()-J.s*(k.height()/100),0,k.height());w.css("top",C+"px");k.css("backgroundColor",ka({h:J.h,s:100,b:J.b}));b.find(".minicolors-grid-inner").css("opacity",J.s/
100);break;case "brightness":c=fa(5*J.h/12,0,150);C=fa(g.height()-Math.ceil(J.s/(100/g.height())),0,g.height());n.css({top:C+"px",left:c+"px"});C=fa(k.height()-J.b*(k.height()/100),0,k.height());w.css("top",C+"px");k.css("backgroundColor",ka({h:J.h,s:J.s,b:100}));b.find(".minicolors-grid-inner").css("opacity",1-J.b/100);break;default:c=fa(Math.ceil(J.s/(100/g.width())),0,g.width()),C=fa(g.height()-Math.ceil(J.b/(100/g.height())),0,g.height()),n.css({top:C+"px",left:c+"px"}),C=fa(k.height()-J.h/(360/
k.height()),0,k.height()),w.css("top",C+"px"),g.css("backgroundColor",ka({h:J.h,s:100,b:100}))}a.data("minicolors-initialized")&&y(a,E,V)}function y(a,C,J){var b=a.data("minicolors-settings"),c=a.data("minicolors-lastChange"),e;if(!c||c.value!==C||c.opacity!==J){a.data("minicolors-lastChange",{value:C,opacity:J});if(b.swatches&&0!==b.swatches.length){c=ha(C)?R(C,!0):ra(C);var g=-1;for(e=0;e<b.swatches.length;++e)if(c.r===b.swatches[e].r&&c.g===b.swatches[e].g&&c.b===b.swatches[e].b&&c.a===b.swatches[e].a){g=
e;break}a.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected");-1!==g&&a.parent().find(".minicolors-swatches .minicolors-swatch").eq(e).addClass("selected")}b.change&&(b.changeDelay?(clearTimeout(a.data("minicolors-changeTimeout")),a.data("minicolors-changeTimeout",setTimeout(function(){b.change.call(a.get(0),C,J)},b.changeDelay))):b.change.call(a.get(0),C,J));a.trigger("change").trigger("input")}}function D(a){var C=d(a).attr("data-opacity");ha(d(a).val())?a=R(d(a).val(),
!0):(a=O(d(a).val(),!0),a=ra(a));if(!a)return null;void 0!==C&&d.extend(a,{a:parseFloat(C)});return a}function K(a,C){var J=d(a).attr("data-opacity");ha(d(a).val())?a=R(d(a).val(),!0):(a=O(d(a).val(),!0),a=ra(a));if(!a)return null;void 0===J&&(J=1);return C?"rgba("+a.r+", "+a.g+", "+a.b+", "+parseFloat(J)+")":"rgb("+a.r+", "+a.g+", "+a.b+")"}function M(a,C){return"uppercase"===C?a.toUpperCase():a.toLowerCase()}function O(a,C){a=a.replace(/^#/g,"");if(!a.match(/^[A-F0-9]{3,6}/ig)||3!==a.length&&6!==
a.length)return"";3===a.length&&C&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a}function R(a,C){a=a.replace(/[^\d,.]/g,"").split(",");a[0]=fa(parseInt(a[0],10),0,255);a[1]=fa(parseInt(a[1],10),0,255);a[2]=fa(parseInt(a[2],10),0,255);a[3]&&(a[3]=fa(parseFloat(a[3],10),0,1));return C?a[3]?{r:a[0],g:a[1],b:a[2],a:a[3]}:{r:a[0],g:a[1],b:a[2]}:"undefined"!==typeof a[3]&&1>=a[3]?"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")":"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function Y(a,C){return ha(a)?R(a):O(a,C)}
function fa(a,C,J){a<C&&(a=C);a>J&&(a=J);return a}function ha(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?!0:!1}function sa(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===a.length?a[4]:"1"}function X(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+
("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function ja(a){var C=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];d.each(C,function(J,b){1===b.length&&(C[J]="0"+b)});return"#"+C.join("")}function ka(a){var C=ja,J,b;var c=Math.round(a.h);var e=Math.round(255*a.s/100);a=Math.round(255*a.b/100);if(0===e)c=J=b=a;else{e=(255-e)*a/255;var g=c%60*(a-e)/60;360===c&&(c=0);60>c?(c=a,b=e,J=e+g):120>c?(J=a,b=e,c=a-g):180>c?(J=a,c=e,b=e+g):240>c?(b=a,c=
e,J=a-g):300>c?(b=a,J=e,c=e+g):360>c?(c=a,J=e,b=a-g):b=J=c=0}return C({r:Math.round(c),g:Math.round(J),b:Math.round(b)})}function ma(a){a=ra(a);var C={h:0,s:0,b:0},J=Math.max(a.r,a.g,a.b),b=J-Math.min(a.r,a.g,a.b);C.b=J;C.s=0!==J?255*b/J:0;C.h=0!==C.s?a.r===J?(a.g-a.b)/b:a.g===J?2+(a.b-a.r)/b:4+(a.r-a.g)/b:-1;C.h*=60;0>C.h&&(C.h+=360);C.s*=100/255;C.b*=100/255;0===C.s&&(C.h=360);return C}function ra(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}}function Ca(){d([document]).on("mousedown.minicolors touchstart.minicolors",
function(a){d(a.target).parents().add(a.target).hasClass("minicolors")||x()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(a){var C=d(this);a.preventDefault();d(a.delegateTarget).data("minicolors-target",C);t(C,a,!0)}).on("mousemove.minicolors touchmove.minicolors",function(a){var C=d(a.delegateTarget).data("minicolors-target");C&&t(C,a)}).on("mouseup.minicolors touchend.minicolors",function(){d(this).removeData("minicolors-target")}).on("click.minicolors",
".minicolors-swatches li",function(a){a.preventDefault();var C=d(this);a=C.parents(".minicolors").find(".minicolors-input");C=C.data("swatch-color");l(a,C,sa(C));q(a)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(a){var C=d(this).parent().find(".minicolors-input");a.preventDefault();S(C)}).on("focus.minicolors",".minicolors-input",function(){var a=d(this);a.data("minicolors-initialized")&&S(a)}).on("blur.minicolors",".minicolors-input",function(){var a=d(this),
C=a.data("minicolors-settings");if(a.data("minicolors-initialized")){var J=C.keywords?d.map(C.keywords.split(","),function(c){return d.trim(c.toLowerCase())}):[];if(""!==a.val()&&-1<d.inArray(a.val().toLowerCase(),J))var b=a.val();else J=ha(a.val())?R(a.val(),!0):(J=O(a.val(),!0))?ra(J):null,b=null===J?C.defaultValue:"rgb"===C.format?C.opacity?R("rgba("+J.r+","+J.g+","+J.b+","+a.attr("data-opacity")+")"):R("rgb("+J.r+","+J.g+","+J.b+")"):ja(J);J=C.opacity?a.attr("data-opacity"):1;"transparent"===
b.toLowerCase()&&(J=0);a.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",J);a.val(b);""===a.val()&&a.val(Y(C.defaultValue,!0));a.val(M(a.val(),C.letterCase))}}).on("keydown.minicolors",".minicolors-input",function(a){var C=d(this);if(C.data("minicolors-initialized"))switch(a.keyCode){case 9:x();break;case 13:case 27:x(),C.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var a=d(this);a.data("minicolors-initialized")&&q(a,!0)}).on("paste.minicolors",".minicolors-input",
function(){var a=d(this);a.data("minicolors-initialized")&&setTimeout(function(){q(a,!0)},1)})}d.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom right",show:null,showSpeed:100,theme:"default",swatches:[]}};d.extend(d.fn,{minicolors:function(a,C){switch(a){case "destroy":return d(this).each(function(){L(d(this))}),d(this);
case "hide":return x(),d(this);case "opacity":if(void 0===C)return d(this).attr("data-opacity");d(this).each(function(){q(d(this).attr("data-opacity",C))});return d(this);case "rgbObject":return D(d(this),"rgbaObject"===a);case "rgbString":case "rgbaString":return K(d(this),"rgbaString"===a);case "settings":if(void 0===C)return d(this).data("minicolors-settings");d(this).each(function(){var J=d(this).data("minicolors-settings")||{};L(d(this));d(this).minicolors(d.extend(!0,J,C))});return d(this);
case "show":return S(d(this).eq(0)),d(this);case "value":if(void 0===C)return d(this).val();d(this).each(function(){"object"===typeof C&&null!==C?(C.opacity&&d(this).attr("data-opacity",fa(C.opacity,0,1)),C.color&&d(this).val(C.color)):d(this).val(C);q(d(this))});return d(this);default:return"create"!==a&&(C=a),d(this).each(function(){A(d(this),C)}),d(this)}}})}(dvJQuery),dvJQuery&&function(d){var A,L=function(){var x=d(this);setTimeout(function(){x.find(":dvUi-dvButton").dvButton("refresh")},1)},
S=function(x){var t=x.name,h=x.form,l=d([]);t&&(t=t.replace(/'/g,"\\'"),l=h?d(h).find("[name='"+t+"'][type=radio]"):d("[name='"+t+"'][type=radio]",x.ownerDocument).filter(function(){return!this.form}));return l};d.widget("dvUi.dvButton",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null},setActive:null},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,L);"boolean"!==
typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var x=this,t=this.options,h="checkbox"===this.type||"radio"===this.type,l=h?"":"dvUi-state-active";null===t.label&&(t.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){t.disabled||this===A&&d(this).addClass("dvUi-state-active")}).bind("mouseleave"+this.eventNamespace,function(){t.disabled||d(this).removeClass(l)}).bind("click"+this.eventNamespace,function(q){t.disabled&&(q.preventDefault(),q.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("dvUi-state-focus")},blur:function(){this.buttonElement.removeClass("dvUi-state-focus")}});h&&this.element.bind("change"+this.eventNamespace,
function(){x.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1;d(this).addClass("dvUi-state-active");x.buttonElement.attr("aria-pressed","true");var q=x.element[0];S(q).not(q).map(function(){return d(this).dvButton("widget")[0]}).removeClass("dvUi-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+
this.eventNamespace,function(){if(t.disabled)return!1;d(this).addClass("dvUi-state-active");A=this;x.document.one("mouseup",function(){A=null})}).bind("mouseup"+this.eventNamespace,function(){if(t.disabled)return!1;d(this).removeClass("dvUi-state-active")}).bind("keydown"+this.eventNamespace,function(q){if(t.disabled)return!1;q.keyCode!==d.dvUi.keyCode.SPACE&&q.keyCode!==d.dvUi.keyCode.ENTER||d(this).addClass("dvUi-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){d(this).removeClass("dvUi-state-active")}),
this.buttonElement.is("a")&&this.buttonElement.keyup(function(q){q.keyCode===d.dvUi.keyCode.SPACE&&d(this).click()}));this._setOption("disabled",t.disabled);this._resetButton()},_determineButtonType:function(){this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if("checkbox"===this.type||"radio"===this.type){var x=this.element.parents().last();var t="label[for='"+this.element.attr("id")+
"']";this.buttonElement=x.find(t);this.buttonElement.length||(x=x.length?x.siblings():this.element.siblings(),this.buttonElement=x.filter(t),this.buttonElement.length||(this.buttonElement=x.find(t)));this.element.addClass("dvUi-helper-hidden-accessible");(x=this.element.is(":checked"))&&this.buttonElement.addClass("dvUi-state-active");this.buttonElement.prop("aria-pressed",x)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("dvUi-helper-hidden-accessible");
this.buttonElement.removeClass("dvUi-button dvUi-widget dvUi-state-default dvUi-corner-all dvUi-state-active dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".dvUi-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(x,t){this._super(x,t);"disabled"===x?(this.widget().toggleClass("dvUi-state-disabled",
!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("dvUi-state-focus"):this.buttonElement.removeClass("dvUi-state-focus dvUi-state-active"))):this._resetButton()},refresh:function(){var x=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("dvUi-button-disabled"),t=this;x!==this.options.disabled&&this._setOption("disabled",x);"radio"===this.type?S(this.element[0]).each(function(){d(this).is(":checked")?
(d(this).dvButton("widget").addClass("dvUi-state-active").attr("aria-pressed","true"),t._trigger("setActive")):d(this).dvButton("widget").removeClass("dvUi-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?(this.buttonElement.addClass("dvUi-state-active").attr("aria-pressed","true"),t._trigger("setActive")):this.buttonElement.removeClass("dvUi-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&
this.element.val(this.options.label);else{var x=this.buttonElement.removeClass("dvUi-button-icons-only dvUi-button-icon-only dvUi-button-text-icons dvUi-button-text-icon-primary dvUi-button-text-icon-secondary dvUi-button-text-only"),t=d("<span></span>",this.document[0]).addClass("dvUi-button-text").html(this.options.label).appendTo(x.empty()).text(),h=this.options.icons,l=h.primary&&h.secondary,q=[];h.primary||h.secondary?(this.options.text&&q.push("dvUi-button-text-icon"+(l?"s":h.primary?"-primary":
"-secondary")),h.primary&&x.prepend("<span class='dvUi-button-icon-primary dvUi-icon "+h.primary+"'></span>"),h.secondary&&x.append("<span class='dvUi-button-icon-secondary dvUi-icon "+h.secondary+"'></span>"),this.options.text||(q.push(l?"dvUi-button-icons-only":"dvUi-button-icon-only"),this.hasTitle||x.attr("title",d.trim(t)))):q.push("dvUi-button-text-only");x.addClass(q.join(" "))}}});d.widget("dvUi.dvButtonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(dvUi-dvButton)",
setActive:null},_create:function(){this.element.addClass("dvUi-buttonset");this.refresh()},_init:function(){this.refresh()},_setOption:function(x,t){"disabled"===x&&this.buttons.dvButton("option",x,t);this._super(x,t)},refresh:function(){var x="rtl"===this.element.css("direction"),t=this.element.find(this.options.items),h=t.filter(":dvUi-dvButton");t.not(":dvUi-dvButton").dvButton({setActive:this.options.setActive});h.dvButton("refresh");this.buttons=t.map(function(){return d(this).dvButton("widget")[0]}).removeClass("dvUi-corner-all dvUi-corner-left dvUi-corner-right").filter(":first").addClass(x?
"dvUi-corner-right":"dvUi-corner-left").end().filter(":last").addClass(x?"dvUi-corner-left":"dvUi-corner-right").end().end()},_destroy:function(){this.element.removeClass("dvUi-buttonset");this.buttons.map(function(){return d(this).dvButton("widget")[0]}).removeClass("dvUi-corner-left dvUi-corner-right").end().dvButton("destroy")}});d.widget("dvUi.dvDialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,
maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(x){var t=d(this).css(x).offset().top;0>t&&d(this).css("top",x.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,
maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();
this.element.show().removeAttr("title").addClass("dvUi-dialog-content dvUi-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&d.fn.draggable&&this._makeDraggable();this.options.resizable&&d.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var x=this.options.appendTo;return x&&(x.jquery||x.nodeType)?d(x):this.document.find(x||"body").eq(0)},
_destroy:function(){var x=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("dvUi-dialog-content dvUi-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var t=x.parent.children().eq(x.index);t.length&&t[0]!==this.element[0]?t.before(this.element):x.parent.append(this.element)},widget:function(){return this.uiDialog},disable:d.noop,enable:d.noop,close:function(x){var t,
h=this;if(this._isOpen&&!1!==this._trigger("beforeClose",x)){this._isOpen=!1;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").focus().length)try{(t=this.document[0].activeElement)&&"body"!==t.nodeName.toLowerCase()&&d(t).blur()}catch(l){}this._hide(this.uiDialog,this.options.hide,function(){h._trigger("close",x)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(x,t){var h=!1,l=this.uiDialog.siblings(".dvUi-front:visible").map(function(){return+d(this).css("z-index")}).get();
l=Math.max.apply(null,l);l>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",l+1),h=!0);h&&!t&&this._trigger("focus",x);return h},open:function(){var x=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=d(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){x._focusTabbable();
x._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},refresh:function(x){x&&(this._setOption("maxHeight",x),this._size());this._position()},_focusTabbable:function(){var x=this._focusedElement;x||=this.element.find("[autofocus]");x.length||(x=this.element.find(":tabbable"));x.length||(x=this.uiDialogButtonPane.find(":tabbable"));x.length||(x=this.uiDialogTitlebarClose.filter(":tabbable"));x.length||(x=this.uiDialog);x.eq(0).focus()},_keepFocus:function(x){function t(){var h=this.document[0].activeElement;
this.uiDialog[0]===h||d.contains(this.uiDialog[0],h)||this._focusTabbable()}x.preventDefault();t.call(this);this._delay(t)},_createWrapper:function(){this.uiDialog=d("<div>").addClass("dvUi-dialog dvUi-widget dvUi-widget-content dvUi-corner-all dvUi-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(x){if(this.options.closeOnEscape&&!x.isDefaultPrevented()&&x.keyCode&&x.keyCode===d.dvUi.keyCode.ESCAPE)x.preventDefault(),
this.close(x);else if(x.keyCode===d.dvUi.keyCode.TAB&&!x.isDefaultPrevented()){var t=this.uiDialog.find(":tabbable"),h=t.filter(":first"),l=t.filter(":last");x.target!==l[0]&&x.target!==this.uiDialog[0]||x.shiftKey?x.target!==h[0]&&x.target!==this.uiDialog[0]||!x.shiftKey||(this._delay(function(){l.focus()}),x.preventDefault()):(this._delay(function(){h.focus()}),x.preventDefault())}},mousedown:function(x){this._moveToTop(x)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||
this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=d("<div>").addClass("dvUi-dialog-titlebar dvUi-widget-header dvUi-corner-all dvUi-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(t){d(t.target).closest(".dvUi-dialog-titlebar-close")||this.uiDialog.focus()}});this.uiDialogTitlebarClose=d('<div class="dvUi-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.48 2.52a.75.75 0 0 1 0 1.06L9.06 8l4.42 4.419a.75.75 0 1 1-1.06 1.06L8 9.06l-4.42 4.42a.75.75 0 0 1-1.06-1.061l4.42-4.42L2.52 3.58a.75.75 0 0 1 1.06-1.06L8 6.938l4.42-4.42a.75.75 0 0 1 1.06 0Z" fill="#2B2E36"/></svg></div>').addClass("dvUi-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);
this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault();this.close(t)}});var x=d("<span>").uniqueId().addClass("dvUi-dialog-title").prependTo(this.uiDialogTitlebar);this._title(x);this.uiDialog.attr({"aria-labelledby":x.attr("id")})},_title:function(x){this.options.title||x.html("&#160;");x.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=d("<div>").addClass("dvUi-dialog-buttonpane dvUi-widget-content dvUi-helper-clearfix");this.uiDialogButtonSpacer=
d("<div>").addClass("dvUi-dialog-spacer");this.uiButtonSet=d("<div>").addClass("dvUi-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var x=this,t=this.options.buttons;this.uiDialogButtonPane.remove();this.uiDialogButtonSpacer.remove();this.uiButtonSet.empty();d.isEmptyObject(t)||d.isArray(t)&&!t.length?this.uiDialog.removeClass("dvUi-dialog-buttons"):(d.each(t,function(h,l){l=d.isFunction(l)?{click:l,text:h}:l;l=d.extend({type:"button"},l);var q=
l.click;l.click=function(){q.apply(x.element[0],arguments)};h={icons:l.icons,text:l.showText};delete l.icons;delete l.showText;d("<button></button>",l).dvButton(h).appendTo(x.uiButtonSet)}),this.uiDialog.addClass("dvUi-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),this.uiDialogButtonSpacer.insertBefore(this.uiDialogButtonPane))},_makeDraggable:function(){function x(l){return{position:l.position,offset:l.offset}}var t=this,h=this.options;this.uiDialog.draggable({cancel:".dvUi-dialog-content, .dvUi-dialog-titlebar-close",
handle:".dvUi-dialog-titlebar",containment:"document",start:function(l,q){d(this).addClass("dvUi-dialog-dragging");t._blockFrames();t._trigger("dragStart",l,x(q))},drag:function(l,q){t._trigger("drag",l,x(q))},stop:function(l,q){var y=q.offset.left-t.document.scrollLeft(),D=q.offset.top-t.document.scrollTop();h.position={my:"left top",at:"left"+(0<=y?"+":"")+y+" top"+(0<=D?"+":"")+D,of:t.window};d(this).removeClass("dvUi-dialog-dragging");t._unblockFrames();t._trigger("dragStop",l,x(q))}})},_makeResizable:function(){function x(y){return{originalPosition:y.originalPosition,
originalSize:y.originalSize,position:y.position,size:y.size}}var t=this,h=this.options,l=h.resizable,q=this.uiDialog.css("position");l="string"===typeof l?l:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".dvUi-dialog-content",containment:"document",alsoResize:this.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:this._minHeight(),handles:l,start:function(y,D){d(this).addClass("dvUi-dialog-resizing");t._blockFrames();t._trigger("resizeStart",y,x(D))},resize:function(y,
D){t._trigger("resize",y,x(D))},stop:function(y,D){var K=t.uiDialog.offset(),M=K.left-t.document.scrollLeft();K=K.top-t.document.scrollTop();h.height=t.uiDialog.height();h.width=t.uiDialog.width();h.position={my:"left top",at:"left"+(0<=M?"+":"")+M+" top"+(0<=K?"+":"")+K,of:t.window};d(this).removeClass("dvUi-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",y,x(D))}}).css("position",q)},_trackFocus:function(){this._on(this.widget(),{focusin:function(x){this._makeFocusTarget();this._focusedElement=
d(x.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var x=this._trackingInstances(),t=d.inArray(this,x);-1!==t&&x.splice(t,1)},_trackingInstances:function(){var x=this.document.data("dvUi-dvDialog-instances");x||(x=[],this.document.data("dvUi-dvDialog-instances",x));return x},_minHeight:function(){var x=this.options;return"auto"===x.height?x.minHeight:Math.min(x.minHeight,x.height)},_position:function(){var x=this.uiDialog.is(":visible");
x||this.uiDialog.show();this.uiDialog.position(this.options.position);x||this.uiDialog.hide()},_setOptions:function(x){var t=this,h=!1,l={};d.each(x,function(q,y){t._setOption(q,y);q in t.sizeRelatedOptions&&(h=!0);q in t.resizableRelatedOptions&&(l[q]=y)});h&&(this._size(),this._position());this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",l)},_setOption:function(x,t){var h,l=this.uiDialog;"dialogClass"===x&&l.removeClass(this.options.dialogClass).addClass(t);"disabled"!==
x&&(this._super(x,t),"appendTo"===x&&this.uiDialog.appendTo(this._appendTo()),"buttons"===x&&this._createButtons(),"draggable"===x&&((h=l.is(":data(dvUi-draggable)"))&&!t&&l.draggable("destroy"),!h&&t&&this._makeDraggable()),"position"===x&&this._position(),"resizable"===x&&((h=l.is(":data(dvUi-resizable)"))&&!t&&l.resizable("destroy"),h&&"string"===typeof t&&l.resizable("option","handles",t),h||!1===t||this._makeResizable()),"title"===x&&this._title(this.uiDialogTitlebar.find(".dvUi-dialog-title")))},
_size:function(){var x=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});x.minWidth>x.width&&(x.width=x.minWidth);var t=this.uiDialog.css({height:"auto",width:x.width}).outerHeight();var h=Math.max(0,x.minHeight-t);var l="number"===typeof x.maxHeight?Math.max(0,x.maxHeight-t):"none";"auto"===x.height?this.element.css({minHeight:h,maxHeight:l,height:"auto"}):this.element.height(Math.max(0,x.height-t));this.uiDialog.is(":data(dvUi-resizable)")&&this.uiDialog.resizable("option",
"minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var x=d(this);return d("<div>").css({position:"absolute",width:x.outerWidth(),height:x.outerHeight()}).appendTo(x.parent()).offset(x.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(x){return d(x.target).closest(".dvUi-dialog").length?!0:!!d(x.target).closest(".dvUi-datepicker").length},_createOverlay:function(){if(this.options.modal){var x=
!0;this._delay(function(){x=!1});this.document.data("dvUi-dvDialog-overlays")||this._on(this.document,{focusin:function(t){x||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=d("<div>").addClass("dvUi-widget-overlay dvUi-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("dvUi-dvDialog-overlays",(this.document.data("dvUi-dvDialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&
this.overlay){var x=this.document.data("dvUi-dvDialog-overlays")-1;x?this.document.data("dvUi-dvDialog-overlays",x):this.document.unbind("focusin").removeData("dvUi-dvDialog-overlays");this.overlay.remove();this.overlay=null}}});d.widget("dvUi.dvMenu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"dvUi-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;
this.mouseHandled=!1;this.element.uniqueId().addClass("dvUi-menu dvUi-widget dvUi-widget-content").toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("dvUi-state-disabled").attr("aria-disabled","true");this._on({"mousedown .dvUi-menu-item":function(x){x.preventDefault()},"click .dvUi-menu-item":function(x){var t=d(x.target);!this.mouseHandled&&t.not(".dvUi-state-disabled").length&&(this.select(x),
x.isPropagationStopped()||(this.mouseHandled=!0),t.has(".dvUi-menu").length?this.expand(x):!this.element.is(":focus")&&d(this.document[0].activeElement).closest(".dvUi-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".dvUi-menu").length&&clearTimeout(this.timer)))},"mouseenter .dvUi-menu-item":function(x){if(!this.previousFilter){var t=d(x.currentTarget);t.siblings(".dvUi-state-active").removeClass("dvUi-state-active");this.focus(x,t)}},mouseleave:"collapseAll",
"mouseleave .dvUi-menu":"collapseAll",focus:function(x,t){var h=this.active||this.element.find(this.options.items).eq(0);t||this.focus(x,h)},blur:function(x){this._delay(function(){d.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(x)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(x){this._closeOnDocumentClick(x)&&this.collapseAll(x);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".dvUi-menu").addBack().removeClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-menu-icons dvUi-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".dvUi-menu-item").removeClass("dvUi-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("dvUi-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var x=d(this);x.data("dvUi-dvMenu-submenu-carat")&&x.remove()});this.element.find(".dvUi-menu-divider").removeClass("dvUi-menu-divider dvUi-widget-content")},_keydown:function(x){var t=!0;switch(x.keyCode){case d.dvUi.keyCode.PAGE_UP:this.previousPage(x);
break;case d.dvUi.keyCode.PAGE_DOWN:this.nextPage(x);break;case d.dvUi.keyCode.HOME:this._move("first","first",x);break;case d.dvUi.keyCode.END:this._move("last","last",x);break;case d.dvUi.keyCode.UP:this.previous(x);break;case d.dvUi.keyCode.DOWN:this.next(x);break;case d.dvUi.keyCode.LEFT:this.collapse(x);break;case d.dvUi.keyCode.RIGHT:this.active&&!this.active.is(".dvUi-state-disabled")&&this.expand(x);break;case d.dvUi.keyCode.ENTER:case d.dvUi.keyCode.SPACE:this._activate(x);break;case d.dvUi.keyCode.ESCAPE:this.collapse(x);
break;default:t=!1;var h=this.previousFilter||"";var l=String.fromCharCode(x.keyCode);var q=!1;clearTimeout(this.filterTimer);l===h?q=!0:l=h+l;h=this._filterMenuItems(l);h=q&&-1!==h.index(this.active.next())?this.active.nextAll(".dvUi-menu-item"):h;h.length||(l=String.fromCharCode(x.keyCode),h=this._filterMenuItems(l));h.length?(this.focus(x,h),this.previousFilter=l,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}t&&x.preventDefault()},_activate:function(x){this.active.is(".dvUi-state-disabled")||
(this.active.is("[aria-haspopup='true']")?this.expand(x):this.select(x))},refresh:function(){var x=this,t=this.options.icons.submenu;var h=this.element.find(this.options.menus);this.element.toggleClass("dvUi-menu-icons",!!this.element.find(".dvUi-icon").length);h.filter(":not(.dvUi-menu)").addClass("dvUi-menu dvUi-widget dvUi-widget-content dvUi-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var l=d(this),q=l.parent(),y=d("<span>").addClass("dvUi-menu-icon dvUi-icon "+
t).data("dvUi-dvMenu-submenu-carat",!0);q.attr("aria-haspopup","true").prepend(y);l.attr("aria-labelledby",q.attr("id"))});h=h.add(this.element).find(this.options.items);h.not(".dvUi-menu-item").each(function(){var l=d(this);x._isDivider(l)&&l.addClass("dvUi-widget-content dvUi-menu-divider")});h.not(".dvUi-menu-item, .dvUi-menu-divider").addClass("dvUi-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});h.filter(".dvUi-state-disabled").attr("aria-disabled","true");this.active&&!d.contains(this.element[0],
this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(x,t){"icons"===x&&this.element.find(".dvUi-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu);"disabled"===x&&this.element.toggleClass("dvUi-state-disabled",!!t).attr("aria-disabled",t);this._super(x,t)},focus:function(x,t){this.blur(x,x&&"focus"===x.type);this._scrollIntoView(t);this.active=t.first();var h=this.active.addClass("dvUi-state-focus").removeClass("dvUi-state-active");
this.options.role&&this.element.attr("aria-activedescendant",h.attr("id"));this.active.parent().closest(".dvUi-menu-item").addClass("dvUi-state-active");x&&"keydown"===x.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);h=t.children(".dvUi-menu");h.length&&x&&/^mouse/.test(x.type)&&this._startOpening(h);this.activeMenu=t.parent();this._trigger("focus",x,{item:t})},_scrollIntoView:function(x){if(this._hasScroll()){var t=parseFloat(d.css(this.activeMenu[0],"borderTopWidth"))||
0;var h=parseFloat(d.css(this.activeMenu[0],"paddingTop"))||0;t=x.offset().top-this.activeMenu.offset().top-t-h;h=this.activeMenu.scrollTop();var l=this.activeMenu.height();x=x.outerHeight();0>t?this.activeMenu.scrollTop(h+t):t+x>l&&this.activeMenu.scrollTop(h+t-l+x)}},blur:function(x,t){t||clearTimeout(this.timer);this.active&&(this.active.removeClass("dvUi-state-focus"),this.active=null,this._trigger("blur",x,{item:this.active}))},_startOpening:function(x){clearTimeout(this.timer);"true"===x.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(x)},this.delay))},_open:function(x){var t=d.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".dvUi-menu").not(x.parents(".dvUi-menu")).hide().attr("aria-hidden","true");x.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(x,t){clearTimeout(this.timer);this.timer=this._delay(function(){var h=t?this.element:d(x&&x.target).closest(this.element.find(".dvUi-menu"));
h.length||(h=this.element);this._close(h);this.blur(x);this.activeMenu=h},this.delay)},_close:function(x){x||=this.active?this.active.parent():this.element;x.find(".dvUi-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".dvUi-state-active").not(".dvUi-state-focus").removeClass("dvUi-state-active")},_closeOnDocumentClick:function(x){return!d(x.target).closest(".dvUi-menu").length},_isDivider:function(x){return!/[^\-\u2014\u2013\s]/.test(x.text())},collapse:function(x){var t=
this.active&&this.active.parent().closest(".dvUi-menu-item",this.element);t&&t.length&&(this._close(),this.focus(x,t))},expand:function(x){var t=this.active&&this.active.children(".dvUi-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(x,t)}))},next:function(x){this._move("next","first",x)},previous:function(x){this._move("prev","last",x)},isFirstItem:function(){return this.active&&!this.active.prevAll(".dvUi-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".dvUi-menu-item").length},_move:function(x,t,h){var l;this.active&&(l="first"===x||"last"===x?this.active["first"===x?"prevAll":"nextAll"](".dvUi-menu-item").eq(-1):this.active[x+"All"](".dvUi-menu-item").eq(0));l&&l.length&&this.active||(l=this.activeMenu.find(this.options.items)[t]());this.focus(h,l)},nextPage:function(x){var t;if(!this.active)this.next(x);else if(!this.isLastItem())if(this._hasScroll()){var h=this.active.offset().top;var l=this.element.height();this.active.nextAll(".dvUi-menu-item").each(function(){t=
d(this);return 0>t.offset().top-h-l});this.focus(x,t)}else this.focus(x,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(x){var t;if(!this.active)this.next(x);else if(!this.isFirstItem())if(this._hasScroll()){var h=this.active.offset().top;var l=this.element.height();this.active.prevAll(".dvUi-menu-item").each(function(){t=d(this);return 0<t.offset().top-h+l});this.focus(x,t)}else this.focus(x,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(x){this.active=this.active||d(x.target).closest(".dvUi-menu-item");var t={item:this.active};this.active.has(".dvUi-menu").length||this.collapseAll(x,!0);this._trigger("select",x,t)},_filterMenuItems:function(x){x=x.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var t=new RegExp("^"+x,"i");return this.activeMenu.find(this.options.items).filter(".dvUi-menu-item").filter(function(){return t.test(d.trim(d(this).text()))})}});d.widget("dvUi.dvSelectmenu",
{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"dvUi-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var x=this.element.uniqueId().attr("id");this.ids={element:x,button:x+"-button",menu:x+"-menu"};this._drawButton();this._drawMenu();this.options.disabled&&this.disable()},_drawButton:function(){var x=this,t=this.element.attr("tabindex");
this.label=d("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(h){this.button.focus();h.preventDefault()}});this.element.hide();this.button=d("<span>",{"class":"dvUi-selectmenu-button dvUi-widget dvUi-state-default dvUi-corner-all",tabindex:t||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);d("<span>",{"class":"dvUi-icon "+
this.options.icons.button}).prependTo(this.button);this.buttonText=d("<span>",{"class":"dvUi-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){x.menuItems||x._refreshMenu()});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var x=this;this.menu=d("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,
id:this.ids.menu});this.menuWrap=d("<div>",{"class":"dvUi-selectmenu-menu dvUi-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.dvMenu({role:"listbox",select:function(t,h){t.preventDefault();x._setSelection();x._select(h.item.data("dvUi-dvSelectmenu-item"),t)},focus:function(t,h){h=h.item.data("dvUi-dvSelectmenu-item");null!=x.focusIndex&&h.index!==x.focusIndex&&(x._trigger("focus",t,{item:h}),x.isOpen||x._select(h,t));x.focusIndex=h.index;x.button.attr("aria-activedescendant",
x.menuItems.eq(h.index).attr("id"))}}).dvMenu("instance");this.menu.addClass("dvUi-corner-bottom").removeClass("dvUi-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var x=this.element.find("option");
x.length&&(this._parseOptions(x),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".dvUi-selectmenu-optgroup"),x=this._getSelectedItem(),this.menuInstance.focus(null,x),this._setAria(x.data("dvUi-dvSelectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(x){this.options.disabled||(this.menuItems?(this.menu.find(".dvUi-state-focus").removeClass("dvUi-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):
this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",x))},_position:function(){this.menuWrap.position(d.extend({of:this.button},this.options.position))},close:function(x){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",x))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(x,t){var h=this,
l="";d.each(t,function(q,y){y.optgroup!==l&&(d("<li>",{"class":"dvUi-selectmenu-optgroup dvUi-menu-divider"+(y.element.parent("optgroup").prop("disabled")?" dvUi-state-disabled":""),text:y.optgroup}).appendTo(x),l=y.optgroup);h._renderItemData(x,y)})},_renderItemData:function(x,t){return this._renderItem(x,t).data("dvUi-dvSelectmenu-item",t)},_renderItem:function(x,t){var h=d("<li>",{text:t.label});t.disabled&&h.addClass("dvUi-state-disabled");t.element.attr("data-class")&&h.addClass("dv-SelectIcon").addClass(t.element.attr("data-class"));
return h.appendTo(x)},_setText:function(x,t){t?x.text(t):x.html("&#160;")},_move:function(x,t){var h=".dvUi-menu-item";if(this.isOpen)var l=this.menuItems.eq(this.focusIndex);else l=this.menuItems.eq(this.element[0].selectedIndex),h+=":not(.dvUi-state-disabled)";x="first"===x||"last"===x?l["first"===x?"prevAll":"nextAll"](h).eq(-1):l[x+"All"](h).eq(0);x.length&&this.menuInstance.focus(t,x)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(x){this[this.isOpen?
"close":"open"](x)},_setSelection:function(){if(this.range){if(window.getSelection){var x=window.getSelection();x.removeAllRanges();x.addRange(this.range)}else this.range.select();this.button.focus()}},_documentClick:{mousedown:function(x){this.isOpen&&(d(x.target).closest(".dvUi-selectmenu-menu, #"+this.ids.button).length||this.close(x))}},_buttonEvents:{mousedown:function(){if(window.getSelection){var x=window.getSelection();x.rangeCount&&(this.range=x.getRangeAt(0))}else this.range=document.selection.createRange()},
click:function(x){this._setSelection();this._toggle(x)},keydown:function(x){var t=!0;switch(x.keyCode){case d.dvUi.keyCode.TAB:case d.dvUi.keyCode.ESCAPE:this.close(x);t=!1;break;case d.dvUi.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(x);break;case d.dvUi.keyCode.UP:x.altKey?this._toggle(x):this._move("prev",x);break;case d.dvUi.keyCode.DOWN:x.altKey?this._toggle(x):this._move("next",x);break;case d.dvUi.keyCode.SPACE:this.isOpen?this._selectFocusedItem(x):this._toggle(x);break;case d.dvUi.keyCode.LEFT:this._move("prev",
x);break;case d.dvUi.keyCode.RIGHT:this._move("next",x);break;case d.dvUi.keyCode.HOME:case d.dvUi.keyCode.PAGE_UP:this._move("first",x);break;case d.dvUi.keyCode.END:case d.dvUi.keyCode.PAGE_DOWN:this._move("last",x);break;default:this.menu.trigger(x),t=!1}t&&x.preventDefault()}},_selectFocusedItem:function(x){var t=this.menuItems.eq(this.focusIndex);t.hasClass("dvUi-state-disabled")||this._select(t.data("dvUi-dvSelectmenu-item"),x)},_select:function(x,t){var h=this.element[0].selectedIndex;this.element[0].selectedIndex=
x.index;this._setText(this.buttonText,x.label);this._setAria(x);this._trigger("select",t,{item:x});x.index!==h&&this._trigger("change",t,{item:x});this.close(t)},_setAria:function(x){x=this.menuItems.eq(x.index).attr("id");this.button.attr({"aria-labelledby":x,"aria-activedescendant":x});this.menu.attr("aria-activedescendant",x)},_setOption:function(x,t){"icons"===x&&this.button.find("span.dvUi-icon").removeClass(this.options.icons.button).addClass(t.button);this._super(x,t);"appendTo"===x&&this.menuWrap.appendTo(this._appendTo());
"disabled"===x&&(this.menuInstance.option("disabled",t),this.button.toggleClass("dvUi-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0));"width"===x&&this._resizeButton()},_appendTo:function(){var x=this.options.appendTo;x&&=x.jquery||x.nodeType?d(x):this.document.find(x).eq(0);x&&x[0]||(x=this.element.closest(".dvUi-front"));x.length||(x=this.document[0].body);return x},_toggleAttr:function(){this.button.toggleClass("dvUi-corner-top",
this.isOpen).toggleClass("dvUi-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("dvUi-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var x=this.options.width;x||(x=this.element.show().outerWidth(),this.element.hide());this.button.outerWidth(x)},_resizeMenu:function(){},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(x){var t=[];x.each(function(h,l){l=d(l);var q=
l.parent("optgroup");t.push({element:l,index:h,value:l.attr("value"),label:l.text(),optgroup:q.attr("label")||"",disabled:q.prop("disabled")||l.prop("disabled")})});this.items=t},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}})}(dvJQuery),dvJQuery.fn.HasDocuViewarePlugins=!0)}},DocuViewareConstants={MAX_PAGE_TRANSFER_RETRIES:10,IE_MAX_SCROLL_TOP_LIMIT:153E4},DocuViewareEncodingUtilities={File:{New:function(d,
A,L){d={blob:new Blob([new Uint8Array(d)],{type:A}),type:A,lastModified:new Date(Date.now()),name:L,slice:function(S,x){return this.blob.slice(S,x)}};d.size=d.blob.size;return d}},TypedArray:{Uint8Array:function(d){return window.Uint8Array?new window.Uint8Array(d):new DocuViewareEncodingUtilities.TypedArray.TypedArray(d)},subarray:function(d,A){return this.slice(d,A)},set_:function(d,A){2>arguments.length&&(A=0);for(var L=0,S=d.length;L<S;++L,++A)this[A]=d[L]&255},TypedArray:function(d){if("number"===
typeof d){var A=Array(d);for(var L=0;L<d;++L)A[L]=0}else A=d.slice(0);A.subarray=DocuViewareEncodingUtilities.TypedArray.subarray;A.buffer=A;A.byteLength=A.length;A.set=DocuViewareEncodingUtilities.TypedArray.set_;"object"===typeof d&&d.buffer&&(A.buffer=d.buffer);return A}},base64:{PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",getbyte64:function(d,A){return DocuViewareEncodingUtilities.base64.ALPHA.indexOf(d.charAt(A))},decode:function(d){if(window.atob)return window.atob(d);
d=""+d;var A=DocuViewareEncodingUtilities.base64.getbyte64,L,S=d.length;if(0===S)return d;var x=0;d.charAt(S-1)===DocuViewareEncodingUtilities.base64.PADCHAR&&(x=1,d.charAt(S-2)===DocuViewareEncodingUtilities.base64.PADCHAR&&(x=2),S-=4);var t=[];for(L=0;L<S;L+=4){var h=A(d,L)<<18|A(d,L+1)<<12|A(d,L+2)<<6|A(d,L+3);t.push(String.fromCharCode(h>>16,h>>8&255,h&255))}switch(x){case 1:h=A(d,L)<<18|A(d,L+1)<<12|A(d,L+2)<<6;t.push(String.fromCharCode(h>>16,h>>8&255));break;case 2:h=A(d,L)<<18|A(d,L+1)<<12,
t.push(String.fromCharCode(h>>16))}return t.join("")},getbyte:function(d,A){return d.charCodeAt(A)},encode:function(d){if(window.btoa)return window.btoa(d);var A=DocuViewareEncodingUtilities.base64.PADCHAR,L=DocuViewareEncodingUtilities.base64.ALPHA,S=DocuViewareEncodingUtilities.base64.getbyte,x,t=[];d=""+d;var h=d.length-d.length%3;if(0===d.length)return d;for(x=0;x<h;x+=3){var l=S(d,x)<<16|S(d,x+1)<<8|S(d,x+2);t.push(L.charAt(l>>18));t.push(L.charAt(l>>12&63));t.push(L.charAt(l>>6&63));t.push(L.charAt(l&
63))}switch(d.length-h){case 1:l=S(d,x)<<16;t.push(L.charAt(l>>18)+L.charAt(l>>12&63)+A+A);break;case 2:l=S(d,x)<<16|S(d,x+1)<<8,t.push(L.charAt(l>>18)+L.charAt(l>>12&63)+L.charAt(l>>6&63)+A)}return t.join("")},base64toArrayBuffer:function(d){d=this.decode(d);for(var A=d.length,L=new Uint8Array(A),S=0;S<A;S++)L[S]=d.charCodeAt(S);return L.buffer},base64toBlob:function(d,A,L){A=A||"";d=DocuViewareEncodingUtilities.base64.decode(d);for(var S=d.length,x=Math.ceil(S/L),t=Array(x),h=0;h<x;++h){for(var l=
h*L,q=Math.min(l+L,S),y=Array(q-l),D=0;l<q;++D,++l)y[D]=d[l].charCodeAt(0);t[h]=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(y)}return new Blob(t,{type:A})}}},DocuViewareUtilities={addEvent:function(d,A,L){d.attachEvent?(d["e"+A+L]=L,d[A+L]=function(){d["e"+A+L](window.event)},d.attachEvent("on"+A,d[A+L])):d.addEventListener(A,L,!1)},removeEvent:function(d,A,L){d.detachEvent?(d.detachEvent("on"+A,d[A+L]),d[A+L]=null):d.removeEventListener(A,L,!1)},getWindowsVersion:function(){var d=window.navigator.userAgent.toLowerCase().match(/windows nt ([0-9]?[0-9]\.[0-9])/);
return null!=d?2==d.length||3==d.length?parseFloat(d[1]):0:0},getInternetExplorerVersion:function(){var d=-1;if("Microsoft Internet Explorer"==navigator.appName){var A=navigator.userAgent,L=RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=L.exec(A)&&(d=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(A=navigator.userAgent,L=RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=L.exec(A)&&(d=parseFloat(RegExp.$1)));return d},getScrollbarWidth:function(){var d=document.createElement("div");d.style.position=
"absolute";d.style.top="-1000px";d.style.left="-1000px";d.style.width="100px";d.style.height="50px";d.style.overflow="hidden";var A=document.createElement("div");A.style.width="100%";A.style.height="200px";d.appendChild(A);document.body.appendChild(d);var L=A.offsetWidth;d.style.overflow="auto";d=A.offsetWidth;document.body.removeChild(document.body.lastChild);return L-d},getDevicePixelRatio:function(){var d=1;void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>
window.screen.logicalXDPI?d=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(d=window.devicePixelRatio);return d},isValidURL:function(d){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.?(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{0,}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(d)},
clonePageCanvasSizes:function(d){if(null!=d){for(var A=[],L=0;L<d.length;L++)A.push({PageNo:d[L].PageNo,Width:d[L].Width,Height:d[L].Height,OffsetX:d[L].OffsetX,OffsetY:d[L].OffsetY});return A}return null},getPageCanvasSize:function(d){var A={width:0,height:0};if(null!=d)for(var L=0;L<d.length;L++){var S=d[L].OffsetX+d[L].Width,x=d[L].OffsetY+d[L].Height;S>A.width&&(A.width=S);x>A.height&&(A.height=x)}return A},isBetaEnabled:function(d){return!1},getLocaleDateTimeFormat:function(d,A){if(Date.parse(d)===
Number.NaN)return null;if(10===this.getInternetExplorerVersion())return d.split("T")[0]+" "+d.split("T")[1].split(".")[0];A||="en";d=new Date(d);return d.toLocaleDateString(A,{day:"2-digit",month:"2-digit",year:"numeric"})+" "+d.toLocaleTimeString(A,{hour12:!1,hour:"2-digit",minute:"2-digit"})}},DocuViewareAnnotationsUtilities={getAnnotationDefaultProperties:function(d){switch(d){case 0:return{type:0,borderWidth:.2,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:1,foreColor:"#FF0000",
opacity:1,radiusFactor:.25,rotation:0,stroke:!0,strokeColor:"#FF0000",text:"STAMP",autoCreate:!1};case 1:return{type:1,borderWidth:.04,dashStyle:0,fill:!1,fillColor:"#FFFFFF",opacity:1,radiusFactor:0,rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 2:return{type:2,fillColor:"#FFFF00",rotation:0,squaredBox:!1,autoCreate:!1};case 3:return{type:3,borderWidth:.04,dashCap:0,dashStyle:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 4:return{type:4,arrowFilled:!0,
arrowHeight:10,arrowWidth:5,borderWidth:.04,dashCap:0,dashStyle:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 5:return{type:5,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 6:return{type:6,borderWidth:.04,dashStyle:0,fill:!1,fillColor:"#FFFFFF",opacity:1,rotation:0,squaredBox:!1,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 7:return{type:7,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,
fillColor:"#000000",opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#FFFFFF",autoCreate:!1,keepAspectRatio:!1,bitmapData:""};case 8:return{type:8,alignment:0,autoSize:!1,borderWidth:.01,dashStyle:0,fill:!0,fillColor:"#FFFFFF",fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",lineAlignment:0,opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#000000",text:"Text",canEditText:!0,autoCreate:!1};case 9:return{type:9,alignment:0,autoSize:!1,borderWidth:.01,dashStyle:0,fill:!0,
fillColor:"#FDFD32",fontName:"Arial",fontSize:20,fontStyle:1,foreColor:"#000000",lineAlignment:0,opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",text:"Text",canEditText:!0,autoCreate:!1};case 10:return{type:10,borderWidth:.04,dashStyle:0,dashCap:0,opacity:1,rotation:0,strokeColor:"#000000",autoCreate:!1};case 11:return{type:11,borderWidth:.2,rotation:0,strokeColor:"#FFFF00",autoCreate:!1};case 12:return{type:11,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#FF0000",opacity:1,rotation:0,
stroke:!0,strokeColor:"#000000",autoCreate:!1};case 13:return{type:13,borderWidth:.04,dashCap:0,dashStyle:0,fill:!1,fillColor:"#000000",fontName:"Arial",fontStyle:3,foreColor:"#0000FF",link:"",opacity:1,radiusFactor:0,rotation:0,stroke:!1,strokeColor:"#000000",autoCreate:!1,text:""};case 14:return{type:14,borderWidth:.04,dashCap:0,dashStyle:0,fill:!0,fillColor:"#FF0000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",autoCreate:!1};case 15:return{type:15,borderWidth:.02,dashStyle:0,fontName:"Arial",
fontSize:12,fontStyle:0,foreColor:"#000000",measurementUnit:1,measurementUnitCustomString:"",ticksPerUnit:10,opacity:1,rotation:0,strokeColor:"#000000",scale:1,autoCreate:!1};case 16:return{type:16,borderWidth:.02,dashStyle:0,fontName:"Arial",fontSize:12,fontStyle:0,foreColor:"#000000",measurementUnit:1,measurementUnitCustomString:"",fill:!1,fillColor:"#000000",opacity:1,rotation:0,stroke:!0,strokeColor:"#000000",scale:1,autoCreate:!1};case 17:return{type:17,title:"",fillColor:"#010101",autoCreate:!1};
case 2048:return{type:2048,fontName:"ui-sans-serif, system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",allowReview:!0,allowAnswer:!0,reviewStatus:0,fontSize:9,fontStyle:0,foreColor:"#2B2E36"};default:return null}},getAnnotationDefaultPropertiesDisplay:function(d){switch(d){case 0:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor opacity radiusFactor rotation stroke strokeColor text".split(" ");
case 1:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation squaredBox stroke strokeColor".split(" ");case 2:return["fillColor","rotation","squaredBox"];case 3:return"borderWidth dashCap dashStyle opacity rotation strokeColor".split(" ");case 4:return"arrowFilled arrowHeight arrowWidth borderWidth dashCap dashStyle opacity rotation strokeColor".split(" ");case 5:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 6:return"borderWidth dashCap dashStyle fill fillColor opacity rotation squaredBox stroke strokeColor".split(" ");
case 7:return"borderWidth dashCap dashStyle fill fillColor opacity radiusFactor rotation stroke strokeColor".split(" ");case 8:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity radiusFactor rotation stroke strokeColor text".split(" ");case 9:return"alignment autoSize borderWidth dashCap dashStyle fill fillColor fontName fontSize fontStyle foreColor lineAlignment opacity rotation stroke strokeColor text".split(" ");case 10:return"borderWidth dashStyle dashCap opacity rotation strokeColor".split(" ");
case 11:return["borderWidth","rotation","strokeColor"];case 12:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 13:return"borderWidth dashCap dashStyle fill fillColor fontName fontStyle foreColor link opacity radiusFactor rotation stroke strokeColor text".split(" ");case 14:return"borderWidth dashCap dashStyle fill fillColor opacity rotation stroke strokeColor".split(" ");case 15:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit opacity rotation strokeColor scale".split(" ");
case 16:return"borderWidth dashCap dashStyle fontName fontSize fontStyle foreColor measurementUnit fill fillColor opacity rotation stroke strokeColor scale".split(" ");case 17:return["title","fillColor"];case 2048:return"allowReview allowAnswer reviewStatus fontName fontSize fontStyle foreColor".split(" ");default:return null}}},JSON=JSON||{};
JSON.stringify=JSON.stringify||function(d){var A=typeof d;if("object"!=A||null===d)return"string"==A&&(d='"'+d+'"'),String(d);var L,S=[],x=d&&d.constructor==Array;for(L in d){var t=d[L];A=typeof t;"string"==A?t='"'+t+'"':"object"==A&&null!==t&&(t=JSON.stringify(t));S.push((x?"":'"'+L+'":')+String(t))}return(x?"[":"{")+String(S)+(x?"]":"}")};
Array.prototype.find||(Array.prototype.find=function(d,A){if(!d||"function"!==typeof d)throw TypeError();const L=this.length;A=A||this;for(var S=0;S<L;S++)try{if(d.apply(A,[this[S],S,this]))return this[S]}catch(x){break}});
var DocuViewareAPI={Constants:{SINGLE_COLUMN_MOBILE_MENU_WIDTH:126,TWO_COLUMNS_MOBILE_MENU_WIDTH:188},Status:{OK:0,GenericError:1,PasswordRequired:27,InvalidPassword:29,DocuViewarePendingAction:3E4,InvalidZoomLevelRequested:30001},Toolbar:{None:0,Standard:1,Mobile:2},SearchPageSelection:{CurrentPage:0,AllPages:1},RotateFlipType:{Rotate90FlipNone:1,Rotate180FlipNone:2,Rotate270FlipNone:3},LocalServiceStatus:{Ready:0,NotFound:1,WrongVersion:2},TwainCapabilities:{ACAP_AUDIOFILEFORMAT:4609,ACAP_XFERMECH:4610,
CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTHOR:4096,CAP_AUTOFEED:4103,CAP_AUTOMATICCAPTURE:4122,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_AUTOSCAN:4112,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_CAMERAPREVIEWUI:4129,CAP_CAMERASIDE:4148,CAP_CAPTION:4097,CAP_CLEARBUFFERS:4125,CAP_CLEARPAGE:4104,CAP_CUSTOMBASE:32768,CAP_CUSTOMDSDATA:4117,CAP_CUSTOMINTERFACEGUID:4156,CAP_DEVICEEVENT:4130,CAP_DEVICEONLINE:4111,CAP_DEVICETIMEDATE:4127,CAP_DOUBLEFEEDDETECTION:4159,
CAP_DOUBLEFEEDDETECTIONLENGTH:4160,CAP_DOUBLEFEEDDETECTIONRESPONSE:4162,CAP_DOUBLEFEEDDETECTIONSENSITIVITY:4161,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_ENDORSER:4118,CAP_EXTENDEDCAPS:4102,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_FEEDERORDER:4142,CAP_FEEDERPOCKET:4154,CAP_FEEDERPREP:4153,CAP_FEEDPAGE:4105,CAP_INDICATORS:4107,CAP_INDICATORSMODE:4164,CAP_JOBCONTROL:4119,CAP_LANGUAGE:4140,CAP_MAXBATCHBUFFERS:4126,CAP_MICRENABLED:4152,CAP_PAPERDETECTABLE:4109,
CAP_PAPERHANDLING:4163,CAP_POWERSAVETIME:4166,CAP_POWERSUPPLY:4128,CAP_PRINTER:4134,CAP_PRINTERCHARROTATION:4167,CAP_PRINTERENABLED:4135,CAP_PRINTERFONTSTYLE:4168,CAP_PRINTERINDEX:4136,CAP_PRINTERINDEXLEADCHAR:4169,CAP_PRINTERINDEXMAXVALUE:4170,CAP_PRINTERINDEXNUMDIGITS:4171,CAP_PRINTERINDEXSTEP:4172,CAP_PRINTERINDEXTRIGGER:4173,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSTRINGPREVIEW:4174,CAP_PRINTERSUFFIX:4139,CAP_PRINTERVERTICALOFFSET:4165,CAP_REACQUIREALLOWED:4144,CAP_REWINDPAGE:4106,
CAP_SEGMENTED:4149,CAP_SERIALNUMBER:4132,CAP_SUPPORTEDCAPS:4101,CAP_SUPPORTEDCAPSEXT:4108,CAP_SUPPORTEDCAPSSEGMENTUNIQUE:4157,CAP_SUPPORTEDDATS:4158,CAP_THUMBNAILSENABLED:4113,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_TIMEDATE:4100,CAP_UICONTROLLABLE:4110,CAP_XFERCOUNT:1,ICAP_AUTOBRIGHT:4352,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICDESKEW:4433,
ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICROTATE:4434,ICAP_AUTOSIZE:4438,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODETIMEOUT:4413,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_BITORDER:4380,ICAP_BITORDERCODES:4390,ICAP_BRIGHTNESS:4353,ICAP_CCITTKFACTOR:4381,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_COMPRESSION:256,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,
ICAP_EXTIMAGEINFO:4399,ICAP_FEEDERTYPE:4436,ICAP_FILMTYPE:4447,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_FLASHUSED2:4422,ICAP_FLIPROTATION:4406,ICAP_FRAMES:4372,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_ICCPROFILE:4437,ICAP_IMAGEDATASET:4398,ICAP_IMAGEFILEFORMAT:4364,ICAP_IMAGEFILTER:4423,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_JPEGPIXELTYPE:4392,ICAP_JPEGQUALITY:4435,ICAP_JPEGSUBSAMPLING:4449,ICAP_LAMPSTATE:4365,ICAP_LIGHTPATH:4382,ICAP_LIGHTSOURCE:4366,ICAP_MAXFRAMES:4378,
ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_MIRROR:4448,ICAP_NOISEFILTER:4424,ICAP_ORIENTATION:4368,ICAP_OVERSCAN:4425,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODETIMEOUT:4421,ICAP_PHYSICALHEIGHT:4370,ICAP_PHYSICALWIDTH:4369,ICAP_PIXELFLAVOR:4383,ICAP_PIXELFLAVORCODES:4391,ICAP_PIXELTYPE:257,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SHADOW:4371,
ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_SUPPORTEDEXTIMAGEINFO:4446,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_TILES:4379,ICAP_TIMEFILL:4394,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_UNITS:258,ICAP_XFERMECH:259,ICAP_XNATIVERESOLUTION:4374,ICAP_XRESOLUTION:4376,ICAP_XSCALING:4388,ICAP_YNATIVERESOLUTION:4375,ICAP_YRESOLUTION:4377,ICAP_YSCALING:4389,ICAP_ZOOMFACTOR:4414},GetSessionID:function(d){return(d=document.getElementById(d))&&d.control?d.control.ajax.sessionID:null},
IsInitialized:function(d){return(d=document.getElementById(d))&&d.control?!0:!1},IsLoaded:function(d){return(d=document.getElementById(d))&&d.control&&!d.control.waitForInit&&!d.control.hasPendingResize()},RegisterOnDocuViewareControlLoaded:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnDocuViewareControlLoaded(A):DocuViewareAPI.Status.GenericError},IsTwainSupportAvailable:function(d){return(d=document.getElementById(d))&&d.control?d.control.IsTwainSupportAvailable():
!1},SetAjaxCustomHeaders:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.SetAjaxCustomHeaders(A,L):DocuViewareAPI.Status.GenericError},PostCustomServerAction:function(d,A,L,S,x,t){return(d=document.getElementById(d))&&d.control?d.control.PostCustomServerAction(A,L,S,x,t):DocuViewareAPI.Status.GenericError},SetMaxUploadThreads:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.SetMaxUploadThreads(A):DocuViewareAPI.Status.GenericError},LoadFromByteArray:function(d,
A,L,S,x,t){return(d=document.getElementById(d))&&d.control?d.control.LoadFromByteArray(A,L,S,x,t):DocuViewareAPI.Status.GenericError},LoadFromBase64:function(d,A,L,S,x,t){return(d=document.getElementById(d))&&d.control?d.control.LoadFromBase64(A,L,S,x,t):DocuViewareAPI.Status.GenericError},LoadFromFile:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.LoadFromFile(A,L):DocuViewareAPI.Status.GenericError},LoadFromUri:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?
d.control.LoadFromUri(A,"",L,S):DocuViewareAPI.Status.GenericError},LoadFromUriEx:function(d,A,L,S,x){return(d=document.getElementById(d))&&d.control?d.control.LoadFromUri(A,L,S,x):DocuViewareAPI.Status.GenericError},ToggleLoadFromUriDialog:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.ToggleLoadFromUriDialog(A):DocuViewareAPI.Status.GenericError},Save:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.ToggleSaveDialog(A,L):DocuViewareAPI.Status.GenericError},
DirectSave:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.DirectSave(A,L,S):DocuViewareAPI.Status.GenericError},Print:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.TogglePrintDialog(A,L):DocuViewareAPI.Status.GenericError},DirectPrint:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.LaunchDirectPrint(A,L,S):DocuViewareAPI.Status.GenericError},TwainAcquire:function(d,A,L){return(d=document.getElementById(d))&&d.control?
d.control.TwainToggleAcquisitionDialog(A,L):DocuViewareAPI.Status.GenericError},TwainSetConfig:function(d,A,L,S,x,t,h,l,q){return(d=document.getElementById(d))&&d.control?d.control.TwainSetConfig(A,L,S,x,t,h,l,q):DocuViewareAPI.Status.GenericError},TwainDownloadServiceSetup:function(d){return(d=document.getElementById(d))&&d.control?d.control.DownloadTwainServiceSetup():DocuViewareAPI.Status.GenericError},TwainGetLocalServiceStatus:function(d){return(d=document.getElementById(d))&&d.control?d.control.TwainGetLocalServiceStatus():
DocuViewareAPI.Status.GenericError},TwainGetSources:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetTwainSourceList():DocuViewareAPI.Status.GenericError},TwainGetClientInfo:function(d){return(d=document.getElementById(d))&&d.control?d.control.TwainGetClientInfo():DocuViewareAPI.Status.GenericError},TwainAcquireToNewDocument:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.TwainAcquireToNewDocument(A,L,S):DocuViewareAPI.Status.GenericError},TwainAcquireToCurrentDocument:function(d,
A,L,S,x){return(d=document.getElementById(d))&&d.control?d.control.TwainAcquireToCurrentDocument(A,L,S,x):DocuViewareAPI.Status.GenericError},GetDocumentType:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetDocumentType():-1},GetDocumentName:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetDocumentName():""},GetPageCount:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetPageCount():-1},GetPageWidth:function(d,A){return(d=document.getElementById(d))&&
d.control?d.control.GetPageWidth(A):-1},GetPageHeight:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.GetPageHeight(A):-1},GetSelectedTextAreas:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetSelectedTextArea():DocuViewareAPI.Status.GenericError},GetDisplayedArea:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetDisplayedArea():{left:0,top:0,width:0,height:0}},GetViewerScrollLeft:function(d){return(d=document.getElementById(d))&&
d.control?d.control.GetViewerScrollLeft():-1},GetViewerScrollTop:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetViewerScrollTop():-1},SetViewerScrollLeft:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.SetViewerScrollLeft(A):DocuViewareAPI.Status.GenericError},SetViewerScrollTop:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.SetViewerScrollTop(A):DocuViewareAPI.Status.GenericError},GetSelectionAreaCoordinates:function(d){return(d=
document.getElementById(d))&&d.control?d.control.GetSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.SetSelectionAreaCoordinates(A):DocuViewareAPI.Status.GenericError},ClearSelectionArea:function(d){return(d=document.getElementById(d))&&d.control?d.control.ClearSelectionArea():DocuViewareAPI.Status.GenericError},GetMouseMode:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetMouseMode():
DocuViewareAPI.Status.GenericError},SetMouseMode:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.SetMouseMode(A):DocuViewareAPI.Status.GenericError},GetCurrentPage:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetCurrentPage():-1},GetSelectedThumbnailItems:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetSelectedThumbnailItems():null},SetThumbnailSelected:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.SetThumbnailSelected(A,
L):null},GetCurrentZoom:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetCurrentZoom():-1},SetCurrentZoom:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.SetCurrentZoom(A):DocuViewareAPI.Status.GenericError},SelectPage:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.SelectPage(A):DocuViewareAPI.Status.GenericError},ZoomIN:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.ZoomIN(1,!0,!1,A,L):DocuViewareAPI.Status.GenericError},
ZoomOUT:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.ZoomOUT(1,!0,!1,A,L):DocuViewareAPI.Status.GenericError},ZoomRect:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.ZoomRect(A,L,S):DocuViewareAPI.Status.GenericError},RotateView:function(d,A){if((d=document.getElementById(d))&&d.control){var L=!1;"number"!=typeof A||A!=this.RotateFlipType.Rotate90FlipNone&&A!=this.RotateFlipType.Rotate180FlipNone&&A!=this.RotateFlipType.Rotate270FlipNone||
(L=!0);return L?d.control.Rotate(A,0):DocuViewareAPI.Status.GenericError}return DocuViewareAPI.Status.GenericError},RotatePage:function(d,A,L,S){return this.RotatePages(d,this.GetCurrentPage(d),A,L,S)},RotatePages:function(d,A,L,S,x){return(d=document.getElementById(d))&&d.control?"number"!=typeof A&&"object"!=typeof A||"number"!=typeof L||L!=this.RotateFlipType.Rotate90FlipNone&&L!=this.RotateFlipType.Rotate180FlipNone&&L!=this.RotateFlipType.Rotate270FlipNone?DocuViewareAPI.Status.GenericError:
d.control.RotatePage(A,L,S,x):DocuViewareAPI.Status.GenericError},SwapPages:function(d,A,L,S,x){return(d=document.getElementById(d))&&d.control?d.control.SwapPages(A,L,S,x):DocuViewareAPI.Status.GenericError},DeletePage:function(d,A,L){return this.DeletePages(d,this.GetCurrentPage(d),A,L)},DeletePages:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?"number"==typeof A||"object"==typeof A?d.control.DeletePage(A,L,S):DocuViewareAPI.Status.GenericError:DocuViewareAPI.Status.GenericError},
ToggleSinglePageViewMode:function(d){return(d=document.getElementById(d))&&d.control?d.control.ToggleSinglePageViewMode():DocuViewareAPI.Status.GenericError},SetZoomWidthViewer:function(d){return(d=document.getElementById(d))&&d.control?d.control.SetZoomMode(3):DocuViewareAPI.Status.GenericError},SetZoomFitViewer:function(d){return(d=document.getElementById(d))&&d.control?d.control.SetZoomMode(2):DocuViewareAPI.Status.GenericError},CloseDocument:function(d){return(d=document.getElementById(d))&&d.control?
d.control.CloseDocument():DocuViewareAPI.Status.GenericError},SelectThumbnailSnapIn:function(d){return(d=document.getElementById(d))&&d.control?d.control.ShowThumbnailsSnapIn():DocuViewareAPI.Status.GenericError},SelectBookmarksSnapIn:function(d){return(d=document.getElementById(d))&&d.control?d.control.ShowBookmarksSnapIn():DocuViewareAPI.Status.GenericError},SelectSearchSnapIn:function(d){return(d=document.getElementById(d))&&d.control?d.control.ShowSearchSnapIn():DocuViewareAPI.Status.GenericError},
SelectAnnotationsSnapIn:function(d){return(d=document.getElementById(d))&&d.control?d.control.ShowAnnotationsSnapIn():DocuViewareAPI.Status.GenericError},SelectCommentsSnapIn:function(d){return(d=document.getElementById(d))&&d.control?d.control.ShowCommentsSnapIn():DocuViewareAPI.Status.GenericError},SelectRedactionSnapIn:function(d){return(d=document.getElementById(d))&&d.control?d.control.ShowRedactionSnapIn():DocuViewareAPI.Status.GenericError},SelectSnapIn:function(d,A){return(d=document.getElementById(d))&&
""!==A?d.control.SelectSnapIn(A,!1):DocuViewareAPI.Status.GenericError},ShowSnapIn:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.ToggleSnapIn(A,!0):DocuViewareAPI.Status.GenericError},HideSnapIn:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.ToggleSnapIn(A,!1):DocuViewareAPI.Status.GenericError},CollapseSnapInPanel:function(d){return(d=document.getElementById(d))&&d.control?d.control.SetSnapinsPanelVisibility(!1):DocuViewareAPI.Status.GenericError},
AddCustomSnapIn:function(d,A,L,S,x,t,h){return(d=document.getElementById(d))&&d.control?d.control.AddCustomSnapIn(A,L,S,x,t,h):DocuViewareAPI.Status.GenericError},AddCustomToolbarButton:function(d,A,L,S,x){return(d=document.getElementById(d))&&d.control?d.control.AddCustomToolbarButton(A,L,S,x):DocuViewareAPI.Status.GenericError},GetSnapInPanelWidth:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetSnapInPanelWidth():0},SetSnapInPanelWidth:function(d,A){return(d=document.getElementById(d))&&
d.control?d.control.SetSnapInPanelWidth(A):DocuViewareAPI.Status.GenericError},GetSelectedText:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetSelectedText():""},HighlightSelectedText:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.HighlightSelectedText(A):DocuViewareAPI.Status.GenericError},StrikethroughSelectedText:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.StrikethroughSelectedText(A):DocuViewareAPI.Status.GenericError},
UnderlineSelectedText:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.UnderlineSelectedText(A):DocuViewareAPI.Status.GenericError},RedactSelectedText:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RedactSelectedText(A):DocuViewareAPI.Status.GenericError},AddSelectedTextContextMenuItem:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddSelectedTextContextMenuItem(A,L,S):DocuViewareAPI.Status.GenericError},ResetSelectedTextContextMenu:function(d){return(d=
document.getElementById(d))&&d.control?d.control.ResetSelectedTextContextMenu():DocuViewareAPI.Status.GenericError},AddAnnotationsActionButton:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotationsActionButton(A,L,S):DocuViewareAPI.Status.GenericError},Search:function(d,A,L,S,x,t,h){if((d=document.getElementById(d))&&d.control){var l=!1;"string"===typeof A&&("undefined"===typeof t&&(t=!1),"undefined"===typeof t&&(h=!1),"boolean"==typeof L&&"boolean"==typeof S&&
"boolean"==typeof t&&("number"!=typeof x||x!==this.SearchPageSelection.AllPages&&x!==this.SearchPageSelection.CurrentPage||(l=!0)));if(l)d.control.Search(A,L,S,t,x,h);else return DocuViewareAPI.Status.GenericError}else return DocuViewareAPI.Status.GenericError},SetSearchSettings:function(d,A,L,S,x,t){return(d=document.getElementById(d))&&d.control?"boolean"==typeof A&&"boolean"==typeof L&&"boolean"==typeof S?("undefined"==typeof t&&(t=!1),"number"!=typeof x||x!==this.SearchPageSelection.AllPages&&
x!==this.SearchPageSelection.CurrentPage?DocuViewareAPI.Status.GenericError:d.control.SetSearchSettings(A,L,S,x,null,null,t)):DocuViewareAPI.Status.GenericError:null},SearchNavigateToOccurrence:function(d,A){return(d=document.getElementById(d))&&d.control?Number.isInteger(A)?d.control.SearchNavigateToOccurrence(A):DocuViewareAPI.Status.GenericError:null},GetSearchResultsCount:function(d){return(d=document.getElementById(d))&&d.control?d.control.GetSearchResultsCount():0},GetCurrentSearchOccurrenceIdx:function(d){return(d=
document.getElementById(d))&&d.control?d.control.GetCurrentSearchOccurrenceIdx():0},ClearSearch:function(d){return(d=document.getElementById(d))&&d.control?d.control.ClearSearch():DocuViewareAPI.Status.GenericError},UpdateLayout:function(d){return(d=document.getElementById(d))&&d.control?d.control.UpdateLayout():DocuViewareAPI.Status.GenericError},ExitAnnotationDrawingMode:function(d){return(d=document.getElementById(d))&&d.control?d.control.ExitAnnotationDrawingMode():DocuViewareAPI.Status.GenericError},
DisplayMessageBox:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.DisplayMessageBox(A):DocuViewareAPI.Status.GenericError},DisplayPendingActionNotification:function(d){if((d=document.getElementById(d))&&d.control)d.control.DisplayPendingActionNotification();else return DocuViewareAPI.Status.GenericError},HidePendingActionNotification:function(d){if((d=document.getElementById(d))&&d.control)d.control.HidePendingActionNotification();else return DocuViewareAPI.Status.GenericError},
ApplyAllRedactions:function(d){return(d=document.getElementById(d))&&d.control?d.control.ApplyAllRedactions():DocuViewareAPI.Status.GenericError},RegisterOnViewerScroll:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnViewerScroll(A):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationSelectedStateChanged:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnAnnotationSelectedStateChanged(A):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationAdded:function(d,
A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnAnnotationAdded(A):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationEdited:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnAnnotationEdited(A):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMoved:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnAnnotationMoved(A):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationDeleted:function(d,A){return(d=
document.getElementById(d))&&d.control?d.control.RegisterOnAnnotationDeleted(A):DocuViewareAPI.Status.GenericError},RegisterOnDocumentSigned:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnDocumentSigned(A):DocuViewareAPI.Status.GenericError},RegisterOnFormFieldChanged:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnFormFieldChanged(A):DocuViewareAPI.Status.GenericError},RegisterOnPageChanged:function(d,A){return(d=document.getElementById(d))&&
d.control?d.control.RegisterOnPageChanged(A):DocuViewareAPI.Status.GenericError},RegisterOnPageDeleted:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnPageDeleted(A):DocuViewareAPI.Status.GenericError},RegisterOnZoomChanged:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnZoomChanged(A):DocuViewareAPI.Status.GenericError},RegisterOnRotationChanged:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnRotationChanged(A):
DocuViewareAPI.Status.GenericError},RegisterOnNewDocumentLoaded:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnNewDocumentLoaded(A):DocuViewareAPI.Status.GenericError},RegisterOnDocumentClosed:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnDocumentClosed(A):DocuViewareAPI.Status.GenericError},RegisterOnDocumentPrinted:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnDocumentPrinted(A):DocuViewareAPI.Status.GenericError},
RegisterOnDocumentSaved:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnDocumentSaved(A):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnTwainAcquisitionDialogAcquireButtonClick(A):DocuViewareAPI.Status.GenericError},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnTwainAcquisitionDialogCancelButtonClick(A):
DocuViewareAPI.Status.GenericError},RegisterOnThumbnailsOrderChanged:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnThumbnailsOrderChanged(A):DocuViewareAPI.Status.GenericError},RegisterOnTextSelected:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnTextSelected(A):DocuViewareAPI.Status.GenericError},RegisterOnTextUnselected:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnTextUnselected(A):DocuViewareAPI.Status.GenericError},
RegisterOnAreaSelected:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnAreaSelected(A):DocuViewareAPI.Status.GenericError},RegisterOnCommentAdded:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnCommentAdded(A):DocuViewareAPI.Status.GenericError},RegisterOnCommentEdited:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnCommentEdited(A):DocuViewareAPI.Status.GenericError},RegisterOnCommentDeleted:function(d,
A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnCommentDeleted(A):DocuViewareAPI.Status.GenericError},RegisterOnFullscreenModeChanged:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnFullscreenModeChanged(A):DocuViewareAPI.Status.GenericError},RegisterOnSearchInvoked:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnSearchInvoked(A):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMouseEnter:function(d,
A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnAnnotationMouseEnter(A):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationMouseLeave:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnAnnotationMouseLeave(A):DocuViewareAPI.Status.GenericError},RegisterOnTextAnnotated:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnTextAnnotated(A):DocuViewareAPI.Status.GenericError},RegisterOnThumbnailsSnapInSelected:function(d,
A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnThumbnailsSnapInSelected(A):DocuViewareAPI.Status.GenericError},RegisterOnBookmarksSnapInSelected:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnBookmarksSnapInSelected(A):DocuViewareAPI.Status.GenericError},RegisterOnSearchSnapInSelected:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnSearchSnapInSelected(A):DocuViewareAPI.Status.GenericError},RegisterOnAnnotationsSnapInSelected:function(d,
A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnAnnotationsSnapInSelected(A):DocuViewareAPI.Status.GenericError},RegisterOnCommentsSnapInSelected:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnCommentsSnapInSelected(A):DocuViewareAPI.Status.GenericError},RegisterOnSnapInPanelResized:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnSnapInPanelResized(A):DocuViewareAPI.Status.GenericError},RegisterOnRedactionMarksApplied:function(d,
A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnRedactionMarksApplied(A):DocuViewareAPI.Status.GenericError},RegisterOnUriNavigation:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnUriNavigation(A):DocuViewareAPI.Status.GenericError},RegisterOnUnknownLinkNavigation:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnUnknownLinkNavigation(A):DocuViewareAPI.Status.GenericError},RegisterOnAttachmentClick:function(d,
A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnAttachmentClick(A):DocuViewareAPI.Status.GenericError},SetSignatureAppearance:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?null!=A?d.control.Internal.DigiSign.setSignatureAppearanceImage(A):null!=L&&null!=S?d.control.Internal.DigiSign.setSignatureAppearanceText(L,S):DocuViewareAPI.Status.GenericError:DocuViewareAPI.Status.GenericError},SetSignatureCertificate:function(d,A,L,S,x,t){return(d=document.getElementById(d))&&
d.control?(d.control.Internal.DigiSign.setCertificate(A,L,S),d.control.Internal.DigiSign.sendSignatureRequest(x,t)):DocuViewareAPI.Status.GenericError},SetSignatureTimeStamp:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.Internal.DigiSign.setTimeStamp(A,L,S):DocuViewareAPI.Status.GenericError},AddSignatureInteractive:function(d){return(d=document.getElementById(d))&&d.control?d.control.Internal.DigiSign.beginAddSignatureInteractive(!1):DocuViewareAPI.Status.GenericError},
AddSignature:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.Internal.DigiSign.addSignature(A,L):DocuViewareAPI.Status.GenericError},RegisterOnSnapInPanelToggle:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.RegisterOnSnapInPanelToggle(A):DocuViewareAPI.Status.GenericError},SetAnnotationsInteractionState:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.SetAnnotationsInteractionState(A):DocuViewareAPI.Status.GenericError},SetAnnotationsVisibility:function(d,
A){return(d=document.getElementById(d))&&d.control?d.control.SetAnnotationsVisibility(A):DocuViewareAPI.Status.GenericError},AddRubberStampAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(0,A,L,S):DocuViewareAPI.Status.GenericError},AddRectangleAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(1,A,L,S):DocuViewareAPI.Status.GenericError},AddRectangleHighlighterAnnotInteractive:function(d,
A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(2,A,L,S):DocuViewareAPI.Status.GenericError},AddLineAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(3,A,L,S):DocuViewareAPI.Status.GenericError},AddConnectedLineAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(5,A,L,S):DocuViewareAPI.Status.GenericError},AddLineArrowAnnotInteractive:function(d,
A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(4,A,L,S):DocuViewareAPI.Status.GenericError},AddEllipseAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(6,A,L,S):DocuViewareAPI.Status.GenericError},AddTextAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(8,A,L,S):DocuViewareAPI.Status.GenericError},AddStickyNoteAnnotInteractive:function(d,
A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(9,A,L,S):DocuViewareAPI.Status.GenericError},AddFreeHandAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(10,A,L,S):DocuViewareAPI.Status.GenericError},AddFreeHandHighLighterAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(11,A,L,S):DocuViewareAPI.Status.GenericError},AddLinkAnnotInteractive:function(d,
A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(13,A,L,S):DocuViewareAPI.Status.GenericError},AddRulerAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(15,A,L,S):DocuViewareAPI.Status.GenericError},AddPolyRulerAnnotInteractive:function(d,A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(16,A,L,S):DocuViewareAPI.Status.GenericError},AddRedactionMarkAnnotInteractive:function(d,
A,L,S){return(d=document.getElementById(d))&&d.control?d.control.AddAnnotInteractive(17,A,L,S):DocuViewareAPI.Status.GenericError},AddAnnot:function(d,A,L,S){if((d=document.getElementById(d))&&d.control){if(Array.isArray(A))return d.control.AddAnnot(A,!1,L,S);var x=[];x.push(A);return d.control.AddAnnot(x,!1,L,S)}return DocuViewareAPI.Status.GenericError},RemoveAnnotById:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.DeleteAnnotationById(A,"undefined"===typeof L?!1:L):DocuViewareAPI.Status.GenericError},
UnselectAllAnnotations:function(d){return(d=document.getElementById(d))&&d.control?d.control.UnselectAllAnnotations():DocuViewareAPI.Status.GenericError},UpdateAnnotById:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.UpdateAnnotationById(A,L):DocuViewareAPI.Status.GenericError},GetAnnotProperties:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.GetAnnotationProperties(A):DocuViewareAPI.Status.GenericError},GetPageAnnotCount:function(d,A){return(d=
document.getElementById(d))&&d.control?d.control.GetPageAnnotCount(A):DocuViewareAPI.Status.GenericError},GetPageAnnotId:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.GetPageAnnotId(A,L):DocuViewareAPI.Status.GenericError},GetAnnotClientTag:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.GetAnnotationClientTag(A):DocuViewareAPI.Status.GenericError},SetAnnotClientTag:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.SetAnnotationClientTag(A,
L):DocuViewareAPI.Status.GenericError},GetPageFormFields:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.GetPageFormFields(A):DocuViewareAPI.Status.GenericError},UpdateFormFields:function(d,A,L,S){if((d=document.getElementById(d))&&d.control){if(Array.isArray(A))return d.control.UpdateFormFields(A,L,S);var x=[];x.push(A);return d.control.UpdateFormFields(x,L,S)}return DocuViewareAPI.Status.GenericError},HasPendingRedactionMark:function(d){return(d=document.getElementById(d))&&
d.control?d.control.HasPendingRedactionMark():DocuViewareAPI.Status.GenericError},EnableAnnotEditionOnDblClick:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.EnableAnnotEditionOnDblClick(A):DocuViewareAPI.Status.GenericError},ResetAnnotAutoCreateProperty:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.ResetAnnotAutoCreate(A):DocuViewareAPI.Status.GenericError},ResetAnnotToDefault:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.ResetAnnotToDefault(A):
DocuViewareAPI.Status.GenericError},SetAnnotPropertiesValues:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.SetAnnotPropertiesValues(A,L):DocuViewareAPI.Status.GenericError},GetAnnotPropertiesValues:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.GetAnnotPropertiesValues(A):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesToDisplay:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.SetAnnotPropertiesToDisplay(A,L):DocuViewareAPI.Status.GenericError},
ResetAnnotPropertiesToDisplayDefault:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.ResetAnnotPropertiesToDisplayDefault(A):DocuViewareAPI.Status.GenericError},SetAnnotDefaultAuthor:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.SetAnnotDefaultAuthor(A,L):DocuViewareAPI.Status.GenericError},EnsureAnnotVisibility:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.FocusAnnot(A,L,!0):DocuViewareAPI.Status.GenericError},EnableAnnotMultiSelect:function(d,
A){return(d=document.getElementById(d))&&d.control?(d.control.EnableAnnotMultiSelect(A),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},SelectAnnot:function(d,A,L){return(d=document.getElementById(d))&&d.control?d.control.FocusAnnot(A,!0,L):DocuViewareAPI.Status.GenericError},UnselectAnnot:function(d,A){return(d=document.getElementById(d))&&d.control?d.control.UnselectAnnot(A):DocuViewareAPI.Status.GenericError},GetAnnotBBoxOnViewer:function(d,A){return(d=document.getElementById(d))&&
d.control?d.control.GetAnnotBBoxOnViewer(A):DocuViewareAPI.Status.GenericError}},DOCUVIEWARE_JS_VERSION=30058,DocuViewareProgressbar=function(){var d={width:"100%",height:"4px",zIndex:16777271},A={width:0,height:"100%",clear:"both",transition:"height .3s"};var L=function(q,y){for(var D in y)q.style[D]=y[D];q.style.float="left"};var S=function(){var q=this,y=this.width-this.here;.1>y&&-.1<y?(x.call(this,this.here),this.moving=!1,100==this.width&&(this.el.style.height=0,setTimeout(function(){q.cont.el.removeChild(q.el)},
300))):(x.call(this,this.width-y/4),setTimeout(function(){q.go()},16))};var x=function(q){this.width=q;this.el.style.width=this.width+"%"};var t=function(){var q=new h(this);this.bars.unshift(q)};var h=function(q){this.el=document.createElement("div");this.el.style.backgroundColor=q.opts.bg;this.here=this.width=0;this.moving=!1;this.cont=q;L(this.el,A);q.el.appendChild(this.el)};h.prototype.go=function(q){q?(this.here=q,this.moving||(this.moving=!0,S.call(this))):this.moving&&S.call(this)};var l=
function(q){q=this.opts=q||{};q.bg=q.bg||"#000";this.bars=[];var y=this.el=document.createElement("div");L(this.el,d);q.id&&(y.id=q.id);y.style.position=q.target?"absolute":"fixed";q.target?q.target.insertBefore(y,q.target.firstChild):document.getElementsByTagName("body")[0].appendChild(y);t.call(this)};l.prototype.value=function(){return this.bars[0].here};l.prototype.go=function(q){this.bars[0].go(q);100==q&&t.call(this)};return l}(),CreateDocuViewareCursorManager=function(d,A){return{target:d,
isIE:A,cursor:null,customCursorClass:null,setStdCursor:function(L){L!=this.cursor&&(this.dropCurrentCursor(),this.cursor=L,this.target.style.cursor=this.cursor)},setCustomCursorClass:function(L){this.isIE&&(L+="IE");L!=this.customCursorClass&&(this.dropCurrentCursor(),this.customCursorClass=L,dvJQuery(this.target).addClass(this.customCursorClass))},dropCurrentCursor:function(){this.customCursorClass&&(dvJQuery(this.target).removeClass(this.customCursorClass),this.customCursorClass=null);null!=this.cursor&&
(this.cursor=null,this.target.style.cursor="")}}},CreateDocuViewareController=function(d,A,L,S,x,t,h,l,q,y,D,K,M,O,R,Y,fa,ha,sa,X,ja,ka,ma){function ra(b){null!=b.dom.openfile&&DocuViewareUtilities.addEvent(b.dom.openfile,"change",function(c){if(null!=c.target.files&&0!=c.target.files.length){c=c.target.files[0];var e=dvJQuery(b.dom.openfile);e.val("");e.replaceWith(e.clone());ra(b);b.Internal.Files.uploadFile(c,0)}},!0)}function Ca(){"tiff"===dvJQuery(a.dom.saveDialog).find("select[name='save_extension_select"+
a.uniqueID+"']").val()&&"0"===dvJQuery(a.dom.saveDialog).find("select[name='save_content_select"+a.uniqueID+"']").val()?(dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("visibility","visible"),"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("display","flex")):(dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("visibility","hidden"),dvJQuery(a.dom.saveDialog).find("input[name='save_content_burn_annot"+
a.uniqueID+"']").prop("checked",!1),"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery("#saveDialog"+a.uniqueID+" > div:nth-child(1) > div:nth-child(4)").css("display","none"))}if(d!=DOCUVIEWARE_JS_VERSION)R=document.getElementById("main"+t),null!=R&&(R.style.visibility="visible"),document.write("The version of the DocuVieware javascript used is incorrect. The JavaScript version version is: "+DOCUVIEWARE_JS_VERSION+". The expected version is: "+d+". Please refresh this page or contact the webmaster if the problem persists.");
else{DocuViewarejQueryPlugins.register();var a={viewerWidth:null,viewerHeight:null,waitForInit:!1,appControllerPath:A,useIdInRoot:L,uniqueID:t,maxUploadSize:l,packetSize:q,favorMultipartUpload:h,debug:y,localization:D,certificateNames:K,UIconfig:M,snapIns:O,attachedDebugger:Y,twainServiceUri32:fa,twainServiceUri64:ha,twainServiceSupportedVersion:sa,twainSourceConfig:X,isWindows:-1<navigator.platform.indexOf("Win"),windowsVersion:DocuViewareUtilities.getWindowsVersion(),isIOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?
!0:!1,isSafari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),isIE:-1!=DocuViewareUtilities.getInternetExplorerVersion(),isIE9:9==DocuViewareUtilities.getInternetExplorerVersion(),isIE10:10==DocuViewareUtilities.getInternetExplorerVersion(),isIE11:11==DocuViewareUtilities.getInternetExplorerVersion(),isIEorEdge:-1!=DocuViewareUtilities.getInternetExplorerVersion()||"Netscape"==navigator.appName&&-1<navigator.appVersion.indexOf("Edge"),isEdge:-1<navigator.userAgent.indexOf("Edge"),
isFirefox:"undefined"!==typeof InstallTrigger,isMobile:function(){let b=!1;var c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))b=!0;return b},isMobileOrTablet:function(){let b=!1;var c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))b=!0;return b},isTouchMode:"undefined"!==typeof document.ontouchstart,fastMode:!0,log:function(b){this.debug&&(dvJQuery("#logDebug"+this.uniqueID).val(dvJQuery("#logDebug"+this.uniqueID).val()+b+"\n"),dvJQuery("#logDebug"+this.uniqueID).scrollTop(dvJQuery("#logDebug"+this.uniqueID)[0].scrollHeight),dvJQuery("#debugBar"+this.uniqueID).show())},Internal:{Libs:{pica:{FILTER_INFO:[{win:.5,filter:function(b){return-.5<=b&&.5>b?1:0}},{win:1,filter:function(b){if(-1>=b||1<=b)return 0;if(-1.1920929E-7<
b&&1.1920929E-7>b)return 1;b*=Math.PI;return Math.sin(b)/b*(.54+.46*Math.cos(b/1))}},{win:2,filter:function(b){if(-2>=b||2<=b)return 0;if(-1.1920929E-7<b&&1.1920929E-7>b)return 1;b*=Math.PI;return Math.sin(b)/b*Math.sin(b/2)/(b/2)}},{win:3,filter:function(b){if(-3>=b||3<=b)return 0;if(-1.1920929E-7<b&&1.1920929E-7>b)return 1;b*=Math.PI;return Math.sin(b)/b*Math.sin(b/3)/(b/3)}}],toFixedPoint:function(b){return Math.floor(16384*b)},createFilters:function(b,c,e){var g=this.FILTER_INFO[b].filter,k=e/
c,p=1/k;k=Math.min(1,k);b=this.FILTER_INFO[b].win/k;var n,w,B=new Int16Array((Math.floor(2*(b+1))+2)*e),I=0;for(n=0;n<e;n++){var E=(n+.5)*p;var V=Math.max(0,Math.floor(E-b));var ba=Math.min(c-1,Math.ceil(E+b));var da=ba-V+1;var ea=new Float32Array(da);da=new Int16Array(da);var la=0;var Ha=V;for(w=0;Ha<=ba;Ha++,w++){var wa=g((Ha+.5-E)*k);la+=wa;ea[w]=wa}for(w=E=0;w<ea.length;w++)ba=this.toFixedPoint(ea[w]/la),E+=ba,da[w]=ba;da[e>>1]+=this.toFixedPoint(1)-E;for(ea=0;ea<da.length&&0===da[ea];)ea++;if(ea<
da.length){for(la=da.length-1;0<la&&0===da[la];)la--;V+=ea;w=la-ea+1;B[I++]=V;B[I++]=w;B.set(da.subarray(ea,la+1),I);I+=w}else B[I++]=0,B[I++]=0}return B},convolveHorizontally:function(b,c,e,g,k,p,n){var w,B,I,E,V,ba,da=0,ea=0;for(V=0;V<k;V++){for(ba=E=0;ba<p;ba++){var la=n[E++];var Ha=n[E++];var wa=da+4*la|0;for(la=w=B=I=0;0<Ha;Ha--){var va=n[E++];0!=va&&(b&&(I=I+va*c[wa+3]|0),B=B+va*c[wa+2]|0,w=w+va*c[wa+1]|0,la=la+va*c[wa]|0);wa=wa+4|0}e[ea+3]=b&&4169728>I?I+8192>>14:255;e[ea+2]=4169728>B?B+8192>>
14:255;e[ea+1]=4169728>w?w+8192>>14:255;e[ea]=4169728>la?la+8192>>14:255;ea=ea+4*k|0}ea=4*(V+1)|0;da=(V+1)*g*4|0}},convolveVertically:function(b,c,e,g,k,p,n){var w,B,I,E,V,ba,da=0,ea=0;for(V=0;V<k;V++){for(ba=E=0;ba<p;ba++){var la=n[E++];var Ha=n[E++];var wa=da+4*la|0;for(la=w=B=I=0;0<Ha;Ha--){var va=n[E++];0!=va&&(b&&(I=I+va*c[wa+3]|0),B=B+va*c[wa+2]|0,w=w+va*c[wa+1]|0,la=la+va*c[wa]|0);wa=wa+4|0}e[ea+3]=b&&4169728>I?I+8192>>14:255;e[ea+2]=4169728>B?B+8192>>14:255;e[ea+1]=4169728>w?w+8192>>14:255;
e[ea]=4169728>la?la+8192>>14:255;ea=ea+4*k|0}ea=4*(V+1)|0;da=(V+1)*g*4|0}},resize:function(b){var c=b.width,e=b.height,g=b.toWidth,k=b.toHeight,p=b.dest||new DocuViewareEncodingUtilities.TypedArray.Uint8Array(g*k*4),n="undefined"===typeof b.quality?3:b.quality,w=b.alpha||!1;if(1>c||1>e||1>g||1>k)return[];var B=this.createFilters(n,c,g);n=this.createFilters(n,e,k);var I=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(g*e*4);this.convolveHorizontally(w,b.src,I,c,e,g,B);this.convolveVertically(w,
I,p,e,g,k,n);return p}}},Capabilities:{_hasWebPSupport:null,hasWebPSupport:function(){if(null===this._hasWebPSupport){if(-1!=navigator.userAgent.indexOf("Firefox")){var b=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);b=b?parseInt(b[1]):0;0!=b&&(this._hasWebPSupport=65<=b)}else if(-1!=navigator.userAgent.indexOf("AppleWebKit"))if(b=/Mac OS X (?<macos>\d\d_\d\d[_\d]{0,3}){0,1}\) (.)*Version\/(?<safari>[\d.]{0,4})/gi.exec(window.navigator.userAgent),null!=b&&4==b.length){var c=parseFloat(b[3]);
!Number.isNaN(c)&&16<=c?this._hasWebPSupport=!0:!Number.isNaN(c)&&14<=c&&(b=parseFloat(b[1].replace("_",".")),!Number.isNaN(b)&&-10.13<b&&(this._hasWebPSupport=!0))}else b=/iPhone OS (?<ios>\d\d[_\d]{0,3}){0,1}/gi.exec(navigator.userAgent),null!=b&&2==b.length&&14<=parseFloat(b[1].replace("_","."))&&(this._hasWebPSupport=!0);1!=this._hasWebPSupport&&(b=document.createElement("canvas"),b.getContext&&b.getContext("2d")?this._hasWebPSupport=0==b.toDataURL("image/webp").indexOf("data:image/webp"):this._hasWebPSupport=
!1)}return this._hasWebPSupport},hasTiffSupport:function(){return a.isIE}},Utilities:{normalizeRotation:function(b){b%=360;0>b&&(b+=360);return b},rgb2hex:function(b,c,e){return"#"+(16777216+(e|c<<8|b<<16)).toString(16).slice(1)},color2Hex:function(b){return"#"===b.substr(0,1)?b:(b=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===b.length?"#"+("0"+parseInt(b[1],10).toString(16)).slice(-2)+("0"+parseInt(b[2],10).toString(16)).slice(-2)+("0"+parseInt(b[3],10).toString(16)).slice(-2):
""},color2Object:function(b){"#"===b.substr(0,1)&&(b=this.hex2Rgb(b));return(b=b.match(/^(?:rgb|rgba)\s*\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(\d?\.\d+))?\s*\)$/i))&&5===b.length?{r:parseInt(b[1]),g:parseInt(b[2]),b:parseInt(b[3]),a:b[4]?parseFloat(b[4]):1}:null},hex2Rgb:function(b){return"#"!==b.substr(0,1)?"":"rgb("+(b>>16)+","+(b>>8&255)+","+(b&255)+")"},roundEx:function(b,c){c=Math.pow(10,c);return Math.round(b*c)/c},pageRangeChecker:function(b,c){if(""!=c&&"*"!=c){c=c.split(";");var e=
/([0-9])/,g;for(g in c){var k=c[g].split("-");if(2>=k.length)for(var p in k){if(1!=e.test(k[p])||0==parseInt(k[p])||parseInt(k[p])>b)return!1}else return!1}}return!0},pageRangeToArrayConverter:function(b){var c=a.serverCtx.pageCount,e=(b+"").replace(/\s+/g,""),g=[];if("*"==b||""==b){for(e=1;e<=c;e++)g.push(e);return g}b=-1!=b.indexOf(";")?";":",";e=e.split(b);for(b=0;b<e.length;b++){var k=e[b].split("-");if(1===k.length)g.push(parseInt(k[0],10));else if(2===k.length){var p=parseInt(k[0],10);k=parseInt(k[1],
10);if(!(k<p))for(;p<=k;p++)g.push(p)}}return g=g.filter(function(n,w,B){return B.indexOf(n)===w&&0<n&&n<=c}).sort(function(n,w){return n-w})},parseFunction:function(b,c){c=window[a.uniqueID+"Methods"];if("undefined"===typeof c)throw"Custom method not found";c=c[b];if("undefined"===typeof c)throw"Custom method "+b+" not found";return c}},Thumbnails:{lastUpdatedPageThumbnail:-1,selectedItems:[],getThumbnailShadow(){return{THUMBNAIL_SHADOW_OFFSETX:"dv-pspdfkitlight"===a.dom.getTheme()?0:2,THUMBNAIL_SHADOW_OFFSETY:"dv-pspdfkitlight"===
a.dom.getTheme()?0:2,THUMBNAIL_SHADOW_BLUR:"dv-pspdfkitlight"===a.dom.getTheme()?0:8,THUMBNAIL_SHADOW_COLOR:"dv-pspdfkitlight"===a.dom.getTheme()?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.1)"}},getThumbnailPage:function(b){if(null!=b){var c=b.getAttribute("data-pageNo");if(c)return parseInt(c);if(null!=b.parentNode&&b.parentNode.getAttribute("data-pageNo"))return parseInt(b.parentNode.getAttribute("data-pageNo"))}return 0},setThumbnailPageDest:function(b,c){return null!=b?(b.setAttribute("data-pageNo",c.toString()),
DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},setThumbnailText:function(b,c){return null!=b?(b=b.children[1],b.innerHTML="<p>"+c+"</p>",b.style.margin="0",b.style.align="center",DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},getThumbnailFromPageNo:function(b){b=dvJQuery(a.dom.thumbnailArea).children("[data-pageNo="+b+"]");return 0<b.length?b:null},resetThumbnailFromPageNo:function(b){b=this.getThumbnailFromPageNo(b);null!=b&&(b.attr("data-loaded","false"),b.attr("data-loading",
"false"))},getThumbnailAt:function(b,c){for(var e=a.dom.thumbnailArea.childElementCount,g=!1,k=0;k<e;k++){var p=a.dom.thumbnailArea.children[k];if(0!=a.Internal.Thumbnails.getThumbnailPage(p)){var n=dvJQuery(p).position().top;if(n+dvJQuery(p).innerHeight()>=c&&n<=c){n=dvJQuery(p).position().left;if(n+dvJQuery(p).innerWidth()>=b&&n<=b)return p;g|=1}else if(g)break}}return null},createThumbnail:function(b){var c=document.createElement("div");c.className="thumbnail-preview";a.Internal.Thumbnails.setThumbnailPageDest(c,
b);c.setAttribute("data-loaded","false");c.setAttribute("data-loading","false");c.setAttribute("data-moving","false");c.onmouseover=a.events.onThumbnailItemMouseOverHandler;c.onmouseout=a.events.onThumbnailItemMouseOutHandler;c.onclick=a.events.onThumbnailItemClickHandler;var e=document.createElement("canvas");e.className="spinner-thumb";e.style.width=a.dom.UIconfig.thumbnailWidth+2*a.Internal.Thumbnails.getThumbnailShadow().THUMBNAIL_SHADOW_OFFSETX+"px";e.style.height=a.dom.UIconfig.thumbnailHeight+
2*a.Internal.Thumbnails.getThumbnailShadow().THUMBNAIL_SHADOW_OFFSETY+"px";e.width=a.dom.UIconfig.thumbnailWidth*DocuViewareUtilities.getDevicePixelRatio()+2*a.Internal.Thumbnails.getThumbnailShadow().THUMBNAIL_SHADOW_OFFSETX;e.height=a.dom.UIconfig.thumbnailHeight*DocuViewareUtilities.getDevicePixelRatio()+2*a.Internal.Thumbnails.getThumbnailShadow().THUMBNAIL_SHADOW_OFFSETY;e.style.backgroundColor="transparent";c.appendChild(e);e=document.createElement("div");e.style.position="absolute";e.style.margin=
"0 auto";e.style.left="0";e.style.right="0";"dv-pspdfkitlight"===a.dom.getTheme()&&(e.style.bottom="-25px");c.appendChild(e);if(a.dom.UIconfig.enableThumbnailRotateButtons||a.dom.UIconfig.enableThumbnailDeleteButton){e=document.createElement("div");e.className="dv-thumbnail-menu";var g=document.createElement("div");g.classList.add("menu");g.classList.add("dv-list-group");g.style.backgroundColor=a.dom.UIconfig.contextMenuButtonColor;if(a.dom.UIconfig.enableThumbnailRotateButtons){var k=document.createElement("button");
k.className="dv-list-group-item";k.type="button";k.onclick=function(){a.RotatePage(b,3)};k.onmouseenter=function(){this.style.background=a.dom.UIconfig.contextMenuHoverButtonColor};k.onmouseleave=function(){this.style.background=a.dom.UIconfig.contextMenuButtonColor};var p=document.createElement("span");p.className="context-menu-icon";p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 11.5V7.6c2.8.5 5 2.9 5 5.9s-2.2 5.4-5 5.9v2c3.9-.5 7-3.9 7-7.9s-3.1-7.4-7-7.9V2.5L8.4 7.1l4.6 4.4zm-6.9 1c.1-.9.5-1.7 1-2.5L5.7 8.6c-.9 1.2-1.5 2.5-1.7 3.9h2.1zm2.4 5.9l-1.4 1.4c1.2.9 2.5 1.4 3.9 1.6v-2c-.9-.1-1.7-.5-2.5-1zm-2.4-3.9H4c.2 1.4.7 2.7 1.6 3.9L7.1 17c-.6-.7-.9-1.6-1-2.5z"/></svg>';
"dv-pspdfkitlight"===a.dom.getTheme()&&(p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"><path fill="#2B2E36" d="M12.994 2.564a.75.75 0 0 0-.988-1.128l-4 3.5a.75.75 0 0 0 0 1.128l4 3.5a.75.75 0 0 0 .988-1.128l-2.558-2.239A6.25 6.25 0 1 1 5.75 12.25a.75.75 0 0 0-1.5 0 7.75 7.75 0 1 0 6.397-7.632l2.347-2.054Z"/></svg>');p.style.fill=a.dom.UIconfig.contextMenuIconColor;k.appendChild(p);g.appendChild(k);k=document.createElement("button");k.className="dv-list-group-item";
k.type="button";k.onclick=function(){a.RotatePage(b,1)};k.onmouseenter=function(){this.style.background=a.dom.UIconfig.contextMenuHoverButtonColor};k.onmouseleave=function(){this.style.background=a.dom.UIconfig.contextMenuButtonColor};p=document.createElement("span");p.className="context-menu-icon";p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.6 7.1L11 2.5v3.1c-3.9.5-7 3.9-7 7.9s3.1 7.4 7 7.9v-2c-2.8-.5-5-2.9-5-5.9s2.2-5.4 5-5.9v3.9l4.6-4.4zm4.4 5.4c-.2-1.4-.7-2.7-1.6-3.9L17 10c.5.8.9 1.6 1 2.5h2zm-7 6.9v2c1.4-.2 2.7-.7 3.9-1.6l-1.4-1.4c-.8.5-1.6.9-2.5 1zm3.9-2.4l1.4 1.4c.9-1.2 1.5-2.5 1.6-3.9h-2c-.1.9-.4 1.8-1 2.5z"/></svg>';
"dv-pspdfkitlight"===a.dom.getTheme()&&(p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"><path fill="#2B2E36" d="M11.006 2.564a.75.75 0 0 1 .988-1.128l4 3.5a.75.75 0 0 1 0 1.128l-4 3.5a.75.75 0 0 1-.988-1.128l2.558-2.239a6.25 6.25 0 1 0 4.686 6.053.75.75 0 0 1 1.5 0 7.75 7.75 0 1 1-6.397-7.632l-2.347-2.054Z"/></svg>');p.style.fill=a.dom.UIconfig.contextMenuIconColor;k.appendChild(p);g.appendChild(k)}a.serverCtx.enablePageRemoval&&a.dom.UIconfig.enableThumbnailDeleteButton&&
1<a.GetPageCount()&&(k=document.createElement("button"),k.className="dv-list-group-item",k.type="button",k.onclick=function(){a.DeletePageInteractive(b)},k.onmouseenter=function(){this.style.background=a.dom.UIconfig.contextMenuHoverButtonColor},k.onmouseleave=function(){this.style.background=a.dom.UIconfig.contextMenuButtonColor},p=document.createElement("span"),p.className="context-menu-icon",p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>',
"dv-pspdfkitlight"===a.dom.getTheme()&&(p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"><path fill="#2B2E36" fill-rule="evenodd" d="M9.6 3.9a2.1 2.1 0 0 1 4.2 0v.3H9.6v-.3Zm6 0a3.9 3.9 0 0 0-7.8 0v.3H2.1a.9.9 0 1 0 0 1.8h1.5v14.5a2.9 2.9 0 0 0 2.9 2.9h10.4a2.9 2.9 0 0 0 2.9-2.9V6h1.5a.9.9 0 0 0 0-1.8h-5.7v-.3ZM5.4 20.5V6H18v14.5a1.1 1.1 0 0 1-1.1 1.1H6.5a1.1 1.1 0 0 1-1.1-1.1Zm7.2-11.2a.9.9 0 0 0-1.8 0v8.4a.9.9 0 1 0 1.8 0V9.3Zm-4.5-.9a.9.9 0 0 1 .9.9v8.4a.9.9 0 1 1-1.8 0V9.3a.9.9 0 0 1 .9-.9Zm8.1.9a.9.9 0 0 0-1.8 0v8.4a.9.9 0 0 0 1.8 0V9.3Z" clip-rule="evenodd"/></svg>'),
p.style.fill=a.dom.UIconfig.contextMenuIconColor,k.appendChild(p),g.appendChild(k));e.appendChild(g);c.appendChild(e)}a.Internal.Thumbnails.setThumbnailText(c,b.toString());return c},getSelectedThumbnails:function(b){var c=a.Internal.Thumbnails.selectedItems.slice();b&&c.sort(function(e,g){return e-g});return c},setThumbnailSelected:function(b,c){return c?this.selectThumbnail(b):this.unselectThumbnail(b)},selectThumbnail:function(b){if(1>b||b>a.GetPageCount())return DocuViewareAPI.Status.GenericError;
-1==this.selectedItems.indexOf(b)&&(this.selectedItems.push(b),a.dom.updateThumbStyle(b));return DocuViewareAPI.Status.OK},unselectThumbnail:function(b){if(1>b||b>a.GetPageCount())return DocuViewareAPI.Status.GenericError;this.selectedItems&&-1<this.selectedItems.indexOf(b)&&(this.selectedItems.splice(this.selectedItems.indexOf(b),1),a.dom.updateThumbStyle(b));return DocuViewareAPI.Status.OK},isThumbnailSelected:function(b){return this.selectedItems?-1<this.selectedItems.indexOf(b):!1},toggleThumbnailSelection:function(b){return 1>
b||b>a.GetPageCount()?DocuViewareAPI.Status.GenericError:this.isThumbnailSelected(b)?this.unselectThumbnail(b):this.selectThumbnail(b)},reinitThumbnailsSelection:function(){var b=this.selectedItems;this.selectedItems=[];if(0!=b.length)for(var c=0;c<b.length;c++)a.dom.updateThumbStyle(b[c])},reinitThumbnails:function(){a.Internal.Thumbnails.reinitThumbnailsSelection();for(var b=a.dom.thumbnailArea.childElementCount,c=0;c<b;c++){var e=a.dom.thumbnailArea.children[c];a.Internal.Thumbnails.setThumbnailPageDest(e,
c+1);a.Internal.Thumbnails.setThumbnailText(e,(c+1).toString())}},removeAllThumbnails:function(){this.selectedItems=[];if(a.dom.thumbnailArea)for(;a.dom.thumbnailArea.hasChildNodes();)a.dom.thumbnailArea.removeChild(a.dom.thumbnailArea.lastChild)}},Files:{MAX_UPLOAD_THREADS:3,uploadThreads:0,uploadStates:[],uploading:!1,uploadChunks:0,file:null,updateProgress:function(){for(var b=0,c=0;c<a.Internal.Files.uploadStates.length;c++)b+=a.Internal.Files.uploadStates[c];c=Math.min(b/(100*a.Internal.Files.uploadStates.length)*
100,99.9);if("undefined"===typeof a.dom.progressbar.value100||a.dom.progressbar.value100<c)a.dom.progressbar.go(c),a.dom.progressbar.value100=c,b=dvJQuery(a.dom.mainSpinnerContent),c=parseFloat(Math.round(100*c)/100).toFixed(2),b.children(b.children.length-1).text(a.Localize("label__loading_progress")+" ("+c+"%)")},uploadFile:function(b,c,e,g){var k=b.size;if(0!=k)if(a.Internal.Files.file=b,0<a.dom.maxUploadSize&&a.dom.maxUploadSize<k)b=alert,c=a.Localize("error__upload_max_size"),e=a.dom.maxUploadSize,
g=1099511627776,e=0<=e&&1024>e?e+" B":1024<=e&&1048576>e?(e/1024).toFixed(2)+" KB":1048576<=e&&1073741824>e?(e/1048576).toFixed(2)+" MB":1073741824<=e&&e<g?(e/1073741824).toFixed(2)+" GB":e>=g?(e/g).toFixed(2)+" TB":e+" B",b(c+e+".");else{for(var p=[],n=0,w=0,B=a.dom.packetSize>k?k:a.dom.packetSize;w<k;)n++,p.push(b.slice(w,B)),w=B,B=w+a.dom.packetSize;w=0;B=Date.now();for(a.debug&&console.log("DocuVieware: uploadFile::creating packets");w<n;)this.uploadChunk(B,b.name,p[w],n,w+1,k,c,e,g),w++;a.debug&&
console.log("DocuVieware: uploadFile::"+n+" packets generated")}},uploadChunk:function(b,c,e,g,k,p,n,w,B){function I(ba,da){dvJQuery(a.dom.mainSpinner).show();a.ajax.transferID=ba;a.Internal.Files.uploading=!0;a.Internal.Files.uploadStates=Array(g);for(ba=0;ba<g;ba++)a.Internal.Files.uploadStates[ba]=0;a.Internal.Files.uploadThreads=0;a.Internal.Files.uploadChunks=da;a.dom.progressbar.go(0);a.dom.progressbar.value100=0;da=dvJQuery(a.dom.mainSpinnerContent);da.children(da.children.length-1).text(a.Localize("label__loading_progress"))}
a.ajax.transferID!=b&&I(b,g);if(1==a.Internal.Files.uploading)if(a.Internal.Files.uploadThreads>=a.Internal.Files.MAX_UPLOAD_THREADS)setTimeout(function(){a.Internal.Files.uploadChunk(b,c,e,g,k,p,n,w,B)},10);else{a.Internal.Files.uploadThreads++;var E=new FileReader;if(a.favorMultipartUpload)E.onload=function(ba){a.Internal.Files.transferChunk(b,c,e,null,g,k,p,n,w,B)},E.readAsArrayBuffer(e);else if(null==E.readAsBinaryString)if(a.isIE11){E=URL.createObjectURL(e);var V=new XMLHttpRequest;V.open("get",
E,!0);V.responseType="arraybuffer";V.onload=function(){if(200==this.status){for(var ba=new Uint8Array(this.response),da=ba.length,ea=Array(da);da--;)ea[da]=String.fromCharCode(ba[da]);ba=window.btoa(ea.join(""));a.Internal.Files.transferChunk(b,c,e,ba,g,k,p,n,w,B)}};V.send()}else E.onload=function(ba){var da=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(this.result);ba=DocuViewareEncodingUtilities.base64;for(var ea=ba.encode,la=da.length,Ha=Array(la);la--;)Ha[la]=String.fromCharCode(da[la]);
da=Ha.join("");ba=ea.call(ba,da);a.Internal.Files.transferChunk(b,c,e,ba,g,k,p,n,w,B)},E.readAsArrayBuffer(e);else E.onload=function(ba){ba=DocuViewareEncodingUtilities.base64.encode(ba.target.result);a.Internal.Files.transferChunk(b,c,e,ba,g,k,p,n,w,B)},E.readAsBinaryString(e)}},transferChunk:function(b,c,e,g,k,p,n,w,B,I){function E(ba){a.Internal.Files.uploading=!1;a.dom.progressbar.go(100);a.dom.progressbar.value100=100;dvJQuery(a.dom.mainSpinner).hide();if(ba){if(a.callbacks.onFileOpenSuccess)a.callbacks.onFileOpenSuccess()}else if(a.callbacks.onFileOpenError)a.callbacks.onFileOpenError()}
var V={url:a.appControllerPath+(a.favorMultipartUpload?"/loadfromfilemultipart":"/loadfromfile")+(a.useIdInRoot?"/1":""),async:!0,beforeSend:function(){a.Internal.Files.uploadStates[p-1]=0;return a.Internal.Files.uploading},success:function(ba){a.Internal.Files.uploading?(ba="string"===typeof ba?JSON.parse(ba):ba)&&ba.status==DocuViewareAPI.Status.OK?(a.Internal.Files.uploadThreads--,ba.isTransfering?(a.Internal.Files.uploadStates[p-1]=100,a.Internal.Files.updateProgress()):(E(!0),a.ajax.SetNewServerCtx(ba))):
ba&&ba.status!=DocuViewareAPI.Status.OK&&null!=ba.responseType&&"DocuVieware"===ba.responseType&&ba.allowRetry?(console.log("DocuVieware: Failed to upload packet: "+p.toString()+". Retrying..."),a.ajax.PostAjaxRequestForDocuViewareAction(V)):(E(!1),a.Internal.Files.uploadThreads--,a.ajax.HandleError(ba)):a.Internal.Files.uploadThreads--},error:function(ba){a.ajax.HandleError(ba);E(!1);a.Internal.Files.uploadThreads--},xhr:function(){var ba=dvJQuery.ajaxSettings.xhr();ba.upload&&ba.upload.addEventListener("progress",
function(da){da.lengthComputable&&(a.Internal.Files.uploadStates[p-1]=da.loaded/da.total*100,a.Internal.Files.updateProgress())},!1);return ba}};a.favorMultipartUpload?(b=new FormData,b.append("transferID",a.ajax.transferID),b.append("sessionID",a.ajax.sessionID),b.append("appendMode",w),b.append("fileName",c),b.append("fileSize",n),b.append("data",e,"fileblob"),b.append("chunkCount",k),b.append("chunkID",p),b.append("password",B),b.append("contentEncoding",I),V.data=b,V.cache=!1,V.contentType=!1,
V.processData=!1):(c=JSON.stringify({transferID:a.ajax.transferID,sessionID:a.ajax.sessionID,appendMode:w,fileName:c,fileSize:n,data:g,chunkCount:k,chunkID:p,password:B,contentEncoding:I}),V.data=c,V.contentType="application/json");a.ajax.PostAjaxRequestForDocuViewareAction(V)}},FilePassword:{dialog:null,createAndShowDialog:function(b,c){null!=a.Internal.FilePassword.dialog&&a.Internal.FilePassword.dialog.remove();a.Internal.FilePassword.dialog=dvJQuery(a.dom.dvpassword).clone();var e=a.Internal.FilePassword.dialog;
dvJQuery(a.dom.mainSpinner).hide();dvJQuery(a.dom.modalOverlayArea).show();e.appendTo(dvJQuery(a.dom.mainArea));e.css("display","block");e.find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor);e.find(".dvUi-dialog-content").css("background-color",a.dom.UIconfig.panelBackColor);e.find(".password-dialog-submit-button").click(function(){b(e.find("input[type=password]").val())});e.find(".password-dialog-close-button").click(function(){c()})},showError:function(b){var c=a.Internal.FilePassword.dialog.find(".dvUi-state-error-text");
c.text(b);c.css({"font-weight":"bold"});setTimeout(function(){c.css({"font-weight":"normal"})},1E3)},destroyDialog:function(){a.Internal.FilePassword.dialog&&(a.Internal.FilePassword.dialog.remove(),dvJQuery(a.dom.modalOverlayArea).hide())},setPassword:function(b,c){a.ajax.PostBaseRequest("setpassword",{data:{password:b},success:function(e){(e="string"===typeof e?JSON.parse(e):e)&&e.status==DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(e),a.Internal.FilePassword.destroyDialog()):e.status!==DocuViewareAPI.Status.InvalidPassword&&
e.status!==DocuViewareAPI.Status.PasswordRequired||!c?a.ajax.HandleError(e):a.Internal.FilePassword.showError(a.Localize("dialog_password_incorrect"))},error:function(e){a.ajax.HandleError(e)}},!1,!0)}},Print:{MAX_PRINTING_THREADS:5,printThreads:0,isPrinting:!1,printPages:function(b,c,e,g,k,p){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;a.isIE&&a.IsFullScreenMode()&&a.ToggleFullscreen();if(c&&!a.Internal.Utilities.pageRangeChecker(a.GetPageCount(),c))return a.DisplayError(a.Localize("error__invalid_page_range")),
DocuViewareAPI.Status.GenericError;if("0"==e)if(a.Internal.Utilities.pageRangeToArrayConverter(c)){var n=a.Internal.Utilities.pageRangeToArrayConverter(c),w=[],B=0;a.Internal.Print.isPrinting=!0;function I(V,ba){if(a.Internal.Print.isPrinting&&(w[V-1]=ba,B++,g&&g(B,n.length),B==n.length)){var da=document.createElement("iframe");document.body.appendChild(da);da.contentWindow.document.open();da.contentWindow.document.write("<!doctype html>");a.isFirefox||a.isEdge?da.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>"+
a.serverCtx.fileName+"</title><style media='print'>@page{size:auto;margin:0;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>"):da.contentWindow.document.write("<html style='width:100%;height:100%'><head><title>"+a.serverCtx.fileName+"</title><style media='print'>@page{size:auto;margin:10mm;}</style></head><body onload='if(document.queryCommandSupported(\"print\")){document.execCommand(\"print\",false,null);}else{this.focus();this.print();}' style='width:100%;height:100%;margin:0'>");
for(V=0;V<B;V++)0<V&&da.contentWindow.document.write("<div style='page-break-before:always;width:0;height:0;margin:0;padding:0'></div>"),da.contentWindow.document.write(w[n[V]-1]),"function"==typeof CollectGarbage&&CollectGarbage();da.contentWindow.document.write("</body></html>");da.contentWindow.document.close();setTimeout(function(){document.body.removeChild(da)},6E3);a.Internal.Print.isPrinting=!1;k&&k();if(a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted()}}function E(){a.Internal.Print.isPrinting=
!1;p&&p()}for(c=0;c<n.length;c++)this.getPageForPrint(b,n[c],n.length,I,E)}else return DocuViewareAPI.Status.GenericError;else if(window.open(a.appControllerPath+"/print"+(a.useIdInRoot?"/1":"")+"?sessionID="+a.ajax.sessionID+"&pageRange="+(c?c:"*")+"&printAnnotations="+b,"_blank"),k&&k(),a.callbacks.onDocumentPrinted)a.callbacks.onDocumentPrinted();return DocuViewareAPI.Status.OK},getPageForPrint:function(b,c,e,g,k){1==a.Internal.Print.isPrinting&&(a.Internal.Print.printThreads>=a.Internal.Print.MAX_PRINTING_THREADS?
setTimeout(function(){a.Internal.Print.getPageForPrint(b,c,e,g,k)},10):(a.Internal.Print.printThreads++,a.ajax.PostBaseRequest("print",{data:{entries:[c],printAnnotations:b,pageCount:e},success:function(p){if((p="string"===typeof p?JSON.parse(p):p)&&p.status==DocuViewareAPI.Status.OK&&p.contextID==a.ajax.contextID)for(var n=0;n<p.images.length;n++){var w=null;if(p.images[n].getFromCache){var B=a.cache.getPageObject(p.images[n].pageNo);B&&(w=B.bitmap,w.style.display="block",w.style.maxWidth="99.5%",
w.style.maxHeight="99.5%",w.style.margin="0 auto",w.style.padding="0",w.style.height="auto",w.style.width="auto",w=w.outerHTML)}else p.images[n].mime&&p.images[n].data&&(w="<img src='data:"+p.images[n].mime+";base64,"+p.images[n].data+"' style='display: block; max-width: 99.5%; max-height: 99.5%; margin: 0 auto; padding: 0; height: auto; width: auto;'>",p.images[n].setInCache&&a.cache.cachePageBitmap(p.images[n].pageNo,p.images[n].mime,p.images[n].data,p.images[n].scale,p.images[n].hasTransparency));
g&&g(p.images[n].pageNo,w)}"function"==typeof CollectGarbage&&CollectGarbage()},error:function(p){a.ajax.HandleError(p);k&&k()},complete:function(p){a.Internal.Print.printThreads--}},!1,!0)))}},Selection:{getSelectionAreaCoordinates:function(){var b={left:0,top:0,width:0,height:0};if((3==a.events.mouseMode||4==a.events.mouseMode)&&0<dvJQuery(a.dom.rselect).width()&&dvJQuery(a.dom.rselect).height()){var c=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),e=a.dom.viewerArea.getBoundingClientRect(),
g=a.dom.rselect.getBoundingClientRect();e={left:g.left-e.left-c.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),top:g.top-e.top-c.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:dvJQuery(a.dom.rselect).width(),height:dvJQuery(a.dom.rselect).height()};c=a.Internal.Matrix.scale(a.Internal.Matrix.invert(c.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(c,0,e);b.left=a.Internal.Utilities.roundEx(e.left,7);b.top=a.Internal.Utilities.roundEx(e.top,7);b.width=a.Internal.Utilities.roundEx(e.width,
7);b.height=a.Internal.Utilities.roundEx(e.height,7)}return b},setSelectionAreaCoordinates:function(b){if(!a.serverCtx.documentLoaded||"object"!==typeof b||!b.left&&0!==b.left||!b.top&&0!==b.top||!b.width||!b.height)return DocuViewareAPI.Status.GenericError;var c=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),e=a.Internal.Matrix.scale(c.contentMatrix,96,96,!1);a.Internal.Matrix.transformBBox(e,0,b);e=b.left+c.pageLeft;var g=b.top+c.pageTop,k=b.width;b=b.height;if(e<c.pageLeft||e+k>c.pageLeft+
c.pageWidth||g<c.pageTop||g+b>c.pageTop+c.pageHeight)return DocuViewareAPI.Status.GenericError;3!=a.events.mouseMode&&4!=a.events.mouseMode&&a.SetMouseMode(3);this.selectionArea.startNewSelectionBox(e,g,!0);a.dom.rselect.style.height=b+"px";a.dom.rselect.style.width=k+"px";a.dom.rselect.height=b;a.dom.rselect.width=k;this.selectionArea.show();return DocuViewareAPI.Status.OK},clearSelectionArea:function(){this.selectionArea.reset()},selectionArea:{isMoving:!1,isSelected:!1,isOver:!1,resizingMode:-1,
lineMode:0,startX:0,endX:0,startY:0,endY:0,antOffset:0,dashList:[4,4,4,4],dashLength:0,init:function(b){a.dom.rselect=document.createElement("canvas");a.dom.rselect.style.zIndex=a.dom.zindexManager.getSelectionAreaZindex();a.dom.rselect.style.display="block";a.dom.rselect.style.position="absolute";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.style.left="0px";a.dom.rselect.style.top="0px";a.dom.rselect.style.padding="0px";a.dom.rselect.style.margin="0px";a.dom.rselect.style.visibility=
"hidden";window.PointerEvent?(a.dom.rselect.onpointerup=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseUp(c);break;case "pen":a.Internal.Selection.selectionArea.mouseUp(c,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseDown(c,!0);break;default:a.Internal.Selection.selectionArea.mouseUp(c)}},a.dom.rselect.onpointerdown=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseDown(c);break;case "pen":a.Internal.Selection.selectionArea.mouseDown(c,
!0);break;case "touch":a.Internal.Selection.selectionArea.mouseDown(c,!0);break;default:a.Internal.Selection.selectionArea.mouseDown(c)}},a.dom.rselect.onpointermove=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseMove(c);break;case "pen":a.Internal.Selection.selectionArea.mouseMove(c,!0);break;case "touch":a.Internal.Selection.selectionArea.mouseMove(c,!0);break;default:a.Internal.Selection.selectionArea.mouseMove(c)}},a.dom.rselect.onpointerleave=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseLeave(c);
break;case "pen":a.Internal.Selection.selectionArea.mouseLeave(c);break;default:a.Internal.Selection.selectionArea.mouseLeave(c)}},a.dom.rselect.onpointerenter=function(c){switch(c.pointerType){case "mouse":a.Internal.Selection.selectionArea.mouseEnter(c);break;case "pen":a.Internal.Selection.selectionArea.mouseEnter(c);break;default:a.Internal.Selection.selectionArea.mouseEnter(c)}}):(a.dom.rselect.onmouseup=function(c,e){return a.Internal.Selection.selectionArea.mouseUp(c,e)},a.dom.rselect.onmousedown=
function(c,e){return a.Internal.Selection.selectionArea.mouseDown(c,e)},a.dom.rselect.onmouseenter=function(c,e){return a.Internal.Selection.selectionArea.mouseEnter(c,e)},a.dom.rselect.onmousemove=function(c,e){return a.Internal.Selection.selectionArea.mouseMove(c,e)},a.dom.rselect.onmouseleave=function(c,e){return a.Internal.Selection.selectionArea.mouseLeave(c,e)});b.appendChild(a.dom.rselect)},reset:function(){if(3==a.events.mouseMode||4==a.events.mouseMode)this.isOver=this.isSelected=this.isMoving=
!1,this.resizingMode=-1,a.dom.rselect.style.height="0px",a.dom.rselect.style.width="0px",a.dom.rselect.height=0,a.dom.rselect.width=0,this.hide()},show:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="visible")},hide:function(){a.dom.rselect&&(a.dom.rselect.style.visibility="hidden")},getCornerHitTest:function(b,c,e,g){return b>=e.left-g&&b<=e.left+g&&c>=e.top-g&&c<=e.top+g?0:b>=e.right-g&&b<=e.right+g&&c>=e.top-g&&c<=e.top+g?1:b>=e.right-g&&b<=e.right+g&&c<=e.bottom+g&&c>=e.bottom-g?2:
b>=e.left-g&&b<=e.left+g&&c<=e.bottom+g&&c>=e.bottom-g?3:b>=e.left-g&&b<=e.left+g?4:c>=e.top-g&&c<=e.top+g?5:b>=e.right-g&&b<=e.right+g?6:c<=e.bottom+g&&c>=e.bottom-g?7:-1},getGripSize:function(b){return 6*(b?3:1)},getStartPosition:function(){var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage());return{x:this.startX-b.pageLeft,y:this.startY-b.pageTop}},getEndPosition:function(){var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage());return{x:this.endX-b.pageLeft,y:this.endY-b.pageTop}},
getPageBounds:function(b){b=a.Internal.Pages.getRenderingState(b);var c=a.dom.viewerArea.getBoundingClientRect(),e=a.dom.rselect.getBoundingClientRect();return{left:e.left-c.left-b.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),top:e.top-c.top-b.pageTop+a.Internal.Coordinates.getViewerScrollTop(),width:e.width,height:e.height}},setCursor:function(b){if(this.isSelected&&this.isOver||this.isSelected&&this.isMoving){if(this.isMoving)b=this.resizingMode;else{b=this.getGripSize(b);var c=a.dom.rselect.getBoundingClientRect();
b=this.getCornerHitTest(a.events.mouseX,a.events.mouseY,c,b)}switch(b){case 0:a.dom.viewerArea.cursorMgr.setStdCursor("nw-resize");break;case 1:a.dom.viewerArea.cursorMgr.setStdCursor("ne-resize");break;case 2:a.dom.viewerArea.cursorMgr.setStdCursor("nwse-resize");break;case 3:a.dom.viewerArea.cursorMgr.setStdCursor("nesw-resize");break;case 4:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");break;case 5:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;case 6:a.dom.viewerArea.cursorMgr.setStdCursor("w-resize");
break;case 7:a.dom.viewerArea.cursorMgr.setStdCursor("n-resize");break;default:a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll")}}else this.isOver&&!this.isDrawing?a.dom.viewerArea.cursorMgr.setStdCursor("all-scroll"):a.dom.viewerArea.cursorMgr.setStdCursor("crosshair")},setSelectionRectangleStyle:function(b){a.dom.rselect&&(b?(a.dom.rselect.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,a.dom.rselect.style.opacity="0.25",a.dom.rselect.style.borderStyle="none",a.dom.rselect.style.borderWidth=
"0px"):(a.dom.rselect.style.backgroundColor="rgba(0,0,255,0.2)",a.dom.rselect.style.borderStyle="solid",a.dom.rselect.style.borderColor="red",a.dom.rselect.style.borderWidth="1px"))},setLineMode:function(b){this.lineMode=b},startNewAnnotBox:function(b,c){this.stopDrawingAnts();this.startX=b;this.startY=c;a.dom.rselect.style.left=b+"px";a.dom.rselect.style.top=c+"px";a.dom.rselect.style.height="1px";a.dom.rselect.style.width="1px";a.dom.rselect.height=dvJQuery(a.dom.rselect).height();a.dom.rselect.width=
dvJQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);this.show();this.isDrawing=!0},setAnnotBoxEndPoint:function(b,c){this.endX=null!=b?b:this.startX;this.endY=null!=c?c:this.startY},startNewSelectionBox:function(b,c,e){this.stopDrawingAnts();this.isSelected=!1;this.startX=b;this.startY=c;a.dom.rselect.style.left=b+"px";a.dom.rselect.style.top=c+"px";a.dom.rselect.style.height="0px";a.dom.rselect.style.width="0px";a.dom.rselect.height=
dvJQuery(a.dom.rselect).height();a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.getContext("2d").clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);for(b=this.dashLength=this.antOffset=0;b<this.dashList.length;b++)this.dashLength+=this.dashList[b];this.drawingAnts();e||(this.isDrawing=!0)},drawingAnts:function(){a.Internal.Selection.selectionArea.antOffset++;a.Internal.Selection.selectionArea.antOffset>a.Internal.Selection.selectionArea.dashLength&&(a.Internal.Selection.selectionArea.antOffset=
0);a.Internal.Selection.selectionArea.draw();a.Internal.Selection.selectionArea.drawingAntsOn=setTimeout(a.Internal.Selection.selectionArea.drawingAnts,20)},stopDrawingAnts:function(){this.drawingAntsOn&&(clearTimeout(this.drawingAntsOn),this.drawingAntsOn=null)},draw:function(){if(3==a.events.mouseMode||4==a.events.mouseMode){var b=a.dom.rselect.getContext("2d");b.clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height);b.lineWidth="1";b.strokeStyle=a.dom.UIconfig.activeSelectedColor;b.setLineDash?
(b.setLineDash(this.dashList),b.lineDashOffset=-this.antOffset,b.strokeRect(0,0,a.dom.rselect.width,a.dom.rselect.height)):(b.beginPath(),this.drawDashedLine(b,0,0,a.dom.rselect.width,0,this.dashList,this.antOffset),this.drawDashedLine(b,a.dom.rselect.width,0,a.dom.rselect.width,a.dom.rselect.height,this.dashList,this.antOffset),this.drawDashedLine(b,a.dom.rselect.width,a.dom.rselect.height,0,a.dom.rselect.height,this.dashList,this.antOffset),this.drawDashedLine(b,0,a.dom.rselect.height,0,0,this.dashList,
this.antOffset),b.closePath(),b.stroke())}},drawDashedLine:function(b,c,e,g,k,p,n){var w=p.length,B=0;for(J=0;J<w;J++)B+=parseInt(p[J]);g-=c;k-=e;var I=g?k/g:1E15;n=B*(1-n/B);n=Math.sqrt(n*n/(1+I*I));if(0>g||0>k)n=-n;c-=n;g+=n;e-=I*n;k+=I*n;b.moveTo(c,e);n=Math.sqrt(g*g+k*k);B=0;for(var E=!0;.1<=n;){var V=p[B++%w];V>n&&(V=n);var ba=Math.sqrt(V*V/(1+I*I));if(0>g||0>k)ba=-ba;c+=ba;e+=I*ba;b[E?"lineTo":"moveTo"](c,e);n-=V;E=!E}},mouseUp:function(b,c){if(1==a.events.mouseMode&&this.isDrawing){c=1==this.lineMode?
96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*a.GetCurrentZoom():0;0!=this.straightLineMode&&(2==this.straightLineMode?(a.dom.rselect.style.width="0px",a.dom.rselect.style.width=0,a.dom.rselect.style.left=a.Internal.Selection.selectionArea.startX+"px"):(a.dom.rselect.style.height="0px",a.dom.rselect.style.height=0,a.dom.rselect.style.top=a.Internal.Selection.selectionArea.startY+"px"));var e=a.dom.viewerArea.getBoundingClientRect(),g=a.Internal.Coordinates.getViewerScrollLeft(),
k=a.Internal.Coordinates.getViewerScrollTop();g=b.clientX+g;b=b.clientY+k;0==this.straightLineMode?a.Internal.Selection.selectionArea.setAnnotBoxEndPoint(g-e.left,b-e.top):2==this.straightLineMode?(a.Internal.Selection.selectionArea.startX-=c,a.Internal.Selection.selectionArea.setAnnotBoxEndPoint(null,b-e.top)):(a.Internal.Selection.selectionArea.startY-=c,a.Internal.Selection.selectionArea.setAnnotBoxEndPoint(g-e.left,null));this.isDrawing=!1;this.hide();a.Internal.DigiSign.isAddingSignature?a.Internal.DigiSign.addSignatureInteractive():
a.Internal.Annotations.addAnnotInteractive();return!0}if(4==a.events.mouseMode&&this.isDrawing)return b=a.GetSelectionAreaCoordinates(),this.reset(),this.isDrawing=!1,a.ZoomRect(b),!0;if(3==a.events.mouseMode&&this.isDrawing){this.isDrawing=!1;if(0==dvJQuery(a.dom.rselect).width()&&0==dvJQuery(a.dom.rselect).height())this.hide();else if(this.isSelected=!0,a.callbacks.onAreaSelected)a.callbacks.onAreaSelected();return!0}return 3==a.events.mouseMode&&this.isMoving?(this.isMoving=!1,0==dvJQuery(a.dom.rselect).width()&&
0==dvJQuery(a.dom.rselect).height()&&this.hide(),-1!=this.resizingMode&&(this.resizingMode=-1,this.setCursor()),!0):!1},mouseDown:function(b,c){a.events.mouseX=b.clientX;a.events.mouseY=b.clientY;a.events.mouseDownClientX=b.clientX;a.events.mouseDownClientY=b.clientY;this.isSelected=this.isMoving=!0;c=this.getGripSize(c);var e=a.dom.rselect.getBoundingClientRect();this.resizingMode=this.getCornerHitTest(b.clientX,b.clientY,e,c);b.stopImmediatePropagation();b.preventDefault();return!1},mouseMove:function(b,
c){this.setCursor(c);if(1==a.events.mouseMode){var e=1==this.lineMode?96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*a.GetCurrentZoom():0,g=a.dom.viewerArea.getBoundingClientRect();c=b.clientX-a.events.mouseDownX+a.Internal.Coordinates.getViewerScrollLeft();var k=b.clientY-a.events.mouseDownY+a.Internal.Coordinates.getViewerScrollTop(),p=Math.abs(c),n=Math.abs(k);1==this.lineMode&&b.ctrlKey?Math.abs(c)>Math.abs(k)?(k=0,this.straightLineMode=1,n=e):(c=0,this.straightLineMode=
2,p=e):this.straightLineMode=0;a.dom.rselect.style.width=p+"px";a.dom.rselect.style.height=n+"px";a.dom.rselect.width=p;a.dom.rselect.height=n;p=2==this.straightLineMode?-e/2:0;a.dom.rselect.style.left=0>c?p+b.clientX-g.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":p+a.events.mouseDownX-g.left+"px";p=1==this.straightLineMode?-e/2:0;a.dom.rselect.style.top=0>k?p+b.clientY-g.top+a.Internal.Coordinates.getViewerScrollTop()+"px":p+a.events.mouseDownY-g.top+"px";1==this.lineMode&&(b=a.dom.rselect.getContext("2d"),
b.lineWidth=e,b.strokeStyle=a.Internal.Annotations.currentInteractiveAnnotProperties.strokeColor,b.clearRect(0,0,a.dom.rselect.width,a.dom.rselect.height),b.beginPath(),0!=this.straightLineMode?1==this.straightLineMode?(b.moveTo(0,a.dom.rselect.height/2),b.lineTo(a.dom.rselect.width,a.dom.rselect.height/2)):(b.moveTo(a.dom.rselect.width/2,0),b.lineTo(a.dom.rselect.width/2,a.dom.rselect.height)):(b.moveTo(0<c?0:a.dom.rselect.width,0<k?0:a.dom.rselect.height),b.lineTo(0>c?0:a.dom.rselect.width,0>k?
0:a.dom.rselect.height)),b.stroke());return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isDrawing){g=a.dom.viewerArea.getBoundingClientRect();p=b.clientX-g.left+a.Internal.Coordinates.getViewerScrollLeft();n=b.clientY-g.top+a.Internal.Coordinates.getViewerScrollTop();var w=this.startX,B=this.startY+a.Internal.Coordinates.getViewerScrollTop();e=a.Internal.Pages.getRenderingState(a.GetCurrentPage());var I=null;w>=e.pageLeft&&w<=e.pageLeft+e.pageWidth?I=this.startX+g.left:w<e.pageLeft?
I=g.left+e.pageLeft:w>e.pageLeft+e.pageWidth&&(I=g.left+e.pageLeft+e.pageWidth);var E=null;B>=a.Internal.Coordinates.getViewerScrollTop()+e.pageTop&&B<=a.Internal.Coordinates.getViewerScrollTop()+e.pageTop+e.pageHeight?E=this.startY+g.top:B<a.Internal.Coordinates.getViewerScrollTop()+e.pageTop?E=g.top+e.pageTop:B>a.Internal.Coordinates.getViewerScrollTop()+e.pageTop+e.pageHeight&&(E=g.top+e.pageTop+e.pageHeight);I&&E&&(c=b.clientX-I+a.Internal.Coordinates.getViewerScrollLeft(),k=b.clientY-E+a.Internal.Coordinates.getViewerScrollTop(),
p<=e.pageLeft+e.pageWidth?a.dom.rselect.style.width=p>=e.pageLeft?Math.abs(c)+"px":dvJQuery(a.dom.rselect).position().left+dvJQuery(a.dom.rselect).width()-e.pageLeft+"px":w<=a.Internal.Coordinates.getViewerScrollLeft()+e.pageLeft+e.pageWidth?a.dom.rselect.style.width=e.pageLeft+e.pageWidth-dvJQuery(a.dom.rselect).position().left+"px":a.dom.rselect.style.width="0px",n<=e.pageTop+e.pageHeight?a.dom.rselect.style.height=n>=e.pageTop?Math.abs(k)+"px":dvJQuery(a.dom.rselect).position().top+dvJQuery(a.dom.rselect).height()-
e.pageTop+"px":B<=a.Internal.Coordinates.getViewerScrollTop()+e.pageTop+e.pageHeight?a.dom.rselect.style.height=e.pageTop+e.pageHeight-dvJQuery(a.dom.rselect).position().top+"px":a.dom.rselect.style.height="0px",a.dom.rselect.style.left=0>c?p>=e.pageLeft?b.clientX-g.left+a.Internal.Coordinates.getViewerScrollLeft()+"px":e.pageLeft+"px":I-g.left+"px",a.dom.rselect.style.top=0>k?n>=e.pageTop?b.clientY-g.top+a.Internal.Coordinates.getViewerScrollTop()+"px":e.pageTop+"px":E-g.top+"px");a.dom.rselect.width=
dvJQuery(a.dom.rselect).width();a.dom.rselect.height=dvJQuery(a.dom.rselect).height();0<dvJQuery(a.dom.rselect).width()&&0<dvJQuery(a.dom.rselect).height()&&this.show();return!0}if((3==a.events.mouseMode||4==a.events.mouseMode)&&this.isMoving){e=a.Internal.Pages.getRenderingState(a.GetCurrentPage());g=a.dom.viewerArea.getBoundingClientRect();p=a.dom.rselect.getBoundingClientRect();if(-1!=this.resizingMode&&8!=this.resizingMode){n=b.pageX-g.left+a.Internal.Coordinates.getViewerScrollLeft();g=b.pageY-
g.top+a.Internal.Coordinates.getViewerScrollTop();c=b.clientX-p.left;k=b.clientY-p.top;switch(this.resizingMode){case 0:0<dvJQuery(a.dom.rselect).width()-c&&(n<e.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-e.pageLeft)),a.dom.rselect.style.left=e.pageLeft+"px"):(a.dom.rselect.style.left=n+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-c)));0<dvJQuery(a.dom.rselect).height()-k&&(g<e.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+
(dvJQuery(a.dom.rselect).position().top-e.pageTop)),a.dom.rselect.style.top=e.pageTop+"px"):(a.dom.rselect.style.top=g+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-k)));break;case 1:c=b.clientX-p.right;0<dvJQuery(a.dom.rselect).width()+c&&(n>e.pageLeft+e.pageWidth?dvJQuery(a.dom.rselect).width(e.pageLeft+e.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+c));0<dvJQuery(a.dom.rselect).height()-k&&(g<e.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+
(dvJQuery(a.dom.rselect).position().top-e.pageTop)),a.dom.rselect.style.top=e.pageTop+"px"):(a.dom.rselect.style.top=g+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-k)));break;case 2:c=b.clientX-p.right;0<dvJQuery(a.dom.rselect).width()+c&&(n>e.pageLeft+e.pageWidth?dvJQuery(a.dom.rselect).width(e.pageLeft+e.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+c));k=b.clientY-p.bottom;0<dvJQuery(a.dom.rselect).height()+
k&&(g>e.pageTop+e.pageHeight?dvJQuery(a.dom.rselect).height(e.pageTop+e.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+k));break;case 3:0<dvJQuery(a.dom.rselect).width()-c&&(n<e.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-e.pageLeft)),a.dom.rselect.style.left=e.pageLeft+"px"):(a.dom.rselect.style.left=n+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-
c)));k=b.clientY-p.bottom;0<dvJQuery(a.dom.rselect).height()+k&&(g>e.pageTop+e.pageHeight?dvJQuery(a.dom.rselect).height(e.pageTop+e.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+k));break;case 4:0<dvJQuery(a.dom.rselect).width()-c&&(n<e.pageLeft?(dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+(dvJQuery(a.dom.rselect).position().left-e.pageLeft)),a.dom.rselect.style.left=e.pageLeft+"px"):(a.dom.rselect.style.left=
n+"px",dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()-c)));break;case 5:0<dvJQuery(a.dom.rselect).height()-k&&(g<e.pageTop?(dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+(dvJQuery(a.dom.rselect).position().top-e.pageTop)),a.dom.rselect.style.top=e.pageTop+"px"):(a.dom.rselect.style.top=g+"px",dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()-k)));break;case 6:c=b.clientX-p.right;0<dvJQuery(a.dom.rselect).width()+c&&(n>e.pageLeft+e.pageWidth?dvJQuery(a.dom.rselect).width(e.pageLeft+
e.pageWidth-dvJQuery(a.dom.rselect).position().left):dvJQuery(a.dom.rselect).width(dvJQuery(a.dom.rselect).width()+c));break;case 7:k=b.clientY-p.bottom,0<dvJQuery(a.dom.rselect).height()+k&&(g>e.pageTop+e.pageHeight?dvJQuery(a.dom.rselect).height(e.pageTop+e.pageHeight-dvJQuery(a.dom.rselect).position().top):dvJQuery(a.dom.rselect).height(dvJQuery(a.dom.rselect).height()+k))}a.dom.rselect.width=dvJQuery(a.dom.rselect).width();a.dom.rselect.height=dvJQuery(a.dom.rselect).height()}else c=b.clientX-
a.events.mouseDownClientX,k=b.clientY-a.events.mouseDownClientY,dvJQuery(a.dom.rselect).position().left+c>=e.pageLeft&&dvJQuery(a.dom.rselect).position().left+c+dvJQuery(a.dom.rselect).width()<=e.pageLeft+e.pageWidth?(a.dom.rselect.style.left=dvJQuery(a.dom.rselect).position().left+c+"px",a.events.mouseDownClientX+=c):dvJQuery(a.dom.rselect).position().left+c<=e.pageLeft?a.dom.rselect.style.left=e.pageLeft+"px":dvJQuery(a.dom.rselect).position().left+c+dvJQuery(a.dom.rselect).width()>=e.pageLeft+
e.pageWidth&&(a.dom.rselect.style.left=e.pageLeft+e.pageWidth-dvJQuery(a.dom.rselect).width()+"px"),dvJQuery(a.dom.rselect).position().top+k>=e.pageTop&&dvJQuery(a.dom.rselect).position().top+k+dvJQuery(a.dom.rselect).height()<=e.pageTop+e.pageHeight?(a.dom.rselect.style.top=dvJQuery(a.dom.rselect).position().top+k+"px",a.events.mouseDownClientY+=k):dvJQuery(a.dom.rselect).position().top+k<=e.pageTop?a.dom.rselect.style.top=e.pageTop+"px":dvJQuery(a.dom.rselect).position().top+k+dvJQuery(a.dom.rselect).height()>=
e.pageTop+e.pageHeight&&(a.dom.rselect.style.top=e.pageTop+e.pageHeight-dvJQuery(a.dom.rselect).height()+"px");return!0}return!1},mouseEnter:function(b,c){return this.isOver=!0},mouseLeave:function(b,c){this.isOver=!1;return!0}}},Pages:{getPage:function(b){if(null!=a.cache.Pages)for(var c=0;c<a.cache.Pages.length;c++)if(a.cache.Pages[c].pageNo==b)return a.cache.Pages[c];return null},selectByDestination:function(b){return a.ajax.PostBaseRequest("rundestination",{data:{destinationName:b},success:function(c){a.ajax.HandleServerContextResponse("string"===
typeof c?JSON.parse(c):c,!0,!0);a.dom.updateSelectedPageFader(0,a.GetCurrentPage())}},!1)},getVisiblePageNumbers:function(){var b=a.Internal.Coordinates.getViewerScrollTop(),c=b+dvJQuery(a.dom.viewerArea).innerHeight();return this.getVisiblePageNumbersEx(b,c)},getVisiblePageNumbersEx:function(b,c){var e=[];if(0==a.dom.viewerArea.offsetWidth||0==a.dom.viewerArea.offsetHeight||null==a.cache.canvas)return e;if(b>c){var g=b;b=c;c=g}g=!1;for(var k=0;k<a.cache.canvas.length;k++){var p=a.cache.canvas[k],
n=p.pageNo,w=p.canvas.length,B=parseFloat(dvJQuery(p.canvas[0].tile).css("top"));p=p.canvas[w-1];p=parseFloat(dvJQuery(p.tile).css("top"))+parseFloat(dvJQuery(p.tile).css("height"));if(a.Internal.Coordinates.hasVerticalIntersection(B,p,b,c))e.push(n),g=!0;else if(g)break}0<e.length&&e.sort(function(I,E){return I-E});return e},getText:function(b){return(b=a.Internal.Pages.getPage(b))?b.text:null},getPageWidth:function(b){return(b=a.Internal.Pages.getPage(b))?b.width:0},getPageHeight:function(b){return(b=
a.Internal.Pages.getPage(b))?b.height:0},isPageVisible:function(b){var c=a.cache.getPageCanvas(b);if(c){b=a.Internal.Coordinates.getViewerScrollTop();var e=b+dvJQuery(a.dom.viewerArea).innerHeight(),g=c.canvas.length,k=parseFloat(dvJQuery(c.canvas[0].tile).css("top"));c=parseFloat(dvJQuery(c.canvas[g-1].tile).css("top"))+parseFloat(dvJQuery(c.canvas[g-1].tile).css("height"));if(a.Internal.Coordinates.hasVerticalIntersection(k,c,b,e))return!0}return!1},isPageRendered:function(b){return(b=a.Internal.Pages.getPage(b))?
b.drawn||b.drawing:!1},getRenderRotation:function(b){return(b=a.Internal.Pages.getPage(b))?b.renderRotation:0},getPageRotation:function(b){return(b=a.Internal.Pages.getPage(b))?b.pageRotation:0},getRenderingState:function(b){for(var c,e,g,k,p,n,w,B=0;B<a.cache.canvas.length;B++)if(a.cache.canvas[B].pageNo==b){c=a.cache.canvas[B].left;e=a.cache.canvas[B].top;g=a.cache.canvas[B].right-c;k=a.cache.canvas[B].bottom-e;break}if(b=a.Internal.Pages.getPage(b))p=b.contentMatrix,n=b.matrix,w=b.zoom;return{pageLeft:c,
pageTop:e,pageWidth:g,pageHeight:k,zoom:w,matrix:n,contentMatrix:p}},pageView:function(b,c,e){function g(){if(null!=a.ajax.pendingPageViewRequests)for(var I=0;I<k.length;I++)for(var E=k[I],V=0;V<a.ajax.pendingPageViewRequests.length;V++)if(a.ajax.pendingPageViewRequests[V]==E){a.ajax.pendingPageViewRequests.splice(V,1);break}}if(!a.serverCtx.documentLoaded||!a.cache.canvas)return 0;for(var k=[],p=0;p<b.length;p++){var n=b[p],w=!1,B=a.Internal.Pages.getPage(n);B&&(B.drawn||B.drawing||B.renderStatus!=
DocuViewareAPI.Status.OK&&!e)&&(w=!0);if(!w){w=!1;if(null!=a.ajax.pendingPageViewRequests)for(B=0;B<a.ajax.pendingPageViewRequests.length;B++)if(a.ajax.pendingPageViewRequests[B]==n){w=!0;break}w||(null==a.ajax.pendingPageViewRequests&&(a.ajax.pendingPageViewRequests=[]),a.ajax.pendingPageViewRequests.push(n),k.push(n))}}0<k.length&&(c&&a.DisplayPendingActionNotification(),a.ajax.pageViewRequestNo+=1,a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?
"/1":""),async:!0,contentType:"application/json",data:JSON.stringify({requestName:"pageview",requestData:{sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,zoom:a.serverCtx.zoom,forceReload:e,entries:k,requestNo:a.ajax.pageViewRequestNo}}),success:function(I){c&&a.HidePendingActionNotification();g();if((I="string"===typeof I?JSON.parse(I):I)&&I.status==DocuViewareAPI.Status.OK&&I.contextID==a.ajax.contextID){var E=!0,V=!1,ba=!1;I.checkZoom&&Math.round(1E3*a.cache.pageCanvasZoom)!=Math.round(1E3*
I.zoom)&&(a.debug&&console.log("DocuVieware pageview: result ignored because of zoom inconsistency. ctxzoom: "+a.serverCtx.zoom+". response zoom: "+I.zoom+"."),ba=!0,E=!1);E&&a.serverCtx.viewRotation!=I.viewRotation&&(a.debug&&console.log("DocuVieware pageview: page state rejected because of rotation inconsistency. Ctx view rotation: "+a.serverCtx.viewRotation+". Content view rotation: "+I.viewRotation),V=!0);a.serverCtx.page=I.images;a.UpdateUI(!1,!0,E,!1,ba,V)}},error:function(I){a.ajax.HandleError(I);
a.debug&&console.log("DocuVieware pageview error");g()}}));return k.length}},Coordinates:{getViewerScrollLeft:function(){return a.dom.viewerArea.scrollLeft},getViewerScrollLeftMax:function(){return a.dom.viewerArea.scrollWidth-a.dom.viewerArea.clientWidth},getViewerScrollTop:function(){return a.dom.viewerArea.scrollTop},getViewerScrollTopMax:function(){return a.dom.viewerArea.scrollHeight-a.dom.viewerArea.clientHeight},setViewerScrollLeft:function(b,c){b=Math.round(b);if(null!=c&&Math.abs(a.dom.viewerArea.scrollLeft-
b)<c)return DocuViewareAPI.Status.OK;a.dom.viewerArea.scrollLeft=b;return DocuViewareAPI.Status.OK},setViewerScrollTop:function(b,c){b=Math.round(b);if(null!=c&&Math.abs(a.dom.viewerArea.scrollTop-b)<c)return DocuViewareAPI.Status.OK;a.dom.viewerArea.scrollTop=b;return DocuViewareAPI.Status.OK},clienttodocument:function(b,c,e,g,k){b=a.Internal.Pages.getRenderingState(b);var p=a.dom.viewerArea.getBoundingClientRect();k="undefined"===typeof k?!0:k;c={x:c-p.left-b.pageLeft+a.Internal.Coordinates.getViewerScrollLeft(),
y:e-p.top-b.pageTop+a.Internal.Coordinates.getViewerScrollTop()};g=1==g?1/96:1;b=b.contentMatrix;k&&(b=a.Internal.Matrix.invert(b));g=a.Internal.Matrix.scale(b,g,g,!1);a.Internal.Matrix.transformPoint(g,c);return c},documentToViewer:function(b,c,e){b=a.Internal.Pages.getRenderingState(b);c={x:c,y:e};a.Internal.Matrix.transformPoint(b.contentMatrix,c);c.x+=b.pageLeft;c.y+=b.pageTop;return c},documentToViewerBox:function(b,c){b=a.Internal.Pages.getRenderingState(b);a.Internal.Matrix.transformBBox(b.contentMatrix,
0,c);c.left+=b.pageLeft;c.top+=b.pageTop},hasVerticalIntersection:function(b,c,e,g){return Math.min(c,g)>=Math.max(b,e)},hasIntersection:function(b,c,e,g,k,p,n,w){return Math.min(e,n)>=Math.max(b,k)&&Math.min(g,w)>=Math.max(c,p)},newRectangle:function(b,c,e,g){return{Left:b,Top:c,Right:b+e,Bottom:c+g,Width:e,Height:g}},rectUnion:function(b,c,e,g,k,p,n,w){b=Math.min(b,k);c=Math.min(c,p);return this.newRectangle(b,c,Math.max(e,n)-b,Math.max(g,w)-c)},isPointInsideRect:function(b,c,e){return b.x>=c.Left-
e&&b.x<=c.Right+e&&b.y>=c.Top-e&&b.y<=c.Bottom+e}},Rotations:{getRotateFlipTypeAngle:function(b){switch(b){case 1:return 90;case 2:return 180;case 3:return 270}return 0}},Text:{_selectedText:null,clearSelection:function(){if(a.cache.FormFields){var b=a.cache.FormFields.filter(c=>c._hasFocus);b&&b.forEach(c=>{c.control.selectionEnd=0;c.control.selectionStart=0})}a.callbacks.onTextUnselected&&null!==this._selectedText?(this._selectedText=null,a.callbacks.onTextUnselected()):this._selectedText=null},
removeSelectedText:function(b,c){var e=this.getSelectedTextAreas(1);if(!e.length)return DocuViewareAPI.Status.GenericError;a.ajax.PostBaseRequest("removetext",{data:{areas:e},success:function(g){var k="string"===typeof g?JSON.parse(g):g;k&&k.status===DocuViewareAPI.Status.OK?(a.ajax.HandleServerContextResponse("string"===typeof g?JSON.parse(g):g,!1),a.dom.SelectedTextRegions.clear(),b&&b()):(a.ajax.HandleError(g),c&&c())},error:function(g){a.ajax.HandleError(g);c&&c()}},!1);return DocuViewareAPI.Status.OK},
anyWordHitTest:function(b,c,e){var g=a.Internal.Pages.getVisiblePageNumbers();if(null!=g)for(var k=0;k<g.length;k++)if(a.Internal.Pages.isPageRendered(g[k])){var p=a.Internal.Pages.getText(g[k]);if(null!=p){var n=a.Internal.Coordinates.clienttodocument(g[k],b,c,0);n.x*=p.scale;n.y*=p.scale;if(p.textBlock.Matrix){var w=a.Internal.Matrix.invert(p.textBlock.Matrix);a.Internal.Matrix.transformPoint(w,n)}w=n.x;n=n.y;for(var B=p.textBlock.words,I=B.length,E=0;E<I;E++)if(-1!=B[E].PId&&B[E].BBox.Left-e<=
w&&B[E].BBox.Right+e>=w&&B[E].BBox.Top-e<=n&&B[E].BBox.Bottom+e>=n)return{page:g[k],textRotate:p.textBlock.Rotation}}}return null},getSelectedText:function(){if(a.cache&&Array.isArray(a.cache.FormFields)){var b=a.cache.FormFields.find(c=>c.isEditing());if(null!=b)return b.control.value.substring(b.control.selectionStart,b.control.selectionEnd)}return null!=this._selectedText?this._selectedText:null},getSelectedTextCoordinatesOnDocument:function(b){var c=[];if(0<a.dom.SelectedTextRegions._cache.length)for(var e=
0;e<a.dom.SelectedTextRegions._cache.length;e++)if(!Number.isInteger(b)||b===a.dom.SelectedTextRegions._cache[e].category){var g=a.Internal.Pages.getRenderingState(a.dom.SelectedTextRegions._cache[e].pageNo),k={left:a.dom.SelectedTextRegions._cache[e].offsetLeft-g.pageLeft,top:a.dom.SelectedTextRegions._cache[e].offsetTop-g.pageTop,width:a.dom.SelectedTextRegions._cache[e].offsetWidth,height:a.dom.SelectedTextRegions._cache[e].offsetHeight};g=a.Internal.Matrix.scale(a.Internal.Matrix.invert(g.contentMatrix),
1/96,1/96,!1);a.Internal.Matrix.transformBBox(g,0,k);k={pageNo:a.dom.SelectedTextRegions._cache[e].pageNo,left:a.Internal.Utilities.roundEx(k.left,7),top:a.Internal.Utilities.roundEx(k.top,7),height:a.Internal.Utilities.roundEx(k.height,7),width:a.Internal.Utilities.roundEx(k.width,7)};c.push(k)}return c},getSelectedTextAreas:function(b){b=a.Internal.Text.getSelectedTextCoordinatesOnDocument(b);var c=[];if(0<b.length)for(var e=0;e<b.length;e++)c.push({pageNo:b[e].pageNo,coordinates:{left:b[e].left,
top:b[e].top,height:b[e].height,width:b[e].width}});return c},captureSelectedText:function(b,c,e,g,k,p){function n(Ja,Fb,u){var xb=Ja._selectedText.length;0<xb&&(u?Ja._selectedText+="\r\n":" "!=Ja._selectedText[xb-1]&&"\t"!=Ja._selectedText[xb-1]&&" "!=Fb[0]&&"\t"!=Fb[0]&&(Ja._selectedText+=" "))}function w(Ja,Fb){for(var u=[],xb=Ja.Paragraphs.length,Eb=0;Eb<xb;Eb++){var Ob=Ja.Paragraphs[Eb];a.Internal.Coordinates.hasIntersection(Fb.Left,Fb.Top,Fb.Right,Fb.Bottom,Ob.BBox.Left,Ob.BBox.Top,Ob.BBox.Right,
Ob.BBox.Bottom)&&u.push(Ob.Id)}return u}this._selectedText="";var B=[],I=a.dom.viewerArea.getBoundingClientRect(),E=a.Internal.Coordinates.getViewerScrollTop()-I.top;E=(I=-1==b&&-1==e&&-1==c&&-1==g)?[a.GetCurrentPage()]:a.Internal.Pages.getVisiblePageNumbersEx(c+E,g+E);if(null!=E)for(var V=!0,ba=1==E.length,da=-1,ea=-1,la=0;la<E.length;la++){var Ha=0==la,wa=la==E.length-1,va=E[la];if(a.Internal.Pages.isPageRendered(va)){var ua=[],Da=[],Ua=a.Internal.Pages.getText(va);if(null!=Ua){var Ka=p;0==Ua.textBlock.Rotation||
I||(Ka=!0);var pa=a.Internal.Coordinates.clienttodocument(va,b,c,0);pa.x*=Ua.scale;pa.y*=Ua.scale;var Fa=a.Internal.Coordinates.clienttodocument(va,e,g,0);Fa.x*=Ua.scale;Fa.y*=Ua.scale;if(Ua.textBlock.Matrix){var gb=a.Internal.Matrix.invert(Ua.textBlock.Matrix);a.Internal.Matrix.transformPoint(gb,pa);a.Internal.Matrix.transformPoint(gb,Fa)}gb=pa.x;var sb=pa.y;pa=Fa.x;Fa=Fa.y;if(sb>Fa){var mb=gb;gb=pa;pa=mb;mb=sb;sb=Fa;Fa=mb}Fa=a.Internal.Coordinates.newRectangle(Math.min(gb,pa),Math.min(sb,Fa),Math.abs(gb-
pa),Math.abs(sb-Fa));Fa.Right=Fa.Left+Fa.Width;Fa.Bottom=Fa.Top+Fa.Height;sb=w(Ua.textBlock,Fa);mb=Ua.textBlock.words;for(var Va=mb.length,Ya=-1,jb=0,Ma=!1,kb=null,Hb=0;Hb<Va;Hb++){var aa=mb[Hb];if(-1!=aa.PId&&(I||-1!=sb.indexOf(aa.PId)))if(Ka){if(a.Internal.Coordinates.hasIntersection(Fa.Left,Fa.Top,Fa.Right,Fa.Bottom,aa.BBox.Left,aa.BBox.Top,aa.BBox.Right,aa.BBox.Bottom)){null!=kb?(Ma=kb.LineNo==aa.LineNo,xa=!Ma):xa=Ma=!1;if(Ma&&Da[Da.length-1]===aa.PId){var za=ua[ua.length-1];ua[ua.length-1]=a.Internal.Coordinates.rectUnion(za.Left,
za.Top,za.Right,za.Bottom,aa.BBox.Left,aa.BBox.Top,aa.BBox.Right,aa.BBox.Bottom)}else ua.push(a.Internal.Coordinates.newRectangle(aa.BBox.Left,aa.BBox.Top,aa.BBox.Width,aa.BBox.Height)),Da.push(aa.PId);n(this,aa.Content,xa);this._selectedText+=aa.Content;Ma=!0;kb=aa}}else{var xa=jb!=aa.LineNo;xa&&(jb=aa.LineNo,Ma=!1,Ya=-1);if(I||!Ha||-1!=da&&da!=aa.LineNo||-1!=Ya){if(I)Ya=aa.LineNo;else if(-1==Ya||-1!=Ya&&aa.LineNo!=Ya&&-1==ea)Ya=aa.BBox.Bottom<Fa.Bottom?aa.LineNo:-1;if(-1!=Ya)xa||Da[Da.length-1]!==
aa.PId?(ua.push(a.Internal.Coordinates.newRectangle(aa.BBox.Left,aa.BBox.Top,aa.BBox.Width,aa.BBox.Height)),Da.push(aa.PId)):(za=ua[ua.length-1],ua[ua.length-1]=a.Internal.Coordinates.rectUnion(za.Left,za.Top,za.Right,za.Bottom,aa.BBox.Left,aa.BBox.Top,aa.BBox.Right,aa.BBox.Bottom)),n(this,aa.Content,xa),this._selectedText+=aa.Content;else if(-1==ea||ea==aa.LineNo){if(aa.BBox.Top<Fa.Bottom)if(aa.BBox.Right<pa)Ma&&Da[Da.length-1]===aa.PId?(za=ua[ua.length-1],ua[ua.length-1]=a.Internal.Coordinates.rectUnion(za.Left,
za.Top,za.Right,za.Bottom,aa.BBox.Left,aa.BBox.Top,aa.BBox.Right,aa.BBox.Bottom)):(ua.push(a.Internal.Coordinates.newRectangle(aa.BBox.Left,aa.BBox.Top,aa.BBox.Width,aa.BBox.Height)),Da.push(aa.PId)),n(this,aa.Content,xa),this._selectedText+=aa.Content,Ma=!0;else{if(a.Internal.Coordinates.hasIntersection(Fa.Left,Fa.Top,Fa.Right,Fa.Bottom,aa.BBox.Left,aa.BBox.Top,aa.BBox.Right,aa.BBox.Bottom))for(n(this,aa.Content,xa),xa=0;xa<=aa.GlyphBoxes.length-1;xa++)aa.GlyphBoxes[xa].x+aa.GlyphBoxes[xa].width/
2<pa&&(Ma&&Da[Da.length-1]===aa.PId?(Ma=ua[ua.length-1],ua[ua.length-1]=a.Internal.Coordinates.rectUnion(Ma.Left,Ma.Top,Ma.Right,Ma.Bottom,aa.GlyphBoxes[xa].x,aa.GlyphBoxes[xa].y,aa.GlyphBoxes[xa].x+aa.GlyphBoxes[xa].width,aa.GlyphBoxes[xa].y+aa.GlyphBoxes[xa].height)):(ua.push(a.Internal.Coordinates.newRectangle(aa.GlyphBoxes[xa].x,aa.GlyphBoxes[xa].y,aa.GlyphBoxes[xa].width,aa.GlyphBoxes[xa].height)),Da.push(aa.PId)),Ma=!0,this._selectedText+=aa.GlyphBoxes[xa].glyph);break}else break;-1==ea&&wa&&
(ea=aa.LineNo)}else break}else if(a.Internal.Coordinates.hasIntersection(Fa.Left,Fa.Top,Fa.Right,Fa.Bottom,aa.BBox.Left,aa.BBox.Top,aa.BBox.Right,aa.BBox.Bottom)){if(V&&1==E.length){for(V=Hb;V<Va;){if(mb[V].LineNo!=jb){ba=mb[V].BBox.Top>Fa.Bottom;break}V+=1}V=!1}n(this,aa.Content,xa);for(xa=0;xa<=aa.GlyphBoxes.length-1;xa++)k?za=!0:ba?Ma?(za=aa.GlyphBoxes[xa].x+aa.GlyphBoxes[xa].width/2,za=a.Internal.Coordinates.hasIntersection(Fa.Left,Fa.Top,Fa.Right,Fa.Bottom,aa.GlyphBoxes[xa].x,aa.GlyphBoxes[xa].y,
aa.GlyphBoxes[xa].x+aa.GlyphBoxes[xa].width,aa.GlyphBoxes[xa].y+aa.GlyphBoxes[xa].height)&&za<Fa.Right):za=a.Internal.Coordinates.hasIntersection(Fa.Left,Fa.Top,Fa.Right,Fa.Bottom,aa.GlyphBoxes[xa].x,aa.GlyphBoxes[xa].y,aa.GlyphBoxes[xa].x+aa.GlyphBoxes[xa].width,aa.GlyphBoxes[xa].y+aa.GlyphBoxes[xa].height):(za=-1!=Ya?!0:(Ma?aa.GlyphBoxes[xa].x+aa.GlyphBoxes[xa].width/2:aa.GlyphBoxes[xa].x+aa.GlyphBoxes[xa].width)>gb)&&-1==da&&(da=aa.LineNo,Ya=aa.BBox.Bottom<Fa.Bottom?aa.LineNo:-1),za&&(Ma&&Da[Da.length-
1]===aa.PId?(Ma=ua[ua.length-1],ua[ua.length-1]=a.Internal.Coordinates.rectUnion(Ma.Left,Ma.Top,Ma.Right,Ma.Bottom,aa.GlyphBoxes[xa].x,aa.GlyphBoxes[xa].y,aa.GlyphBoxes[xa].x+aa.GlyphBoxes[xa].width,aa.GlyphBoxes[xa].y+aa.GlyphBoxes[xa].height)):(ua.push(a.Internal.Coordinates.newRectangle(aa.GlyphBoxes[xa].x,aa.GlyphBoxes[xa].y,aa.GlyphBoxes[xa].width,aa.GlyphBoxes[xa].height)),Da.push(aa.PId)),this._selectedText+=aa.GlyphBoxes[xa].glyph,Ma=!0)}}}if(null!=Ua.textBlock.Matrix)for(Ha=0;Ha<ua.length;Ha++)a.Internal.Matrix.transformRect(Ua.textBlock.Matrix,
ua[Ha]);B.push({regions:ua,regionPids:Da,pageNo:va,scale:Ua.scale})}}}return B},captureAndHighlightSelectedText:function(b,c,e,g,k,p){if((b=a.Internal.Text.captureSelectedText(b,c,e,g,k,p))&&0<b.length){for(c=0;c<b.length;c++)for(e=0;e<b[c].regions.length;e++)a.dom.SelectedTextRegions.addNew(b[c].pageNo,{left:b[c].regions[e].Left/b[c].scale,top:b[c].regions[e].Top/b[c].scale,width:b[c].regions[e].Width/b[c].scale,height:b[c].regions[e].Height/b[c].scale},"rgba(0,0,201,0.3)",null,1);a.callbacks.onTextSelected&&
(b=a.Internal.Text.getSelectedTextAreas(),a.callbacks.onTextSelected(b))}}},Matrix:{transformPoint:function(b,c){var e=b.b*c.x+b.d*c.y+b.f;c.x=b.a*c.x+b.c*c.y+b.e;c.y=e},equal:function(b,c){return b.a===c.a&&b.b===c.b&&b.c===c.c&&b.d===c.d&&b.e===c.e&&b.f===c.f},combine:function(b,c){return{a:b.a*c.a+b.b*c.c,b:b.a*c.b+b.b*c.d,c:b.c*c.a+b.d*c.c,d:b.c*c.b+b.d*c.d,e:b.e*c.a+b.f*c.c+c.e,f:b.e*c.b+b.f*c.d+c.f}},invert:function(b){var c=1/(b.a*b.d-b.b*b.c);c={a:b.d*c,b:-b.b*c,c:-b.c*c,d:b.a*c};c.e=-b.e*
c.a-b.f*c.c;c.f=-b.e*c.b-b.f*c.d;return c},translate:function(b,c,e){return this.combine(b,{a:1,b:0,c:0,d:1,e:c,f:e})},isRotatedOrFlipped:function(b){return 0!=b.b||0!=b.c||0>b.a||0>b.d},scale:function(b,c,e,g){return g?this.combine({a:c,b:0,c:0,d:e,e:0,f:0},b):this.combine(b,{a:c,b:0,c:0,d:e,e:0,f:0})},rotateAt:function(b,c,e,g,k){c=Math.PI*c/180;c={a:Math.cos(c),b:Math.sin(c),c:-Math.sin(c),d:Math.cos(c),e,f:g};if(k)return e=this.combine({a:1,b:0,c:0,d:1,e:-e,f:-g},c),this.combine(e,b);b=this.combine(b,
{a:1,b:0,c:0,d:1,e:-e,f:-g});return this.combine(b,c)},transformBBox:function(b,c,e,g){var k=0==c?b:null==g?this.rotateAt(b,c,e.left+e.width/2,e.top+e.height/2,!0):this.rotateAt(b,c,g.x,g.y,!0);b={x:e.left,y:e.top};c={x:e.left+e.width,y:e.top};g={x:e.left+e.width,y:e.top+e.height};var p={x:e.left,y:e.top+e.height};this.transformPoint(k,b);this.transformPoint(k,c);this.transformPoint(k,g);this.transformPoint(k,p);k=Math.min(b.x,c.x,g.x,p.x);var n=Math.max(b.x,c.x,g.x,p.x),w=Math.min(b.y,c.y,g.y,p.y);
b=Math.max(b.y,c.y,g.y,p.y);e.left=k;e.top=w;e.width=n-k;e.height=b-w},transformRect:function(b,c){var e={x:c.Left,y:c.Top},g={x:c.Left+c.Width,y:c.Top},k={x:c.Left+c.Width,y:c.Top+c.Height},p={x:c.Left,y:c.Top+c.Height};this.transformPoint(b,e);this.transformPoint(b,g);this.transformPoint(b,k);this.transformPoint(b,p);b=Math.min(e.x,g.x,k.x,p.x);var n=Math.max(e.x,g.x,k.x,p.x),w=Math.min(e.y,g.y,k.y,p.y);e=Math.max(e.y,g.y,k.y,p.y);c.Left=b;c.Top=w;c.Width=n-b;c.Height=e-w}},Search:{_currentOccurence:null,
_occurences:null,_firstResult:null,clearResults:function(){this._currentOccurence=this._occurences=this._firstResult=null;if(a.dom.searchResults&&a.dom.searchResults.hasChildNodes())for(var b=a.dom.searchResults.children.length-1;0<=b;b--)a.dom.searchResults.removeChild(a.dom.searchResults.children[b]);a.dom.SelectedTextRegions.clear(2)},addResults:function(b,c){this.clearResults();this._occurences=c;a.dom.SelectedTextRegions.clear(2);this.occurences=c;var e=null!=c?c.length:0;if(0<e)for(var g=1,
k,p=0,n=0;n<e;n++){var w=document.createElement("div");w.id=a.uniqueID+"searchResultItem"+n;w.setAttribute("data-idx",n);0==n?this._firstResult=w:c[n].page!=k&&(g=1);k=c[n].page;w.pageOccurence=g++;w.className="searchResultItem";var B=c[n].context.content,I=c[n].context.resultStart,E=c[n].context.resultLen;w.innerHTML=B.substr(0,I)+'<strong style="color:'+a.dom.UIconfig.activeSelectedColor+';">'+B.substr(I,E)+"</strong>"+B.substr(I+E);w.pageNo=c[n].page;B=c[n].resultBoxes[c[n].resultBoxes.length-
1];w.wordLeft=B.Left;w.wordTop=B.Top;w.wordWidth=B.Width;w.wordHeight=B.Height;w.searchedValue=b;a.dom.searchArea&&(w.onmouseenter=this.resultOnMouseEnterHandler,w.onmouseleave=this.resultOnMouseLeaveHandler,w.onclick=this.resultOnClickHandler);if(a.dom.searchArea&&p!=k){B=c.slice(n+1);p=1;if(0!==B.length)for(I=0;B[I]&&B[I].page===k;I++)p++;B=document.createElement("div");B.className="searchResultItemPage";B.style.backgroundColor=a.dom.UIconfig.panelDarkerBackColor;"dv-pspdfkitlight"===a.dom.getTheme()&&
(B.style.backgroundColor=a.dom.UIconfig.viewerAreaBackColor);I=document.createElement("span");I.className="matches";I.innerText=p.toString()+" "+(1===p?a.Localize("label_match"):a.Localize("label_matches"));p=document.createElement("span");p.className="pageNumber";p.innerText=a.Localize("label_page")+" "+k;E=document.createElement("div");E.className="separator";B.appendChild(I);B.appendChild(p);B.appendChild(E);p=k;a.dom.searchResults.appendChild(B)}a.dom.searchArea&&a.dom.searchResults.appendChild(w)}},
highlightResults:function(b){a.dom.SelectedTextRegions.clear(2,b);if(null!=this._occurences){var c=this._occurences.length;if(0<c)for(var e=1,g=0;g<c;g++)if(this._occurences[g].page==b){var k=this._occurences[g].resultBoxes.map(function(p){return{left:96*p.Left,top:96*p.Top,width:96*p.Width,height:96*p.Height}});null!=this._currentOccurence&&this._currentOccurence.pageNo==b&&this._currentOccurence.pageOccurence==e?a.dom.SelectedTextRegions.addNews(this._occurences[g].page,k,a.dom.UIconfig.searchResultBackColor,
a.dom.UIconfig.searchResultBorderColor,2):a.dom.SelectedTextRegions.addNews(this._occurences[g].page,k,a.dom.UIconfig.searchResultBackColor,null,2);e++}}},navigateToFirstResult:function(){this._firstResult&&(this.navigateToResult(this._firstResult),a.dom.searchResults.parentElement.scrollTop=0)},resultOnClickHandler:function(b){a.Internal.Search.navigateToResult(b.currentTarget)},resultOnMouseEnterHandler:function(b){b.target.style.borderColor=a.dom.UIconfig.activeSelectedColor;"dv-pspdfkitlight"===
a.dom.getTheme()&&(b.target.style.borderColor="transparent",b.target.style.borderBottomColor="transparent",b.target.style.backgroundColor="#F6F9FD")},resultOnMouseLeaveHandler:function(b){b.target.style.borderLeftColor="transparent";b.target.style.borderRightColor="transparent";b.target.style.borderTopColor="transparent";b.target.style.borderBottomColor=a.dom.UIconfig.miscBorderColor;"dv-pspdfkitlight"===a.dom.getTheme()&&(b.target.style.borderBottomColor="transparent",b.target.style.backgroundColor=
"transparent")},navigateToResult:function(b){a.Internal.Search._currentOccurence=b;a.dom.searchArea&&(dvJQuery(a.dom.searchResults).find(".searchResultItem").each(function(){dvJQuery(this).removeClass("active");dvJQuery(this).css("border-left-color","transparent");dvJQuery(this).css("border-right-color","transparent");dvJQuery(this).css("border-top-color","transparent");dvJQuery(this).css("border-bottom-color",a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-color","transparent");"dv-pspdfkitlight"===
a.dom.getTheme()&&dvJQuery(this).css("border-bottom-color","transparent")}),b.style.borderColor="transparent",b.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor,dvJQuery(b).addClass("active"),a.Internal.Search.scrollContainerToItem(b),"dv-pspdfkitlight"===a.dom.getTheme()&&(b.style.borderColor="transparent",b.style.backgroundColor="#F6F9FD"));a.SelectPageEx(b.pageNo,!0,!0,!0,!1,!0,function(){a.EnsurePageRegionVisibility(b.pageNo,b.wordLeft,b.wordTop,b.wordWidth,b.wordHeight)})},
scrollContainerToItem:function(b){var c=a.dom.searchResultsContainer.getBoundingClientRect(),e=a.dom.searchResultsContainer.clientHeight;b=b.getBoundingClientRect();b.top>=c.top&&b.top<=c.top+e||(a.dom.searchResultsContainer.scrollTop=b.top+a.dom.searchResultsContainer.scrollTop-c.top)}},FormFields:{existFormField:function(b){if(!b.control)return!1;if(a.dom.viewerArea.hasChildNodes())for(var c=a.dom.viewerArea.children.length-1;0<=c;c--)if(a.dom.viewerArea.children[c]===b.control)return!0;return!1},
removePageFormFields:function(b){if(null!=a.cache.FormFields)for(var c=0;c<a.cache.FormFields.length;c++){var e=a.cache.FormFields[c];e.formFieldApp.pageNo==b&&(this.removeFormField(e),a.cache.FormFields.splice(c,1),c--)}},removeAll:function(b){if(null!=a.cache.FormFields){for(b=0;b<a.cache.FormFields.length;b++)this.removeFormField(a.cache.FormFields[b]);a.cache.FormFields=null}},removeFormField:function(b){b.control&&b.control.parentNode==a.dom.viewerArea&&a.dom.viewerArea.removeChild(b.control);
if(b.children)for(var c=0;c<b.children.length;c++)this.removeFormField(b.children[c])},removeFormFieldFromCache:function(b){if(null!=a.cache.FormFields)for(var c=0;c<a.cache.FormFields.length;c++)a.cache.FormFields[c].formFieldApp.id===b&&(a.cache.FormFields.splice(c,1),c--)},newController:function(b){var c={};c.formFieldApp=b;c.updateNo=0;c.pendingUpdate=0;c._hasFocus=!1;c.stopEditing=function(){this.isEditing()&&this.isModified()&&this.updateFormField(null)};c.updateFormField=function(k){if(a.hasPendingAction(!0,
!0))return DocuViewareAPI.Status.DocuViewarePendingAction;var p={};p.properties=this.formFieldApp.properties;p.sessionID=a.ajax.sessionID;p.contextID=a.ajax.contextID;p.pageNo=this.formFieldApp.pageNo;p.id=this.formFieldApp.id;k&&(dvJQuery.extend(!0,p.properties,k),p.rotation=k.rotation);this.updateNo+=1;this.pendingUpdate+=1;p.updateNo=this.updateNo;var n=this;0!==p.properties.parentId&&3===p.properties.type&&(p.id=p.properties.parentId,p.properties.id=p.properties.parentId,p.properties.parentId=
0);a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/formfieldupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify(p),contentType:"application/json",success:function(w){--n.pendingUpdate;if((w="string"===typeof w?JSON.parse(w):w)&&null!=w.formFieldApp){if(n.isEditing()||w.updateNo!=n.updateNo||(n.formFieldApp=w.formFieldApp,n.render(),a.updateThumbnails([n.formFieldApp.pageNo])),a.callbacks.onFormFieldChanged)a.callbacks.onFormFieldChanged({id:w.formFieldApp.id,pageNo:w.formFieldApp.pageNo})}else a.ajax.HandleError(w)},
error:function(w){a.ajax.HandleError(w);--n.pendingUpdate}});return DocuViewareAPI.Status.OK};c.isEditing=function(){return document.activeElement==this.control};c.hasPendingUpdate=function(){return 0<this.pendingUpdate};c.isModified=function(){var k=!1;switch(this.formFieldApp.properties.type){case 2:k=this.formFieldApp.properties.isChecked!=this.control.checked;break;case 4:k=this.formFieldApp.properties.value!=this.control.value;break;case 3:k=!0;break;case 7:k=this.formFieldApp.properties.value!=
this.control.options[this.control.selectedIndex].value;break;case 8:k=this.formFieldApp.properties.value!=this.control.options[this.control.selectedIndex].value}return k};c.blur=function(){this._hasFocus=!1;this.control.readOnly||(this.control.style.backgroundColor="#CCD7FF");this.isModified()&&(this.setCurrentValue(),this.updateFormField(null))};c.focus=function(){this._hasFocus=!0;this.control.style.backgroundColor=this.formFieldApp.properties.backgroundColor;a.dom.SelectedTextRegions.clear(1)};
c.setCurrentValue=function(){switch(this.formFieldApp.properties.type){case 2:this.formFieldApp.properties.isChecked=this.control.checked;break;case 4:this.formFieldApp.properties.value=this.control.value;break;case 3:this.formFieldApp.properties.value=this.control.checked?this.formFieldApp.properties.onStateName:"Off";break;case 7:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value;break;case 8:this.formFieldApp.properties.value=this.control.options[this.control.selectedIndex].value}};
c.render=function(){if(this.children)for(var k=0;k<this.children.length;k++)this.children[k].render();if(this.control){k={left:this.formFieldApp.properties.left,top:this.formFieldApp.properties.top,width:this.formFieldApp.properties.width,height:this.formFieldApp.properties.height};var p=a.Internal.Pages.getRenderingState(this.formFieldApp.pageNo);k.left*=96;k.top*=96;k.width*=96;k.height*=96;var n=a.Internal.Pages.getRenderRotation(this.formFieldApp.pageNo),w=0;switch(n){case 2:w=180;break;case 3:w=
270;break;case 1:w=90}a.Internal.Matrix.transformBBox(p.contentMatrix,-w,k);k.left+=p.pageLeft;k.top+=p.pageTop;this.control.style.display=0==this.formFieldApp.properties.visibility||2==this.formFieldApp.properties.visibility?"block":"none";this.control.style.position="absolute";this.control.style.padding="0px";this.control.style.margin="0px";this.control.style.outline="0";this.control.style.backgroundColor=this.formFieldApp.properties.readOnly?"transparent":"rgba(204,215,255,0.7)";this.control.style.fontSize=
0!=this.formFieldApp.properties.fontSize?this.formFieldApp.properties.fontSize*a.GetCurrentZoom()+"pt":12*a.GetCurrentZoom()+"pt";this.control.style.color=this.formFieldApp.properties.fontColor;this.formFieldApp.properties.fontFamily&&(this.control.style.fontFamily='"'+this.formFieldApp.properties.fontFamily+'"');switch(this.formFieldApp.properties.fontStyle){case 0:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 1:this.control.style.fontStyle=
"normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 2:this.control.style.fontStyle="italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 3:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="none";break;case 4:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 5:this.control.style.fontStyle=
"normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;case 6:this.control.style.fontStyle="italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="underline";break;case 7:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="underline";break;case 8:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";
break;case 9:this.control.style.fontStyle="normal";this.control.style.fontWeight="bold";this.control.style.textDecoration="line-through";break;case 10:this.control.style.fontStyle="italic";this.control.style.fontWeight="normal";this.control.style.textDecoration="line-through";break;case 11:this.control.style.fontStyle="italic";this.control.style.fontWeight="bold";this.control.style.textDecoration="line-through";break;case 12:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";
this.control.style.textDecoration="none";break;case 13:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 14:this.control.style.fontStyle="normal";this.control.style.fontWeight="normal";this.control.style.textDecoration="none";break;case 15:this.control.style.fontStyle="normal",this.control.style.fontWeight="normal",this.control.style.textDecoration="none"}switch(this.formFieldApp.properties.borderStyle){case 0:this.control.style.borderStyle=
"solid";break;case 1:this.control.style.borderStyle="dashed";break;case 2:this.control.style.borderStyle="outset";break;case 3:this.control.style.borderStyle="inset";break;case 4:this.control.style.borderStyle="none";this.control.style.borderBottomStyle="solid";break;default:this.control.style.borderStyle="none"}this.control.style.borderWidth=96*this.formFieldApp.properties.borderWidth*a.GetCurrentZoom()+"px";this.control.style.borderColor=this.formFieldApp.properties.borderColor;if(2==this.formFieldApp.properties.type||
3==this.formFieldApp.properties.type){p="";switch(this.formFieldApp.properties.appearance){case "checkbox":p="10003";break;case "circle":p="11044";break;case "cross":p="9587";break;case "diamond":p="9670";break;case "square":p="9632";break;case "star":p="9733";break;default:2==this.formFieldApp.properties.type?p="10003":3==this.formFieldApp.properties.type&&(p="9679")}this.control.setAttribute("data-appearance",String.fromCharCode(p))}3===this.formFieldApp.properties.type&&"checkbox"===this.formFieldApp.properties.appearance&&
this.control.classList.add("dvFormFieldCheckbox");this.control.alt=this.formFieldApp.properties.title;this.formFieldApp.properties.alternateTitle&&(this.control.title=this.formFieldApp.properties.alternateTitle);switch(this.formFieldApp.properties.textAlignment){case 0:this.control.style.textAlign="left";break;case 1:this.control.style.textAlign="center";break;case 2:this.control.style.textAlign="right"}this.control.readOnly=this.formFieldApp.properties.readOnly;this.control.style.top=k.top+"px";
this.control.style.left=k.left+"px";this.control.style.height=k.height+"px";3===b.properties.type?(this.control.style.marginLeft=k.width/2-k.height/2+"px",this.control.style.width=k.height+"px"):this.control.style.width=k.width+"px";this.formFieldApp.properties.combs&&0<b.properties.maxLength&&!b.properties.isMultiline&&!b.properties.password&&(this.control.style.letterSpacing="calc("+k.width/b.properties.maxLength+"px - 1ch)",this.control.style.fontFamily="monospace, "+this.control.style.fontFamily,
this.control.style.paddingLeft="2px",this.control.style.paddingRight="0px");this.control.style.transform=0!=w?"rotate("+w+"deg)":"none";this.control.style.cursor=4!=this.formFieldApp.properties.type||1!=n&&3!=n&&5!=n&&7!=n?"auto":"vertical-text"}};switch(b.properties.type){case 2:c.control=document.createElement("input");c.control.type="checkbox";c.control.checked=b.properties.isChecked;break;case 4:b.properties.isMultiline?(c.control=document.createElement("textarea"),c.control.value=b.properties.value,
c.control.style.resize="none"):(c.control=document.createElement("input"),c.control.type=b.properties.password?"password":"text",c.control.value=b.properties.value);b.properties.maxLength&&0<b.properties.maxLength&&(c.control.maxLength=b.properties.maxLength);break;case 3:if(b.properties.children){c.children=[];for(var e=0;e<b.properties.children.length;e++){var g=this.newController(b.properties.children[e]);g.control.checked=g.control&&g.formFieldApp.properties.onStateName==b.properties.value?!0:
!1;c.children.push(g)}}else c.control=document.createElement("input"),c.control.type="radio",c.control.value=b.properties.value,c.control.checked=b.properties.value==b.properties.onStateName;break;case 7:c.control=document.createElement("select");b.properties.isMultiSelect&&(c.control.multiple=!0);if(null!=b.properties.items)for(c.control.size=b.properties.items.length,e=0;e<b.properties.items.length;e++)g=document.createElement("option"),g.text=b.properties.items[e].Value,g.value=b.properties.items[e].Key,
b.properties.value==g.value&&(g.selected=!0),c.control.appendChild(g);break;case 8:if(c.control=document.createElement("select"),null!=b.properties.items)for(e=0;e<b.properties.items.length;e++)g=document.createElement("option"),g.text=b.properties.items[e].Value,g.value=b.properties.items[e].Key,b.properties.value==g.value&&(g.selected=!0),c.control.appendChild(g)}c.control&&(c.control.style.display="none",c.control.owner=c,c.control.name=0==b.properties.parentId?a.uniqueID+"_formfield_"+b.properties.id:
a.uniqueID+"_formfield_"+b.properties.parentId,c.control.id=a.uniqueID+"_formfield_"+b.properties.id,c.control.classList.add("dvFormField"),c.control.style.zIndex=a.dom.zindexManager.getFirstFormFieldZindex(),c.control.onblur=function(k){this.owner.blur()},c.control.onfocus=function(k){this.owner.focus()});null==a.cache.FormFields?a.cache.FormFields=[c]:a.cache.FormFields.push(c);c.control&&a.dom.viewerArea.appendChild(c.control);return c}},Twain:{Status:{OK:0,WARNING:1,ERROR:2,BAD_VERSION:3,NOT_RESPONDING:4},
updateStatusBar:function(b,c){c=c?c:"";switch(b){case a.Internal.Twain.Status.OK:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #3c763d";a.dom.twainAcquisitionStatusBarMessage.style.color="#3c763d";break;case a.Internal.Twain.Status.WARNING:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid #cc5500";a.dom.twainAcquisitionStatusBarMessage.style.color="#cc5500";break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:a.dom.twainAcquisitionStatusBarMessage.style.border=
"1px solid #a94442";a.dom.twainAcquisitionStatusBarMessage.style.color="#a94442";break;default:a.dom.twainAcquisitionStatusBarMessage.style.border="1px solid transparent",a.dom.twainAcquisitionStatusBarMessage.style.color="#000000"}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(c=c+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+
a.Localize("_twain_connector_donwload_here")+"</a>");a.dom.twainAcquisitionStatusBarMessage.innerHTML=c},updateTwainAcquisitionDialogMessageBox:function(b,c){c=c?c:"";switch(b){case a.Internal.Twain.Status.OK:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #3c763d");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#3c763d");break;case a.Internal.Twain.Status.WARNING:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+
a.uniqueID).css("border","1px solid #cc5500");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#cc5500");break;case a.Internal.Twain.Status.ERROR:case a.Internal.Twain.Status.BAD_VERSION:case a.Internal.Twain.Status.NOT_RESPONDING:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid #a94442");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#a94442");
break;default:dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("border","1px solid transparent"),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).css("color","#000000")}!b||b!=a.Internal.Twain.Status.BAD_VERSION&&b!=a.Internal.Twain.Status.NOT_RESPONDING||(c=c+"<br>"+a.Localize("_twain_connector_donwload")+'<a href="#" onclick="var e = document.getElementById(\''+a.uniqueID+"'); if (e) { e.control.DownloadTwainServiceSetup_Click(); return false;}\">"+
a.Localize("_twain_connector_donwload_here")+"</a>");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessage"+a.uniqueID).html(c)},acquire:function(b,c,e){if(!b||!c)return DocuViewareAPI.Status.GenericError;var g=b.endsWith("(64-bit)");g&&(b=b.substring(0,b.length-9));b={url:(g?a.twainServiceUri64:a.twainServiceUri32)+"TWAINAcquire2/",timeout:999999999,data:JSON.stringify({source:{sourceName:b,outputFormat:a.twainSourceConfig.acquisitionFormat,sourceConfig:a.twainSourceConfig}}),success:function(k){(k=
k.TwainAcquire2Result)&&k.status===DocuViewareAPI.Status.OK?(0==k.fileSize&&console.log(k.message),c(k)):(e&&e(k),a.ajax.HandleError(k))},error:function(){var k={status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),throwError:!1};e&&e(k);a.ajax.HandleError(k)}};a.ajax.PostAjaxRequestForLocalService(b);return DocuViewareAPI.Status.OK}},DigiSign:{isAddingSignature:!1,signatureAppearance:{image:null,isFreehandDrawn:!1,text:null,pageNo:0,coordinates:{top:0,width:0,
left:0,height:0},textApearance:{fontName:"Arial",fontSize:14,fontStyle:0,fontLineWidth:.1,verticalAlignment:0,horizontalAlignment:1,fontColor:"#000000"}},signatureCertificat:{data:null,displayedName:null,password:null},signatureTimeStamp:{server:null,username:null,password:null},setSignatureAppearanceTextInteractive:function(){dvJQuery(a.dom.signatureTextDialogForm).find("select[name='signature_font_name_select"+a.uniqueID+"']").find("option[value='"+a.Internal.DigiSign.signatureAppearance.textApearance.fontName+
"']").prop("selected",!0);a.DisplayDialogForm(dvJQuery(a.dom.signatureTextDialogForm),a.Localize("label_signature_text"),function(){dvJQuery(document).ready(function(){dvJQuery("input[name='signature_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogSignatureAlignmentPropertiesPreview()});dvJQuery("input[name='signature_line_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogSignatureLineAlignmentPropertiesPreview()});dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height",
dvJQuery(a.dom.signatureDialogFormTextInput).height());dvJQuery(a.dom.signatureDialogFormFontSizeInput).val(a.Internal.DigiSign.signatureAppearance.textApearance.fontSize);dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("value",a.Internal.DigiSign.signatureAppearance.textApearance.fontColor)})},function(){var b=dvJQuery(a.dom.signatureDialogFormFontSizeInput).val();dvJQuery.isNumeric(b)&&0!==parseInt(b)||dvJQuery(a.dom.signatureDialogFormFontSizeInput).val(a.Internal.DigiSign.signatureAppearance.textApearance.fontSize);
dvJQuery(a.dom.signatureTextDialogForm).show()},function(){dvJQuery(a.dom.signatureTextDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.signatureTextDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_annotation_add"),"class":"btn-valid",click:function(){a.Internal.DigiSign.signatureAppearance.text=dvJQuery(a.dom.signatureDialogFormTextInput).val()||dvJQuery(a.dom.signatureDialogFormTextInput).text();a.Internal.DigiSign.signatureAppearance.textApearance.fontName=
dvJQuery(a.dom.signatureDialogFormFontNameSelect).find("option:selected").val();a.Internal.DigiSign.signatureAppearance.textApearance.fontSize=parseInt(dvJQuery(a.dom.signatureDialogFormFontSizeInput).val())||a.Internal.DigiSign.signatureAppearance.textApearance.fontSize;var b=dvJQuery(a.dom.signatureDialogFormFontStyleSelect).find("option:selected").val();a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment=parseInt(dvJQuery(a.dom.signatureDialogFormAlignmentSelect).filter(":checked").val());
isNaN(b)&&(b=0,dvJQuery(a.dom.signatureDialogFormFontStyleCheckboxes).find("* :checked").each(function(){b|=parseInt(this.value)}));a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle=b;a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment=parseInt(dvJQuery("[name='signature_line_alignment_select"+a.uniqueID+"']:checked").val());a.Internal.DigiSign.signatureAppearance.textApearance.fontColor=dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("rgbaString");
a.Internal.DigiSign.setSignatureAppearanceText(a.Internal.DigiSign.signatureAppearance.text,{fontName:a.Internal.DigiSign.signatureAppearance.textApearance.fontName,fontStyle:a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle,fontSize:a.Internal.DigiSign.signatureAppearance.textApearance.fontSize,fontLineWidth:a.Internal.DigiSign.signatureAppearance.textApearance.fontLineWidth,horizontalAlignment:a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment,verticalAlignment:a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment,
fontColor:a.Internal.DigiSign.signatureAppearance.textApearance.fontColor});dvJQuery(a.dom.signatureTextDialogForm).dvDialog("close")}}])},setSignatureAppearanceImgInteractive:function(){dvJQuery(a.dom.digisignAppearanceInputImg).on("change",function(){if(this.files&&this.files[0]){var b=this,c=new FileReader;c.addEventListener("load",function(e){a.Internal.DigiSign.isFreehandDrawn=!1;dvJQuery(b).val("");a.Internal.DigiSign.setSignatureAppearanceImage(e.target.result)});c.readAsDataURL(this.files[0])}});
dvJQuery(a.dom.digisignAppearanceInputImg).trigger("click")},setSignatureAppearanceFreehandInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.signatureFreehandDialogForm),a.Localize("label_signature_pad"),function(){dvJQuery(document).ready(function(){dvJQuery(a.dom.signatureFreehandPad).jSignature()})},function(){dvJQuery(a.dom.signatureFreehandDialogForm).show()},function(){dvJQuery(a.dom.signatureFreehandDialogForm).hide()},[{text:a.Localize("text_reset"),style:"float: left;",click:function(){dvJQuery(a.dom.signatureFreehandPad).jSignature("clear")}},
{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.signatureFreehandDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_annotation_add"),"class":"btn-valid",click:function(){if(0!=dvJQuery(a.dom.signatureFreehandPad).jSignature("getData","native").length){var b=dvJQuery(a.dom.signatureFreehandPad).jSignature("getData","svgbase64");a.Internal.DigiSign.isFreehandDrawn=!0;a.Internal.DigiSign.setSignatureAppearanceImage("data:"+b[0]+","+b[1])}dvJQuery(a.dom.signatureFreehandDialogForm).dvDialog("close")}}])},
setCertificateInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.digisignCertificateDialogForm),a.Localize("label_add_certificate"),this.signatureUiSetCertificateDialog,function(){dvJQuery(a.dom.digisignCertificateDialogForm).show()},function(){dvJQuery(a.dom.digisignCertificateDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_annotation_add"),"class":"btn-valid",
click:function(){var b=dvJQuery(a.dom.digisignCertificateName).val(),c=dvJQuery(a.dom.digisignCertificatePasswordInput).val();a.dom.digisignInputCertificateFile.files&&a.dom.digisignInputCertificateFile.files[0]?(b=new FileReader,b.addEventListener("load",function(e){e=e.target.result;a.dom.digisignCertificateCertificateLabel.style.color=e?a.dom.UIconfig.textColor:"red";a.dom.digisignCertificatePasswordLabel.style.color=c?a.dom.UIconfig.textColor:"red";e&&c&&(a.Internal.DigiSign.setCertificate(e,
null,c),dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close"))}),b.readAsDataURL(a.dom.digisignInputCertificateFile.files[0])):(a.dom.digisignCertificateCertificateLabel.style.color=b?a.dom.UIconfig.textColor:"red",b&&(a.Internal.DigiSign.setCertificate(null,b,null),dvJQuery(a.dom.digisignCertificateDialogForm).dvDialog("close")))}}])},setTimeStampInteractive:function(){a.DisplayDialogForm(dvJQuery(a.dom.digisignTimeStampDialogForm),a.Localize("label_add_time_stamp"),function(){},function(){dvJQuery(a.dom.digisignTimeStampDialogForm).show()},
function(){dvJQuery(a.dom.digisignTimeStampDialogForm).hide()},[{text:a.Localize("_label_button_pad_cancel"),click:function(){dvJQuery(a.dom.digisignTimeStampDialogForm).dvDialog("close")}},{text:a.Localize("_label_button_annotation_add"),"class":"btn-valid",click:function(){var b=dvJQuery(a.dom.digisignTimestampServerInput).val(),c=dvJQuery(a.dom.digisignTimestampLoginInput).val(),e=dvJQuery(a.dom.digisignTimestampPasswordInput).val();a.dom.digisignTimestampServerLabel.style.color=b?a.dom.UIconfig.textColor:
"red";b&&(a.Internal.DigiSign.setTimeStamp(b,c,e),dvJQuery(a.dom.digisignTimeStampDialogForm).dvDialog("close"))}}])},setCertificate:function(b,c,e){this.signatureCertificat.data=b;this.signatureCertificat.displayedName=c;this.signatureCertificat.password=e;this.refreshSignatureUi()},setTimeStamp:function(b,c,e){this.signatureTimeStamp.server=b;this.signatureTimeStamp.username=c;this.signatureTimeStamp.password=e;this.refreshSignatureUi()},setSignatureAppearanceText:function(b,c){this.signatureAppearance.text=
b;this.signatureAppearance.textApearance={fontName:c.fontName,fontSize:c.fontSize,fontStyle:c.fontStyle,fontLineWidth:c.fontLineWidth,verticalAlignment:c.verticalAlignment,horizontalAlignment:c.horizontalAlignment,fontColor:c.fontColor};this.refreshSignatureUi()},setSignatureAppearanceImage:function(b){this.signatureAppearance.text=null;this.signatureAppearance.image=b;this.refreshSignatureUi()},resetSignatureConfiguration:function(){this.signatureAppearance.text=null;this.signatureAppearance.image=
null;this.refreshSignatureUi()},refreshSignatureUi:function(){dvJQuery(a.dom.digisignAppearancePreview)&&dvJQuery(a.dom.digisignAppearancePreviewText)&&(this.signatureAppearance.text?(this.signatureUiSetText(this.signatureAppearance.text),this.signatureUiHighlineTextButton(),a.dom.digisignAppearancePreviewDelete.style.display="block","dv-pspdfkitlight"===a.dom.getTheme()&&(a.dom.digisignAppearancePreviewText.style.display="block")):this.signatureAppearance.image?(this.signatureUiSetImage(this.signatureAppearance.image),
this.isFreehandDrawn?this.signatureUiHighlinePadButton():this.signatureUiHighlineImageButton(),a.dom.digisignAppearancePreviewDelete.style.display="block","dv-pspdfkitlight"===a.dom.getTheme()&&(a.dom.digisignAppearancePreviewText.style.display="none")):(this.signatureUiUnselectAllButtons(),a.dom.digisignAppearancePreviewDelete.style.display="none",dvJQuery(a.dom.digisignAppearancePreviewText).html(a.Localize("label_invisible_signature")),dvJQuery(a.dom.digisignAppearancePreview).css("background-image",
""),"dv-pspdfkitlight"===a.dom.getTheme()&&(a.dom.digisignAppearancePreviewText.style.display="block",a.dom.digisignButtonSubmit.style.color=a.dom.UIconfig.textColor)));dvJQuery(a.dom.digisignCertificateButton)&&(this.signatureCertificat.data&&this.signatureCertificat.password||this.signatureCertificat.displayedName?this.signatureUiValidateCertificateButton():this.signatureUiUnvalidateCertificateButton());dvJQuery(a.dom.digisignTimeStampButton)&&(this.signatureTimeStamp.server?this.signatureUiValidateTimestampButton():
this.signatureUiUnvalidateTimestampButton());a.dom.digisignButtonSubmit.disabled=!this.areSignatureRequiredDataSet();"dv-pspdfkitlight"===a.dom.getTheme()&&!1===a.dom.digisignButtonSubmit.disabled&&(a.dom.digisignButtonSubmit.style.color=a.dom.UIconfig.primaryButtonTextColor)},areSignatureRequiredDataSet:function(){return this.signatureAppearance.text||this.signatureAppearance.image?!0:this.signatureCertificat.data&&this.signatureCertificat.password?!0:this.signatureCertificat.displayedName?!0:!1},
beginAddSignatureInteractive:function(){a.Internal.DigiSign.isAddingSignature=!0;a.SetMouseMode(1);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;return DocuViewareAPI.Status.OK},stopAddSignatureInteractive:function(){a.Internal.DigiSign.isAddingSignature=!1;a.SetMouseMode(0);a.events.ownMouseEvents=!1},sendSignatureRequest:function(b,c){var e={};if(a.Internal.DigiSign.areSignatureRequiredDataSet()){e.signaturePageNo=a.Internal.DigiSign.signatureAppearance.pageNo;e.signatureLeft=
a.Internal.DigiSign.signatureAppearance.coordinates.left;e.signatureTop=a.Internal.DigiSign.signatureAppearance.coordinates.top;e.signatureWidth=a.Internal.DigiSign.signatureAppearance.coordinates.width;e.signatureHeight=a.Internal.DigiSign.signatureAppearance.coordinates.height;null!=a.Internal.DigiSign.signatureAppearance.text?(e.signatureText=a.Internal.DigiSign.signatureAppearance.text,e.signatureFontName=a.Internal.DigiSign.signatureAppearance.textApearance.fontName,e.signatureFontStyle=a.Internal.DigiSign.signatureAppearance.textApearance.fontStyle,
e.signatureFontSize=a.Internal.DigiSign.signatureAppearance.textApearance.fontSize,e.signatureFontLineWidth=a.Internal.DigiSign.signatureAppearance.textApearance.fontLineWidth,e.signatureVerticalAlignment=a.Internal.DigiSign.signatureAppearance.textApearance.verticalAlignment||0,e.signatureHorizontalAlignment=a.Internal.DigiSign.signatureAppearance.textApearance.horizontalAlignment||0,e.signatureFontColor=a.Internal.DigiSign.signatureAppearance.textApearance.fontColor):null!=a.Internal.DigiSign.signatureAppearance.image&&
(e.signatureImageData=a.Internal.DigiSign.signatureAppearance.image);if(a.Internal.DigiSign.signatureCertificat.data&&a.Internal.DigiSign.signatureCertificat.password||a.Internal.DigiSign.signatureCertificat.displayedName)e.certificateData=a.Internal.DigiSign.signatureCertificat.data||"",e.certificateDisplayName=a.Internal.DigiSign.signatureCertificat.displayedName||"",e.certificatePassword=a.Internal.DigiSign.signatureCertificat.password||"";a.Internal.DigiSign.signatureTimeStamp.server?(e.includeTimestamp=
!0,e.timeStampServer=a.Internal.DigiSign.signatureTimeStamp.server,e.timeStampUserName=a.Internal.DigiSign.signatureTimeStamp.username||"",e.timeStampPassword=a.Internal.DigiSign.signatureTimeStamp.password||""):e.includeTimestamp=!1;return a.ajax.PostBaseRequest("digisign",{data:e,success:function(g){var k="string"===typeof g?JSON.parse(g):g;if(k&&k.status===DocuViewareAPI.Status.OK){if(g="string"===typeof g?JSON.parse(g):g,a.ajax.HandleServerContextResponse(g,!1),g={certificate:a.Internal.DigiSign.signatureCertificat.data||
a.Internal.DigiSign.signatureCertificat.displayedName,image:null!=a.Internal.DigiSign.signatureAppearance.image,text:null!=a.Internal.DigiSign.signatureAppearance.text},b&&b(g),a.callbacks.onDocumentSigned)a.callbacks.onDocumentSigned(g)}else a.ajax.HandleError(g),c&&c()},error:function(g){a.ajax.HandleError(g);c&&c()}},!1)}a.DisplayError("Digsign appearance or certificate must be set to place the signature")},addSignatureInteractive:function(){a.SetMouseMode(0);a.events.ownMouseEvents=!1;var b=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),
c=a.Internal.Selection.selectionArea.getPageBounds(a.GetCurrentPage());b=a.Internal.Matrix.scale(a.Internal.Matrix.invert(b.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(b,0,c);a.Internal.DigiSign.signatureAppearance.coordinates.left=a.Internal.Utilities.roundEx(c.left,7);a.Internal.DigiSign.signatureAppearance.coordinates.top=a.Internal.Utilities.roundEx(c.top,7);a.Internal.DigiSign.signatureAppearance.coordinates.width=a.Internal.Utilities.roundEx(c.width,7);a.Internal.DigiSign.signatureAppearance.coordinates.height=
a.Internal.Utilities.roundEx(c.height,7);a.Internal.DigiSign.signatureAppearance.pageNo=a.GetCurrentPage();a.Internal.DigiSign.sendSignatureRequest();a.Internal.DigiSign.stopAddSignatureInteractive()},addSignature:function(b,c){a.Internal.DigiSign.signatureAppearance.pageNo=b;a.Internal.DigiSign.signatureAppearance.coordinates=c;a.Internal.DigiSign.sendSignatureRequest()},signatureUiSetCertificateDialog:function(){dvJQuery(a.dom.digisignCertificateName).empty();if(null!=a.certificateNames&&0<a.certificateNames.length){for(var b=
0;b<a.certificateNames.length;b++){var c=document.createElement("option");c.text=a.certificateNames[b];a.dom.digisignCertificateName.add(c)}a.dom.digisignCertificateNameContainer.style.marginRight="15px";a.dom.digisignCertificateNameContainer.style.display="block";a.dom.digisignCertificateInputContainer.style.display="none";a.dom.digisignCertificatePasswordContainer.style.display="none"}else a.dom.digisignCertificateNameContainer.style.display="none","dv-pspdfkitlight"===a.dom.getTheme()?(a.dom.digisignCertificateInputContainer.style.display=
"flex",a.dom.digisignCertificatePasswordContainer.style.display="flex"):(a.dom.digisignCertificateInputContainer.style.display="block",a.dom.digisignCertificatePasswordContainer.style.display="block")},signatureUiValidateCertificateButton:function(){a.dom.digisignCertificateIconValidate.style.display="block";a.dom.digisignCertificateIconUnvalidate.style.display="none";a.dom.digisignCertificateButtonDelete.style.display="block";"dv-pspdfkitlight"===a.dom.getTheme()?(a.dom.digisignCertificateIconValidate.style.display=
"none",a.dom.digisignCertificateIconUnvalidate.style.display="none"):a.dom.digisignCertificateButton.style.backgroundColor=a.dom.UIconfig.activeSelectedColor+"10"},signatureUiUnvalidateCertificateButton:function(){a.dom.digisignCertificateIconValidate.style.display="none";a.dom.digisignCertificateIconUnvalidate.style.display="block";a.dom.digisignCertificateButtonDelete.style.display="none";"dv-pspdfkitlight"===a.dom.getTheme()?(a.dom.digisignCertificateIconValidate.style.display="none",a.dom.digisignCertificateIconUnvalidate.style.display=
"none"):a.dom.digisignCertificateButton.style.backgroundColor=a.dom.UIconfig.panelBackColor},signatureUiValidateTimestampButton:function(){a.dom.digisignTimeStampIconValidate.style.display="block";a.dom.digisignTimeStampIconUnvalidate.style.display="none";a.dom.digisignTimeStampButtonDelete.style.display="block";"dv-pspdfkitlight"===a.dom.getTheme()?(a.dom.digisignTimeStampIconValidate.style.display="none",a.dom.digisignTimeStampIconUnvalidate.style.display="none"):a.dom.digisignTimeStampButton.style.backgroundColor=
a.dom.UIconfig.activeSelectedColor+"10"},signatureUiUnvalidateTimestampButton:function(){a.dom.digisignTimeStampIconValidate.style.display="none";a.dom.digisignTimeStampIconUnvalidate.style.display="block";a.dom.digisignTimeStampButtonDelete.style.display="none";"dv-pspdfkitlight"===a.dom.getTheme()?(a.dom.digisignTimeStampIconValidate.style.display="none",a.dom.digisignTimeStampIconUnvalidate.style.display="none"):a.dom.digisignTimeStampButton.style.backgroundColor=a.dom.UIconfig.panelBackColor},
signatureUiUnselectAllButtons:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.color=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.color=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.color=a.dom.UIconfig.activeSelectedColor},signatureUiHighlineTextButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor=
a.dom.UIconfig.activeSelectedBackgroundColor;a.dom.digisignAppearanceButtonText.style.color="#fff";a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.color=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.color=a.dom.UIconfig.activeSelectedColor},signatureUiHighlineImageButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.color=
a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonImg.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor;a.dom.digisignAppearanceButtonImg.style.color="#fff";a.dom.digisignAppearanceButtonFreehand.style.backgroundColor="";a.dom.digisignAppearanceButtonFreehand.style.color=a.dom.UIconfig.activeSelectedColor},signatureUiHighlinePadButton:function(){a.dom.digisignAppearanceButtonText.style.backgroundColor="";a.dom.digisignAppearanceButtonText.style.color=a.dom.UIconfig.activeSelectedColor;
a.dom.digisignAppearanceButtonImg.style.backgroundColor="";a.dom.digisignAppearanceButtonImg.style.color=a.dom.UIconfig.activeSelectedColor;a.dom.digisignAppearanceButtonFreehand.style.backgroundColor=a.dom.UIconfig.activeSelectedBackgroundColor;a.dom.digisignAppearanceButtonFreehand.style.color="#fff"},signatureUiSetText:function(b){dvJQuery(a.dom.digisignAppearancePreviewText).html(b);dvJQuery(a.dom.digisignAppearancePreview).css("background-image","")},signatureUiSetImage:function(b){dvJQuery(a.dom.digisignAppearancePreview).css("background-image",
"url("+b+")");dvJQuery(a.dom.digisignAppearancePreviewText).html("")}},Redaction:{selectRedactionSelectorById:function(b,c){var e=a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea");b=document.getElementById("redactionAreaButton"+t+"_"+b);if(!c)for(;0<e.length;)e[0].style.backgroundColor="rgb(255, 255, 255)",e[0].classList.remove("activeRedactionArea");null!=b&&(b.classList.contains("activeRedactionArea")?(b.style.backgroundColor="rgb(255, 255, 255)",b.classList.remove("activeRedactionArea")):
(b.style.backgroundColor="rgb(200, 200, 200)",b.classList.add("activeRedactionArea")));1<a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea").length?a.dom.redactionRemoveAllSelectedButton.style.display="block":a.dom.redactionRemoveAllSelectedButton.style.display="none"},refreshRedactionPanel:function(b){var c=null==a.cache.AnnotsRedactionReferences?0:a.cache.AnnotsRedactionReferences.length;for(1<a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea").length?a.dom.redactionRemoveAllSelectedButton.style.display=
"block":a.dom.redactionRemoveAllSelectedButton.style.display="none";a.dom.redactionAreaButtonsList.firstChild;)a.dom.redactionAreaButtonsList.removeChild(a.dom.redactionAreaButtonsList.firstChild);if(0==c)a.dom.redactionAreaFoundText.innerHTML=a.Localize("label_redaction_panel_no_mark"),a.dom.redactionApplyButton.disabled=!0,a.dom.redactionRemoveAllButton.style.display="none";else for(a.dom.redactionApplyButton.disabled=!1,1==c?(a.dom.redactionRemoveAllButton.style.display="none",a.dom.redactionAreaFoundText.innerHTML=
a.Localize("label_redaction_panel_one_mark").replace("#",c)):(a.dom.redactionAreaFoundText.innerHTML=a.Localize("label_redaction_panel_several_marks").replace("#",c),a.dom.redactionRemoveAllButton.style.display="block"),c=0;c<a.cache.AnnotsRedactionReferences.length;c++)this.addReadactionMarkSelector(a.cache.AnnotsRedactionReferences[c]);b&&a.events.isAddingRedactionMarksMode&&(b=dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors("value"),
a.AddAnnotInteractive(17,{autoCreate:!0,fillColor:b}))},addReadactionMarkSelector:function(b){var c=a.dom.redactionAreaButtonModel.cloneNode(!0),e="";c.id="redactionAreaButton"+t+"_"+b.id;c.style.display="block";e=b.title&&""!=b.title?"Page "+b.pageNo+": "+b.title:"Page "+b.pageNo+": "+a.Localize("label_redaction_title_none");c.getElementsByClassName("redactionAreaSelectionText")[0].innerHTML=e;c.getElementsByClassName("redactionSelectorToolTipText")[0].innerHTML=e;c.getElementsByClassName("redactionAreaColorSquare")[0].style.backgroundColor=
b.fillColor;c.addEventListener("click",function(g){a.Internal.Redaction.disableAddRedactionMarksMode();a.Internal.Redaction.selectAnnotFromRedactionSelector(b.id,!0);g.ctrlKey?a.Internal.Redaction.selectRedactionSelectorById(b.id,!0):a.Internal.Redaction.selectRedactionSelectorById(b.id,!1)});c.addEventListener("dblclick",function(){a.Internal.Annotations.editSelectedAnnotation()});c.addEventListener("mouseenter",function(){"rgb(255, 255, 255)"===dvJQuery(this).css("backgroundColor")&&dvJQuery(this).css("backgroundColor",
"rgb(242, 242, 242)")});c.addEventListener("mouseleave",function(){"rgb(242, 242, 242)"===dvJQuery(this).css("backgroundColor")&&dvJQuery(this).css("backgroundColor","rgb(255, 255, 255)")});c.getElementsByClassName("redactionAreaDeleteIconDiv")[0].addEventListener("click",function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_redaction_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redaction_warning"))},
null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Redaction.deleteRedactionMarkById(b.id);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])});a.dom.redactionAreaButtonsList.appendChild(c);dvJQuery("#"+c.id+" .redactionSelectorToolTipText").hide();dvJQuery("#"+c.id+" .redactionAreaSelectionText").bind("mouseenter",function(){this.offsetWidth<
this.scrollWidth?dvJQuery("#"+c.id+" .redactionSelectorToolTipText").show():dvJQuery("#"+c.id+" .redactionSelectorToolTipText").hide()})},selectAnnotFromRedactionSelector:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var c=0;c<a.cache.AnnotsRedactionReferences.length;c++){var e=a.cache.AnnotsRedactionReferences[c];if(e.id===b){var g=e.pageNo;a.SelectPage(g,function(){for(var k,p=0;p<a.cache.Annots.length;p++){var n=a.cache.Annots[p];if(n.annotApp.id==b){k=n.annotApp;break}}null!=k&&(k.visible&&
a.Internal.Annotations.selectById(k.id),a.EnsurePageRegionVisibility(g,k.bbox.Left,k.bbox.Top,k.bbox.Width,k.bbox.Height))});break}}},deleteRedactionMarkSelector:function(b){var c=document.getElementById("redactionAreaButton"+t+"_"+b);a.Internal.Annotations.deleteAnnotsRedactionReferencesById(b);c.parentNode.removeChild(c);this.refreshRedactionPanel(!1)},enableAddRedactionMarksMode:function(){if(a.dom.redactionsPanel&&!a.events.isAddingRedactionMarksMode){if(a.hasPendingAction(!0,!1,!1,!0))return DocuViewareAPI.Status.DocuViewarePendingAction;
var b=dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors("value");b=a.AddAnnotInteractive(17,{autoCreate:!0,fillColor:b});b===DocuViewareAPI.Status.OK&&(a.dom.redactionAddAreasButton.classList.add("addRedactionActiveMode"),a.dom.redactionAddAreasButton.style.color=a.dom.UIconfig.primaryButtonTextColor,a.dom.redactionAddAreasButton.style.border="3px solid #FFFFFF78",a.dom.redactionAddAreasButton.style.margin="5px 0px 10px -3px",dvJQuery(a.dom.redactionAddAreasButton).find(".stopAddAreasButtonIcon").css("display",
"block"),dvJQuery(a.dom.redactionAddAreasButton).find(".addAreasButtonIcon").css("display","none"),"dv-pspdfkitlight"===a.dom.getTheme()&&(a.dom.redactionAddAreasButton.style.border="none",a.dom.redactionAddAreasButton.style.boxShadow="0px 0px 0px 3px rgba(29,78,168,0.5)",a.dom.redactionAddAreasButton.style.margin="0 0 10px",dvJQuery(a.dom.redactionAddAreasButton).find(".stopAddAreasButtonIcon").css("display","none"),dvJQuery(a.dom.redactionAddAreasButton).find(".addAreasButtonIcon").css("display",
"none")),a.events.isAddingRedactionMarksMode=!0,dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").attr("dv-disabled",!0),dvJQuery(a.dom.redactionFill).addClass("dv-disabled"));return b}return DocuViewareAPI.Status.OK},disableAddRedactionMarksMode:function(){a.events.isAddingRedactionMarksMode&&(a.dom.redactionAddAreasButton.classList.remove("addRedactionActiveMode"),a.dom.redactionAddAreasButton.style.margin="5px 0px 10px -1px",a.dom.redactionAddAreasButton.style.border=
"none",dvJQuery(a.dom.redactionAddAreasButton).find(".stopAddAreasButtonIcon").css("display","none"),dvJQuery(a.dom.redactionAddAreasButton).find(".addAreasButtonIcon").css("display","block"),"dv-pspdfkitlight"===a.dom.getTheme()&&(a.dom.redactionAddAreasButton.style.margin="0 0 10px",a.dom.redactionAddAreasButton.style.border="none",a.dom.redactionAddAreasButton.style.boxShadow="none",dvJQuery(a.dom.redactionAddAreasButton).find(".stopAddAreasButtonIcon").css("display","none"),dvJQuery(a.dom.redactionAddAreasButton).find(".addAreasButtonIcon").css("display",
"none")),a.Internal.Annotations.stopAnnotInteractiveAdd(),a.events.isAddingRedactionMarksMode=!1,dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").attr("dv-disabled",!1),dvJQuery(a.dom.redactionFill).removeClass("dv-disabled"));return DocuViewareAPI.Status.OK},deleteRedactionMarkById:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var c=0;c<a.cache.AnnotsRedactionReferences.length;c++){var e=a.cache.AnnotsRedactionReferences[c];if(e.id===b){a.SelectPage(e.pageNo,
function(){for(var g,k=0;k<a.cache.Annots.length;k++){var p=a.cache.Annots[k];if(p.annotApp.id==b){g=p.annotApp;break}}null!=g&&g.visible&&a.DeleteAnnotationById(g.id)});break}}},hasPendingRedactionMark:function(){return null!=a.cache.AnnotsRedactionReferences&&0<a.cache.AnnotsRedactionReferences.length},removeAllRedactionMarks:function(){if(null!=a.cache.AnnotsRedactionReferences&&0<a.cache.AnnotsRedactionReferences.length){var b=a.cache.AnnotsRedactionReferences[0];a.SelectPage(b.pageNo,function(){for(var c,
e=0;e<a.cache.Annots.length;e++){var g=a.cache.Annots[e];if(g.annotApp.id==b.id){c=g.annotApp;break}}if(null!=c&&c.visible)return a.DeleteAnnotationById(c.id),a.Internal.Redaction.removeAllRedactionMarks()})}}},Annotations:{DEFAULT_GRIP_SIZE:6,CANVAS_PADDING:19,RECT_OUTER_MARGIN:1,currentInteractiveAnnotProperties:null,currentInteractiveAnnotPageNo:0,annotationsVisibility:"visible",interactionEnabled:!0,multiSelectionEnabled:!0,selected:[],cached:[],hoveredAnnot:null,annotEdit:null,defaultAuthor:null,
getMaxZindex:function(){var b=0;if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];null!=e&&null!=e.canvas&&(b=Math.max(b,dvJQuery(e.canvas).css("zIndex")))}return b},defaultProperties:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(0),1:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(1),2:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2),3:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(3),4:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(4),
5:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(5),6:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(7),8:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(8),9:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(9),10:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(11),12:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(12),
13:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(13),14:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(14),15:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(15),16:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(16),17:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(17),2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(2048)},defaultPropertiesDisplay:{0:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(0),
1:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(1),2:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2),3:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(3),4:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(4),5:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(5),6:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(6),7:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(7),
8:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(8),9:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(9),10:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(10),11:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(11),12:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(12),13:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(13),14:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(14),
15:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(15),16:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(16),17:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(17),2048:DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(2048)},setDefaultPropertiesValues:function(b,c){this.defaultProperties[b]=this.mergeAnnotationProperties(b,c)},setDefaultPropertiesToDisplay:function(b,c){this.defaultPropertiesDisplay[b]=c},setDefaultAuthor:function(b){this.defaultAuthor=
b},getAnnotPropertiesValues:function(b){b=a.Internal.Annotations.defaultProperties[b];delete b.autoCreate;delete b.left;delete b.top;delete b.width;delete b.height;delete b.startX;delete b.startY;delete b.endX;delete b.endY;return b},getAnnotationTitleFromType:function(b){var c="";switch(b){case 0:c=a.Localize("_label_rubber_stamp_properties");break;case 1:c=a.Localize("_label_rectangle_properties");break;case 2:c=a.Localize("_label_rectangle_highlighter_properties");break;case 3:c=a.Localize("_label_line_properties");
break;case 4:c=a.Localize("_label_line_arrow_properties");break;case 5:c=a.Localize("_label_connected_line_properties");break;case 6:c=a.Localize("_label_ellipse_properties");break;case 7:c=a.Localize("_label_embedded_image_properties");break;case 8:c=a.Localize("_label_text_properties");break;case 9:c=a.Localize("_label_stickynote_properties");break;case 10:c=a.Localize("_label_freehand_properties");break;case 11:c=a.Localize("_label_freehand_highlighter_properties");break;case 12:c=a.Localize("_label_freehand_polygon_properties");
break;case 13:c=a.Localize("_label_link_properties");break;case 14:c=a.Localize("_label_polygon_properties");break;case 15:c=a.Localize("_label_ruler_properties");break;case 16:c=a.Localize("_label_polyruler_properties");break;case 17:c=a.Localize("_label_redaction_properties")}return c},editSelectedAnnotation:function(){if(null!=a.dom.selectedAnnotation&&a.dom.selectedAnnotation.annotApp.canEdit){var b=a.dom.selectedAnnotation;a.EditAnnotInteractive(b,this.defaultPropertiesDisplay[b.annotApp.properties.type])}},
getAllFirstAnnotationComments:function(b){var c=[];if(null!=a.cache.AnnotsComments)for(var e=0;e<a.cache.AnnotsComments.length;e++){var g=!1,k=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(a.cache.AnnotsComments[e].annotApp.id);if(null!=k){for(var p=0;p<c.length;p++)if(c[p].comment.annotApp.id===k.annotApp.id){g=!0;break}g||c.push({comment:k})}}null!=b&&b(c);return c},getFirstAnnotationCommentOfAnnotationFromId:function(b,c){if(null!=b&&""!=b&&(c=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy),
null!=c))for(var e=0;e<c.length;e++)if(c[e].comment.annotApp.properties.previousGuid===b)return c[e];return null},getAnnotationCommentFromId:function(b){if(null!=b&&""!=b)for(var c=0;c<a.cache.AnnotsComments.length;c++)if(a.cache.AnnotsComments[c].annotApp.id===b)return a.cache.AnnotsComments[c];return null},getFirstAnnotationCommentOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);if(null!=b){for(;;){var c=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);
if(null!=c)b=c;else break}return b}return null},getFirstAnnotationCommentAnswerOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);return null!=b&&(b=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id),null!=b)?a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid):null},getLastAnnotationCommentAnswerOfDiscussion:function(b){b=a.Internal.Annotations.getAnnotationCommentFromId(b);if(null!=b){for(;;){var c=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.nextGuid);
if(null!=c)b=c;else break}return b}return null},getAnnotationCommentOwnerAnnotApp:function(b,c){if(null==b||2048!=b.properties.type)return null;if(c)for(;;)if(c=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(b,!1),null!=c)if(2048==c.properties.type)b=c;else return c;else break;if(null!=a.cache.AnnotsComments)for(c=0;c<a.cache.AnnotsComments.length;c++){var e=a.cache.AnnotsComments[c];if(e.annotApp.id==b.properties.previousGuid)return e.annotApp}if(null!=a.cache.Annots)for(c=0;c<a.cache.Annots.length;c++)if(e=
a.cache.Annots[c],e.annotApp.id==b.properties.previousGuid)return e.annotApp;return null},deleteAnnotationComment:function(b,c){var e=!1;if(null!=a.cache.AnnotsComments)for(var g=0;g<a.cache.AnnotsComments.length;g++)if(a.cache.AnnotsComments[g].annotApp.id===b){b=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[g].annotApp.properties.nextGuid);e=a.Internal.Annotations.getAnnotationCommentFromId(a.cache.AnnotsComments[g].annotApp.properties.previousGuid);null==b?null!=e&&(e.annotApp.properties.nextGuid=
null):null!=e?(e.annotApp.properties.nextGuid=b.annotApp.id,b.annotApp.properties.previousGuid=e.annotApp.id):b.annotApp.properties.previousGuid=null;a.cache.AnnotsComments.splice(g,1);e=!0;break}return e?(c&&a.refreshCommentsPanel(),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},scrollToSelectedAnnotationCommentVisibility:function(b){var c=dvJQuery(a.dom.commentsContainer),e=c.innerHeight(),g=dvJQuery("#dvcomment-"+b+"-"+a.uniqueID);b=g.position().top;g=g.children(".dvcomment-header").outerHeight()+
g.children(".dvcomment-content").children(".dvcomment-message").outerHeight();0>b?c.animate({scrollTop:c.scrollTop()+b},600):b>e&&c.animate({scrollTop:c.scrollTop()+(g+(b-e))},600)},resetAnnotationCommentSelection:function(){var b=a.Internal.Annotations.getSelectedAnnotationComment();b&&dvJQuery(b).removeClass("dvcomment-selected");dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).children(".dvcomment").children().each(function(){dvJQuery(this).find(".dvcomment-header").css({border:"",
"padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});dvJQuery(this).find(".dvcomment-message").css({"border-bottom":"","border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""});dvJQuery(this).children(".dvcomment-content").children(".dvanswer").each(function(){dvJQuery(this).find(".dvcomment-header").css({border:"","padding-left":"","padding-top":"","padding-bottom":"","padding-right":""});dvJQuery(this).find(".dvcomment-message").css({"border-bottom":"",
"border-left":"","border-right":"","padding-left":"","padding-right":"","padding-bottom":""})})})},getSelectedAnnotationComment:function(){return dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).find(".dvcomment-selected")},selectAnnotationCommentById:function(b,c,e){var g=a.Internal.Annotations.getSelectedAnnotationComment();dvJQuery(g).attr("id")!=="dvcomment-"+b+"-"+a.uniqueID&&(a.Internal.Annotations.resetAnnotationCommentSelection(),g=document.getElementById("dvcomment-"+b+
"-"+a.uniqueID),dvJQuery(g).addClass("dvcomment-selected"),"dv-pspdfkitlight"===a.dom.getTheme()?(dvJQuery(g).children(".dvcomment-header").css({"padding-left":"10px 0"}),dvJQuery(g).children(".dvcomment-content").children(".dvcomment-message").css({"border-bottom":"1px solid #D7DCE4","border-left":"none","border-right":"none","background-color":a.dom.UIconfig.panelBackColor,color:a.dom.UIconfig.textColor,"padding-left":"0","padding-right":"0","letter-spacing":"0.1px"})):(dvJQuery(g).children(".dvcomment-header").css({border:"3px solid "+
a.dom.UIconfig.headerColor,"padding-left":"7px","padding-top":"7px","padding-bottom":"7px","padding-right":"7px"}),dvJQuery(g).children(".dvcomment-content").children(".dvcomment-message").css({"border-bottom":"3px solid "+a.dom.UIconfig.headerColor,"border-left":"3px solid "+a.dom.UIconfig.headerColor,"border-right":"3px solid "+a.dom.UIconfig.headerColor,"background-color":a.dom.UIconfig.panelBackColor,color:a.dom.UIconfig.textColor,"padding-left":"8px","padding-right":"8px","padding-bottom":"8px"})));
c&&a.Internal.Annotations.scrollToSelectedAnnotationCommentVisibility(b);e&&a.SelectSnapIn("comments",!0)},removeSelectedAnnotations:function(){for(var b=[],c=0;c<a.Internal.Annotations.selected.length;c++)a.Internal.Annotations.selected[c].annotApp.canDelete&&b.push(a.Internal.Annotations.selected[c]);if(0<b.length){var e=1<b.length;a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize(e?"_title_confirm_annotations_removal":"_title_confirm_annotation_removal"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize(e?
"_message_confirm_annotations_removal":"_message_confirm_annotation_removal")+(1<b.length?" ("+b.length.toString()+")":""))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Annotations.unselectAll();a.DeleteAnnotations(b);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])}},stopAnnotInteractiveAdd:function(){null!=this.currentInteractiveAnnotProperties&&
(this.currentInteractiveAnnotProperties=null,this.currentInteractiveAnnotPageNo=0,a.events.pathPoints=null,a.events.isDrawingPath=!1,a.SetMouseMode(0),a.events.ownMouseEvents=!1)},beginAddAnnotInteractive:function(b){if(a.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;this.unselectAll();this.currentInteractiveAnnotProperties=b;5==b.type||10==b.type||11==b.type||16==b.type?a.SetMouseMode(2):(a.SetMouseMode(1),3==b.type||4==b.type||15==b.type?a.Internal.Selection.selectionArea.setLineMode(1):
a.Internal.Selection.selectionArea.setLineMode(0));a.events.ownMouseEvents=!0;a.dom.removeViewAreaTouchAction();return DocuViewareAPI.Status.OK},addAnnotInteractive:function(){a.SetMouseMode(0);a.events.ownMouseEvents=!1;if(0!==Math.abs(a.events.mouseX-a.events.mouseDownX)&&0!==Math.abs(a.events.mouseY-a.events.mouseDownY)||17!==this.currentInteractiveAnnotProperties.type){var b=this.currentInteractiveAnnotPageNo,c=a.Internal.Pages.getRenderingState(b),e=a.Internal.Selection.selectionArea.getPageBounds(b),
g=a.Internal.Matrix.scale(a.Internal.Matrix.invert(c.contentMatrix),1/96,1/96,!1);a.Internal.Matrix.transformBBox(g,0,e);this.currentInteractiveAnnotProperties.left=a.Internal.Utilities.roundEx(e.left,7);this.currentInteractiveAnnotProperties.top=a.Internal.Utilities.roundEx(e.top,7);this.currentInteractiveAnnotProperties.width=a.Internal.Utilities.roundEx(e.width,7);this.currentInteractiveAnnotProperties.height=a.Internal.Utilities.roundEx(e.height,7);e=a.Internal.Selection.selectionArea.getStartPosition();
var k=a.Internal.Selection.selectionArea.getEndPosition();a.Internal.Matrix.transformPoint(g,e);a.Internal.Matrix.transformPoint(g,k);if(5==this.currentInteractiveAnnotProperties.type||10==this.currentInteractiveAnnotProperties.type||11==this.currentInteractiveAnnotProperties.type||16==this.currentInteractiveAnnotProperties.type){if(null==a.events.pathPoints)return;this.currentInteractiveAnnotProperties.startX=-1;this.currentInteractiveAnnotProperties.startY=-1;this.currentInteractiveAnnotProperties.endX=
-1;this.currentInteractiveAnnotProperties.endY=-1;this.currentInteractiveAnnotProperties.pathData=[];for(e=0;e<a.events.pathPoints.length;e++)131072!=a.events.pathPoints[e].x&&131072!=a.events.pathPoints[e].x?(k={x:a.events.pathPoints[e].x-c.pageLeft,y:a.events.pathPoints[e].y-c.pageTop},a.Internal.Matrix.transformPoint(g,k),this.currentInteractiveAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(k.x,7)),this.currentInteractiveAnnotProperties.pathData.push(a.Internal.Utilities.roundEx(k.y,
7))):(this.currentInteractiveAnnotProperties.pathData.push(131072),this.currentInteractiveAnnotProperties.pathData.push(131072))}else this.currentInteractiveAnnotProperties.startX=a.Internal.Utilities.roundEx(e.x,7),this.currentInteractiveAnnotProperties.startY=a.Internal.Utilities.roundEx(e.y,7),this.currentInteractiveAnnotProperties.endX=a.Internal.Utilities.roundEx(k.x,7),this.currentInteractiveAnnotProperties.endY=a.Internal.Utilities.roundEx(k.y,7);c=a.Internal.Annotations.defaultAuthor;g=null;
null!=c&&(g={author:c});a.ajax.PostBaseRequest("newannotation",{data:{annots:[{extProperties:g,properties:this.currentInteractiveAnnotProperties,pageNo:b}]},success:function(p){if((p="string"===typeof p?JSON.parse(p):p)&&null!=p.annots)for(var n=0;n<p.annots.length;n++){var w=p.annots[n].annotApp,B=a.Internal.Pages.getRenderingState(w.pageNo);B=a.Internal.Annotations.newController(w,B.pageLeft,B.pageTop,B.contentMatrix);a.dom.singlePageView&&w.pageNo!=a.GetCurrentPage()||B.render();a.updateThumbnails([w.pageNo]);
if(a.callbacks.onAnnotationAdded)a.callbacks.onAnnotationAdded({id:w.id,pageNo:w.pageNo});17==w.properties.type&&(a.Internal.Annotations.addAnnotsRedactionReferences({id:w.id,pageNo:w.pageNo,title:w.properties.title,fillColor:w.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!0))}else a.ajax.HandleError(p)}},!1);a.Internal.Annotations.stopAnnotInteractiveAdd()}else a.Internal.Redaction.disableAddRedactionMarksMode()},setAnnotationsComments:function(b){a.cache.AnnotsComments=
b},addAnnotationComment:function(b){if(null!=b&&(null==a.cache.AnnotsComments?a.cache.AnnotsComments=[b]:a.cache.AnnotsComments.push(b),null!=b.annotApp.properties.previousGuid&&""!=b.annotApp.properties.previousGuid)){var c=a.Internal.Annotations.getAnnotationCommentFromId(b.annotApp.properties.previousGuid);null!=c&&(c.annotApp.properties.nextGuid=b.annotApp.id)}},setAnnotsRedactionReferences:function(b){a.cache.AnnotsRedactionReferences=b},addAnnotsRedactionReferences:function(b){null!=b&&(null==
a.cache.AnnotsRedactionReferences?a.cache.AnnotsRedactionReferences=[b]:a.cache.AnnotsRedactionReferences.push(b))},updateAnnotRedactionReferences:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var c=0;c<a.cache.AnnotsRedactionReferences.length;c++)if(a.cache.AnnotsRedactionReferences[c].id===b.id){a.cache.AnnotsRedactionReferences[c]=b;break}},deleteAnnotsRedactionReferencesById:function(b){if(null!=a.cache.AnnotsRedactionReferences)for(var c=0;c<a.cache.AnnotsRedactionReferences.length;c++)if(a.cache.AnnotsRedactionReferences[c].id===
b){a.cache.AnnotsRedactionReferences.splice(c,1);break}},addAnnotation:function(b){null==a.cache.Annots?a.cache.Annots=[b]:a.cache.Annots.push(b)},getAnnotationFromCanvas:function(b){if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];if(e.canvas===b)return e}return null},removePageAnnots:function(b){this.unselectAll(b);if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];e.annotApp.pageNo==b&&(e.canvas.parentNode==a.dom.viewerArea&&
a.dom.viewerArea.removeChild(e.canvas),a.cache.Annots.splice(c,1),c--)}},removeAll:function(){this.unselectAll();a.cache.Annots=null;a.cache.AnnotsComments=null},disableAll:function(){if(null!=a.cache.Annots)for(var b=0;b<a.cache.Annots.length;b++){var c=a.cache.Annots[b];null!=c&&null!=c.canvas&&(c.canvas.style.pointerEvents="none")}this.interactionEnabled=!1},enableAll:function(){if(null!=a.cache.Annots)for(var b=0;b<a.cache.Annots.length;b++){var c=a.cache.Annots[b];null!=c&&null!=c.canvas&&(c.canvas.style.pointerEvents=
"")}this.interactionEnabled=!0},unselectAll:function(b){if(!b||null!=a.dom.selectedAnnotation&&a.dom.selectedAnnotation.annotApp.pageNo==b)null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide(),a.dom.selectedAnnotation=null;for(var c=this.selected.length-1;0<=c;c--)b&&this.selected[c].annotApp.pageNo!=b||this.selected[c].setSelectState(!1)},selectById:function(b){a.Internal.Annotations.multiSelectionEnabled||a.Internal.Annotations.unselectAll();if(null!=a.cache.Annots)for(var c=
0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];if(e.annotApp.id===b)return e.setSelectState(!0),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},unselectById:function(b){if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];if(e.annotApp.id===b)return e.setSelectState(!1),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},computeEditToolsCoordinates:function(b){if(0!=b.annotApp.properties.rotation){b.EditToolsMat=a.Internal.Matrix.rotateAt({a:1,
b:0,c:0,d:1,e:0,f:0},b.annotApp.properties.rotation,b.annotrectNew.width/2,b.annotrectNew.height/2,!0);var c=b.getBBoxOnViewer(!0,!0);b.EditToolsMat.e+=b.annotrectNew.left-c.left;b.EditToolsMat.f+=b.annotrectNew.top-c.top}else b.EditToolsMat={a:1,b:0,c:0,d:1,e:b.annotrect.left-b.annotbox.left,f:b.annotrect.top-b.annotbox.top};b.EditToolsMat.e+=this.CANVAS_PADDING;b.EditToolsMat.f+=this.CANVAS_PADDING;b.EditToolsTopLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/2,-this.RECT_OUTER_MARGIN-
b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsTopRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+b.annotrectNew.width-b.gripSize/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsBottomRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+b.annotrectNew.width-b.gripSize/2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsBottomLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/
2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsTopMiddleGrip=a.Internal.Coordinates.newRectangle(-b.gripSize/2+b.annotrectNew.width/2,-this.RECT_OUTER_MARGIN-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsMiddleRightGrip=a.Internal.Coordinates.newRectangle(this.RECT_OUTER_MARGIN+b.annotrectNew.width-b.gripSize/2,-b.gripSize/2+b.annotrectNew.height/2,b.gripSize,b.gripSize);b.EditToolsBottomMiddleGrip=a.Internal.Coordinates.newRectangle(-b.gripSize/2+b.annotrectNew.width/
2,this.RECT_OUTER_MARGIN+b.annotrectNew.height-b.gripSize/2,b.gripSize,b.gripSize);b.EditToolsMiddleLeftGrip=a.Internal.Coordinates.newRectangle(-this.RECT_OUTER_MARGIN-b.gripSize/2,-b.gripSize/2+b.annotrectNew.height/2,b.gripSize,b.gripSize);c=b.gripSize/2;b.EditToolsRotateGrip=a.Internal.Coordinates.newRectangle(b.annotrectNew.width/2-c,b.annotrectNew.height/2-c,b.gripSize,b.gripSize)},subrender:function(b,c,e){for(var g=0,k=b;k<e.annotApp.commands.length;k++)switch(e.annotApp.commands[k]){case 0:c.save();
break;case 1:c.restore();break;case 2:c.transform(e.annotApp.args[k][0],e.annotApp.args[k][1],e.annotApp.args[k][2],e.annotApp.args[k][3],e.annotApp.args[k][4],e.annotApp.args[k][5]);break;case 3:c.fillStyle="rgba("+e.annotApp.args[k][1]+","+e.annotApp.args[k][2]+","+e.annotApp.args[k][3]+","+e.annotApp.args[k][0]/255+")";break;case 4:c.beginPath();c.moveTo(e.annotApp.args[k][0],e.annotApp.args[k][1]);c.lineTo(e.annotApp.args[k][0]+e.annotApp.args[k][2],e.annotApp.args[k][1]);c.lineTo(e.annotApp.args[k][0]+
e.annotApp.args[k][2],e.annotApp.args[k][1]+e.annotApp.args[k][3]);c.lineTo(e.annotApp.args[k][0],e.annotApp.args[k][1]+e.annotApp.args[k][3]);c.closePath();c.clip();break;case 5:c.globalAlpha=.5;break;case 6:c.globalAlpha=e.annotApp.args[k][0]/255;break;case 7:for(var p=DocuViewareEncodingUtilities.base64.decode(e.annotApp.data[k]),n=p.length,w=new DocuViewareEncodingUtilities.TypedArray.Uint8Array(n),B=0;B<n;B++)w[B]=p.charCodeAt(B);p=e.annotApp.args[k].length/2;n=[{x:0,y:0},{x:0,y:0},{x:0,y:0}];
var I=0;c.beginPath();for(B=0;B<p;B++){var E=128<=w[B];E&&(w[B]-=128);switch(w[B]){case 0:c.moveTo(e.annotApp.args[k][2*B],e.annotApp.args[k][2*B+1]);I=0;break;case 1:c.lineTo(e.annotApp.args[k][2*B],e.annotApp.args[k][2*B+1]);I=0;break;case 3:n[I].x=e.annotApp.args[k][2*B],n[I].y=e.annotApp.args[k][2*B+1],I+=1,3==I&&(c.bezierCurveTo(n[0].x,n[0].y,n[1].x,n[1].y,n[2].x,n[2].y),I=0)}E&&c.closePath()}c.fill();break;case 8:var V=e.annotApp.args[k][0],ba=e.annotApp.args[k][1],da=e.annotApp.args[k][2],
ea=e.annotApp.args[k][3];g++;if(0==b&&e.cachedImages.length>=g)c.drawImage(e.cachedImages[g-1],V,ba,da,ea);else{var la=new Image;la.onload=function(){c.drawImage(la,V,ba,da,ea);a.Internal.Annotations.subrender(k+1,c,e)};la.src=null==e.annotApp.data[k]?"data:image/png;base64,"+e.annotApp.properties.bitmapData:"data:image/png;base64,"+e.annotApp.data[k];e.cachedImages.push(la);return}}c.restore();e.isSelected&&(c.save(),c.strokeStyle="rgba(153, 209, 255, 0.5)",c.beginPath(),c.moveTo(e.canvas.width-
this.CANVAS_PADDING,this.CANVAS_PADDING),c.lineTo(this.CANVAS_PADDING,this.CANVAS_PADDING),c.lineTo(this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),c.stroke(),c.beginPath(),c.moveTo(this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),c.lineTo(e.canvas.width-this.CANVAS_PADDING,e.canvas.height-this.CANVAS_PADDING),c.lineTo(e.canvas.width-this.CANVAS_PADDING,this.CANVAS_PADDING),c.stroke(),c.restore(),c.save(),c.globalCompositeOperation="destination-over",c.fillStyle="rgba(204, 232, 255, 0.2)",
c.fillRect(this.CANVAS_PADDING+1,this.CANVAS_PADDING+1,e.canvas.width-2*(1+this.CANVAS_PADDING),e.canvas.height-2*(1+this.CANVAS_PADDING)),c.restore(),c.save(),c.lineWidth=1,c.strokeStyle="rgba(100, 100, 100, 1.0)",c.setLineDash([5,2]),this.computeEditToolsCoordinates(e),b=e.EditToolsMat,c.transform(b.a,b.b,b.c,b.d,b.e,b.f),c.strokeRect(-a.Internal.Annotations.RECT_OUTER_MARGIN,-a.Internal.Annotations.RECT_OUTER_MARGIN,e.annotrectNew.width+2*a.Internal.Annotations.RECT_OUTER_MARGIN,e.annotrectNew.height+
2*a.Internal.Annotations.RECT_OUTER_MARGIN),e.annotApp.canResize&&!e.annotApp.properties.autoSize&&(e.annotApp.properties.keepAspectRatio||e.annotApp.properties.squaredBox||(c.fillRect(e.EditToolsTopLeftGrip.Left,e.EditToolsTopLeftGrip.Top,e.EditToolsTopLeftGrip.Width,e.EditToolsTopLeftGrip.Height),c.fillRect(e.EditToolsTopRightGrip.Left,e.EditToolsTopRightGrip.Top,e.EditToolsTopRightGrip.Width,e.EditToolsTopRightGrip.Height),c.fillRect(e.EditToolsBottomRightGrip.Left,e.EditToolsBottomRightGrip.Top,
e.EditToolsBottomRightGrip.Width,e.EditToolsBottomRightGrip.Height),c.fillRect(e.EditToolsBottomLeftGrip.Left,e.EditToolsBottomLeftGrip.Top,e.EditToolsBottomLeftGrip.Width,e.EditToolsBottomLeftGrip.Height)),c.fillRect(e.EditToolsTopMiddleGrip.Left,e.EditToolsTopMiddleGrip.Top,e.EditToolsTopMiddleGrip.Width,e.EditToolsTopMiddleGrip.Height),c.fillRect(e.EditToolsMiddleRightGrip.Left,e.EditToolsMiddleRightGrip.Top,e.EditToolsMiddleRightGrip.Width,e.EditToolsMiddleRightGrip.Height),c.fillRect(e.EditToolsBottomMiddleGrip.Left,
e.EditToolsBottomMiddleGrip.Top,e.EditToolsBottomMiddleGrip.Width,e.EditToolsBottomMiddleGrip.Height),c.fillRect(e.EditToolsMiddleLeftGrip.Left,e.EditToolsMiddleLeftGrip.Top,e.EditToolsMiddleLeftGrip.Width,e.EditToolsMiddleLeftGrip.Height)),e.annotApp.canRotate&&(b=e.gripSize/2,c.beginPath(),c.arc(e.EditToolsRotateGrip.Left+b,e.EditToolsRotateGrip.Top+b,b,0,2*Math.PI,!1),c.fill()),c.restore());c=null},prerenderPendingFreenhandAnnot:function(b){var c=5===a.Internal.Annotations.currentInteractiveAnnotProperties.type||
16===a.Internal.Annotations.currentInteractiveAnnotProperties.type,e=parseFloat(dvJQuery(a.dom.freehandCan).css("top")),g=parseFloat(dvJQuery(a.dom.freehandCan).css("left")),k=a.dom.freehandCan.getContext("2d");k.clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height);k.lineWidth=96*a.Internal.Annotations.currentInteractiveAnnotProperties.borderWidth*a.GetCurrentZoom();k.strokeStyle=a.Internal.Annotations.currentInteractiveAnnotProperties.strokeColor;k.globalAlpha=11==a.Internal.Annotations.currentInteractiveAnnotProperties.type?
.5:a.Internal.Annotations.currentInteractiveAnnotProperties.opacity;k.beginPath();c||(k.lineJoin="round",k.lineCap="round");var p=a.events.pathPoints;if(null!==p){for(var n=0;n<p.length;n++)131072===p[n].x&&131072===p[n].y?(k.stroke(),k.beginPath(),c||(k.lineJoin="round",k.lineCap="round")):k.lineTo(p[n].x-g,p[n].y-e);c&&null!=b&&k.lineTo(b.x-g,b.y-e);k.stroke()}},dropPendingFreenhandAnnotLastSubPath:function(){var b=a.events.pathPoints;if(null!==b){for(var c=b.length-1;0!==c&&(131072!==b[c].x||131072!==
b[c].y)&&5!==a.Internal.Annotations.currentInteractiveAnnotProperties.type&&16!==a.Internal.Annotations.currentInteractiveAnnotProperties.type;)c--;a.events.pathPoints=0===c?null:b.slice(0,c);this.prerenderPendingFreenhandAnnot()}},setAnnotationsVisibility:function(b){a.Internal.Annotations.annotationsVisibility=b;if(null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++)a.cache.Annots[c].canvas.style.visibility=b;return DocuViewareAPI.Status.OK},newController:function(b,c,e,g){var k={cachedImages:[]};
k.annotApp=b;k.updateNo=0;k.pendingUpdate=0;k.isMoving=!1;k.isRotating=!1;k.resizingMode=-1;k.isSelected=!1;k.stopMoving=function(){this.isMoving&&(this.isMoving=!1)};k.stopResizing=function(){-1!=this.resizingMode&&(this.resizingMode=-1)};k.stopRotating=function(){this.isRotating&&(this.isRotating=!1)};k.stopEditing=function(){this.isEditing()&&(this.stopMoving(),this.stopResizing(),this.stopRotating(),this.isModified()&&this.updateAnnotation(!1,null,a.Internal.Annotations.multiSelectionEnabled))};
k.hasPendingUpdate=function(){return 0<this.pendingUpdate};k.isEditing=function(){return this.isRotating||this.isMoving||-1!=this.resizingMode};k.setSelectState=function(n,w){if(n!=this.isSelected){if(n)this.gripSize=a.Internal.Annotations.DEFAULT_GRIP_SIZE*(w?3:1),this.canvas.bakzIndex=dvJQuery(this.canvas).css("zIndex"),this.canvas.style.zIndex=a.Internal.Annotations.getMaxZindex()+1,this.canvas.tabIndex=1,a.Internal.Annotations.selected.push(this);else for(this.canvas.style.zIndex=this.canvas.bakzIndex,
this.canvas.removeAttribute("tabindex"),this.stopEditing(),w=a.Internal.Annotations.selected.length-1;0<=w;w--)if(a.Internal.Annotations.selected[w]===this){a.Internal.Annotations.selected.splice(w,1);break}this.isSelected=n;this.render(!1,n);if(a.callbacks.onAnnotationSelectedStateChanged)a.callbacks.onAnnotationSelectedStateChanged({id:this.annotApp.id,state:n})}};k.editPointsHitTest=function(n,w,B){if(a.serverCtx.annotationEditorMode&&this.annotApp.canMove&&this.annotApp.canSelect&&parseInt(this.annotApp.pageNo)===
a.GetCurrentPage()){B=this.canvas.getBoundingClientRect();n={x:n-B.left,y:w-B.top};a.Internal.Annotations.computeEditToolsCoordinates(this);a.Internal.Matrix.transformPoint(a.Internal.Matrix.invert(this.EditToolsMat),n);if(!this.annotApp.properties.keepAspectRatio&&!this.annotApp.properties.squaredBox){if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsTopLeftGrip,2))return 1;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsTopRightGrip,2))return 3;if(a.Internal.Coordinates.isPointInsideRect(n,
this.EditToolsBottomRightGrip,2))return 5;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsBottomLeftGrip,2))return 7}if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsMiddleLeftGrip,2))return 0;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsTopMiddleGrip,2))return 2;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsMiddleRightGrip,2))return 4;if(a.Internal.Coordinates.isPointInsideRect(n,this.EditToolsBottomMiddleGrip,2))return 6;if(a.Internal.Coordinates.isPointInsideRect(n,
this.EditToolsRotateGrip,2))return 8}return-1};k.isModified=function(){return this.rotationinit!=this.annotApp.properties.rotation||this.annotrect.left!=this.annotrectNew.left||this.annotrect.top!=this.annotrectNew.top||this.annotrect.width!=this.annotrectNew.width||this.annotrect.height!=this.annotrectNew.height};k.hasPendingRotateUpdate=function(){return this.rotationinit!=this.annotApp.properties.rotation};k.hasPendingResizeUpdate=function(){return this.annotrectNew.width!=this.annotrect.width||
this.annotrectNew.height!=this.annotrect.height};k.hasPendingMoveUpdate=function(){return this.annotrectNew.left!=this.annotrect.left||this.annotrectNew.top!=this.annotrect.top};k.addWidth=function(n,w){this.annotrectNew.width+=n;this.annotApp.properties.squaredBox?this.annotrectNew.height+=n:this.annotApp.properties.keepAspectRatio&&(this.annotrectNew.height=this.annotrectNew.width/this.annotApp.properties.aspectRatio);w&&this.render(!1)};k.addHeight=function(n,w){this.annotrectNew.height+=n;this.annotApp.properties.squaredBox?
this.annotrectNew.width+=n:this.annotApp.properties.keepAspectRatio&&(this.annotrectNew.width=this.annotrectNew.height*this.annotApp.properties.aspectRatio);w&&this.render(!1)};k.updateCursor=function(n){if(!this.isEditing())if(this.annotApp.canSelect&&!n&&a.serverCtx.annotationEditorMode)if(this.annotApp.pageNo!=a.GetCurrentPage())this.cursorMgr.setStdCursor("not-allowed");else{n=this.editPointsHitTest(a.events.mouseX,a.events.mouseY,a.Internal.Annotations.DEFAULT_GRIP_SIZE);if(this.isSelected){0<=
n&&7>=n&&(n+=Math.trunc((this.annotApp.properties.rotation+22.5)/45),n%=8);if(0<=n&&7>=n&&this.annotApp.canResize&&!this.annotApp.properties.autoSize){if(this.hasPendingRotateUpdate()||this.hasPendingMoveUpdate()){this.cursorMgr.setStdCursor("wait");return}if(0==n){this.cursorMgr.setStdCursor("w-resize");return}if(1==n){this.cursorMgr.setStdCursor("nw-resize");return}if(2==n){this.cursorMgr.setStdCursor("n-resize");return}if(3==n){this.cursorMgr.setStdCursor("ne-resize");return}if(4==n){this.cursorMgr.setStdCursor("w-resize");
return}if(5==n){this.cursorMgr.setStdCursor("nwse-resize");return}if(6==n){this.cursorMgr.setStdCursor("n-resize");return}if(7==n){this.cursorMgr.setStdCursor("nesw-resize");return}}if(this.annotApp.canRotate&&8==n){this.hasPendingResizeUpdate()?this.cursorMgr.setStdCursor("wait"):this.cursorMgr.setCustomCursorClass("rotateCursor");return}}this.annotApp.canMove?this.hasPendingResizeUpdate()&&0!=this.annotApp.properties.rotation?this.cursorMgr.setStdCursor("wait"):13===this.annotApp.properties.type&&
a.serverCtx.annotationEditorMode&&2==a.dom.UIconfig.linkAnnotationClickBehaviour?this.cursorMgr.setStdCursor("pointer"):this.cursorMgr.setStdCursor("all-scroll"):this.cursorMgr.setStdCursor("default")}else this.cursorMgr.setStdCursor("")};k.getBBoxOnViewer=function(n,w){var B=n?0:this.pageLeft;n=n?0:this.pageTop;var I=this.annotrectNew.left-this.annotrect.left,E=this.annotrectNew.top-this.annotrect.top;I={left:this.annotbox.left+B+I,top:this.annotbox.top+n+E,width:this.annotbox.width+(this.annotrectNew.left+
this.annotrectNew.width-(this.annotrect.left+this.annotrect.width)-I),height:this.annotbox.height+(this.annotrectNew.top+this.annotrectNew.height-(this.annotrect.top+this.annotrect.height)-E)};0!=this.annotApp.properties.rotation&&(w=!this.hasPendingResizeUpdate()||w?{x:this.annotrectNew.left+B+this.annotrectNew.width/2,y:this.annotrectNew.top+n+this.annotrectNew.height/2}:{x:this.annotrect.left+B+this.annotrect.width/2,y:this.annotrect.top+n+this.annotrect.height/2},a.Internal.Matrix.transformBBox({a:1,
b:0,c:0,d:1,e:0,f:0},this.annotApp.properties.rotation,I,w));return I};k.render=function(n,w){var B=this.getBBoxOnViewer(),I=Math.round(B.left-a.Internal.Annotations.CANVAS_PADDING),E=Math.round(B.top-a.Internal.Annotations.CANVAS_PADDING),V=Math.round(B.width+2*a.Internal.Annotations.CANVAS_PADDING),ba=Math.round(B.height+2*a.Internal.Annotations.CANVAS_PADDING);this.canvas.style.left=I+"px";this.canvas.style.top=E+"px";if(!a.serverCtx.rasterizeGdPictureAnnotations){if(this.isSelected){if(null!=
a.dom.annotationsActionButtons)if("legacy"===a.dom.mainArea.attributes["data-theme-layout"].value)if(null!=a.dom.commentsArea&&a.IsSnapInAvailable("comments")?this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),
dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):this.annotApp.canEdit&&!this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+
a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):!this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+
a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).show(),
dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+
a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):this.annotApp.canEdit&&!this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+
a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()):!this.annotApp.canEdit&&this.annotApp.canDelete?(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+
a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show()):(dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter1"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),
dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionButtonsSplitter2"+a.uniqueID).hide(),dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide()),1===a.Internal.Annotations.selected.length){dvJQuery(a.dom.annotationsActionButtons).show();var da=dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationActionButtonsSplitter']:visible").length,ea=dvJQuery(a.dom.annotationsActionButtons).find("div[id^='annotationAction']:visible").length-da;
dvJQuery(a.dom.annotationsActionButtons).width(17*da+17*ea);0===ea&&0===da?dvJQuery(a.dom.annotationsActionButtons).hide():(dvJQuery(a.dom.annotationsActionButtons).css("left",I+V-dvJQuery(a.dom.annotationsActionButtons).outerWidth()-a.Internal.Annotations.CANVAS_PADDING+"px"),dvJQuery(a.dom.annotationsActionButtons).css("top",E+ba+"px"))}else dvJQuery(a.dom.annotationsActionButtons).hide();else null!=a.dom.commentsArea&&a.IsSnapInAvailable("comments")?dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+
a.uniqueID).show():dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionCommentButton"+a.uniqueID).hide(),this.annotApp.canDelete?dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).show():dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionDeleteButton"+a.uniqueID).hide(),this.annotApp.canEdit?dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+a.uniqueID).show():dvJQuery(a.dom.annotationsActionButtons).find("#annotationActionEditButton"+
a.uniqueID).hide(),1===a.Internal.Annotations.selected.length?(dvJQuery(a.dom.annotationsActionButtons).show(),0===dvJQuery(a.dom.annotationsActionButtons).children(":visible").length?dvJQuery(a.dom.annotationsActionButtons).hide():(dvJQuery(a.dom.annotationsActionButtons).css("left",I+V-dvJQuery(a.dom.annotationsActionButtons).outerWidth()-a.Internal.Annotations.CANVAS_PADDING+"px"),dvJQuery(a.dom.annotationsActionButtons).css("top",E+ba+"px"))):dvJQuery(a.dom.annotationsActionButtons).hide();w&&
(a.dom.selectedAnnotation=this)}n||(this.canvas.width!=V&&(this.canvas.width=V),this.canvas.height!=ba&&(this.canvas.height=ba),n=this.annotrectNew.width/this.annotrect.width,w=this.annotrectNew.height/this.annotrect.height,1<n&&1>this.annotrect.width&&(n=1),1<w&&1>this.annotrect.height&&(w=1),I=this.canvas.getContext("2d"),I.clearRect(0,0,this.canvas.width,this.canvas.height),I.save(),E=this.annotmat,E=a.Internal.Matrix.translate(E,-this.annotbox.left,-this.annotbox.top),E=a.Internal.Matrix.scale(E,
n,w,!1),0!=this.annotApp.properties.rotation&&(E=a.Internal.Matrix.rotateAt(E,this.annotApp.properties.rotation,this.annotbox.width/2*n,this.annotbox.height/2*w,!1),E=a.Internal.Matrix.translate(E,(B.width-this.annotbox.width*n)/2,(B.height-this.annotbox.height*w)/2)),E=a.Internal.Matrix.translate(E,a.Internal.Annotations.CANVAS_PADDING,a.Internal.Annotations.CANVAS_PADDING),I.transform(E.a,E.b,E.c,E.d,E.e,E.f),a.dom.UIconfig.annotsDropShadow&&this.annotApp.supportShadow&&(I.shadowOffsetX=2,I.shadowOffsetY=
2,I.shadowBlur=4,I.shadowColor="rgba(100, 100, 100, 0.6)"),a.Internal.Annotations.subrender(0,I,this))}};k.canvas=document.createElement("canvas");k.canvas.style.display="block";k.canvas.style.position="absolute";k.canvas.style.padding="0px";k.canvas.style.margin="0px";k.canvas.style.outline="0";a.Internal.Annotations.interactionEnabled||(k.canvas.style.pointerEvents="none");k.canvas.style.visibility=a.Internal.Annotations.annotationsVisibility;var p=Math.min(Math.max(k.annotApp.zorder,0),65535);
k.canvas.style.zIndex=a.dom.zindexManager.getFirstAnnotZindex()+p;k.cursorMgr=CreateDocuViewareCursorManager(k.canvas,a.isIEorEdge);k.updateAnnotationDeferred=function(n,w){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);var B=this;this.timeout=setTimeout(function(){B.updateAnnotation(n,w,!1)},300);return DocuViewareAPI.Status.OK};k.getPendingAnnotationUpdateData=function(n,w,B){var I={x:this.annotrectNew.left+this.annotrectNew.width/2,y:this.annotrectNew.top+this.annotrectNew.height/
2},E={x:this.annotrectNew.width,y:this.annotrectNew.height};if(0!=this.annotApp.properties.rotation&&this.hasPendingResizeUpdate()){var V=a.Internal.Matrix.rotateAt({a:1,b:0,c:0,d:1,e:0,f:0},this.annotApp.properties.rotation,this.annotrect.left+this.annotrect.width/2,this.annotrect.top+this.annotrect.height/2,!0);a.Internal.Matrix.transformPoint(V,I)}V=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,e:0,f:0}),1/96,1/96,!1);
var ba=a.Internal.Matrix.scale(a.Internal.Matrix.invert({a:this.annotmat.a,b:this.annotmat.b,c:this.annotmat.c,d:this.annotmat.d,e:this.annotmat.e,f:this.annotmat.f}),1/96,1/96,!1);a.Internal.Matrix.transformPoint(ba,I);a.Internal.Matrix.transformPoint(V,E);B&&(this.updateNo+=1,this.pendingUpdate+=1);n={clientTag:this.annotApp.clientTag,properties:this.annotApp.properties,"delete":n,pageNo:this.annotApp.pageNo,id:this.annotApp.id,updateNo:this.updateNo};n.properties.left=a.Internal.Utilities.roundEx(I.x,
7);n.properties.top=a.Internal.Utilities.roundEx(I.y,7);n.properties.width=a.Internal.Utilities.roundEx(Math.abs(E.x),7);n.properties.height=a.Internal.Utilities.roundEx(Math.abs(E.y),7);w&&dvJQuery.extend(!0,n.properties,w);null!=n.properties&&null!=n.properties.bitmapData&&(n.properties.bitmapData=null);return n};k.updateAnnotation=function(n,w,B,I){if(a.hasPendingAction(!0,!0))return DocuViewareAPI.Status.DocuViewarePendingAction;var E=this.getPendingAnnotationUpdateData(n,w,!0),V={annots:[E],
sessionID:a.ajax.sessionID,contextID:a.ajax.contextID};if(B)for(B=a.Internal.Annotations.selected.length-1;0<=B;B--){var ba=a.Internal.Annotations.selected[B];ba!=this&&V.annots.push(ba.getPendingAnnotationUpdateData(n,w,!1))}if(null!=I)for(B=0;B<I.length;B++)ba=I[B],ba!=this&&V.annots.push(ba.getPendingAnnotationUpdateData(n,w,!1));var da=this;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!n,data:JSON.stringify(V),contentType:"application/json",
success:function(ea){--da.pendingUpdate;ea="string"===typeof ea?JSON.parse(ea):ea;var la=[];if(ea&&null!=ea.annots){for(var Ha=!1,wa=0;wa<ea.annots.length;wa++)if(n){if(null!=ea.annots[wa].deletedAnnotsCommentId)for(var va=ea.annots[wa].deletedAnnotsCommentId.length,ua=0;ua<va;ua++)a.Internal.Annotations.deleteAnnotationComment(ea.annots[wa].deletedAnnotsCommentId[ua],ua==va-1);17==ea.annots[wa].annotType&&(a.Internal.Annotations.deleteAnnotsRedactionReferencesById(ea.annots[wa].id),a.dom.redactionsPanel&&
(a.Internal.Redaction.deleteRedactionMarkSelector(ea.annots[wa].id),a.Internal.Redaction.refreshRedactionPanel(!1)));null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide();a.updateThumbnails([ea.annots[wa].pageNo]);if(null!=a.cache.Annots)for(ua=0;ua<a.cache.Annots.length;ua++)va=a.cache.Annots[ua],va.annotApp.pageNo===ea.annots[wa].pageNo&&(va.annotApp.id===ea.annots[wa].id?(a.dom.viewerArea.removeChild(va.canvas),a.cache.Annots.splice(ua,1),ua--):va.annotApp.idx>E.idx&&
va.annotApp.idx--);if(a.callbacks.onAnnotationDeleted)a.callbacks.onAnnotationDeleted({id:ea.annots[wa].id,pageNo:ea.annots[wa].pageNo})}else{if(!da.isEditing()&&(Ha||ea.annots[wa].updateNo==da.updateNo)&&(0==wa&&1<ea.annots.length&&(Ha=!0),null!=a.cache.Annots))for(ua=0;ua<a.cache.Annots.length;ua++)if(va=a.cache.Annots[ua],va.annotApp.pageNo===ea.annots[wa].pageNo&&va.annotApp.id===ea.annots[wa].id){var Da=null!=va.annotApp.properties&&null!=va.annotApp.properties.bitmapData?va.annotApp.properties.bitmapData:
null;va.annotApp=ea.annots[wa].annotApp;if(null==va.annotApp.properties||null==va.annotApp.properties.bitmapData)da.annotApp.properties.bitmapData=Da;va.reset();va.render();-1===la.indexOf(ea.annots[wa].pageNo)&&la.push(ea.annots[wa].pageNo)}if(a.callbacks.onAnnotationEdited)a.callbacks.onAnnotationEdited({id:ea.annots[wa].id,pageNo:ea.annots[wa].pageNo});ua=ea.annots[wa].annotApp;17==ua.properties.type&&(a.Internal.Annotations.updateAnnotRedactionReferences({id:ua.id,pageNo:ua.pageNo,title:ua.properties.title,
fillColor:ua.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!1))}0<la.length&&a.updateThumbnails(la)}else a.ajax.HandleError(ea)},error:function(ea){a.ajax.HandleError(ea);--da.pendingUpdate}});return DocuViewareAPI.Status.OK};a.serverCtx.annotationEditorMode&&(window.PointerEvent?(dvJQuery(k.canvas).css("touch-action","none"),k.canvas.onpointerdown=function(n){switch(n.pointerType){case "mouse":this.mousedown(n);break;case "pen":this.mousedown(n,!0);n.preventDefault();
break;case "touch":this.mousedown(n,!0);n.preventDefault();break;default:this.mousedown(n)}},k.canvas.onpointermove=function(n){switch(n.pointerType){case "mouse":this.mousemove(n);break;case "pen":this.mousemove(n);n.preventDefault();break;case "touch":this.mousemove(n);n.preventDefault();break;default:this.mousemove(n)}},k.canvas.onpointerup=function(n){switch(n.pointerType){case "mouse":this.mouseup(n);break;case "pen":this.mouseup(n);n.preventDefault();break;case "touch":this.mouseup(n);n.preventDefault();
break;default:this.mouseup(n)}},k.canvas.onpointerenter=function(n){switch(n.pointerType){case "mouse":this.mouseenter(n);break;case "pen":this.mouseenter(n);break;default:this.mouseenter(n)}},k.canvas.onpointerleave=function(n){switch(n.pointerType){case "mouse":this.mouseleave(n);break;case "pen":this.mouseleave(n);break;default:this.mouseleave(n)}}):(k.canvas.ontouchstart=function(n){1==n.changedTouches.length&&(this.mousedown(n.changedTouches[0],!0),n.cancelable&&n.preventDefault())},k.canvas.ontouchmove=
function(n){1==n.changedTouches.length&&(this.mousemove(n.changedTouches[0]),n.cancelable&&n.preventDefault())},k.canvas.ontouchend=function(n){1==n.changedTouches.length&&(this.mouseup(n.changedTouches[0]),n.cancelable&&n.preventDefault())},k.canvas.onmousedown=function(n){this.mousedown(n)},k.canvas.onmousemove=function(n){this.mousemove(n)},k.canvas.onmouseup=function(n){this.mouseup(n)},k.canvas.onmouseenter=function(n){this.mouseenter(n)},k.canvas.onmouseleave=function(n){this.mouseleave(n)}),
k.canvas.onkeyup=function(n){this.keyup(n)},k.canvas.ondblclick=function(n){this.dblClick(n)},k.canvas.mouseenter=function(n){n=a.Internal.Annotations.getAnnotationFromCanvas(this);a.Internal.Annotations.hoveredAnnot=n;if(a.callbacks.onAnnotationMouseEnter)a.callbacks.onAnnotationMouseEnter({id:n.annotApp.id})},k.canvas.mouseleave=function(n){a.Internal.Annotations.hoveredAnnot=null;a.callbacks.onAnnotationMouseLeave&&(n=a.Internal.Annotations.getAnnotationFromCanvas(this),a.callbacks.onAnnotationMouseLeave({id:n.annotApp.id}))},
k.canvas.mouseup=function(n,w){a.events.mouseup(n,w)},k.canvas.mousedown=function(n,w){if(a.events.ownMouseEvents)a.events.mousedown(n,w);else{var B=a.Internal.Annotations.getAnnotationFromCanvas(this),I=B.annotApp.pageNo!=a.GetCurrentPage();if(!I){if(B.annotApp.canSelect){if(a.Internal.Annotations.multiSelectionEnabled)if(!n.ctrlKey){var E=!0;B.isSelected&&1<a.Internal.Annotations.selected.length&&(E=!1);E&&a.Internal.Annotations.unselectAll()}else{if(B.isSelected){B.setSelectState(!1,w);return}}else a.Internal.Annotations.unselectAll();
E=!0;13===B.annotApp.properties.type&&(a.serverCtx.annotationEditorMode&&2!=a.dom.UIconfig.linkAnnotationClickBehaviour||(E=!1));E&&(B.setSelectState(!0,w),E=B.editPointsHitTest(n.clientX,n.clientY,a.Internal.Annotations.DEFAULT_GRIP_SIZE*(w?3:1)),B.annotApp.canResize&&!B.annotApp.properties.autoSize&&-1!=E&&8!=E?B.hasPendingRotateUpdate()||B.hasPendingMoveUpdate()||(B.resizingMode=E):B.annotApp.canRotate&&8==E?B.hasPendingResizeUpdate()||(B.isRotating=!0):!B.annotApp.canMove||B.hasPendingResizeUpdate()&&
0!=B.annotApp.properties.rotation||(B.isMoving=!0))}a.cache.AnnotsComments&&(E=a.Internal.Annotations.getFirstAnnotationCommentOfAnnotationFromId(B.annotApp.id),null!=E?a.Internal.Annotations.selectAnnotationCommentById(E.comment.annotApp.id,!0,!1):a.Internal.Annotations.resetAnnotationCommentSelection())}a.events.mouseX=n.clientX;a.events.mouseY=n.clientY;B.updateCursor();I&&3!=a.events.mouseMode&&4!=a.events.mouseMode&&a.events.mousedown(n,w)}},k.canvas.mousemove=function(n){if(a.events.ownMouseEvents){var w=
a.Internal.Annotations.getAnnotationFromCanvas(this);w.updateCursor(!0);a.events.mousemove(n)}else a.events.mousemove(n),w=a.Internal.Annotations.getAnnotationFromCanvas(this),w.updateCursor()},k.canvas.keyup=function(n){13==n.keyCode?a.Internal.Annotations.editSelectedAnnotation():46==n.keyCode&&a.Internal.Annotations.removeSelectedAnnotations()},k.canvas.dblClick=function(n){!a.dom.enableAnnotEditionOnDblClick||13===k.annotApp.properties.type&&a.serverCtx.annotationEditorMode&&3==a.dom.UIconfig.linkAnnotationClickBehaviour||
a.Internal.Annotations.editSelectedAnnotation()});k.updatePageInfo=function(n,w,B){null!=B&&(this.annotmat=B);this.pageLeft=n;this.pageTop=w;this.reset()};k.runLinkDestination=function(){a.Internal.Destinations.followLink(k.annotApp.properties.link)};k.reset=function(){this.rotationinit=this.annotApp.properties.rotation;this.annotrect={left:this.annotApp.rect.Left,top:this.annotApp.rect.Top,width:this.annotApp.rect.Right-this.annotApp.rect.Left,height:this.annotApp.rect.Bottom-this.annotApp.rect.Top};
this.annotbox={left:this.annotApp.bbox.Left,top:this.annotApp.bbox.Top,width:this.annotApp.bbox.Right-this.annotApp.bbox.Left,height:this.annotApp.bbox.Bottom-this.annotApp.bbox.Top};null!=this.annotmat&&(a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,96,96,!0),0,this.annotrect),a.Internal.Matrix.transformBBox(a.Internal.Matrix.scale(this.annotmat,96,96,!0),0,this.annotbox));this.annotrectNew={left:this.annotrect.left,top:this.annotrect.top,width:this.annotrect.width,height:this.annotrect.height};
var n=Math.min(this.annotrect.left,this.annotbox.left),w=Math.min(this.annotrect.top,this.annotbox.top),B=Math.max(this.annotrect.top+this.annotrect.height,this.annotbox.top+this.annotbox.height),I=Math.max(this.annotrect.left+this.annotrect.width,this.annotbox.left+this.annotbox.width);this.annotbox.left=n;this.annotbox.top=w;this.annotbox.width=I-n;this.annotbox.height=B-w};a.Internal.Annotations.addAnnotation(k);k.updatePageInfo(c,e,g);if(b.visible){a.serverCtx.annotationEditorMode||(dvJQuery(k.canvas).mouseenter(function(){if(a.callbacks.onAnnotationMouseEnter){var n=
a.Internal.Annotations.getAnnotationFromCanvas(this);a.callbacks.onAnnotationMouseEnter({id:n.annotApp.id})}}),dvJQuery(k.canvas).mouseleave(function(){if(a.callbacks.onAnnotationMouseLeave){var n=a.Internal.Annotations.getAnnotationFromCanvas(this);a.callbacks.onAnnotationMouseLeave({id:n.annotApp.id})}}));if(13===k.annotApp.properties.type)if(b=a.serverCtx.annotationEditorMode&&3==a.dom.UIconfig.linkAnnotationClickBehaviour,!a.serverCtx.annotationEditorMode||2==a.dom.UIconfig.linkAnnotationClickBehaviour)dvJQuery(k.canvas).hover(function(){dvJQuery(this).css("cursor",
"pointer")}),dvJQuery(k.canvas).on("click",function(n){n.preventDefault();k.runLinkDestination()});else if(b)dvJQuery(k.canvas).on("dblclick",function(n){n.preventDefault();k.runLinkDestination()});a.dom.viewerArea.appendChild(k.canvas)}return k},mergeAnnotationProperties:function(b,c){var e=dvJQuery.extend(!0,{},a.Internal.Annotations.getAnnotPropertiesValues(b));"object"===typeof c&&dvJQuery.each(c,function(g,k){g in e&&(e[g]=k)});return e},showAnnotationPropertiesUI:function(b,c,e,g){a.Internal.Annotations.annotEdit=
e;dvJQuery(a.dom.annotationDialogFormContainer).find(".dv-annotation-control").hide();dvJQuery(a.dom.annotationDialogFormContainer).find("#annotation_auto_creation"+a.uniqueID).hide();dvJQuery(a.dom.annotationDialogFormContainer).children().find(":disabled").prop("disabled",!1);dvJQuery("#annotation_border_width_custom_control"+a.uniqueID).removeClass("dv-disabled");dvJQuery.each(b,function(k,p){switch(k){case "fill":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+a.uniqueID+
"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fill"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_control"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_control"+
a.uniqueID).css("display","flex").css("width","100%"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","flex").css("gap","8px"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","flex"));break;case "fillColor":void 0===b.fill&&dvJQuery("#annotation_fill_color_control"+a.uniqueID).removeClass("dv-disabled");k=1;-1!=p.indexOf("rgba")&&(k=p.replace(/^.*,(.+)\)/,"$1"),k=parseFloat(k).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+
a.uniqueID+"']").attr("data-opacity",k);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(p));dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(n){dvJQuery(n.target).parents().add(n.target).hasClass("minicolors")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("margin-bottom","0px")});dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+
a.uniqueID+"']").parent().click(function(){dvJQuery("#annotation_fill_color_control"+a.uniqueID).find("input").is(":disabled")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("margin-bottom","175px");event.stopPropagation()});if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fillColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_color_control"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill_color_control"+a.uniqueID).css("display","flex").css("align-items","center").css("min-height","36px").css("width","100%"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_fill"+a.uniqueID).css("display","flex"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","flex"));break;case "dashCap":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+a.uniqueID+"'][value='"+p+"']:radio").prop("checked",!0);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("dashCap"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_cap"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&
(dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_cap"+a.uniqueID).css("display","flex"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","flex"));break;case "dashStyle":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("dashStyle"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_dash_style"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","flex");break;case "stroke":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("stroke"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_control"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_control"+a.uniqueID).css("display","flex").css("align-items","center").css("min-height","36px").css("gap","8px").css("width","100%"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+
a.uniqueID).css("gap","8px"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","flex"));break;case "strokeColor":void 0===b.stroke&&dvJQuery("#annotation_stroke_color_control"+a.uniqueID).removeClass("dv-disabled");k=1;-1!=p.indexOf("rgba")&&(k=p.replace(/^.*,(.+)\)/,"$1"),k=parseFloat(k).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").attr("data-opacity",k);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+
a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(p));dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(n){dvJQuery(n.target).parents().add(n.target).hasClass("minicolors")||dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("margin-bottom","0px")});dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery("#annotation_stroke_color_control"+a.uniqueID).find("input").is(":disabled")||
dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("margin-bottom","175px");event.stopPropagation()});if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("strokeColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_color_control"+a.uniqueID).css("display",
"inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke"+a.uniqueID).css("display","flex").css("flex-direction","column"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_stroke_color_control"+a.uniqueID).css("display","flex").css("align-items","center").css("min-height","36px").css("width","100%"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+
a.uniqueID).css("display","flex"));break;case "borderWidth":0==b.type||11==b.type||17==b.type?(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val(Number((96*p).toFixed(2).replace(".00",""))),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+a.uniqueID+" label").html(a.Localize("label_annotation_property_border_width"))):(k=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+
a.uniqueID+"']").find("option[value='"+Number((9600*p).toFixed(2).replace(".00",""))+"']").val())||0,dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_border_width_select"+a.uniqueID+"']").find("option[value='"+k+"']").prop("selected",!0).trigger("change"),0==k&&dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val(Number((96*p).toFixed(2).replace(".00",""))),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom_label"+
a.uniqueID+" label").html("&nbsp;"));if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("borderWidth"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),0==b.type||11==b.type?(dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width_custom"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+a.uniqueID).hide()):dvJQuery(a.dom.annotationDialogForm).find("#annotation_border_width"+
a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","flex");break;case "opacity":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+a.uniqueID+"']").val(Number((100*p).toFixed(2).replace(".00","")));(!g||g&&Array.isArray(g)&&-1!=g.indexOf("opacity"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_opacity"+a.uniqueID).css("display",
"inline-block");break;case "link":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+a.uniqueID+"']").val(p);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("link"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_link"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_link"+
a.uniqueID).css("display","flex").css("justify-content","space-between"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","flex"));break;case "radiusFactor":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+a.uniqueID+"']").val(Number((100*p).toFixed(2).replace(".00","")));if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("radiusFactor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display",
"inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_radius_factor"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","flex");break;case "rotation":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val(Number(p.toFixed(2).replace(".00","")));(!g||g&&Array.isArray(g)&&-1!=g.indexOf("rotation"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_rotation"+
a.uniqueID).css("display","inline-block");break;case "squaredBox":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+a.uniqueID+"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("squaredBox"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_squared_box"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===
a.dom.getTheme()&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","flex");break;case "text":"dv-pspdfkitlight"!==a.dom.getTheme()&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_input"+a.uniqueID).html(p.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));void 0===b.lineAlignment&&dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+a.uniqueID+"'][value='0']:radio").prop("checked",!0);void 0===b.alignment&&
dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+a.uniqueID+"'][value='0']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();a.setDialogAnnotationLineAlignmentPropertiesPreview();if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("text"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("contenteditable",!0),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_control"+a.uniqueID).css("display","table"),
"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","flex");b.canEditText||8!=b.type&&9!=b.type||(dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_input"+a.uniqueID).prop("contenteditable",!1),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_control"+a.uniqueID).css("display","none"));break;case "fontName":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+a.uniqueID+
"']").find("option[value='"+p+"']").prop("selected",!0);a.setDialogAnnotationFontNamePropertiesPreview();if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fontName"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_name_control"+a.uniqueID).css("display","table-cell"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_name_control"+a.uniqueID).css("display",
"flex").css("flex","1").css("align-items","center").css("flex-basis","100%"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","flex"));break;case "fontStyle":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);a.setDialogAnnotationFontStylePropertiesPreview();if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fontStyle"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+
a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_style_control"+a.uniqueID).css("display","table-cell"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_style_control"+a.uniqueID).css("display","flex").css("flex","1").css("align-items","center").css("flex-basis","100%"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","flex"));break;case "foreColor":k=
1;0<=p.indexOf("rgba")&&(k=p.replace(/^.*,(.+)\)/,"$1"),k=parseFloat(k).toFixed(2));dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").attr("data-opacity",k);dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").val(a.Internal.Utilities.color2Hex(p));if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("foreColor"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),
dvJQuery(a.dom.annotationDialogForm).find("#annotation_fore_color_control"+a.uniqueID).css("display","table-cell"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_fore_color_control"+a.uniqueID).css("display","flex").css("flex","1").css("align-items","center").css("flex-basis","100%"),dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']").attr("data-opacity",k).css("display","flex").css("width","auto").css("margin-left",
"auto").css("font-size","12px"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","flex"));break;case "alignment":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+a.uniqueID+"'][value='"+p+"']:radio").prop("checked",!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("alignment"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),
dvJQuery(a.dom.annotationDialogForm).find("#annotation_alignment_control"+a.uniqueID).css("display","table-cell"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_alignment_control"+a.uniqueID).css("display","flex").css("flex","1").css("align-items","center").css("flex-basis","100%"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","flex"));break;case "autoSize":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+
a.uniqueID+"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("autoSize"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_size"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_size"+a.uniqueID).css("display","flex").css("min-height","36px").css("align-items",
"center"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_background_fieldset"+a.uniqueID).css("display","flex"));break;case "fontSize":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val(Number(p.toFixed(2).replace(".00","")));if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("fontSize"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_size_control"+
a.uniqueID).css("display","table-cell"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_font_size_control"+a.uniqueID).css("display","flex").css("flex","1").css("flex-basis","100%").css("align-items","center"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","flex"));break;case "lineAlignment":dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+a.uniqueID+"'][value='"+p+"']:radio").prop("checked",
!0);a.setDialogAnnotationAlignmentPropertiesPreview();if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("lineAlignment"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_line_alignment_control"+a.uniqueID).css("display","table-cell"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_line_alignment_control"+a.uniqueID).css("display","flex").css("flex",
"1").css("align-items","center").css("flex-basis","100%"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","flex"));break;case "arrowFilled":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").prop("checked",p).trigger("change");if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("arrowFilled"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_filled"+
a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&(dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","flex").css("flex-wrap","wrap").css("gap","8px"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_filled"+a.uniqueID).css("display","flex").css("align-items","center").css("min-height","36px"));break;case "arrowHeight":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+a.uniqueID+
"']").val(p);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("arrowHeight"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_height"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","flex").css("flex-wrap","wrap").css("gap","8px");break;case "arrowWidth":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+
a.uniqueID+"']").val(p);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("arrowWidth"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_width"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_arrow_fieldset"+a.uniqueID).css("display","flex").css("flex-wrap","wrap").css("gap","8px");break;case "endCap":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+
a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);(!g||g&&Array.isArray(g)&&-1!=g.indexOf("endCap"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_end_cap"+a.uniqueID).css("display","inline-block");break;case "startCap":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);(!g||g&&Array.isArray(g)&&-1!=g.indexOf("startCap"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_start_cap"+
a.uniqueID).css("display","inline-block");break;case "measurementUnit":dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+a.uniqueID+"']").find("option[value='"+p+"']").prop("selected",!0);if(!g||g&&Array.isArray(g)&&-1!=g.indexOf("measurementUnit"))dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.annotationDialogForm).find("#annotation_measurement_unit"+a.uniqueID).css("display",
"inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_text_fieldset"+a.uniqueID).css("display","flex");break;case "scale":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+"']").val(Number(p.toFixed(2).replace(".00","")));(!g||g&&Array.isArray(g)&&-1!=g.indexOf("scale"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_scale"+a.uniqueID).css("display","inline-block");break;case "autoCreate":c||(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+
a.uniqueID+"']").prop("checked",p).trigger("change"),g||(dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_creation"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_auto_creation"+a.uniqueID).css("display","flex")));break;case "title":dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_title_input"+a.uniqueID+"']").val(p),(!g||g&&Array.isArray(g)&&-1!=g.indexOf("title"))&&dvJQuery(a.dom.annotationDialogForm).find("#annotation_title"+
a.uniqueID).css("display","inline-block")}});a.DisplayDialogForm(dvJQuery(a.dom.annotationDialogForm),a.Internal.Annotations.getAnnotationTitleFromType(b.type),function(){dvJQuery("input[name='annotation_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationAlignmentPropertiesPreview()});dvJQuery("input[name='annotation_line_alignment_select"+a.uniqueID+"']:radio").change(function(){a.setDialogAnnotationLineAlignmentPropertiesPreview()});dvJQuery(a.dom.annotationDialogFormTextInput).attr("data-original-height",
dvJQuery(a.dom.annotationDialogFormTextInput).height())},null,null,[{text:a.Localize("_label_button_annotation_cancel"),click:function(){a.ExitAnnotationDrawingMode();dvJQuery(a.dom.annotationDialogForm).dvDialog("close")}},{text:c?a.Localize("_label_button_annotation_edit"):a.Localize("_label_button_annotation_add"),"class":"btn-valid",click:function(){dvJQuery.each(b,function(k,p){switch(k){case "fill":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_input"+a.uniqueID+
"']").is(":checked");break;case "fillColor":b[k]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fill_color_input"+a.uniqueID+"']")).minicolors("rgbaString");break;case "dashCap":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_dash_cap_select"+a.uniqueID+"']:checked").val());break;case "dashStyle":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_dash_style_select"+a.uniqueID+"']").find("option:selected").val());
break;case "stroke":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_input"+a.uniqueID+"']").is(":checked");break;case "strokeColor":b[k]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_stroke_color_input"+a.uniqueID+"']")).minicolors("rgbaString");break;case "borderWidth":b[k]=parseFloat(100*dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_border_width_input"+a.uniqueID+"']").val())/96/100||0;break;case "opacity":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_opacity_input"+
a.uniqueID+"']").val()/100);break;case "link":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_link_input"+a.uniqueID+"']").val();break;case "radiusFactor":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_radius_factor_input"+a.uniqueID+"']").val()/100);break;case "rotation":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_rotation_input"+a.uniqueID+"']").val())||0;break;case "squaredBox":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_squared_box_input"+
a.uniqueID+"']").is(":checked");break;case "text":b[k]=a.dom.annotationDialogFormTextInput.innerText;break;case "fontName":b[k]=dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_name_select"+a.uniqueID+"']").find("option:selected").val();break;case "fontStyle":var n=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_font_style_select"+a.uniqueID+"']").find("option:selected").val());isNaN(n)&&(n=0,dvJQuery(a.dom.annotationDialogFormFontStyleCheckboxContainer).find("* :checked").each(function(){n|=
parseInt(this.value)}));b[k]=n;break;case "foreColor":b[k]=dvJQuery(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_fore_color_input"+a.uniqueID+"']")).minicolors("rgbaString");break;case "alignment":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_alignment_select"+a.uniqueID+"']:checked").val());break;case "autoSize":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_size_input"+a.uniqueID+"']").is(":checked");break;case "fontSize":b[k]=
parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_font_size_input"+a.uniqueID+"']").val())||parseFloat(b[k]);break;case "lineAlignment":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("[name='annotation_line_alignment_select"+a.uniqueID+"']:checked").val());break;case "arrowFilled":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_filled_input"+a.uniqueID+"']").is(":checked");break;case "arrowHeight":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_height_input"+
a.uniqueID+"']").val())||0;break;case "arrowWidth":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_arrow_width_input"+a.uniqueID+"']").val())||0;break;case "endCap":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_end_cap_select"+a.uniqueID+"']").find("option:selected").val());break;case "startCap":b[k]=parseInt(dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_start_cap_select"+a.uniqueID+"']").find("option:selected").val());
break;case "measurementUnit":b[k]=dvJQuery(a.dom.annotationDialogForm).find("select[name='annotation_measurement_unit_select"+a.uniqueID+"']").find("option:selected").val();break;case "scale":b[k]=parseFloat(dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_scale_input"+a.uniqueID+"']").val())||1;break;case "autoCreate":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_auto_creation_input"+a.uniqueID+"']").is(":checked");break;case "title":b[k]=dvJQuery(a.dom.annotationDialogForm).find("input[name='annotation_title_input"+
a.uniqueID+"']").val()}});dvJQuery(a.dom.annotationDialogForm).dvDialog("close");return c?a.Internal.Annotations.annotEdit.updateAnnotation(!1,b,!1):a.Internal.Annotations.beginAddAnnotInteractive(b)}}]);return DocuViewareAPI.Status.GenericError}},Magnifier:{isMagnifying:!1,zoomContext:1,currentMagnifyingContext:{pageNo:-1,pageState:null,zoom:-1,magnifyZoom:-1,pixelRatio:-1,magnifierClientRect:null,img:null,cursorX:-1,cursorY:-1},hasContextChanged:function(){var b=a.GetCurrentPage();if(b!==a.Internal.Magnifier.currentMagnifyingContext.pageNo)return!0;
b=a.Internal.Pages.getRenderingState(b);return b.pageWidth!==a.Internal.Magnifier.currentMagnifyingContext.pageState.pageWidth||b.pageHeigth!==a.Internal.Magnifier.currentMagnifyingContext.pageState.pageHeigth||a.Internal.Magnifier.zoomContext*b.zoom!==a.Internal.Magnifier.currentMagnifyingContext.zoom?!0:!1},resetPosition:function(){a.dom.magnifierDiv.style.left="-999px";a.dom.magnifierDiv.style.top="-999px";a.dom.magnifierDiv.style.display="none"},enable:function(){if(a.isIE)return DocuViewareAPI.Status.GenericError;
var b=a.dom.magnifierTemplateDiv.cloneNode(!0);b.id="magnifierDiv"+a.uniqueID;a.dom.magnifierDiv=a.dom.viewerArea.appendChild(b);a.dom.magnifierDiv.style.display="block";a.dom.magnifierDiv.style.zIndex=a.dom.zindexManager.getMagnifierZindex();a.SetMouseMode(5);this.updateContext();b=a.dom.getViewerContainer();b.addEventListener("mousemove",this.magnify);a.dom.magnifierDiv.addEventListener("mousemove",this.magnify,!1);b.addEventListener("mouseout",this.resetPosition);window.addEventListener("resize",
this.changeMagnifierPageContext);a.Internal.Magnifier.isMagnifying=!0;return DocuViewareAPI.Status.OK},disable:function(){var b=a.dom.getViewerContainer();b.removeEventListener("mousemove",this.magnify);b.removeEventListener("mouseout",this.resetPosition);window.removeEventListener("resize",this.changeMagnifierPageContext);a.dom.magnifierDiv.remove();a.Internal.Magnifier.isMagnifying=!1;return DocuViewareAPI.Status.OK},toggle:function(){this.isMagnifying?this.disable():this.enable()},updateContext:function(){var b=
a.GetCurrentPage(),c=a.Internal.Pages.getRenderingState(b),e=a.Internal.Magnifier.zoomContext*c.zoom,g=a.cache.getPageObject(b).bitmap,k=a.getConfig(),p=a.dom.magnifierDiv.getBoundingClientRect();a.Internal.Magnifier.currentMagnifyingContext={pageNo:b,pageState:c,zoom:e,pixelRatio:k.devicePixelRatio,img:g,magnifierClientRect:p,magnifyZoom:a.Internal.Magnifier.zoomContext};k=c.pageWidth*e;c=c.pageHeight*e;a.dom.magnifierDiv.style.backgroundImage="url('"+g.src+"')";a.dom.magnifierDiv.style.backgroundSize=
k+"px "+c+"px";switch(a.Internal.Pages.getRenderRotation(b)){case DocuViewareAPI.RotateFlipType.Rotate90FlipNone:a.dom.magnifierDiv.style.transform="rotate(90deg)";a.dom.magnifierDiv.style.backgroundSize=c+"px "+k+"px";break;case DocuViewareAPI.RotateFlipType.Rotate180FlipNone:a.dom.magnifierDiv.style.transform="rotate(180deg)";break;case DocuViewareAPI.RotateFlipType.Rotate270FlipNone:a.dom.magnifierDiv.style.transform="rotate(270deg)",a.dom.magnifierDiv.style.backgroundSize=c+"px "+k+"px"}},magnify:function(b){var c=
a.dom.viewerArea.getBoundingClientRect();if(c.top>b.clientY||c.left>b.clientX)a.Internal.Magnifier.resetPosition();else{a.dom.magnifierDiv.style.display="block";a.Internal.Magnifier.hasContextChanged()&&a.Internal.Magnifier.updateContext();"mousemove"===b.type&&(a.Internal.Magnifier.currentMagnifyingContext.cursorX=b.clientX,a.Internal.Magnifier.currentMagnifyingContext.cursorY=b.clientY);var e=a.Internal.Magnifier.currentMagnifyingContextPostAjaxRequestForLocalService,g=a.Internal.Coordinates.clienttodocument(a.GetCurrentPage(),
b.clientX,b.clientY,0,!1);a.dom.magnifierDiv.style.backgroundPosition="-"+(g.x*e.magnifyZoom-e.magnifierClientRect.width/2)+"px -"+(g.y*e.magnifyZoom-e.magnifierClientRect.height/2)+"px";a.dom.magnifierDiv.style.left=b.clientX-c.left-e.magnifierClientRect.width/2+"px";a.dom.magnifierDiv.style.top=b.clientY-c.top-e.magnifierClientRect.height/2+"px"}}},Destinations:{followLink:function(b){if(15<b.length&&"fileattachment:"===b.substring(0,15)){var c=b.split(":")[1],e={fileName:b.split(":")[2],cancel:!1,
id:c};if(a.callbacks.onAttachmentClick)a.callbacks.onAttachmentClick(e);e.cancel||isNaN(c)||isNaN(parseInt(c,10))||a.Save(b,".","*",!1,!1)}else if(DocuViewareUtilities.isValidURL(b)){e={uri:b,cancel:!1};if(a.callbacks.onURINavigation)a.callbacks.onURINavigation(e);!0!==e.cancel&&window.open(b,"_blank")}else if(5<b.length&&"page:"===b.substring(0,5))b=b.split(":")[1],isNaN(b)||isNaN(parseInt(b,10))||b<=a.serverCtx.pageCount&&a.SelectPage(b);else if(a.callbacks.onUnknownLinkNavigation)a.callbacks.onUnknownLinkNavigation({link:b})}}},
getConfig:function(){var b=a.dom.getViewerContainer();return{devicePixelRatio:DocuViewareUtilities.getDevicePixelRatio(),viewerWidth:null!=b?b.offsetWidth:0,viewerHeight:null!=b?b.offsetHeight:0,scrollBarWidth:this.dom.sbWidth,hasWebPSupport:this.Internal.Capabilities.hasWebPSupport(),hasTiffSupport:this.Internal.Capabilities.hasTiffSupport()}},hasPendingResize:function(){return null!=a.NewViewerSizeTimeout},checkDocumentLoaded:function(b){return this.serverCtx&&0==this.serverCtx.documentLoaded?(b||
this.DisplayError(this.Localize("error__no_document_loaded")),!1):!0},hasPendingAction:function(b,c,e,g){if(b&&!this.checkDocumentLoaded(e))return!0;if(1==this.Internal.Files.uploading)return e||this.DisplayError(this.Localize("label__uploading_document")),!0;if(1==this.ajax.downloading)return e||this.DisplayError(this.Localize("label__downloading_document")),!0;if(0<this.ajax.pendingRequests)return g&&this.DisplayError(this.Localize("transferring_data")),!0;if(this.waitForInit)return e||this.DisplayError(this.Localize("label__initializing")),
!0;if(!c&&null!=a.cache.Annots)for(b=0;b<a.cache.Annots.length;b++)if(a.cache.Annots[b].hasPendingUpdate())return e||this.DisplayError(this.Localize("transferring_annotation_data")),!0;return!1},Localize:function(b){for(var c=0;c<this.localization.length;c++)if(b===this.localization[c].id)return this.localization[c].message;return b},DisplayError:function(b){this.ShowMessage({text:b,backgroundColor:a.dom.UIconfig.headerColor,icon:16,delay:5E3})},ShowMessage:function(b){var c=dvJQuery(this.dom.infoDiv),
e=dvJQuery(this.dom.infoMessage);e.css("font-size",b.fontSize?b.fontSize:"130%");e.css("font-weight",b.fontWeight?b.fontWeight:"normal");"dv-pspdfkitlight"===a.dom.getTheme()&&e.css("font-size",b.fontSize?b.fontSize:"100%");e.css("text-decoration",b.textDecoration?b.textDecoration:"none");e.css("text-transform",b.textTransform?b.textTransform:"none");e.css("height",b.messageBoxHeight?b.messageBoxHeight:a.dom.UIconfig.defaultMessageBoxHeight);b.isHtmlText?e.html(b.text):e.text(b.text);c.find(".message_icon").hide();
var g=null;switch(b.icon){case 0:b.customIcon&&c.find(".message_icon_custom").html(b.customIcon).css("display","inline-block");break;case 16:c.find(".message_icon_error").css("display","inline-block");"dv-pspdfkitlight"===a.dom.getTheme()&&(g="#FFECEA");break;case 32:c.find(".message_icon_question").css("display","inline-block");break;case 48:c.find(".message_icon_warning").css("display","inline-block");"dv-pspdfkitlight"===a.dom.getTheme()&&(g="#FFEBD3");break;case 64:c.find(".message_icon_info").css("display",
"inline-block");"dv-pspdfkitlight"===a.dom.getTheme()&&(g="rgba(29, 78, 168, 0.06)");break;case 128:c.find(".message_icon_ok").css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&(g="#EFFFDF")}"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?(c.css("background-color",b.backgroundColor?b.backgroundColor:a.dom.UIconfig.headerColor),e.css("color",b.fontColor?b.fontColor:"#FFFFFF")):(c.css("background-color",null===g?a.dom.UIconfig.notificationBackgroundColor:g),e.css("color",
a.dom.UIconfig.notificationTextColor));c.finish().slideDown(b.slideDown?b.slideDown:300).delay(b.delay?b.delay:2500).slideUp(b.slideUp?b.slideUp:300)},DisplayPendingActionNotification:function(){a.ajax.pendingRequestsWithIndicator++;1==a.ajax.pendingRequestsWithIndicator&&a.dom.UIconfig.showLoadingSpinner&&dvJQuery(this.dom.pendingActionDiv).show()},HidePendingActionNotification:function(){a.ajax.pendingRequestsWithIndicator--;0>=a.ajax.pendingRequestsWithIndicator&&(a.dom.UIconfig.showLoadingSpinner&&
dvJQuery(this.dom.pendingActionDiv).hide(),a.ajax.pendingRequestsWithIndicator=0)},currentOpennedForm:null,DisplayDialogForm:function(b,c,e,g,k,p){b.dvDialog({dialogClass:"dv-main",appendTo:dvJQuery(a.dom.mainArea),minWidth:"dv-pspdfkitlight"===a.dom.getTheme()?300+a.dom.sbWidth:520+a.dom.sbWidth,maxHeight:dvJQuery(a.dom.controlArea).height(),position:{my:"center",at:"center",of:dvJQuery(a.dom.mainArea)},title:c,resizable:!1,draggable:!0,create:function(n,w){null!=e&&"function"==typeof e&&e();dvJQuery(this).css("overflow-x",
"hidden");dvJQuery(this).css("overflow-y","auto");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?(dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor),dvJQuery(this).parent().find(".dvUi-dialog-spacer").css("background-color",a.dom.UIconfig.miscBorderColor),dvJQuery(this).parent().css("border","1px solid "+a.dom.UIconfig.strokeColor),dvJQuery(this).parent().find('input[type="text"]:not(".dv-color")').css("border-color",a.dom.UIconfig.strokeColor)):
"dv-pspdfkitlight"===a.dom.getTheme()?(dvJQuery(this).parent().css("border","none"),dvJQuery(this).parent().css("border-radius","4px"),dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color","transparent"),dvJQuery(this).parent().find(".dvUi-widget-header").css("border-radius","4px 4px 0 0")):(dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.dialogHeaderBackgroundColor),dvJQuery(this).parent().css("border","1px solid black"),dvJQuery(this).parent().find('input[type="text"]:not(".dv-color")').css("border-color",
a.dom.UIconfig.miscBorderColor));dvJQuery(this).parent().css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().css("background-color",a.dom.UIconfig.panelBackColor);dvJQuery(this).parent().find('input[type="text"]').css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find("select").css("border-color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find("select").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-content").css("color",a.dom.UIconfig.strokeColor);
dvJQuery(this).parent().find(".dvUi-widget-content a").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dvUi-widget-header a").css("color",a.dom.UIconfig.strokeColor);dvJQuery(this).parent().find(".dv-annotationOptionText:not(:last-child)").css("border-right","1px solid "+a.dom.UIconfig.miscBorderColor);"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(this).parent().find(".dv-annotationOptionText:not(:last-child)").css("border-right","none")},open:function(n,w){var B=this;a.currentOpennedForm=
b;"legacy"!==a.dom.mainArea.attributes["data-theme-layout"].value&&(dvJQuery(this).parent().find("input").css("background-color",a.dom.UIconfig.inputBackgroundColor),dvJQuery(this).parent().find("input, .dvUi-button-text-only").css("color",a.dom.UIconfig.textColor),"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",a.dom.UIconfig.headerColor):dvJQuery(this).parent().find(".dvUi-widget-header").css("background-color",
a.dom.UIconfig.dialogHeaderBackgroundColor),dvJQuery(this).parent().find(".dvUi-dialog-spacer").css("background-color",a.dom.UIconfig.miscBorderColor),dvJQuery(this).parent().find("fieldset").css("border-color",a.dom.UIconfig.miscBorderColor));var I=-1;dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button").each(function(){I++});if(-1<I)for(n=0;n<=I;n++)n===I?dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+n+")").focus():dvJQuery(this).closest(".dvUi-dialog").find(".dvUi-dialog-buttonpane button:eq("+
n+")").blur();null!=g&&"function"==typeof g&&g();dvJQuery(this).parent().find(".dv-jquerySelect").each(function(E){dvJQuery(this).dvSelectmenu({change:function(){dvJQuery(this).trigger("change")}});dvJQuery(this).hasClass("dv-jquerySelectOverflow")&&dvJQuery(this).dvSelectmenu("menuWidget").addClass("overflow")});dvJQuery(this).parent().find(".dv-jqueryRadio").each(function(E){dvJQuery(this).dvButtonset({setActive:function(){dvJQuery(B).parent().find(".dvUi-button").css("border","1px solid transparent");
dvJQuery(B).parent().find(".dvUi-state-active").css("border","1px solid "+a.dom.UIconfig.miscBorderColor)}})});dvJQuery(this).parent().find(".dvUi-selectmenu-button").css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".dvUi-selectmenu-menu .dvUi-menu").css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).parent().find(".dvUi-selectmenu-menu").css("background-color",a.dom.UIconfig.inputBackgroundColor);dvJQuery(this).parent().find(".dvUi-selectmenu-button").click(function(){dvJQuery(".dvUi-selectmenu-menu .dvUi-menu-item").hover(function(){dvJQuery(this).css("background-color",
a.dom.UIconfig.miscBorderColor)},function(){dvJQuery(this).css("background-color","")})});dvJQuery(this).parent().find(".dv-color").each(function(){dvJQuery(this).minicolors({control:"hue",defaultValue:dvJQuery(this).val(),inline:!1,letterCase:"uppercase",opacity:!0,position:"bottom left"})});"legacy"!==a.dom.mainArea.attributes["data-theme-layout"].value?(dvJQuery(this).parent().find(".btn-valid").css("background-color",a.dom.UIconfig.primaryButtonColor),dvJQuery(this).parent().find(".btn-valid").css("color",
a.dom.UIconfig.primaryButtonTextColor),dvJQuery(this).parent().find(".btn-valid").hover(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.primaryButtonHoverColor);dvJQuery(this).css("color",a.dom.UIconfig.primaryButtonTextHoverColor)},function(){dvJQuery(this).css("background-color",a.dom.UIconfig.primaryButtonColor);dvJQuery(this).css("color",a.dom.UIconfig.primaryButtonTextColor)})):(dvJQuery(this).parent().find(".btn-valid").css("background-color",a.dom.UIconfig.primaryButtonColor),
dvJQuery(this).parent().find(".btn-valid .dvUi-button-text").css("color",a.dom.UIconfig.primaryButtonTextColor),dvJQuery(this).parent().find(".btn-valid").hover(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.primaryButtonHoverColor)},function(){dvJQuery(this).css("background-color",a.dom.UIconfig.primaryButtonColor)}));dvJQuery(a.dom.modalOverlayArea).show()},close:function(n,w){a.currentOpennedForm=null;null!=k&&"function"==typeof k&&k();dvJQuery(a.dom.modalOverlayArea).hide();dvJQuery(this).parent().find(".dv-jquerySelect").each(function(){dvJQuery(this).dvSelectmenu("destroy")});
dvJQuery(this).parent().find(".dv-jqueryRadio").each(function(){dvJQuery(this).dvButtonset("destroy")});dvJQuery(this).parent().find(".dv-color").each(function(){dvJQuery(this).minicolors("destroy")})},buttons:p});b.dvDialog("option","position",{my:"center",at:"center",of:dvJQuery(a.dom.mainArea)})},CloseDialogForm:function(){a.currentOpennedForm&&(dvJQuery(a.currentOpennedForm).dvDialog("destroy"),dvJQuery(a.dom.modalOverlayArea).hide(),a.currentOpennedForm=null);a.Internal.FilePassword.destroyDialog()},
l10n:null,cache:{Annots:null,AnnotsComments:null,AnnotsRedactionReferences:null,Pages:null,canvas:null,pageCanvasSize:null,pageCanvasZoom:0,viewRotation:0,addedSelectedTextContextMenuItem:[],emptyCanvas:function(){a.dom.SelectedTextRegions.clear();if(a.dom.viewerArea.hasChildNodes())for(var b=a.dom.viewerArea.children.length-1;0<=b;b--){var c=a.dom.viewerArea.children[b];c!=a.dom.panDiv&&a.dom.viewerArea.removeChild(c)}if(null!=this.Pages)for(b=0;b<this.Pages.length;b++)this.Pages[b].drawn=!1,this.Pages[b].drawnPreview=
!1},getPageCanvas:function(b){if(null!=this.canvas)for(var c=0;c<this.canvas.length;c++)if(this.canvas[c].pageNo==b)return this.canvas[c];return null},getPageObject:function(b){if(null!=this.Pages)for(var c=0;c<this.Pages.length;c++)if(this.Pages[c].pageNo==b)return this.Pages[c];return null},clearCachedPages:function(){this.Pages=null;a.ajax.pendingPageViewRequests=null;"function"==typeof CollectGarbage&&CollectGarbage()},clearCachedBitmap:function(){if(null!=this.Pages)for(var b=0;b<this.Pages.length;b++)this.Pages[b].bitmap=
null,this.Pages[b].drawn=!1,this.Pages[b].drawnPreview=!1;a.ajax.pendingPageViewRequests=null;"function"==typeof CollectGarbage&&CollectGarbage()},clearBitmap:function(b){if(null!==this.Pages)for(var c=0;c<this.Pages.length;c++)if(this.Pages[c].pageNo===b){this.Pages[c].bitmap=null;break}},clearPage:function(b){if(null!==this.Pages)for(var c=0;c<this.Pages.length;c++)if(this.Pages[c].pageNo===b){this.Pages[c].bitmap=null;this.Pages[c].drawn=!1;this.Pages[c].drawnPreview=!1;break}c=this.getPageCanvas(b);
if(null!=c)for(var e=0;e<c.canvas.length;e++){var g=c.canvas[e].tile;null!=g&&(g.style.backgroundColor="white",g.getContext("2d").clearRect(0,0,g.width,g.height))}a.Internal.Annotations.removePageAnnots(b);a.Internal.FormFields.removePageFormFields(b);a.dom.thumbnailArea&&(b=a.Internal.Thumbnails.getThumbnailFromPageNo(b),null!=b&&(b.attr("data-loaded","false"),b.attr("data-loading","false")))},cachePage:function(b){null==this.Pages&&(this.Pages=[]);this.Pages.push(b)},cachePageBitmap:function(b,
c,e,g,k){var p=new Image;p.src="data:"+c+";base64,"+e;if(null!=this.Pages)for(c=0;c<this.Pages.length;c++)if(this.Pages[c].pageNo==b){this.Pages[c].drawn=!1;this.Pages[c].drawnPreview=!1;this.attachImageToPage(this.Pages[c],p,g,k);return}b={pageNo:b,drawn:!1,drawnPreview:!1};this.attachImageToPage(b,p,g,k);this.cachePage(b)},attachImageToPage:function(b,c,e,g){b.bitmap=c;b.scale=e;b.hasTransparency=g}},ajax:{sessionID:S,requestNo:0,pageViewRequestNo:0,thumbnailRequestNo:0,transferID:0,downloading:!1,
pendingRequests:0,pendingPageViewRequests:null,pendingRequestsWithIndicator:0,latestSelectedPage:0,contextID:x,customHeaders:ka,AjaxRequestTimeout:ma,hasPendingPageViewRequests:function(){return null!=this.pendingPageViewRequests&&0<this.pendingPageViewRequests.length},SetNewServerCtx:function(b,c,e,g){var k=a.GetCurrentPage(),p=a.GetCurrentZoom(),n=a.ajax.contextID,w=a.serverCtx.documentLoaded,B=a.IsZoomSynchronized();null===b?(a.resetServerCtx(),a.ajax.contextID=""):(a.serverCtx=b,a.ajax.contextID=
b.contextID);var I=null!==b&&b.documentLoaded&&n!==a.ajax.contextID||null!==b&&b.reloadDocument,E=null!=b&&b.documentLoaded;p=p!=a.GetCurrentZoom();n=w&&a.ajax.contextID!==n;w=a.dom.selectedSnapin;var V=!1;if(null===b||I||n||a.serverCtx.reloadDocument)V=!0;V&&(a.cache.emptyCanvas(),a.Internal.Thumbnails.removeAllThumbnails(),a.dom.bookmarksArea&&dvJQuery(a.dom.bookmarksTree).empty(),a.Internal.Text.clearSelection(),a.ClearSearch(),a.Internal.FormFields.removeAll(),a.Internal.Annotations.removeAll(),
a.refreshCommentsPanel(),a.cache.Pages=null);if(n&&(I||(null!=a.dom.pageNavBox&&(a.dom.pageNavBox.style.width="36px"),null!==a.dom.pageNavBoxMobile&&(a.dom.pageNavBoxMobile.style.width="36px"),a.dom.UIconfig.collapseSnapinOnDocumentClosed&&a.SetSnapinsPanelVisibility(!1)),a.callbacks.onDocumentClosed))a.callbacks.onDocumentClosed();p&&!1===B&&(a.serverCtx.vScrollbarVal=a.Internal.Coordinates.getViewerScrollTop(),a.serverCtx.hScrollbarVal=a.Internal.Coordinates.getViewerScrollLeft());I&&(a.cache.pageCanvasSize=
null,a.dom.viewerContextMenuRemoveTextButton&&a.serverCtx.hasTextRemovalSupport?dvJQuery(a.dom.viewerContextMenuRemoveTextButton).show():a.dom.viewerContextMenuRemoveTextButton&&dvJQuery(a.dom.viewerContextMenuRemoveTextButton).hide(),a.dom.viewerContextMenuRedactButton&&a.serverCtx.hasRedactionSupport?dvJQuery(a.dom.viewerContextMenuRedactButton).show():a.dom.viewerContextMenuRedactButton&&dvJQuery(a.dom.viewerContextMenuRedactButton).hide());a.UpdateUI(I,e,null!==b,n,!1,!1,g);null!==b&&b.hasUserPassword&&
b.newDocument&&a.Internal.FilePassword.createAndShowDialog(function(ba){""==ba||null==ba?a.Internal.FilePassword.showError(a.Localize("dialog_password_missing")):a.Internal.FilePassword.setPassword(ba,!0)},function(){a.Internal.FilePassword.destroyDialog()});I&&a.IsSnapinsPanelVisible()&&(null===a.dom.selectedSnapin||a.SelectSnapIn(w,!0)!==DocuViewareAPI.Status.OK)&&a.SelectFirstAvailableSnapin(null);b=k!==a.GetCurrentPage();if(I||b)a.Internal.Annotations.unselectAll(),a.dom.pageCountBox&&a.dom.pageNavBox&&
(a.dom.pageCountBox.innerHTML=a.GetPageCount(),a.dom.pageNavBox.value=a.GetCurrentPage()),a.dom.pageCountBoxMobile&&a.dom.pageNavBoxMobile&&(a.dom.pageCountBoxMobile.innerHTML=a.GetPageCount(),a.dom.pageNavBoxMobile.value=a.GetCurrentPage()),a.Internal.Redaction.disableAddRedactionMarksMode();if(!c){if(I&&(a.dom.adjustPageNavBoxWidthForMaxPages(a.GetPageCount()),a.callbacks.onNewDocumentLoaded))a.callbacks.onNewDocumentLoaded();if(b&&a.callbacks.onPageChanged)a.callbacks.onPageChanged();if(p&&(a.dom.updateZoomUI(a.GetCurrentZoom(),
E),a.callbacks.onZoomChanged))a.callbacks.onZoomChanged()}null!=a.dom.previousPageButton&&(a.dom.previousPageButton.disabled=1>=a.GetCurrentPage()||!E);null!=a.dom.previousPageButtonMobile&&(a.dom.previousPageButtonMobile.disabled=1>=a.GetCurrentPage()||!E);null!=a.dom.nextPageButton&&(a.dom.nextPageButton.disabled=a.GetCurrentPage()>=a.GetPageCount()||!E);null!=a.dom.nextPageButtonMobile&&(a.dom.nextPageButtonMobile.disabled=a.GetCurrentPage()>=a.GetPageCount()||!E);null!=a.dom.firstPageButtonMobile&&
(a.dom.firstPageButtonMobile.disabled=1>=a.GetCurrentPage()||!E);null!=a.dom.lastPageButtonMobile&&(a.dom.lastPageButtonMobile.disabled=a.GetCurrentPage()>=a.GetPageCount()||!E);null!=a.dom.rotateLeftButton&&(a.dom.rotateLeftButton.disable=!E);null!=a.dom.rotateRightButton&&(a.dom.rotateRightButton.disable=!E);null!=a.dom.rotateLeftButtonMobile&&(a.dom.rotateLeftButtonMobile.disable=!E);null!=a.dom.rotateRightButtonMobile&&(a.dom.rotateRightButtonMobile.disable=!E)},PostCustomServerAction:function(b,
c,e,g,k){if(a.waitForInit)return setTimeout(function(){a.ajax.PostCustomServerAction(b,c,e,g,k)},100),DocuViewareAPI.Status.OK;if(a.hasPendingAction())return DocuViewareAPI.Status.DocuViewarePendingAction;var p={data:{actionName:c,args:e,clientConfiguration:a.getConfig()},success:function(w){"string"===typeof w&&(w=JSON.parse(w));a.ajax.HandleServerContextResponse(w,!1,!0);g&&g(w.result)},error:function(){k&&k()}},n={};n.customactionname=c;return a.ajax.PostBaseRequest("customaction",p,!b,!0,n)},
PostAjaxRequestForLocalService:function(b){b.cache=!1;b.processData=!1;b.timeout||(b.timeout=a.ajax.AjaxRequestTimeout);b.crossDomain=!0;b.type="POST";b.contentType="application/json";b.dataType="json";dvJQuery.ajax(b)},PostAjaxRequestForDocuViewareAction:function(b,c){null===b.error&&alert("Please specify an error object!");b.cache=!1;b.processData=!1;this.customHeaders&&"null"!==this.customHeaders&&"undefined"!==this.customHeaders&&(ka=this.customHeaders,dvJQuery.each(this.customHeaders,function(g,
k){k&&""!=k||delete ka[g]}),dvJQuery.isEmptyObject(ka)||(b.headers=ka));null!=c&&(null==b.headers&&(b.headers={}),dvJQuery.extend(b.headers,c));b.timeout||(b.timeout=a.ajax.AjaxRequestTimeout);b.crossDomain=!0;b.type="POST";b.dataType="json";var e=b.success;b.success=function(g){null!=e&&e(g)};dvJQuery.ajax(b)},PostBaseRequest:function(b,c,e,g,k){if(!g&&a.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;null!=c.beforeStart&&c.beforeStart();2==a.events.mouseMode&&a.events.isDrawingPath&&
a.ExitAnnotationDrawingMode();this.pendingRequests+=1;this.requestNo+=1;null==c.data&&(c.data={});c.data.vScrollbarVal=a.Internal.Coordinates.getViewerScrollTop();c.data.vScrollbarMax=a.Internal.Coordinates.getViewerScrollTopMax();c.data.hScrollbarVal=a.Internal.Coordinates.getViewerScrollLeft();c.data.hScrollbarMax=a.Internal.Coordinates.getViewerScrollLeftMax();c.data.sessionID=this.sessionID;c.data.contextID=this.contextID;c.data.requestNo=this.requestNo;a.DisplayPendingActionNotification();null==
k&&(k={});k.docuviewarerequest=b;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!e,data:JSON.stringify({requestName:b,requestData:c.data}),contentType:"application/json",success:function(p){--a.ajax.pendingRequests;a.HidePendingActionNotification();c.success&&c.success(p)},error:function(p){a.ajax.HandleError(p);--a.ajax.pendingRequests;null!=c.error&&c.error(p)},complete:function(p){null!=c.complete&&c.complete(p)}},k);return DocuViewareAPI.Status.OK},
HandleError:function(b){if(b)if(b.reloadPage)location.reload();else{if(null!=b.responseType&&"DocuVieware"==b.responseType){var c="";null!=b.action&&""!=b.action&&(c+=b.action+": ");c+=b.message;console.log("DocuVieware: "+c);b.throwError&&a.DisplayError(c)}else null!=b.readyState&&null!=b.statusText&&(c="DocuVieware XMLHttpRequest error.\nStatus: "+(b.status+"."),c+="\nReadyState: ",c=0==b.readyState?c+"uninitialized.":1==b.readyState?c+"loading.":2==b.readyState?c+"loaded.":3==b.readyState?c+"interactive.":
4==b.readyState?c+"completed.":c+(b.readyState+"."),c+="\nDescription: "+b.statusText+".",null!=b.responseText&&""!=b.responseText&&(c+="\nResponse text: "+b.responseText),"timeout"!=b.statusText&&null!=b.status&&"0"==b.status&&null!=b.readyState&&0==b.readyState?a.debug&&console.log(c):(console.log(c),a.debug&&alert(c))),dvJQuery(a.dom.mainSpinner).hide(),a.HidePendingActionNotification();b.resetClientUI&&a.ClearUI();if(1==b.reloadServerContext)a.events.onLoad(!0)}},HandleServerContextResponse:function(b,
c,e,g){if(b&&b.status==DocuViewareAPI.Status.OK){var k=a.GetCurrentPage();b.message&&a.ShowMessage(b.message);if(b.contextID<a.ajax.contextID)return;a.ajax.SetNewServerCtx(b,g,c);!e||k==a.GetCurrentPage()&&a.GetCurrentPage()==a.GetLastPageNoRequest()||(a.ajax.latestSelectedPage=a.GetCurrentPage(),a.EnsureCurrentPageVisibility());return!0}a.ajax.HandleError(b);return!1},SetCustomHeaders:function(b,c){function e(k){a.ajax.customHeaders=c?Object.assign({},a.ajax.customHeaders,k):k}if(Array.isArray(b)){var g=
{};try{g=Object.fromEntries(b)}catch(k){return DocuViewareAPI.Status.GenericError}e(g)}else if("string"===typeof b){g={};try{g=JSON.parse(b)}catch(k){return DocuViewareAPI.Status.GenericError}e(g)}else if("object"===typeof b)e(b);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK}},callbacks:{onFileOpenSuccess:null,onFileOpenError:null,onURIOpenSuccess:null,onURIOpenError:null,onPageChanged:null,onRotationChanged:null,onAnnotationSelectedStateChanged:null,onAnnotationAdded:null,
onAnnotationEdited:null,onAnnotationDeleted:null,onAnnotationMouseEnter:null,onAnnotationMouseLeave:null,onAnnotationMoved:null,onCommentAdded:null,onCommentEdited:null,onCommentDeleted:null,onFormFieldChanged:null,onZoomChanged:null,onNewDocumentLoaded:null,onDocumentClosed:null,onDocumentPrinted:null,onDocumentSaved:null,onDocumentSigned:null,onTwainAcquisitionDialogAcquireButtonClick:null,onTwainAcquisitionDialogCancelButtonClick:null,onThumbnailsOrderChanged:null,onTextSelected:null,onTextUnselected:null,
onTextAnnotated:null,onAreaSelected:null,onFullscreenModeChanged:null,onThumbnailsSnapInSelected:null,onBookmarksSnapInSelected:null,onSearchSnapInSelected:null,onAnnotationsSnapInSelected:null,onCommentsSnapInSelected:null,onSnapInPanelResized:null,onSnapInPanelToggle:null,onRedactionMarksApplied:null,onViewerScroll:null,onURINavigation:null,onUnknownLinkNavigation:null,onAttachmentClick:null,onPageDeleted:null,onDocuViewareControlLoaded:a&&a.preload&&a.preload.events&&a.preload.events.onDocuViewareControlLoaded?
a.preload.events.onDocuViewareControlLoaded:null},serverCtx:{},dom:{getViewerContainer:function(){return document.getElementById("viewerContainer"+a.uniqueID)},getTheme:function(){return a.dom.mainArea.attributes["data-theme"]?a.dom.mainArea.attributes["data-theme"].value:null},zindexManager:{getFirstAnnotZindex:function(){return 65535},getFirstFormFieldZindex:function(){return 65535},getSelectionAreaZindex:function(){return 16777271},getFreehandDrawingCanvasZindex:function(){return 16777271},getMagnifierZindex:function(){return 16777271}},
visibleToolbar:DocuViewareAPI.Toolbar.None,enableAnnotEditionOnDblClick:!0,selectedAnnotation:null,selectedSnapin:null,isLoadFromUriDialogVisible:!1,sbWidth:DocuViewareUtilities.getScrollbarWidth(),toolbarLogo:document.getElementById("docuViewareLogo"+t),mobileToolbarArea:document.getElementById("mobileToolbar"+t),mobileToolbarTop:document.getElementById("mobileToolbarTop"+t),mobileToolbarContainer:document.getElementById("mobileToolbarContainer"+t),subMenuZoomModeMobile:document.getElementById("subMenuZoomModeMobile"+
t),subMenuMouseModeMobile:document.getElementById("subMenuMouseModeMobile"+t),pageNavBoxMobile:document.getElementById("pageNavBoxMobile"+t),pageCountBoxMobile:document.getElementById("pageCountBoxMobile"+t),openFromFileButtonMobile:document.getElementById("openFromFileButtonMobile"+t),twainAcquisitionButtonMobile:document.getElementById("twainAcquisitionButtonMobile"+t),fullscreenButtonMobile:document.getElementById("fullscreenButtonMobile"+t),singlePageModeButtonMobile:document.getElementById("singlePageModeButtonMobile"+
t),panMouseModeButtonMobile:document.getElementById("panMouseModeButtonMobile"+t),selectMouseModeButtonMobile:document.getElementById("selectMouseModeButtonMobile"+t),zoomAreaMouseModeButtonMobile:document.getElementById("zoomAreaMouseModeButtonMobile"+t),openfile:document.getElementById("openfile"+t),twainAcquisitionButton:document.getElementById("twainAcquisitionButton"+t),openFromFileButton:document.getElementById("openFromFileButton"+t),rotateLeftButton:document.getElementById("rotateLeftButton"+
t),rotateRightButton:document.getElementById("rotateRightButton"+t),rotateLeftButtonMobile:document.getElementById("rotateLeftButtonMobile"+t),rotateRightButtonMobile:document.getElementById("rotateRightButtonMobile"+t),zoomInButton:document.getElementById("zoomInButton"+t),zoomInButtonMobile:document.getElementById("zoomInButtonMobile"+t),zoomOutButton:document.getElementById("zoomOutButton"+t),zoomOutButtonMobile:document.getElementById("zoomOutButtonMobile"+t),zoomModeButton:document.getElementById("zoomModeButton"+
t),zoomButtonValue:document.getElementById("zoomButtonValue"+t),mouseModeButton:document.getElementById("mouseModeButton"+t),subMenuZoomMode:document.getElementById("subMenuZoomMode"+t),subMenuMouseMode:document.getElementById("subMenuMouseMode"+t),subMenuPageViewMode:document.getElementById("subMenuPageViewMode"+t),pendingActionDiv:document.getElementById("pendingActionDiv"+t),openFromUriArea:document.getElementById("openuri"+t),openFromUriButton:document.getElementById("openFromUriButton"+t),singlePageModeButton:document.getElementById("singlePageModeButton"+
t),fullscreenButton:document.getElementById("fullscreenButton"+t),magnifierButton:document.getElementById("magnifierButton"+t),magnifierTemplateDiv:document.getElementById("magnifierTemplateDiv"+t),panMouseModeButton:document.getElementById("panMouseModeButton"+t),selectMouseModeButton:document.getElementById("selectMouseModeButton"+t),zoomAreaMouseModeButton:document.getElementById("zoomAreaMouseModeButton"+t),pageViewModeSingleButton:document.getElementById("singlePageButton"+t),pageViewModeMutipleButton:document.getElementById("multiplePageButton"+
t),infoDiv:document.getElementById("infoDiv"+t),infoMessage:document.getElementById("infoMessage"+t),addressBar:document.getElementById("openuriinput"+t),mainArea:document.getElementById("main"+t),containerArea:document.getElementById(t),mainSpinner:document.getElementById("mainSpinner"+t),mainSpinnerContent:document.getElementById("mainSpinnerContent"+t),leftSideArea:document.getElementById("leftside"+t),leftSideResizeBar:document.getElementById("leftSideResizeBar"+t),snapinButtonStrip:document.getElementById("snapinButtonStrip"+
t),leftsideContainer:document.getElementById("leftsideContainer"+t),leftSideContainerPanelsArea:document.getElementById("leftsideContainerPanels"+t),snapinsHeader:document.getElementById("snapinsHeader"+t),snapinTabControl:document.getElementById("leftsidePanels"+t),snapinsHeaderLabel:document.getElementById("snapinsHeaderLabel"+t),thumbnailArea:document.getElementById("thumbnailsPanel"+t),commentsArea:document.getElementById("commentsPanel"+t),commentsAuthorInput:document.getElementById("commentAuthorInput"+
t),commentsSearchArea:document.getElementById("commentsContainer"+t),commentsSearchValueInput:document.getElementById("commentsSearchValueInput"+t),commentsSearchClearResultsButton:document.getElementById("commentsSearchClearResultsButton"+t),commentsSortBySelect:document.getElementById("commentsSortBySelect"+t),commentsSearchActionContainerOverlayDisable:document.getElementById("commentsSearchActionContainerOverlayDisable"+t),commentsSortBySelectContainer:document.getElementById("commentsSortBySelectContainer"+
t),commentsContainer:document.getElementById("commentsContainer"+t),commentAnswerBox:document.getElementById("commentAnswerBox"+t),commentContentBox:document.getElementById("commentContentBox"+t),commentStatusBox:document.getElementById("commentStatusBox"+t),commentMessageInput:document.getElementById("commentMessageInput"+t),commentAnswerInput:document.getElementById("commentAnswerInput"+t),commentStatusSelect:document.getElementById("commentStatusSelect"+t),commentsCollapseExpandAllButton:document.getElementById("commentsCollapseExpandAllButton"+
t),bookmarksArea:document.getElementById("bookmarksPanel"+t),bookmarksTree:document.getElementById("bookmarksTree"+t),searchArea:document.getElementById("searchPanel"+t),searchPanelForm:document.getElementById("searchPanelForm"+t),searchValueInput:document.getElementById("searchValueInput"+t),searchCaseSensitiveInput:document.getElementById("searchCaseSensitiveInput"+t),searchAnyWordInput:document.getElementById("searchAnyWordInput"+t),fuzzySearchInput:document.getElementById("fuzzySearchInput"+t),
searchPageSelect:document.getElementsByName("searchPageSelect"+t),searchWholeWordInput:document.getElementById("searchWholeWordInput"+t),searchResultsContainer:document.getElementById("searchResultsContainer"+t),searchClearResultsButton:document.getElementById("searchClearResultsButton"+t),annotationsArea:document.getElementById("annotationsPanel"+t),searchResults:document.getElementById("searchResults"+t),viewerArea:document.getElementById("viewer"+t),panDiv:null,controlArea:document.getElementById("control"+
t),toolBarArea:document.getElementById("toolbar"+t),toolbarButtonContainer:document.getElementById("toolbarButtonContainer"+t),pageNavBox:document.getElementById("pageNavBox"+t),previousPageButton:document.getElementById("previousPageButton"+t),nextPageButton:document.getElementById("nextPageButton"+t),firstPageButtonMobile:document.getElementById("firstPageButtonMobile"+t),previousPageButtonMobile:document.getElementById("previousPageButtonMobile"+t),nextPageButtonMobile:document.getElementById("nextPageButtonMobile"+
t),lastPageButtonMobile:document.getElementById("lastPageButtonMobile"+t),pageCountBox:document.getElementById("pageCountBox"+t),dvpassword:document.getElementById("dvpassword"+t),dvpasswordInput:document.getElementById("dvpassword-input"+t),dvpasswordError:document.getElementById("dvpassword-error"+t),annotationsActionButtons:document.getElementById("annotationActionButtons"+t),annotationDialogFormTextInput:document.getElementById("annotation_text_input"+t),annotationDialogFormFontSizeInput:document.getElementById("annotation_font_size_input"+
t),annotationDialogFormForeColorInput:document.getElementById("annotation_fore_color_input"+t),annotationDialogFormFontNameSelect:document.querySelectorAll("select[name='annotation_font_name_select"+t+"']"),annotationDialogFormAlignmentSelect:document.querySelectorAll("input[name='annotation_alignment_select"+t+"']"),annotationDialogFormFontStyleSelect:document.querySelectorAll("select[name='annotation_font_style_select"+t+"']"),annotationDialogFormFontStyleCheckboxContainer:document.getElementById("annotation_font_style_select"+
t),annotationDialogFormContainer:document.getElementById("annotationDialogFormContainer"+t),annotationDialogForm:document.getElementById("annotationDialogForm"+t),annotationActionRemoveConfirm:document.getElementById("annotationActionRemoveConfirm"+t),pageActionRemoveConfirm:document.getElementById("pageActionRemoveConfirm"+t),annotationRemoveConfirmMessage:document.getElementById("annotationRemoveConfirmMessage"+t),pageActionRemoveConfirmMessage:document.getElementById("pageRemoveConfirmMessage"+
t),redactionAddAreasButton:document.getElementById("redactionAddAreas"+t),redactionApplyButton:document.getElementById("redactionApply"+t),redactionsPanel:document.getElementById("redactionsPanel"+t),redactionFill:document.getElementById("redaction_fill"+t),redactionAreaButtonsList:document.getElementById("redactionAreaButtonsList"+t),redactionAreaButtonModel:document.getElementById("redactionAreaButtonModel"+t),redactionAreaFoundText:document.getElementById("redactionAreaFoundText"+t),redactionRemoveAllButton:document.getElementById("redactionRemoveAllButton"+
t),redactionRemoveAllSelectedButton:document.getElementById("redactionRemoveAllSelectedButton"+t),digisignAppearanceMenuToggle:document.getElementById("digisignAppearanceMenuToggle"+t),digisignCertificateMenuToggle:document.getElementById("digisignCertificateMenuToggle"+t),digisignAppearanceMenuContent:document.getElementById("digisignAppearanceMenuContent"+t),digisignCertificateMenuContent:document.getElementById("digisignCertificateMenuContent"+t),digisignAppearanceButtonText:document.getElementById("digisignAppearanceButtonText"+
t),digisignAppearanceButtonImg:document.getElementById("digisignAppearanceButtonImg"+t),digisignAppearanceButtonFreehand:document.getElementById("digisignAppearanceButtonFreehand"+t),digisignAppearanceInputImg:document.getElementById("digisignAppearanceInputImg"+t),digisignAppearancePreview:document.getElementById("digisignAppearancePreview"+t),digisignAppearancePreviewText:document.getElementById("digisignAppearancePreviewText"+t),digisignAppearancePreviewDelete:document.getElementById("digisignAppearancePreviewDelete"+
t),digisignCertificateButton:document.getElementById("digisignCertificateButton"+t),digisignCertificateIconValidate:document.getElementById("digisignCertificateIconValidate"+t),digisignCertificateIconUnvalidate:document.getElementById("digisignCertificateIconUnvalidate"+t),digisignTimeStampButton:document.getElementById("digisignTimeStampButton"+t),digisignTimeStampIconValidate:document.getElementById("digisignTimeStampIconValidate"+t),digisignTimeStampIconUnvalidate:document.getElementById("digisignTimeStampIconUnvalidate"+
t),digisignCertificateDialogForm:document.getElementById("digisignCertificateDialogForm"+t),digisignCertificateName:document.getElementById("digisignCertificateName"+t),digisignInputCertificateFile:document.getElementById("digisign_input_certificate_file"+t),digisignTimeStampDialogForm:document.getElementById("digisignTimeStampDialogForm"+t),digisignCertificateNameContainer:document.getElementById("digisignCertificateNameContainer"+t),digisignCertificateInputContainer:document.getElementById("digisignCertificateInputContainer"+
t),digisignCertificatePasswordContainer:document.getElementById("digisignCertificatePasswordContainer"+t),digisignButtonSubmit:document.getElementById("digisignSubmit"+t),digisignCertificateButtonDelete:document.getElementById("digisignCertificateButtonDelete"+t),digisignTimeStampButtonDelete:document.getElementById("digisignTimeStampButtonDelete"+t),signatureTextDialogForm:document.getElementById("signatureTextDialogForm"+t),signatureDialogFormTextInput:document.getElementById("signature_text_input"+
t),signatureDialogFormFontSizeInput:document.getElementById("signature_font_size_input"+t),signatureDialogFormForeColorInput:document.getElementById("signature_fore_color_input"+t),signatureDialogFormFontNameSelect:document.querySelectorAll("select[name='signature_font_name_select"+t+"']"),signatureDialogFormAlignmentSelect:document.querySelectorAll("input[name='signature_alignment_select"+t+"']"),signatureDialogFormFontStyleSelect:document.querySelectorAll("select[name='signature_font_style_select"+
t+"']"),signatureDialogFormFontStyleCheckboxes:document.getElementById("signature_font_style_select"+t),signatureFreehandDialogForm:document.getElementById("signatureFreehandDialogForm"+t),signatureFreehandPad:document.getElementById("signatureFreehandPad"+t),digisignCertificatePasswordInput:document.getElementById("digisign_certificate_password"+t),digisignCertificateCertificateLabel:document.getElementById("digisign_certificate_certificate_label"+t),digisignCertificatePasswordLabel:document.getElementById("digisign_certificate_password_label"+
t),digisignTimestampServerInput:document.getElementById("digisign_timestamp_server"+t),digisignTimestampLoginInput:document.getElementById("digisign_timestamp_login"+t),digisignTimestampPasswordInput:document.getElementById("digisign_timestamp_password"+t),digisignTimestampServerLabel:document.getElementById("digisign_timestamp_server_label"+t),signaturesContainer:document.getElementById("signaturesContainer"+t),drawingModeArea:document.getElementById("drawingMode"+t),modalOverlayArea:document.getElementById("modalOverlayDiv"+
t),commentDialogModalOverlay:document.getElementById("commentDialogModalOverlayDiv"+t),saveDialog:document.getElementById("saveDialog"+t),twainAcquisitionDialog:document.getElementById("twainAcquisitionDialog"+t),twainAcquisitionDialogPanel:document.getElementById("twainAcquisitionDialogPanel"+t),twainAcquisitionDialogAcquireButton:document.getElementById("twainAcquisitionDialogAcquireButton"+t),twainAcquisitionDestinationAppendDocBox:document.getElementById("twainAcquisitionDestinationAppendDocBox"+
t),commentDialog:document.getElementById("commentDialog"+t),printDialog:document.getElementById("printDialog"+t),printPageRangeInput:document.getElementById("printPageRangeInput"+t),printProgressbarDiv:document.getElementById("printProgressbarDiv"+t),printDialogPrintButton:document.getElementById("printDialogPrintButton"+t),copyDialog:document.getElementById("copyDialog"+t),copyTextInput:document.getElementById("copy_text_input"+t),viewerContextMenu:document.getElementById("viewerContextMenu"+t),
viewerContextMenuRedactButton:document.getElementById("viewerContextMenuRedactButton"+t),viewerContextMenuRemoveTextButton:document.getElementById("viewerContextMenuRemoveTextButton"+t),faderArea:document.getElementById("label-fader__"+t),freehandAnnotButton:document.getElementById("annotButtonfreehand"+t),freehandhighlighterAnnotButton:document.getElementById("annotButtonfreehandhighlighter"+t),connectedLinesAnnotButton:document.getElementById("annotButtonconnectedline"+t),polyRulerAnnotButton:document.getElementById("annotButtonpolyruler"+
t),setIconToNode:function(b,c){b=b.cloneNode(!0);c.appendChild(b)},iconCommentOptionEdit:document.getElementById("iconCommentOptionEdit"+t),iconCommentOptionReply:document.getElementById("iconCommentOptionReply"+t),iconCommentStatusApproved:document.getElementById("iconCommentStatusApproved"+t),iconCommentStatusCanceled:document.getElementById("iconCommentStatusCanceled"+t),iconCommentStatusFinished:document.getElementById("iconCommentStatusFinished"+t),iconCommentStatusRejected:document.getElementById("iconCommentStatusRejected"+
t),maxUploadSize:l,packetSize:q,UIconfig:M,singlePageView:null,thumbnailSelectBox:null,thumbnailSelectBoxOrigin:{left:0,top:0},checkLinkAt:function(b,c){if(0===a.Internal.Annotations.selected.length&&null===a.Internal.Annotations.hoveredAnnot){var e=a.Internal.Pages.getVisiblePageNumbers();if(null!=e)for(var g=0;g<e.length;g++){var k=e[g];if(a.Internal.Pages.isPageRendered(k)){var p=a.cache.getPageObject(k);if(null!=p&&null!=p.links||null!=a.cache&&null!=a.cache.Annots&&0<a.cache.Annots.length){function B(I,
E){I={left:96*I.x,top:96*I.y,width:96*I.width,height:96*I.height};a.Internal.Matrix.transformBBox(n.contentMatrix,0,I);I.left+=n.pageLeft;I.top+=n.pageTop;var V=a.dom.viewerArea.getBoundingClientRect(),ba=b-V.left+a.Internal.Coordinates.getViewerScrollLeft();V=c-V.top+a.Internal.Coordinates.getViewerScrollTop();return ba>=I.left&&ba<=I.left+I.width&&V>=I.top&&V<=I.top+I.height?(a.dom.rlink.style.height=I.height+"px",a.dom.rlink.style.width=I.width+"px",a.dom.rlink.style.left=I.left+"px",a.dom.rlink.style.top=
I.top+"px",a.events.overLink=E,!0):!1}var n=a.Internal.Pages.getRenderingState(k);for(k=0;k<p.links.length;k++){var w={x:p.links[k].x,y:p.links[k].y,width:p.links[k].width,height:p.links[k].height};if(B(w,p.links[k]))return!0}if(!a.Internal.Annotations.interactionEnabled&&null!=a.cache.Annots)for(k=0;k<a.cache.Annots.length;k++)if(w={x:a.cache.Annots[k].annotApp.bbox.Left,y:a.cache.Annots[k].annotApp.bbox.Top,width:a.cache.Annots[k].annotApp.bbox.Right-a.cache.Annots[k].annotApp.bbox.Left,height:a.cache.Annots[k].annotApp.bbox.Bottom-
a.cache.Annots[k].annotApp.bbox.Top},B(w,{destPage:0,destUri:a.cache.Annots[k].annotApp.properties.link}))return!0}}}}return!1},handleLinkRectVisibility:function(){a.dom.UIconfig.enableLinkRect&&a.events.overLink?"none"===dvJQuery(a.dom.rlink).css("display")&&a.IsZoomSynchronized()&&(a.dom.rlink.style.display="block",a.events.setCursor()):"block"===dvJQuery(a.dom.rlink).css("display")&&(a.dom.rlink.style.display="none",a.events.setCursor())},adjustPageNavBoxWidthForMaxPages:function(b){null!=a.dom.pageNavBox&&
(a.dom.pageNavBox.style.width=(12*b.toString().length).toString()+"px")},updateSelectedPageFader:function(b,c){if(0!=a.dom.viewerArea.offsetWidth&&0!=a.dom.viewerArea.offsetHeight){var e=dvJQuery(a.dom.faderArea),g=a.Localize("_label__fader_page");g=g.replace("#",c);g=g.replace("@",a.serverCtx.pageCount);e.find("div:first-child").text()!=g&&(e.find("div:first-child").text(g),c=100,g=g.length,15<g&&(c=100/15*g),e.width()!=c&&e.width(c),e.finish().animate({opacity:1},{duration:b,start:function(){e.css("z-index",
16777270)}}).delay(1E3).animate({opacity:0},{duration:800,complete:function(){e.css("z-index","")}}))}},ensureSelectedThumbnailVisibility:function(b){if(a.serverCtx.documentLoaded&&a.dom.thumbnailArea){var c=document.getElementById(a.FindSnapIn("thumbnails").snapInID),e=a.GetLastPageNoRequest();e=a.Internal.Thumbnails.getThumbnailFromPageNo(e);null!=e&&(e=c.scrollTop+Math.floor(e.position().top),e!=c.scrollTop?c.scrollTop=e:b&&a.showVisibleThumbnails())}},updateThumbsStyle:function(b,c){if(c){if(a.dom.thumbnailArea)for(a.Internal.Thumbnails.lastUpdatedPageThumbnail=
a.GetLastPageNoRequest(),c=0;c<a.dom.thumbnailArea.childElementCount;c++){var e=a.dom.thumbnailArea.children[c],g=dvJQuery(e);e=a.Internal.Thumbnails.getThumbnailPage(e);0!==e&&this.resetThumbStyle(g,e==a.GetLastPageNoRequest())}}else a.Internal.Thumbnails.lastUpdatedPageThumbnail!==a.GetLastPageNoRequest()&&(0<a.Internal.Thumbnails.lastUpdatedPageThumbnail&&a.dom.thumbnailArea&&this.updateThumbStyle(a.Internal.Thumbnails.lastUpdatedPageThumbnail),0<a.GetLastPageNoRequest()&&a.dom.thumbnailArea&&
this.updateThumbStyle(a.GetLastPageNoRequest()),a.Internal.Thumbnails.lastUpdatedPageThumbnail=a.GetLastPageNoRequest());b&&this.ensureSelectedThumbnailVisibility(!1)},resetThumbStyle:function(b,c){"dv-pspdfkitlight"===a.dom.getTheme()?b.css({display:"block","border-style":"solid","border-width":"2px",margin:"10px 10px 30px",padding:"4px 0","text-align":"center",position:"relative","border-color":c?a.dom.UIconfig.primaryButtonHoverColor:"transparent","background-color":"transparent","box-shadow":"0px 0px 3px 0px rgba(0, 0, 0, 0.40)"}):
b.css({display:"inline-block","border-style":c?"dotted":"solid","border-width":"1px",margin:"8px 8px 8px 8px",padding:"5px 5px 0px 5px","text-align":"center",position:"relative","border-color":c?a.dom.UIconfig.strokeColor:"transparent","background-color":"transparent"})},updateThumbStyle:function(b){if(a.dom.thumbnailArea){var c=a.Internal.Thumbnails.getThumbnailFromPageNo(b);if(null!=c){var e=c[0].getAttribute("mouse-over");e=null!=e&&"true"===e;var g=a.Internal.Thumbnails.isThumbnailSelected(b);
b=b==a.GetLastPageNoRequest();g?c.addClass("active"):c.removeClass("active");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?c.css({"border-color":e?a.dom.UIconfig.activeSelectedColor:b?a.dom.UIconfig.strokeColor:"transparent","border-style":e?"solid":"dotted","background-color":g?a.dom.UIconfig.activeSelectedBackgroundColor:"transparent"}):"dv-pspdfkitlight"===a.dom.getTheme()?c.css({"border-color":e?a.dom.UIconfig.primaryButtonHoverColor:b?a.dom.UIconfig.primaryButtonHoverColor:
"transparent","border-style":"solid","background-color":"transparent"}):c.css({"border-color":e?a.dom.UIconfig.activeSelectedColor:b?a.dom.UIconfig.miscBorderColor:"transparent","border-style":"solid","background-color":g?a.dom.UIconfig.activeSelectedBackgroundColor:"transparent"})}}},updateResizeBarVisibility:function(){!a.isMobileOrTablet()&&a.IsSnapinsPanelVisible()?("pspdfkit"===a.dom.mainArea.attributes["data-theme-icon"].value?dvJQuery(a.dom.leftSideArea).css("padding-right","0"):dvJQuery(a.dom.leftSideArea).css("padding-right",
"14px"),dvJQuery(a.dom.leftSideResizeBar).css("display","flex")):(dvJQuery(a.dom.leftSideArea).css("padding-right","0"),dvJQuery(a.dom.leftSideResizeBar).css("display","none"))},updateZoomUI:function(b,c){if(a.dom.zoomButtonValue){if(b&&null!==b){var e=100*b;e=1<e?e.toFixed(0):.1<e?e.toFixed(1):.01<e?e.toFixed(2):e.toFixed(3);a.dom.zoomButtonValue.textContent=e+" %"}else a.dom.zoomButtonValue.textContent="- %";null!=a.dom.zoomInButton&&(a.dom.zoomInButton.disabled=b>=a.serverCtx.zoomMax||!c?!0:!1);
null!=a.dom.zoomInButtonMobile&&(a.dom.zoomInButtonMobile.disabled=b>=a.serverCtx.zoomMax||!c?!0:!1);null!=a.dom.zoomOutButton&&(a.dom.zoomOutButton.disabled=b<=a.serverCtx.zoomMin||!c?!0:!1);null!=a.dom.zoomOutButtonMobile&&(a.dom.zoomOutButtonMobile.disabled=b<=a.serverCtx.zoomMin||!c?!0:!1)}},updateHoverBordersOnDisableToggle:function(b){b.style.border="1px solid transparent"},updateSinglePageModeButton:function(){var b=a.dom.singlePageModeButton?dvJQuery(a.dom.singlePageModeButton):null,c=a.dom.singlePageModeButtonMobile?
dvJQuery(a.dom.singlePageModeButtonMobile):null;if(this.singlePageView)b&&(e=null,"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?b.removeClass("button_active"):"dv-pspdfkitlight"===a.dom.getTheme()?e='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M0 3.75H1C1.13807 3.75 1.25 3.86193 1.25 4V20C1.25 20.1381 1.13807 20.25 1 20.25H0V21.75H1C1.9665 21.75 2.75 20.9665 2.75 20V4C2.75 3.0335 1.9665 2.25 1 2.25H0V3.75Z" fill="#2B2E36"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.25 4C4.25 3.0335 5.0335 2.25 6 2.25H18C18.9665 2.25 19.75 3.0335 19.75 4V20C19.75 20.9665 18.9665 21.75 18 21.75H6C5.0335 21.75 4.25 20.9665 4.25 20V4ZM6 3.75C5.86193 3.75 5.75 3.86193 5.75 4V20C5.75 20.1381 5.86193 20.25 6 20.25H18C18.1381 20.25 18.25 20.1381 18.25 20V4C18.25 3.86193 18.1381 3.75 18 3.75H6Z" fill="#2B2E36"/><path d="M23 3.75C22.8619 3.75 22.75 3.86193 22.75 4V20C22.75 20.1381 22.8619 20.25 23 20.25H24V21.75H23C22.0335 21.75 21.25 20.9665 21.25 20V4C21.25 3.0335 22.0335 2.25 23 2.25H24V3.75H23Z" fill="#2B2E36"/></svg>':
"material"===a.dom.mainArea.attributes["data-theme-icon"].value?e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M172.3 388.5h167.2v31.2H172.3v-31.2z"/><path d="M120.9 469V339.1h270.2V469h31.2V308H89.7v161h31.2zm51.4-376.6h167.2v31.2H172.3V92.4z"/><path d="M391.1 43v129.9H120.9V43H89.7v161h332.6V43h-31.2zM89.7 245.6h31.2v31.2H89.7v-31.2zm301.4 0h31.2v31.2h-31.2v-31.2zm-60.3 0H362v31.2h-31.2v-31.2zm-60.3 0h31.2v31.2h-31.2v-31.2zm-60.2 0h31.2v31.2h-31.2v-31.2zm-60.3 0h31.2v31.2H150v-31.2z"/></svg>':
"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&(e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M133.5 43c-26.3 0-47.9 21.6-47.9 47.9v330.2c0 26.3 21.6 47.9 47.9 47.9h245c26.3 0 47.9-21.6 47.9-47.9V90.9c0-26.3-21.6-47.9-47.9-47.9h-245zm0 31.9h245c9 0 16 7 16 16v330.2c0 9-7 16-16 16h-245c-9 0-16-7-16-16V90.9c.1-9 7-16 16-16zm32 53.3c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.5c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.5zm0 74.6c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.5c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.5zm0 74.5c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.5c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.5zm0 74.6c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.5c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.5z"/></svg>'),
e&&(1===b.children().length?b.html(e):(b.children().first().remove(),b.prepend(e)))),c&&(g=null,"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?c.removeClass("button_active"):g="dv-pspdfkitlight"===a.dom.getTheme()?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M0 3.75H1C1.13807 3.75 1.25 3.86193 1.25 4V20C1.25 20.1381 1.13807 20.25 1 20.25H0V21.75H1C1.9665 21.75 2.75 20.9665 2.75 20V4C2.75 3.0335 1.9665 2.25 1 2.25H0V3.75Z" fill="#2B2E36"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.25 4C4.25 3.0335 5.0335 2.25 6 2.25H18C18.9665 2.25 19.75 3.0335 19.75 4V20C19.75 20.9665 18.9665 21.75 18 21.75H6C5.0335 21.75 4.25 20.9665 4.25 20V4ZM6 3.75C5.86193 3.75 5.75 3.86193 5.75 4V20C5.75 20.1381 5.86193 20.25 6 20.25H18C18.1381 20.25 18.25 20.1381 18.25 20V4C18.25 3.86193 18.1381 3.75 18 3.75H6Z" fill="#2B2E36"/><path d="M23 3.75C22.8619 3.75 22.75 3.86193 22.75 4V20C22.75 20.1381 22.8619 20.25 23 20.25H24V21.75H23C22.0335 21.75 21.25 20.9665 21.25 20V4C21.25 3.0335 22.0335 2.25 23 2.25H24V3.75H23Z" fill="#2B2E36"/></svg>':
'<svg viewBox="0 0 512 512" width="100%" height="100%"><path class="dv-icon-accent-color" d="M386.5 327.5H125.9c-5.9 0-10.7-4.8-10.7-10.7s4.8-10.7 10.7-10.7h260.6c5.9 0 10.7 4.8 10.7 10.7s-4.8 10.7-10.7 10.7zM386.5 411.9H125.9c-5.9 0-10.7-4.8-10.7-10.7 0-5.9 4.8-10.7 10.7-10.7h260.6c5.9 0 10.7 4.8 10.7 10.7 0 6-4.8 10.7-10.7 10.7zM264.5 158.7H125.9c-5.9 0-10.7-4.8-10.7-10.7 0-5.9 4.8-10.7 10.7-10.7h138.6c5.9 0 10.7 4.8 10.7 10.7-.1 5.9-4.8 10.7-10.7 10.7zM386.5 243.1H125.9c-5.9 0-10.7-4.8-10.7-10.7s4.8-10.7 10.7-10.7h260.6c5.9 0 10.7 4.8 10.7 10.7s-4.8 10.7-10.7 10.7z"/><path d="M448.8 168.1 290.6 9.4C284.5 3.3 276.5 0 267.9 0H88.4C69.3 0 53.8 18.5 53.8 41.3v429.3c0 22.8 15.5 41.3 34.6 41.3h335.1c19.1 0 34.6-18.5 34.6-41.3v-280c.1-8.5-3.2-16.5-9.3-22.5zm-26.9 10.2-146.2-.2.2-145.7 146 145.9zm1.7 312.4H88.4c-7.1 0-13.3-9.3-13.3-20V41.3c0-10.7 6.2-20 13.3-20h166.5c-.3 1.6-.5 3.2-.5 4.9v151.9c0 11.9 8.8 21.5 19.6 21.5h154c3.2 0 6.2-.9 8.9-2.4v273.4c-.1 10.7-6.3 20.1-13.3 20.1z"/></svg>',
g&&(1===c.children().length?c.html(g):(b.children().first().remove(),b.prepend(g))));else{var e=null;b&&("legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?b.addClass("button_active"):"material"===a.dom.mainArea.attributes["data-theme-icon"].value?e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M170.1 378.7h171.7v-32H170.1v32zm0-90.7h171.7v-32H170.1v32zM85.3 469.3V42.7h224.5l116.8 116.8v309.9H85.3zm208.6-295.4V74.7H117.3v362.7h277.3V173.9H293.9zM117.3 74.7v99.2-99.2 362.7V74.7z"/></svg>':
"dv-pspdfkitlight"===a.dom.getTheme()?e='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M5.75 4V0H4.25V4C4.25 4.9665 5.0335 5.75 6 5.75H18C18.9665 5.75 19.75 4.9665 19.75 4V0H18.25V4C18.25 4.13807 18.1381 4.25 18 4.25H6C5.86193 4.25 5.75 4.13807 5.75 4Z" fill="#2B2E36"/><path d="M5.75 9C5.75 8.86193 5.86193 8.75 6 8.75H18C18.1381 8.75 18.25 8.86193 18.25 9V24H19.75V9C19.75 8.0335 18.9665 7.25 18 7.25H6C5.0335 7.25 4.25 8.0335 4.25 9V24H5.75V9Z" fill="#2B2E36"/></svg>':
"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&(e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M101.5 43c-8.8.1-15.8 7.4-15.7 16.2v127.7c0 26.3 21.6 47.9 47.9 47.9h244.7c26.3 0 47.9-21.6 47.9-47.9V59.2c.1-8.8-6.9-16.1-15.7-16.2-8.8-.1-16.1 6.9-16.2 15.7v128.2c0 9-7 16-16 16H133.7c-9 0-16-7-16-16V59.2c.1-8.8-6.9-16.1-15.7-16.2h-.5zm64.1.2c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.4c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.6zm0 74.5c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.4c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.6zm-31.9 159.6c-26.3 0-47.9 21.6-47.9 47.9v127.7c-.1 8.8 6.9 16.1 15.7 16.2s16.1-6.9 16.2-15.7V325.2c0-9 7-16 16-16h244.7c9 0 16 7 16 16v127.7c-.1 8.8 6.9 16.1 15.7 16.2s16.1-6.9 16.2-15.7V325.2c0-26.3-21.6-47.9-47.9-47.9H133.7zm31.9 85.1c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.4c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.6zm0 74.5c-8.8-.1-16.1 6.9-16.2 15.7-.1 8.8 6.9 16.1 15.7 16.2h181.4c8.8.1 16.1-6.9 16.2-15.7.1-8.8-6.9-16.1-15.7-16.2H165.6z"/></svg>'),
e&&(1===b.children().length?b.html(e):(b.children().first().remove(),b.prepend(e))));if(c){var g=null;"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?c.addClass("button_active"):g="dv-pspdfkitlight"===a.dom.getTheme()?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M5.75 4V0H4.25V4C4.25 4.9665 5.0335 5.75 6 5.75H18C18.9665 5.75 19.75 4.9665 19.75 4V0H18.25V4C18.25 4.13807 18.1381 4.25 18 4.25H6C5.86193 4.25 5.75 4.13807 5.75 4Z" fill="#2B2E36"/><path d="M5.75 9C5.75 8.86193 5.86193 8.75 6 8.75H18C18.1381 8.75 18.25 8.86193 18.25 9V24H19.75V9C19.75 8.0335 18.9665 7.25 18 7.25H6C5.0335 7.25 4.25 8.0335 4.25 9V24H5.75V9Z" fill="#2B2E36"/></svg>':
'<svg viewBox="0 0 512 512" width="100%" height="100%"><path d="M426.7 219.1H85.3c-17.6 0-32-14.4-32-32.1V10.7C53.3 4.8 58.1 0 64 0s10.7 4.8 10.7 10.7V187c0 5.9 4.8 10.8 10.7 10.8h341.3c5.9 0 10.7-4.8 10.7-10.8V10.7C437.3 4.8 442.1 0 448 0s10.7 4.8 10.7 10.7V187c0 17.7-14.4 32.1-32 32.1zM448 512c-5.9 0-10.7-4.8-10.7-10.7V325c0-5.9-4.8-10.8-10.7-10.8H85.3c-5.9 0-10.7 4.8-10.7 10.8v176.4c0 5.9-4.8 10.7-10.7 10.7s-10.7-4.8-10.7-10.7V325c0-17.7 14.4-32.1 32-32.1h341.3c17.6 0 32 14.4 32 32.1v176.4c.2 5.8-4.6 10.6-10.5 10.6z"></path><path class="dv-icon-accent-color" d="M362.7 21.3H149.3c-5.9 0-10.7-4.8-10.7-10.7S143.4 0 149.3 0h213.3c5.9 0 10.7 4.8 10.7 10.7s-4.7 10.6-10.6 10.6zm0 93H149.3c-5.9 0-10.7-4.8-10.7-10.7s4.8-10.7 10.7-10.7h213.3c5.9 0 10.7 4.8 10.7 10.7s-4.7 10.7-10.6 10.7zM362.7 512H149.3c-5.9 0-10.7-4.8-10.7-10.7 0-5.9 4.8-10.7 10.7-10.7h213.3c5.9 0 10.7 4.8 10.7 10.7 0 5.9-4.7 10.7-10.6 10.7zm0-92.9H149.3c-5.9 0-10.7-4.8-10.7-10.7 0-5.9 4.8-10.7 10.7-10.7h213.3c5.9 0 10.7 4.8 10.7 10.7 0 5.9-4.7 10.7-10.6 10.7z"></path></svg>'}g&&
(1===c.children().length?c.html(g):(b.children().first().remove(),b.prepend(g)))}this.updateButtons()},udpateMouseModeButtons:function(b){var c=a.dom.panMouseModeButton?dvJQuery(a.dom.panMouseModeButton):null,e=a.dom.selectMouseModeButton?dvJQuery(a.dom.selectMouseModeButton):null,g=a.dom.zoomAreaMouseModeButton?dvJQuery(a.dom.zoomAreaMouseModeButton):null,k=a.dom.magnifierButton?dvJQuery(a.dom.magnifierButton):null,p=a.dom.panMouseModeButtonMobile?dvJQuery(a.dom.panMouseModeButtonMobile):null,n=
a.dom.selectMouseModeButtonMobile?dvJQuery(a.dom.selectMouseModeButtonMobile):null,w=a.dom.zoomAreaMouseModeButtonMobile?dvJQuery(a.dom.zoomAreaMouseModeButtonMobile):null;c&&c.removeClass("button_active");e&&e.removeClass("button_active");g&&g.removeClass("button_active");k&&k.removeClass("button_active");p&&p.removeClass("button_active");n&&n.removeClass("button_active");w&&w.removeClass("button_active");var B=null;"dv-pspdfkitlight"===a.dom.getTheme()&&1<a.dom.mouseModeButton.childNodes.length&&
(B=dvJQuery(a.dom.mouseModeButton),B.find(":first-child").first().remove());switch(b){case 0:case 1:c&&c.addClass("button_active");p&&p.addClass("button_active");null!==B&&("dv-pspdfkitlight"===a.dom.getTheme()?B.prepend('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="hand"><path id="icon" fill-rule="evenodd" clip-rule="evenodd" d="M9.7499 3.5C9.7499 2.25736 10.7573 1.25 11.9999 1.25C12.8756 1.25 13.6345 1.75032 14.0063 2.48071C14.306 2.33299 14.6432 2.25 14.9999 2.25C16.2425 2.25 17.2499 3.25736 17.2499 4.5V5.37803C17.4845 5.29512 17.7369 5.25 17.9999 5.25C19.2425 5.25 20.2499 6.25736 20.2499 7.5V16C20.2499 19.7279 17.2278 22.75 13.4999 22.75H12.3854C10.6619 22.75 9.00366 22.0907 7.75066 20.9073L1.83124 15.3168C0.786757 14.3303 0.763128 12.6761 1.77901 11.6602C2.72817 10.7111 4.25069 10.6604 5.26089 11.5443L6.7499 12.8472V6C6.7499 4.75736 7.75726 3.75 8.9999 3.75C9.26287 3.75 9.51531 3.79512 9.7499 3.87803V3.5ZM11.2499 11C11.2499 11.4142 10.9141 11.75 10.4999 11.75C10.0857 11.75 9.7499 11.4142 9.7499 11V6C9.7499 5.58579 9.41411 5.25 8.9999 5.25C8.58568 5.25 8.2499 5.58579 8.2499 6V13.7345C8.2499 14.6773 7.13946 15.1812 6.42993 14.5604L4.27313 12.6732C3.85724 12.3093 3.23043 12.3301 2.83967 12.7209C2.42144 13.1391 2.43117 13.8201 2.86117 14.2263L8.7806 19.8168C9.75515 20.7372 11.0449 21.25 12.3854 21.25H13.4999C16.3994 21.25 18.7499 18.8995 18.7499 16V7.5C18.7499 7.08579 18.4141 6.75 17.9999 6.75C17.5857 6.75 17.2499 7.08579 17.2499 7.5V11C17.2499 11.4142 16.9141 11.75 16.4999 11.75C16.0857 11.75 15.7499 11.4142 15.7499 11V4.5C15.7499 4.08579 15.4141 3.75 14.9999 3.75C14.5857 3.75 14.2499 4.08579 14.2499 4.5V11C14.2499 11.4142 13.9141 11.75 13.4999 11.75C13.0857 11.75 12.7499 11.4142 12.7499 11V3.5C12.7499 3.08579 12.4141 2.75 11.9999 2.75C11.5857 2.75 11.2499 3.08579 11.2499 3.5V11Z" fill="#2B2E36"/></g></svg>'):
B.prepend('<svg viewBox="0 0 24 24" width="100%" height="100%"><g clip-path="url(#clip0_332_1330)"> <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0001 0.939453L15.5304 4.46978C15.8233 4.76268 15.8233 5.23755 15.5304 5.53044C15.2376 5.82334 14.7627 5.82334 14.4698 5.53044L12.7501 3.81077V11.2501L20.1895 11.2501L18.4698 9.53044C18.1769 9.23755 18.1769 8.76268 18.4698 8.46978C18.7627 8.17689 19.2375 8.17689 19.5304 8.46978L23.0608 12.0001L19.5304 15.5304C19.2375 15.8233 18.7627 15.8233 18.4698 15.5304C18.1769 15.2375 18.1769 14.7627 18.4698 14.4698L20.1895 12.7501L12.7501 12.7501V20.1895L14.4698 18.4698C14.7627 18.1769 15.2376 18.1769 15.5304 18.4698C15.8233 18.7627 15.8233 19.2375 15.5304 19.5304L12.0001 23.0608L8.46978 19.5304C8.17689 19.2375 8.17689 18.7627 8.46978 18.4698C8.76268 18.1769 9.23755 18.1769 9.53044 18.4698L11.2501 20.1895V12.7501H3.81077L5.53044 14.4698C5.82334 14.7627 5.82334 15.2376 5.53044 15.5304C5.23755 15.8233 4.76268 15.8233 4.46978 15.5304L0.939453 12.0001L4.46978 8.46978C4.76268 8.17689 5.23755 8.17689 5.53044 8.46978C5.82334 8.76268 5.82334 9.23755 5.53044 9.53044L3.81077 11.2501H11.2501V3.81077L9.53044 5.53044C9.23755 5.82334 8.76268 5.82334 8.46978 5.53044C8.17689 5.23755 8.17689 4.76268 8.46978 4.46978L12.0001 0.939453Z" fill="#2B2E36"></path></g><defs><clipPath id="clip0_332_1330"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg>'));
break;case 3:e&&e.addClass("button_active");n&&n.addClass("button_active");null!==B&&("dv-pspdfkitlight"===a.dom.getTheme()?B.prepend('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 4H0.5V2C0.5 1.17157 1.17157 0.5 2 0.5H4V2H2V4ZM22 4H23.5V2C23.5 1.17157 22.8284 0.5 22 0.5H20V2H22V4ZM22 7H23.5V10.5H22V7ZM22 13.5H23.5V17H22V13.5ZM22 20H23.5V22C23.5 22.8284 22.8284 23.5 22 23.5H20V22H22V20ZM2 7H0.5V10.5H2V7ZM2 13.5H0.5V17H2V13.5ZM2 20H0.5V22C0.5 22.8284 1.17157 23.5 2 23.5H4V22H2V20ZM7 22V23.5H10.5V22H7ZM13.5 22V23.5H17V22H13.5ZM17 2V0.5H13.5V2H17ZM10.5 2V0.5H7V2H10.5Z" fill="#2B2E36"/>\n</svg>'):
B.prepend('<svg viewBox="0 0 24 24" width="100%" height="100%"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 4H0.5V2C0.5 1.17157 1.17157 0.5 2 0.5H4V2H2V4ZM22 4H23.5V2C23.5 1.17157 22.8284 0.5 22 0.5H20V2H22V4ZM22 7H23.5V10.5H22V7ZM22 13.5H23.5V17H22V13.5ZM22 20H23.5V22C23.5 22.8284 22.8284 23.5 22 23.5H20V22H22V20ZM2 7H0.5V10.5H2V7ZM2 13.5H0.5V17H2V13.5ZM2 20H0.5V22C0.5 22.8284 1.17157 23.5 2 23.5H4V22H2V20ZM7 22V23.5H10.5V22H7ZM13.5 22V23.5H17V22H13.5ZM17 2V0.5H13.5V2H17ZM10.5 2V0.5H7V2H10.5Z" fill="#2B2E36"></path></svg>'));
break;case 4:g&&g.addClass("button_active");w&&w.addClass("button_active");null!==B&&("dv-pspdfkitlight"===a.dom.getTheme()?B.prepend('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"><path d="M.5 4H2V2h2V.5H2A1.5 1.5 0 0 0 .5 2v2ZM23.5 4H22V2h-2V.5h2A1.5 1.5 0 0 1 23.5 2v2ZM23.5 7H22v3.5h1.5V7ZM23.5 13.5H22V17h1.5v-3.5ZM.5 7H2v3.5H.5V7ZM.5 13.5H2V17H.5v-3.5ZM.5 20H2v2h2v1.5H2A1.5 1.5 0 0 1 .5 22v-2ZM7 23.5V22h3.5v1.5H7ZM13.5 23.5V22H17v1.5h-3.5ZM17 .5V2h-3.5V.5H17ZM10.5.5V2H7V.5h3.5ZM12 8.75a.75.75 0 0 1 .75.75v1.75h1.75a.75.75 0 0 1 0 1.5h-1.75v1.75a.75.75 0 0 1-1.5 0v-1.75H9.5a.75.75 0 0 1 0-1.5h1.75V9.5a.75.75 0 0 1 .75-.75Z" fill="#2B2E36"/><path fill-rule="evenodd" clip-rule="evenodd" d="M17.807 16.747a7.5 7.5 0 1 0-1.06 1.06l4.723 4.723a.75.75 0 1 0 1.06-1.06l-4.723-4.723ZM18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z" fill="#2B2E36"/></svg>'):
B.prepend('<svg viewBox="0 0 24 24" width="100%" height="100%"><path d="M0.5 4H2V2H4V0.5H2C1.17157 0.5 0.5 1.17157 0.5 2V4Z" fill="#2B2E36"></path> <path d="M23.5 4H22V2H20V0.5H22C22.8284 0.5 23.5 1.17157 23.5 2V4Z" fill="#2B2E36"></path><path d="M23.5 7H22V10.5H23.5V7Z" fill="#2B2E36"></path><path d="M23.5 13.5H22V17H23.5V13.5Z" fill="#2B2E36"></path><path d="M0.5 7H2V10.5H0.5V7Z" fill="#2B2E36"></path><path d="M0.5 13.5H2V17H0.5V13.5Z" fill="#2B2E36"></path><path d="M0.5 20H2V22H4V23.5H2C1.17157 23.5 0.5 22.8284 0.5 22V20Z" fill="#2B2E36"></path><path d="M7 23.5V22H10.5V23.5H7Z" fill="#2B2E36"></path><path d="M13.5 23.5V22H17V23.5H13.5Z" fill="#2B2E36"></path><path d="M17 0.5V2H13.5V0.5H17Z" fill="#2B2E36"></path><path d="M10.5 0.5V2H7V0.5H10.5Z" fill="#2B2E36"></path><path d="M12 8.75C12.4142 8.75 12.75 9.08579 12.75 9.5V11.25H14.5C14.9142 11.25 15.25 11.5858 15.25 12C15.25 12.4142 14.9142 12.75 14.5 12.75H12.75V14.5C12.75 14.9142 12.4142 15.25 12 15.25C11.5858 15.25 11.25 14.9142 11.25 14.5V12.75H9.5C9.08579 12.75 8.75 12.4142 8.75 12C8.75 11.5858 9.08579 11.25 9.5 11.25H11.25V9.5C11.25 9.08579 11.5858 8.75 12 8.75Z" fill="#2B2E36"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M17.8073 16.7465C18.8652 15.4536 19.5 13.8009 19.5 12C19.5 7.85786 16.1421 4.5 12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5C13.801 19.5 15.4537 18.8652 16.7466 17.8072L21.4698 22.5303C21.7627 22.8232 22.2376 22.8232 22.5304 22.5303C22.8233 22.2374 22.8233 21.7626 22.5304 21.4697L17.8073 16.7465ZM18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12Z" fill="#2B2E36"></path></svg>'));
break;case 5:k&&k.addClass("button_active")}},updatePageViewModeButtons:function(b){var c=a.dom.pageViewModeSingleButton?dvJQuery(a.dom.pageViewModeSingleButton):null,e=a.dom.pageViewModeMutipleButton?dvJQuery(a.dom.pageViewModeMutipleButton):null;if(null!==c||null!==e)switch(b){case 0:e.removeClass("button_active");c.addClass("button_active");break;case 1:c.removeClass("button_active"),e.addClass("button_active")}},updateButtons:function(){"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?
(dvJQuery(a.dom.mainArea).find(".dv-button").each(function(){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),dvJQuery(a.dom.mainArea).find(".dv-button.button_active").each(function(){dvJQuery(this).css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+
","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","-webkit-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+" 0%,"+a.dom.UIconfig.buttonActiveGradientColorEnd+" 100%)");dvJQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.buttonActiveGradientColorStart+
","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.buttonActiveGradientColorStart+","+a.dom.UIconfig.buttonActiveGradientColorEnd+")");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)}),dvJQuery(a.dom.mainArea).find(".dv-button.button_hover").each(function(){dvJQuery(this).css("border","1px solid");dvJQuery(this).css("-webkit-border-radius","2px");dvJQuery(this).css("-moz-border-radius",
"2px");dvJQuery(this).css("border-radius","2px");dvJQuery(this).css("border-color",a.dom.UIconfig.miscBorderColor)})):(dvJQuery(a.dom.mainArea).find(".dv-button").each(function(){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor);dvJQuery(this).css("color",a.dom.UIconfig.strokeColor)}),dvJQuery(a.dom.toolBarArea).find(".dv-button").not(".dv-submenu-zoom-mode .dv-button, .dv-submenu-mouse-mode .dv-button").not(":first").each(function(){dvJQuery(this).css("border-left",
"1px solid "+a.dom.UIconfig.miscBorderColor)}),dvJQuery(a.dom.mainArea).find(".dv-button.button_active").each(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.toolbarIconActiveColor);dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor);dvJQuery(this).css("color",a.dom.UIconfig.activeSelectedColor)}),dvJQuery(a.dom.mainArea).find(".dv-button.button_hover").each(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.toolbarIconActiveColor)}))},autoSelectToolbar:function(){if(a.dom.mobileToolbarArea&&
0!==dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").length){var b=0;dvJQuery(a.dom.toolBarArea).find(".dv-toolbar-buttons").children(".dv-buttons-container").each(function(){b+=dvJQuery(this).outerWidth()});var c=dvJQuery(a.dom.mainArea).width();a.dom.toolbarLogo&&(c-=dvJQuery(a.dom.toolbarLogo).width());b>c?(dvJQuery(a.dom.toolBarArea).css({position:"absolute",left:"-300%"}),dvJQuery(a.dom.mobileToolbarArea).css("display","block"),dvJQuery(a.dom.mobileToolbarTop).css("display","block"),"dv-pspdfkitlight"===
a.dom.getTheme()&&dvJQuery(a.dom.mobileToolbarTop).css("position","relative"),a.dom.visibleToolbar=DocuViewareAPI.Toolbar.Mobile):(dvJQuery(a.dom.mobileToolbarArea).css("display","none"),dvJQuery(a.dom.mobileToolbarTop).css("display","none"),dvJQuery(a.dom.toolBarArea).css({position:"relative",left:""}),a.dom.visibleToolbar=DocuViewareAPI.Toolbar.Standard)}else a.dom.visibleToolbar=a.dom.UIconfig.docuViewareLiteMode?DocuViewareAPI.Toolbar.Standard:DocuViewareAPI.Toolbar.None;a.dom.updateResizeBarVisibility()},
resizeControlArea:function(){if(dvJQuery(a.dom.containerArea).is(":visible")){a.dom.autoSelectToolbar();var b=a.dom.mainArea.offsetHeight;a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Mobile?b-=dvJQuery(a.dom.mobileToolbarTop).height()+a.dom.mobileToolbarArea.clientHeight:a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Standard&&(b-=a.dom.toolBarArea.offsetHeight);b!==a.dom.controlArea.offsetHeight&&(a.dom.controlArea.style.height=b+"px");a.dom.mobileToolbarContainer&&a.dom.resizeMobileToolbarMenu()}},
resizeMobileToolbarMenu:function(){var b=0;dvJQuery(a.dom.mobileToolbarContainer).children(".dv-button").each(function(){b+=dvJQuery(this).height();b+=parseInt(dvJQuery(this).css("padding-top"),10);b+=parseInt(dvJQuery(this).css("padding-bottom"),10);b+=parseInt(dvJQuery(this).css("border-top"),10);b+=parseInt(dvJQuery(this).css("border-bottom"),10);b+=parseInt(dvJQuery(this).css("margin-top"),10);b+=parseInt(dvJQuery(this).css("margin-bottom"),10)});b>=dvJQuery(a.dom.controlArea).height()?dvJQuery(a.dom.mobileToolbarContainer).width()===
DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH&&dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH):dvJQuery(a.dom.mobileToolbarContainer).width()===DocuViewareAPI.Constants.TWO_COLUMNS_MOBILE_MENU_WIDTH&&dvJQuery(a.dom.mobileToolbarContainer).width(DocuViewareAPI.Constants.SINGLE_COLUMN_MOBILE_MENU_WIDTH)},SelectedTextRegions:{_cache:[],count:function(b){if(b){for(var c=0,e=0;e<this._cache.length;e++)this._cache[e].category==b&&c++;return c}return this._cache.length},
addNew:function(b,c,e,g,k,p){var n=document.createElement("div"),w=document.createAttribute("data-dv-sel-type");1===k?w.value="us":2===k&&(w.value="tr");n.attributes.setNamedItem(w);n.coordinates={left:c.left,top:c.top,width:c.width,height:c.height};a.Internal.Coordinates.documentToViewerBox(b,c);n.category=k;n.pageNo=b;n.style.display="block";n.style.position="absolute";n.style.padding="0px";n.style.margin="0px";n.style.outline="0";n.style.left=c.left+"px";n.style.top=c.top+"px";n.style.width=c.width+
"px";n.style.height=c.height+"px";n.style.backgroundColor=e;g&&(n.style.borderColor=g,n.style.borderWidth="1px",n.style.borderStyle="solid");a.events.forwardMouseEventsToViewer(n);p?p.appendChild(n):a.dom.viewerArea.appendChild(n);this._cache.push(n)},addNews:function(b,c,e,g,k,p){c.forEach(function(n){this.addNew(b,n,e,g,k,p)},this)},clear:function(b,c){if(0<this._cache.length)if(b||c)for(var e=0;e<this._cache.length;e++)b&&this._cache[e].category!=b||c&&this._cache[e].pageNo!=c||(a.dom.viewerArea.removeChild(this._cache[e]),
this._cache.splice(e--,1));else{for(e=0;e<this._cache.length;e++)a.dom.viewerArea.removeChild(this._cache[e]);this._cache=[]}},onPageBoundsChanged:function(){if(0<this._cache.length)for(var b=0;b<this._cache.length;b++){var c=this._cache[b],e={left:c.coordinates.left,top:c.coordinates.top,width:c.coordinates.width,height:c.coordinates.height};a.Internal.Coordinates.documentToViewerBox(c.pageNo,e);c.style.left=e.left+"px";c.style.top=e.top+"px";c.style.width=e.width+"px";c.style.height=e.height+"px"}}},
createBookmarkNode:function(b,c){if(c){var e=document.createElement("li");e.bookmarkID=c.bookmarkID;if(c.hasChildren){e.className="hasChildren";var g=document.createElement("div");g.className="hitarea collapsed";g.bookmarkID=c.bookmarkID;g.onclick=a.events.onBookmarkTogglerClickHandler;g.onmouseover=a.events.onBookmarkItemMouseOverHandler;g.onmouseout=a.events.onBookmarkItemMouseOutHandler;dvJQuery(e).append(g)}g=document.createElement("span");g.action=c.action;g.onmouseover=a.events.onBookmarkItemMouseOverHandler;
g.onmouseout=a.events.onBookmarkItemMouseOutHandler;c.action&&-1<c.action.indexOf("PdfPageDest")&&(g.className="internal");g.onclick=a.events.onBookmarkItemClickHandler;g.innerHTML=c.text;g.style.color="legacy"===a.dom.mainArea.attributes["data-theme-layout"].value&&c.foreColor?c.foreColor:a.dom.UIconfig.textColor;if(1==c.textAttribute||3==c.textAttribute)g.style.fontStyle="italic";if(2==c.textAttribute||3==c.textAttribute)g.style.fontWeight="bold";dvJQuery(e).append(g);c.hasChildren&&dvJQuery(e).append('<ul><li><span class="placeholder">&nbsp;</span></li></ul>');
b.append(e)}},setBookmarkOverStyle:function(b,c){dvJQuery(b).parent().find("span:first").css("text-decoration",c?"underline":"none")},selectBookmark:function(b){this.resetBookmarkStyle();dvJQuery(b).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).addClass("selected");"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(b).css("background-color","transparent").addClass("selected")},resetBookmarkStyle:function(){a.dom.bookmarksTree&&dvJQuery(a.dom.bookmarksTree).find("span.selected").removeClass("selected").css("background-color",
"transparent")},createCommentItem:function(b,c,e){if(b&&b.annotApp.visible){var g=!1;e&&(g=e.find(".dvtoggle:first").hasClass("dvcolapsed"));var k=document.createElement("div");k.className="dvcomment";var p=document.createElement("div");p.className="dvcomment-wrapper";p.id="dvcomment-"+b.annotApp.id+"-"+a.uniqueID;var n=this.generateCommentHeaderMarkup(b,g);p.appendChild(n);b=this.generateCommentContentMarkup(b,g);if(null!=c)for(g=0;g<c.length;g++){var w=c[g],B="dvcomment-"+w.annotApp.id+"-"+a.uniqueID,
I=e.find("#"+B+" .dvtoggle").hasClass("dvcolapsed");w.annotApp.visible&&(n=document.createElement("div"),n.className="dvcomment-wrapper dvanswer",n.id=B,B=this.generateCommentHeaderMarkup(w,I),w=this.generateCommentContentMarkup(w,I),n.appendChild(B),n.appendChild(w),b.appendChild(n))}p.appendChild(b);k.appendChild(p);dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID).append(k)}},generateCommentHeaderMarkup:function(b,c){var e=document.createElement("div");e.className="dvcomment-header";
e.addEventListener("click",function(p){p.stopPropagation();(p=document.getElementById(a.uniqueID))&&p.control.CommentHeader_Click(b.annotApp.id)});b.annotApp.canEdit&&e.addEventListener("dblclick",function(p){p.stopPropagation();(p=document.getElementById(a.uniqueID))&&p.control.CommentProperties_Click(b.annotApp.id)});e.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer")});e.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default")});switch(b.annotApp.properties.reviewStatus){case 0:e.className+=
" status-none";break;case 1:e.className+=" status-approved";break;case 2:e.className+=" status-canceled";break;case 3:e.className+=" status-finished";break;case 4:e.className+=" status-rejected"}var g=document.createElement("div");g.className="dvcomment-user";var k=document.createElement("span");k.className="dvtoggle";c&&(k.className+=" dvcolapsed");g.appendChild(k);c=document.createElement("span");c.innerText=b.annotApp.author;g.appendChild(c);c=document.createElement("div");c.className="dvcomment-date";
k=document.createElement("span");k.innerText=DocuViewareUtilities.getLocaleDateTimeFormat(b.annotApp.creationTime,a.dom.UIconfig.locale);c.appendChild(k);e.appendChild(g);e.appendChild(c);return e},generateCommentContentMarkup:function(b,c){var e=document.createElement("div");e.className="dvcomment-content";c&&dvJQuery(e).css("display","none");e.addEventListener("click",function(n){n.stopPropagation();(n=document.getElementById(a.uniqueID))&&n.control.CommentHeader_Click(b.annotApp.id)});b.annotApp.canEdit&&
e.addEventListener("dblclick",function(n){n.stopPropagation();(n=document.getElementById(a.uniqueID))&&n.control.CommentProperties_Click(b.annotApp.id)});e.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer")});e.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default")});c=document.createElement("div");c.className="dvcomment-message";b.annotApp.properties.fill&&null!=b.annotApp.properties.fillColor&&(c.style.backgroundColor=b.annotApp.properties.fillColor);
var g=document.createElement("p");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value&&(g.style.color=b.annotApp.properties.foreColor);g.style.fontFamily=b.annotApp.properties.fontName;switch(b.annotApp.properties.fontStyle){case 0:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 1:g.style.fontStyle="normal";g.style.fontWeight="bold";g.style.textDecoration="none";break;case 2:g.style.fontStyle="italic";g.style.fontWeight="normal";g.style.textDecoration=
"none";break;case 3:g.style.fontStyle="italic";g.style.fontWeight="bold";g.style.textDecoration="none";break;case 4:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="underline";break;case 5:g.style.fontStyle="normal";g.style.fontWeight="bold";g.style.textDecoration="underline";break;case 6:g.style.fontStyle="italic";g.style.fontWeight="normal";g.style.textDecoration="underline";break;case 7:g.style.fontStyle="italic";g.style.fontWeight="bold";g.style.textDecoration="underline";
break;case 8:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="line-through";break;case 9:g.style.fontStyle="normal";g.style.fontWeight="bold";g.style.textDecoration="line-through";break;case 10:g.style.fontStyle="italic";g.style.fontWeight="normal";g.style.textDecoration="line-through";break;case 11:g.style.fontStyle="italic";g.style.fontWeight="bold";g.style.textDecoration="line-through";break;case 12:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration=
"none";break;case 13:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 14:g.style.fontStyle="normal";g.style.fontWeight="normal";g.style.textDecoration="none";break;case 15:g.style.fontStyle="normal",g.style.fontWeight="normal",g.style.textDecoration="none"}g.style.fontSize=b.annotApp.properties.fontSize+"pt";g.innerText=b.annotApp.properties.text;c.appendChild(g);g=document.createElement("div");"dv-pspdfkitlight"===a.dom.getTheme()?(g.className="dvcomment-options",
g.style.borderTop="1px solid"+a.dom.UIconfig.strokeColor,g.style.paddingTop="0",g.style.display="flex",g.style.flexWrap="wrap",g.style.gap="8px",g.style.alignItems="center"):(g.className="dvcomment-options",g.style.borderTop="1px solid"+a.dom.UIconfig.strokeColor,g.style.paddingTop="10px",g.style.height="auto",g.style.lineHeight="18px",g.style.display="inline-block",g.style.width="100%");g.style.fill=a.dom.UIconfig.strokeColor;var k=document.createElement("div");"dv-pspdfkitlight"===a.dom.getTheme()?
k.style.display="none":(k.style.height="20px",k.style.width="16px",k.style.display="inline-block",k.style.float="left",k.style.marginRight="5px");switch(b.ownerAnnotType){case 0:k.title=a.Localize("annotation_rubberstamp");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M256 64c-35.3 0-64 28.7-64 64 0 64 106.7 149.3-64 149.3-23.6 0-42.7 19.1-42.7 42.7v42.7h341.3V320c0-23.6-19.1-42.7-42.7-42.7-170.7 0-64-85.3-64-149.3.1-42.7-28.5-64-63.9-64M128 405.3V448h256v-42.7H128z"/></svg>';
break;case 1:k.title=a.Localize("annotation_rectangle");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M42.7 429V83h426.7v346H42.7zm35.2-35.5h356.3v-275H77.9v275z"/></svg>';break;case 2:k.title=a.Localize("annotation_highlighter");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M382.8 44.5c-10.3 0-20.2 3.7-27.8 11.3L241.8 169.1l110 110L465.1 166c15-15.2 15-39.7 0-55.1l-55.3-55.1c-7.6-7.6-17.3-11.3-27-11.3M223.1 187.6l-116 116c-15.2 15.2-15.2 39.7.4 55.5-23.8 24-47.9 47.9-71.9 71.9h110.2l16.7-16.7c15.2 14.8 39.5 14.6 54.7-.4l115.9-116M35.6 449.2h440.8v18.3H35.6z"/></svg>';
break;case 3:k.title=a.Localize("annotation_line");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="m43.044 403.345 401.088-325.23 24.877 30.68-401.088 325.23z"/></svg>';break;case 4:k.title=a.Localize("annotation_arrow");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="m43 426.1 322.2-322.2H164.7V43H469v304.3h-60.8V146.8L85.9 469 43 426.1z"/></svg>';break;case 5:k.title=a.Localize("annotation_connectedline");
k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M48.212 438.111 155.22 241.217l36.901 20.055L85.114 458.166zM331.983 315.52l93.622-255.381 39.434 14.456-93.622 255.381z"/><path d="m165.981 270.749 15.3-39.115 178.438 69.8-15.3 39.115z"/><circle cx="173.7" cy="251.2" r="44.7"/><circle cx="351.7" cy="322.7" r="44.7"/><circle cx="445.3" cy="67.3" r="44.7"/><circle cx="66.7" cy="444.7" r="44.7"/></svg>';break;case 6:k.title=a.Localize("annotation_ellipse");
k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M256 394.4c-94.3 0-170.7-62-170.7-138.4S161.7 117.6 256 117.6s170.7 62 170.7 138.4S350.3 394.4 256 394.4M256 83C138.2 83 42.7 160.5 42.7 256S138.2 429 256 429s213.3-77.5 213.3-173S373.8 83 256 83z"/></svg>';break;case 7:k.title=a.Localize("annotation_image");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="m181.3 288 53.3 64 74.7-96 96 128H106.7M448 405.3V106.7C448 83 428.8 64 405.3 64H106.7C83.1 64 64 83.1 64 106.7v298.7c0 23.6 19.1 42.7 42.7 42.7h298.7c23.5-.1 42.6-19.2 42.6-42.8z"/></svg>';
break;case 8:k.title=a.Localize("annotation_text");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="m436.7 47.4 32.3 121-26.7 7.2c-12.5-24.2-25.3-48.4-40-60.7-14.7-12-32-12-48.9-12h-69.6v292c0 13.9 0 27.8 9.2 34.8 9.5 7 27.8 7 46.4 7v27.8H172.5v-27.8c18.6 0 36.9 0 46.4-7 9.2-7 9.2-20.9 9.2-34.8V103.1h-69.5c-17 0-34.2 0-48.9 12-14.7 12.2-27.5 36.4-40 60.7L43 168.4l32.3-121h361.4z"/></svg>';break;case 9:k.title=a.Localize("annotation_stickynote");
k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M78.5 433.5h236.6V315.2h118.3V78.5H78.5v355zm0 35.5c-9.9 0-18.2-3.4-25.1-10.3-7-6.9-10.4-15.3-10.4-25.2v-355c0-9.9 3.4-18.2 10.3-25.1S68.6 43 78.5 43h355c9.9 0 18.2 3.4 25.1 10.3 6.9 6.9 10.3 15.3 10.3 25.1V327L327 469H78.5zm71-177.5V256h100.6v35.5H149.5zm0-94.7v-35.5h213v35.5h-213zm-71 236.7v-355 355z"/></svg>';break;case 10:k.title=a.Localize("annotation_freehand");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M208.8 494.4c48-18.9 37.4-70.9 13.2-103.7-24-33.7-57.1-56.8-90.5-79.2-23.7-15.1-45.5-33.9-63-55.5-7.5-8.9-22.9-25.3-7.3-28.6 15.9-3.2 43.4 12.4 57.4 18.3 24.5 10.2 48.8 22.1 71.4 36.1l27.2-45.8c-42-27.8-95.9-52.3-146-59.5-28.6-4.3-58.7 1.6-68.4 32.6-8.6 26.7 5.1 53.6 20.7 74.6 36.9 49.3 94.3 73 137.1 115.6 9.2 8.9 20.2 19.4 25.6 31.8 5.7 11.9 4.3 12.7-8.4 12.7-33.4 0-75.2-26.1-102.4-43.4l-27.2 45.8c41.2 25.3 110.2 64.9 160.6 48.2M507.6 74.1c5.9-5.9 5.9-15.6 0-21.3l-35-35c-5.7-5.7-15.4-5.7-21 0L424 45.3l56 56M242.4 226.9v56h56l165.7-165.7-56-56-165.7 165.7z"/></svg>';
break;case 11:k.title=a.Localize("annotation_freehandhighlighter");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M382.8 44.5c-10.3 0-20.2 3.7-27.8 11.3L241.8 169.1l110 110L465.1 166c15-15.2 15-39.7 0-55.1l-55.3-55.1c-7.6-7.6-17.3-11.3-27-11.3M223.1 187.6l-116 116c-15.2 15.2-15.2 39.7.4 55.5-23.8 24-47.9 47.9-71.9 71.9h110.2l16.7-16.7c15.2 14.8 39.5 14.6 54.7-.4l115.9-116"/><path d="M455.2 230v216.3c0 1.1-.9 2-2 2h-49.4c-1.1 0-2-.9-2-2V344.5c0-12.1-9.9-22-22-22h-49.4c-12.1 0-22 9.9-22 22v101.9c0 1.1-.9 2-2 2H35.6v20h270.8c12.1 0 22-9.9 22-22V344.5c0-1.1.9-2 2-2h49.4c1.1 0 2 .9 2 2v101.9c0 12.1 9.9 22 22 22h49.4c12.1 0 22-9.9 22-22V230h-20z"/></svg>';
break;case 12:k.title=a.Localize("annotation_freehandpolygon");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M512 455.1V0H341.3v42.7h56.9v42.7h-56.9V128h113.8v42.7H341.3v42.7h56.9V256h-56.9v42.7h113.8v42.7H341.3v113.8h-42.7V341.3H256v56.9h-42.7v-56.9h-42.7v113.8H128V341.3H85.3v56.9H42.7v-56.9H0V512h455.1c31.4 0 56.9-25.5 56.9-56.9m-85.3-56.9c15.7 0 28.4 12.7 28.4 28.4S442.4 455 426.7 455s-28.4-12.7-28.4-28.4c-.1-15.6 12.7-28.4 28.4-28.4z"/></svg>';
break;case 13:k.title=a.Localize("annotation_link");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M223.5 288.5c9.5 9 9.5 23.7 0 32.7-9 9-23.7 9-32.7 0-44.9-44.9-44.9-118 0-162.9l81.6-81.6c44.9-44.9 118-44.9 162.9 0s44.9 118 0 162.9L400.9 274c.2-18.9-2.7-37.8-9.2-55.7l10.8-11.1c27.2-27 27.2-70.7 0-97.7-27-27.2-70.7-27.2-97.7 0l-81.4 81.4c-27.1 26.8-27.1 70.6.1 97.6m65-97.7c9-9 23.7-9 32.7 0 44.9 44.9 44.9 118 0 162.9l-81.6 81.6c-44.9 44.9-118 44.9-162.9 0s-44.9-118 0-162.9l34.4-34.4c-.2 18.9 2.7 37.8 9.2 56l-10.8 10.8c-27.2 27-27.2 70.7 0 97.7 27 27.2 70.7 27.2 97.7 0l81.4-81.4c27.2-27 27.2-70.7 0-97.7-9.6-8.9-9.6-23.6-.1-32.6z"/></svg>';
break;case 14:k.title=a.Localize("annotation_polygon");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M512 455.1V0H341.3v42.7h56.9v42.7h-56.9V128h113.8v42.7H341.3v42.7h56.9V256h-56.9v42.7h113.8v42.7H341.3v113.8h-42.7V341.3H256v56.9h-42.7v-56.9h-42.7v113.8H128V341.3H85.3v56.9H42.7v-56.9H0V512h455.1c31.4 0 56.9-25.5 56.9-56.9m-85.3-56.9c15.7 0 28.4 12.7 28.4 28.4S442.4 455 426.7 455s-28.4-12.7-28.4-28.4c-.1-15.6 12.7-28.4 28.4-28.4z"/></svg>';
break;case 15:k.title=a.Localize("annotation_ruler");k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M0 409.5 42.7 367 77 400.8l25.6-25.3-34.3-34 34.3-34.3 59.6 59.8 25.6-25.6-59.6-59.8 34-34 34.3 34L222 256l-34.3-34 34.3-34.3 59.6 59.8 25.6-25.6-59.6-59.8 34-34 34 34 25.8-25.6-34.3-34 34.3-34.3 59.4 59.8 25.8-25.6L367 42.7 409.5 0 512 102.5 102.5 512 0 409.5z"/></svg>';break;case 16:k.title=a.Localize("annotation_polyruler"),k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  xml:space="preserve"><path d="M512 455.1V0H341.3v42.7h56.9v42.7h-56.9V128h113.8v42.7H341.3v42.7h56.9V256h-56.9v42.7h113.8v42.7H341.3v113.8h-42.7V341.3H256v56.9h-42.7v-56.9h-42.7v113.8H128V341.3H85.3v56.9H42.7v-56.9H0V512h455.1c31.4 0 56.9-25.5 56.9-56.9m-85.3-56.9c15.7 0 28.4 12.7 28.4 28.4S442.4 455 426.7 455s-28.4-12.7-28.4-28.4c-.1-15.6 12.7-28.4 28.4-28.4z"/></svg>'}g.appendChild(k);
k=document.createElement("div");"dv-pspdfkitlight"===a.dom.getTheme()?(k.style.fontSize="inherit",k.style.lineHeight="20px",k.style.display="flex",k.style.flexBasis="100%",k.style.order="2",k.style.color="#606671"):(k.style.fontSize="smaller",k.style.lineHeight="20px",k.style.display="inline-block");k.innerText=a.Localize("label_page")+" "+b.annotApp.pageNo;g.appendChild(k);b.annotApp.canEdit&&(k=document.createElement("div"),k.title=a.Localize("annotation_action_edit"),"dv-pspdfkitlight"===a.dom.getTheme()?
(k.style.height="20px",k.style.width="20px",k.style.padding="3px",k.style.marginLeft="0",k.style.display="flex",k.style.float="none"):(k.style.height="20px",k.style.width="16px",k.style.marginLeft="15px",k.style.display="inline-block",k.style.float="right"),k.addEventListener("click",function(){var n=document.getElementById(a.uniqueID);n&&n.control.CommentProperties_Click(b.annotApp.id)}),k.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?
dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor):dvJQuery(this).css("fill",a.dom.UIconfig.secondaryButtonHoverColor)}),k.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),k.innerHTML=a.dom.iconCommentOptionEdit.innerHTML,g.appendChild(k));k=a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id===b.annotApp.id;var p=a.Internal.Annotations.getFirstAnnotationCommentOfDiscussion(b.annotApp.id).annotApp.id===
b.annotApp.id;(k||p)&&b.annotApp.properties.allowAnswer&&(k=document.createElement("div"),k.title=a.Localize("label_comment_answer"),"dv-pspdfkitlight"===a.dom.getTheme()?(k.style.height="20px",k.style.width="20px",k.style.padding="3px",k.style.marginLeft="0",k.style.display="flex",k.style.float="none"):(k.style.height="20px",k.style.width="16px",k.style.display="inline-block",k.style.float="right"),k.addEventListener("click",function(){var n=document.getElementById(a.uniqueID);n&&(p?n.control.CommentAnswer_Click(a.Internal.Annotations.getLastAnnotationCommentAnswerOfDiscussion(b.annotApp.id).annotApp.id):
n.control.CommentAnswer_Click(b.annotApp.id))}),k.addEventListener("mouseover",function(){dvJQuery(this).css("cursor","pointer");"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor):dvJQuery(this).css("fill",a.dom.UIconfig.secondaryButtonHoverColor)}),k.addEventListener("mouseout",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)}),k.innerHTML=a.dom.iconCommentOptionReply.innerHTML,
g.appendChild(k));k=document.createElement("div");"dv-pspdfkitlight"===a.dom.getTheme()?(k.style.height="auto",k.style.width="auto",k.style.display="flex",k.style.marginRight="0",k.style.padding="0",k.style.borderRadius="30px",k.style.backgroundColor="#D9D9D9",k.style.float="none",k.style.marginLeft="auto"):(k.style.height="20px",k.style.width="16px",k.style.display="inline-block",k.style.marginRight="15px",k.style.float="right");if(0!==b.annotApp.properties.reviewStatus)switch("dv-pspdfkitlight"===
a.dom.getTheme()&&(k.style.fill="initial"),b.annotApp.properties.reviewStatus){case 1:k.style.fill="#8fb962";k.title=a.Localize("label_comment_status_approved");"dv-pspdfkitlight"===a.dom.getTheme()?(k.innerHTML=a.Localize("label_comment_status_approved"),k.style.padding="4px 8px"):k.innerHTML=a.dom.iconCommentStatusApproved.innerHTML;break;case 2:k.style.fill="#dc584a";k.title=a.Localize("label_comment_status_canceled");"dv-pspdfkitlight"===a.dom.getTheme()?(k.innerHTML=a.Localize("label_comment_status_canceled"),
k.style.padding="4px 8px"):k.innerHTML=a.dom.iconCommentStatusCanceled.innerHTML;break;case 3:k.style.fill="#decc6b";k.title=a.Localize("label_comment_status_finished");"dv-pspdfkitlight"===a.dom.getTheme()?(k.innerHTML=a.Localize("label_comment_status_finished"),k.style.padding="4px 8px"):k.innerHTML=a.dom.iconCommentStatusFinished.innerHTML;break;case 4:k.style.fill="#dc584a",k.title=a.Localize("label_comment_status_rejected"),"dv-pspdfkitlight"===a.dom.getTheme()?(k.innerHTML=a.Localize("label_comment_status_rejected"),
k.style.padding="4px 8px"):k.innerHTML=a.dom.iconCommentStatusRejected.innerHTML}g.appendChild(k);c.appendChild(g);e.appendChild(c);return e},sidePanelResized:function(){if(a.callbacks.onSnapInPanelResized)a.callbacks.onSnapInPanelResized(dvJQuery(a.dom.leftSideArea).width())},sidePanelToggled:function(b){if(a.callbacks.onSnapInPanelToggle)a.callbacks.onSnapInPanelToggle(b)},removeViewAreaTouchAction:function(){a.dom.viewerArea.style.touchAction="none;";a.isTouchMode&&(a.dom.viewerArea.style.overflow=
"hidden")},addViewAreaTouchAction:function(){a.dom.viewerArea.style.touchAction="auto";a.isTouchMode&&(a.dom.viewerArea.style.overflow="auto")}},events:{ownMouseEvents:!1,overLink:null,overPageText:null,overAnnotEditable:!1,mouseMode:0,mouseX:0,mouseY:0,mouseDownX:0,mouseDownY:0,mouseDownViewerScrollLeft:0,mouseDownViewerScrollTop:0,mouseDownClientX:0,mouseDownClientY:0,isAddingRedactionMarksMode:!1,isDrawingPath:!1,isMouseDown:!1,pathPoints:null,isPanning:!1,isZoomingPreview:!1,freezeScrollEvents:!1,
canPan:function(){return!0},isResizingUI:!1,isSelectingText:!1,isDragMultipleSelecting:!1,UIStateVerifier:function(){if(null==a.NewViewerSizeTimeout){var b=a.dom.getViewerContainer();if(null!=b&&(a.viewerWidth!=b.offsetWidth||a.viewerHeight!=b.offsetHeight)&&!a.events.isResizingUI)a.events.onResize()}a.events.isZoomingPreview||a.hasPendingAction(!0,!1,!0,!1)||a.IsZoomSynchronized()||a.SetCurrentZoom(a.cache.pageCanvasZoom);setTimeout(a.events.UIStateVerifier,300)},restartZoomPreviewAutoSubmitter:function(b){var c=
function(){a.events.isZoomingPreview&&(a.events.isZoomingPreviewTouchMode=null,a.events.zoomPreviewWheelValue=null,a.events.isZoomingPreview=!1,a.events.disableSingleInputEvents=!1,a.SetCurrentZoom(a.cache.pageCanvasZoom));clearTimeout(a.EnableZoomPreviewAutoSubmitterTimeout);a.EnableZoomPreviewAutoSubmitterTimeout=null};if(b||null!=a.EnableZoomPreviewAutoSubmitterTimeout)null!=a.EnableZoomPreviewAutoSubmitterTimeout&&clearTimeout(a.EnableZoomPreviewAutoSubmitterTimeout),a.EnableZoomPreviewAutoSubmitterTimeout=
setTimeout(c,2E3)},enableZoomPreviewAutoSubmitter:function(){a.events.restartZoomPreviewAutoSubmitter(!0)},onNewViewerSize:function(){a.NewViewerSizeTimeout&&(clearTimeout(a.NewViewerSizeTimeout),a.NewViewerSizeTimeout=null);a.dom.resizeControlArea();a.dom.searchArea&&dvJQuery(a.dom.searchArea.parentElement).hasClass("active")&&(a.dom.searchResultsContainer.style.height=dvJQuery(a.dom.searchArea).outerHeight(!0)-dvJQuery(a.dom.searchPanelForm).outerHeight(!0)+"px");var b={sessionID:a.ajax.sessionID,
reuseSessionContext:!0,clientConfiguration:a.getConfig(),newViewerSize:!0};a.viewerWidth==b.clientConfiguration.viewerWidth&&a.viewerHeight==b.clientConfiguration.viewerHeight||0===b.clientConfiguration.viewerWidth||0===b.clientConfiguration.viewerHeight||(a.NewViewerSizePreview(),a.NewViewerSizeTimeout=setTimeout(function(){if(a.hasPendingAction(!1,!1,!0))a.events.onNewViewerSize();else{var c=a.getConfig();b.clientConfiguration.viewerWidth==c.viewerWidth&&b.clientConfiguration.viewerHeight==c.viewerHeight&&
(a.viewerWidth=b.clientConfiguration.viewerWidth,a.viewerHeight=b.clientConfiguration.viewerHeight,a.ajax.PostBaseRequest("init",{data:b,success:function(e){var g="string"===typeof e?JSON.parse(e):e;g&&g.status===DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(g,!1,!1,!0),a.showVisibleThumbnails()):a.ajax.HandleError(e);a.NewViewerSizeTimeout=null},error:function(){a.NewViewerSizeTimeout=null}},!1,!0))}},300),a.serverCtx.vScrollbarVisible?dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth-
a.dom.sbWidth):dvJQuery(a.dom.infoDiv).width(a.dom.viewerArea.offsetWidth),dvJQuery(a.dom.mainArea).find(".dvUi-dialog:visible").not(".dvPassword-dialog").find(".dvUi-dialog-content").dvDialog("refresh",dvJQuery(a.dom.controlArea).height()))},onLoad:function(b){if(a.isSafari||a.isIOS||a.isIE10||a.isIE9)null!=a.dom.fullscreenButton&&dvJQuery(a.dom.fullscreenButton).remove(),null!=a.dom.fullscreenButtonMobile&&dvJQuery(a.dom.fullscreenButtonMobile).remove();a.IsTwainSupportAvailable()||(null!=a.dom.twainAcquisitionButton&&
dvJQuery(a.dom.twainAcquisitionButton).remove(),null!=a.dom.twainAcquisitionButtonMobile&&dvJQuery(a.dom.twainAcquisitionButtonMobile).remove());!a.isIE||a.isIE10||a.isIE11||(null!=a.dom.openFromFileButton&&dvJQuery(a.dom.openFromFileButton).remove(),null!=a.dom.openFromFileButtonMobile&&dvJQuery(a.dom.openFromFileButtonMobile).remove());a.isIE&&!a.isIE11&&null!=a.dom.snapinTabControl&&(a.dom.snapinTabControl.style.position="static");a.isIE&&null!=a.dom.snapinTabControl&&(a.dom.snapinTabControl.style.display=
"block");var c=function(){if(a.callbacks.onDocuViewareControlLoaded&&"function"===typeof a.callbacks.onDocuViewareControlLoaded)a.callbacks.onDocuViewareControlLoaded();var e=document.getElementById(a.uniqueID);if(e&&e.preload&&"function"===typeof e.preload.events.onDocuViewareControlLoaded)e.preload.events.onDocuViewareControlLoaded()};a.SetMouseMode(0);1==b&&(a.waitForInit=!0);window.setTimeout(function(){a.dom.resizeControlArea();var e=a.dom.getViewerContainer();a.viewerWidth=e.offsetWidth;a.viewerHeight=
e.offsetHeight;a.dom.mainArea.style.visibility="visible";1==b?(e={sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,clientConfiguration:a.getConfig(),reuseSessionContext:!1,newViewerSize:!1},a.DisplayPendingActionNotification(),a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({requestName:"init",requestData:e}),contentType:"application/json",success:function(g){a.waitForInit=!1;a.HidePendingActionNotification();
var k="string"===typeof g?JSON.parse(g):g;k&&k.status===DocuViewareAPI.Status.OK?(a.ajax.SetNewServerCtx(k),k.documentLoaded&&!a.dom.singlePageView&&(g=a.GetCurrentPage(),a.Internal.Pages.isPageVisible(g)||a.EnsureCurrentPageVisibility()),c()):a.ajax.HandleError(g)},error:function(g){a.ajax.HandleError(g)}})):2==b&&(a.LoadFromUri("",""),c())},100)},onResize:function(){a.events.onNewViewerSize()},forwardMouseEventsToViewer:function(b){window.PointerEvent?(b.onpointerup=function(c){switch(c.pointerType){case "mouse":a.events.mouseup(c);
break;case "pen":a.events.mouseup(c);c.preventDefault();break;case "touch":a.events.mouseup(c);c.preventDefault();break;default:a.events.mouseup(c)}},b.onpointerdown=function(c){switch(c.pointerType){case "mouse":a.events.mousedown(c);break;case "pen":a.events.mousedown(c,!0);case "touch":a.events.mousedown(c,!0);break;default:a.events.mousedown(c)}},b.onpointermove=function(c){switch(c.pointerType){case "mouse":a.events.mousemove(c);break;case "pen":a.events.mousemove(c,!0);c.preventDefault();break;
case "touch":a.events.mousemove(c,!0)&&c.preventDefault();break;default:a.events.mousemove(c)}},b.onpointerleave=function(c){switch(c.pointerType){case "mouse":a.events.mouseleave(c);break;case "pen":a.events.mouseleave(c);break;default:a.events.mouseleave(c)}},b.onpointerenter=function(c){switch(c.pointerType){case "mouse":a.events.mouseenter(c);break;case "pen":a.events.mouseenter(c);break;default:a.events.mouseenter(c)}}):(b.onmouseup=function(c){a.events.mouseup(c)},b.onmousedown=function(c){a.events.mousedown(c)},
b.onmousemove=function(c){a.events.mousemove(c)},b.onmouseleave=function(c){a.events.mouseleave(c)},b.onmouseenter=function(c){a.events.mouseenter(c)},b.ontouchstart=function(c){1==c.changedTouches.length&&a.events.mousedown(c.changedTouches[0],!0)},b.ontouchmove=function(c){1==c.changedTouches.length&&a.events.mousemove(c.changedTouches[0],!0)&&c.preventDefault()},b.ontouchend=function(c){1==c.changedTouches.length&&(a.events.mouseup(c.changedTouches[0]),c.preventDefault())});b.ondblclick=function(c){a.events.dblclick(c)}},
dblclick:function(b){if(null==a.dom.drawingModeArea||"block"!=a.dom.drawingModeArea.style.display)a.ExitAnnotationDrawingMode(),this.overPageText&&0==a.dom.SelectedTextRegions.count(1)&&a.Internal.Text.captureAndHighlightSelectedText(this.mouseDownClientX,this.mouseDownClientY,this.mouseDownClientX,this.mouseDownClientY,!0,!1)},mousedown:function(b,c,e){if(!a.events.disableSingleInputEvents&&3!=b.which){this.isMouseDown=!0;this.mouseX=b.clientX;this.mouseY=b.clientY;this.mouseDownViewerScrollLeft=
a.Internal.Coordinates.getViewerScrollLeft();this.mouseDownViewerScrollTop=a.Internal.Coordinates.getViewerScrollTop();this.mouseDownX=b.clientX+this.mouseDownViewerScrollLeft;this.mouseDownY=b.clientY+this.mouseDownViewerScrollTop;this.mouseDownClientX=b.clientX;this.mouseDownClientY=b.clientY;var g=a.dom.viewerArea.getBoundingClientRect(),k=this.mouseDownX-g.left,p=this.mouseDownY-g.top;e=-1;for(var n=1;n<=a.GetPageCount();n++){var w=a.Internal.Pages.getRenderingState(n),B=w.pageLeft+w.pageWidth,
I=w.pageTop+w.pageHeight;if(k>=w.pageLeft&&k<=B&&p>=w.pageTop&&p<=I){e=n;break}}if(1==this.mouseMode)null!=a.Internal.Annotations.hoveredAnnot&&17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type?a.Internal.Redaction.disableAddRedactionMarksMode():(a.Internal.Annotations.currentInteractiveAnnotPageNo=-1==e?a.GetCurrentPage():e,a.Internal.Selection.selectionArea.startNewAnnotBox(this.mouseDownX-g.left,this.mouseDownY-g.top));else if(2==this.mouseMode)b={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-
g.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-g.top},a.Internal.Annotations.currentInteractiveAnnotPageNo=-1==e?a.GetCurrentPage():e,(5==a.Internal.Annotations.currentInteractiveAnnotProperties.type||16==a.Internal.Annotations.currentInteractiveAnnotProperties.type||a.dom.UIconfig.freeHandContinuousDrawingMode&&10==a.Internal.Annotations.currentInteractiveAnnotProperties.type)&&!a.dom.UIconfig.disableAnnotationDrawingModePanel&&(a.dom.drawingModeArea.style.display="block",a.dom.modalOverlayArea.style.display=
"block",a.dom.controlArea.style.zIndex="auto"),null==this.pathPoints?(e=a.Internal.Pages.getRenderingState(a.GetCurrentPage()),a.dom.freehandCan.style.left=e.pageLeft+"px",a.dom.freehandCan.style.top=e.pageTop+"px",a.dom.freehandCan.width=e.pageWidth,a.dom.freehandCan.height=e.pageHeight,a.dom.freehandCan.getContext("2d").clearRect(0,0,a.dom.freehandCan.width,a.dom.freehandCan.height),a.dom.freehandCan.style.display="block",this.pathPoints=[b]):(5!=a.Internal.Annotations.currentInteractiveAnnotProperties.type&&
16!=a.Internal.Annotations.currentInteractiveAnnotProperties.type&&this.pathPoints.push({x:131072,y:131072}),this.pathPoints.push(b)),c&&a.Internal.Annotations.prerenderPendingFreenhandAnnot(b),this.isDrawingPath=!0;else if(3==this.mouseMode||4==this.mouseMode)a.Internal.Selection.selectionArea.startNewSelectionBox(this.mouseDownX-g.left,this.mouseDownY-g.top);else{a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);if(!c&&(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,
b.clientY,5),null!=this.overPageText)){this.isSelectingText=!0;this.setCursor();return}this.overLink||(1==this.canPan()&&(this.isPanning=!0,a.dom.viewerArea.cursorMgr.setCustomCursorClass("closedHandCursor")),c&&(this.overLink=!1,a.dom.checkLinkAt(b.clientX,b.clientY)),a.dom.handleLinkRectVisibility())}}},mouseup:function(b){if(!a.events.disableSingleInputEvents){var c=this.isSelectingText;this.isPanning=this.isSelectingText=this.isMouseDown=!1;if(c&&0<a.dom.SelectedTextRegions.count(1))this.setCursor(),
a.callbacks.onTextSelected&&(c=a.Internal.Text.getSelectedTextAreas(),a.callbacks.onTextSelected(c)),b=dvJQuery.Event("contextmenu.dv-context-menu-viewerContextMenu"+a.uniqueID,{clientX:b.clientX,clientY:b.clientY,skipNextCloseEvent:!0}),dvJQuery(a.dom.viewerArea).trigger(b);else if(this.overLink)3!=b.which&&a.IsZoomSynchronized()&&(b=this.overLink.destPage,c=this.overLink.destUri,this.overLink=null,a.dom.handleLinkRectVisibility(),null!==c&&"unknown"!==c&&0===b?a.Internal.Destinations.followLink(c):
a.SelectPageEx(b,!0,!0,!0,!1),this.setCursor());else if(1!=this.mouseMode&&3!=this.mouseMode&&4!=this.mouseMode||!a.Internal.Selection.selectionArea.mouseUp(b))if(2==this.mouseMode&&this.isDrawingPath)a.dom.UIconfig.freeHandContinuousDrawingMode&&10==a.Internal.Annotations.currentInteractiveAnnotProperties.type||5==a.Internal.Annotations.currentInteractiveAnnotProperties.type||16==a.Internal.Annotations.currentInteractiveAnnotProperties.type||(a.dom.freehandCan.style.display="none",this.isDrawingPath=
!1,a.Internal.Annotations.addAnnotInteractive());else if(0<a.Internal.Annotations.selected.length)for(b=a.Internal.Annotations.selected.length-1;0<=b;b--)a.Internal.Annotations.selected[b].stopEditing(),a.Internal.Annotations.selected[b].updateCursor();else this.overPageText||0==this.mouseMode&&1==this.canPan()&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor")}},mousemove:function(b,c){if(!a.events.disableSingleInputEvents)if(this.isSelectingText){a.dom.SelectedTextRegions.clear(1);
var e=this.mouseDownViewerScrollLeft-a.Internal.Coordinates.getViewerScrollLeft(),g=this.mouseDownViewerScrollTop-a.Internal.Coordinates.getViewerScrollTop();if((this.mouseDownClientX+e!=b.clientX||this.mouseDownClientY+g!=b.clientY)&&(b=a.Internal.Text.captureSelectedText(this.mouseDownClientX+e,this.mouseDownClientY+g,b.clientX,b.clientY,!1,b.altKey))&&0<b.length){c=document.createDocumentFragment();for(var k=0;k<b.length;k++)for(var p=0;p<b[k].regions.length;p++)a.dom.SelectedTextRegions.addNew(b[k].pageNo,
{left:b[k].regions[p].Left/b[k].scale,top:b[k].regions[p].Top/b[k].scale,width:b[k].regions[p].Width/b[k].scale,height:b[k].regions[p].Height/b[k].scale},"rgba(0,0,201,0.3)",null,1,c);a.dom.viewerArea.appendChild(c)}}else{k=!1;this.overPageText=null;p=!1;1==this.mouseMode&&null!=a.Internal.Annotations.hoveredAnnot&&17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type&&(p=!0);if(1==this.mouseMode&&!p||3==this.mouseMode||4==this.mouseMode)k=a.Internal.Selection.selectionArea.mouseMove(b,
c);2===this.mouseMode&&this.isDrawingPath&&(p=a.dom.viewerArea.getBoundingClientRect(),k=5===a.Internal.Annotations.currentInteractiveAnnotProperties.type||16===a.Internal.Annotations.currentInteractiveAnnotProperties.type,p={x:b.clientX+a.Internal.Coordinates.getViewerScrollLeft()-p.left,y:b.clientY+a.Internal.Coordinates.getViewerScrollTop()-p.top},this.isMouseDown&&!k&&(e=!0,k=this.pathPoints.length,1<k&&(e=this.pathPoints[k-2],g=this.pathPoints[k-1],e=1.5<=Math.sqrt(Math.abs((e.y-g.y)*(e.x-p.x)-
(e.y-p.y)*(e.x-g.x)))),e?this.pathPoints.push(p):this.pathPoints[k-1]=p),a.Internal.Annotations.prerenderPendingFreenhandAnnot(p),k=!0);if(!k&&0<a.Internal.Annotations.selected.length)for(e=b.clientX-this.mouseX,g=b.clientY-this.mouseY,p=a.Internal.Annotations.selected.length-1;0<=p;p--){var n=a.Internal.Annotations.selected[p];k|=n.isEditing();if(n.isMoving){n.annotrectNew.left+=e;n.annotrectNew.top+=g;n.render(!0);if(a.callbacks.onAnnotationMoved)a.callbacks.onAnnotationMoved({id:n.annotApp.id});
if(a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(var w=a.Internal.Annotations.selected.length-1;0<=w;w--){var B=a.Internal.Annotations.selected[w];if(B!=n&&(B.annotrectNew.left+=e,B.annotrectNew.top+=g,B.render(!0),a.callbacks.onAnnotationMoved))a.callbacks.onAnnotationMoved({id:B.annotApp.id})}}else if(n.isRotating){if(n.annotApp.properties.rotation=a.Internal.Utilities.normalizeRotation(n.annotApp.properties.rotation+e),n.render(!1),a.Internal.Annotations.multiSelectionEnabled&&
1<a.Internal.Annotations.selected.length)for(w=a.Internal.Annotations.selected.length-1;0<=w;w--)B=a.Internal.Annotations.selected[w],B!=n&&(B.annotApp.properties.rotation=a.Internal.Utilities.normalizeRotation(B.annotApp.properties.rotation+e),B.render(!1))}else if(-1!=n.resizingMode){B=-n.annotApp.properties.rotation*Math.PI/180;w=Math.cos(B);B=Math.sin(B);var I=e;e=e*w-g*B;g=I*B+g*w;I=function(E,V,ba,da){switch(V){case 0:0<E.annotrectNew.width-ba&&(E.annotrectNew.left+=ba,E.addWidth(-ba));E.render(!1);
break;case 1:0<E.annotrectNew.width-ba&&(E.annotrectNew.left+=ba,E.addWidth(-ba));0<E.annotrectNew.height-da&&(E.annotrectNew.top+=da,E.addHeight(-da));E.render(!1);break;case 2:0<E.annotrectNew.height-da&&(E.annotrectNew.top+=da,E.addHeight(-da));E.render(!1);break;case 3:0<E.annotrectNew.width+ba&&E.addWidth(ba);0<E.annotrectNew.height-da&&(E.annotrectNew.top+=da,E.addHeight(-da));E.render(!1);break;case 4:0<E.annotrectNew.width+ba&&E.addWidth(ba);E.render(!1);break;case 5:0<E.annotrectNew.width+
ba&&E.addWidth(ba);0<E.annotrectNew.height+da&&E.addHeight(da);E.render(!1);break;case 6:0<E.annotrectNew.height+da&&E.addHeight(da);E.render(!1);break;case 7:0<E.annotrectNew.width-ba&&(E.annotrectNew.left+=ba,E.addWidth(-ba)),0<E.annotrectNew.height+da&&E.addHeight(da),E.render(!1)}};I(n,n.resizingMode,e,g);if(a.Internal.Annotations.multiSelectionEnabled&&1<a.Internal.Annotations.selected.length)for(w=a.Internal.Annotations.selected.length-1;0<=w;w--)B=a.Internal.Annotations.selected[w],B!=n&&I(B,
n.resizingMode,e,g)}n.updateCursor()}k||0!=this.mouseMode||c||1!=this.canPan()||1!=this.isPanning||(k=!0,dvJQuery(a.dom.viewerArea).scrollLeft(this.mouseDownViewerScrollLeft-(b.clientX-this.mouseDownClientX)),dvJQuery(a.dom.viewerArea).scrollTop(this.mouseDownViewerScrollTop-(b.clientY-this.mouseDownClientY)));this.overLink=!1;3!=this.mouseMode&&4!=this.mouseMode&&(k||(a.dom.checkLinkAt(b.clientX,b.clientY)||(this.overPageText=a.Internal.Text.anyWordHitTest(b.clientX,b.clientY,5)),this.setCursor()),
a.dom.handleLinkRectVisibility());this.mouseX=b.clientX;this.mouseY=b.clientY;return k}},mouseleave:function(b){a.events.disableSingleInputEvents||this.isResizingUI||this.isSelectingText||(this.isPanning=!1,0==this.mouseMode&&a.dom.viewerArea.cursorMgr.setStdCursor("default"),this.overLink=null,a.dom.handleLinkRectVisibility())},mouseenter:function(b){this.isResizingUI||this.isSelectingText||this.setCursor()},setCursor:function(){if(this.isResizingUI)a.dom.viewerArea.cursorMgr.setStdCursor("col-resize");
else switch(this.mouseMode){case 0:if(null!=this.overPageText){var b=a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getRenderRotation(this.overPageText.page)),c=a.Internal.Rotations.getRotateFlipTypeAngle(a.Internal.Pages.getPageRotation(this.overPageText.page)),e=a.Internal.Rotations.getRotateFlipTypeAngle(this.overPageText.textRotate);b=b+e-c;360<b?b-=360:0>b&&(b+=360);90==b||270==b?a.dom.viewerArea.cursorMgr.setStdCursor("vertical-text"):a.dom.viewerArea.cursorMgr.setStdCursor("text");
break}if(this.overLink){a.dom.viewerArea.cursorMgr.setStdCursor("pointer");break}1==this.canPan()?1==!this.isPanning&&a.dom.viewerArea.cursorMgr.setCustomCursorClass("openHandCursor"):a.dom.viewerArea.cursorMgr.setStdCursor("default");break;case 1:null!=a.Internal.Annotations.hoveredAnnot&&17===a.Internal.Annotations.hoveredAnnot.annotApp.properties.type?a.dom.viewerArea.cursorMgr.setStdCursor("default"):a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");break;case 2:a.dom.viewerArea.cursorMgr.setCustomCursorClass("pencilCursor");
break;case 3:case 4:a.dom.viewerArea.cursorMgr.setStdCursor("crosshair");break;case 5:a.dom.viewerArea.cursorMgr.setStdCursor("none")}},onSnapInButtonMouseEnter:function(b){dvJQuery(b).hasClass("active")||(b.style.backgroundColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderBottom,b.style.cursor="pointer");"dv-pspdfkitlight"===a.dom.getTheme()&&(b.style.fill="white",dvJQuery(b).hasClass("active")||(b.style.fill=a.dom.UIconfig.activeSelectedBackgroundColor))},
onSnapInButtonMouseLeave:function(b){dvJQuery(b).hasClass("active")||(b.style.backgroundColor=a.dom.UIconfig.headerColor,b.style.borderTopColor=a.dom.UIconfig.snapInButtonBorderTop,b.style.cursor="default");"dv-pspdfkitlight"===a.dom.getTheme()&&(b.style.fill="white",dvJQuery(b).hasClass("active")||(b.style.fill=""))},onThumbnailAreaMouseDownHandler:function(b){if(b.target==document.getElementById(a.FindSnapIn("thumbnails").snapInID)||b.target==a.dom.thumbnailArea){var c=document.getElementById(a.FindSnapIn("thumbnails").snapInID);
c=dvJQuery(c).offset().left+dvJQuery(c).width()-a.dom.sbWidth;b.pageX>c||(b.ctrlKey||(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.dom.updateThumbsStyle(!1,!0)),a.dom.thumbnailSelectBox&&(a.dom.thumbnailSelectBoxOrigin.left=b.pageX-dvJQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,a.dom.thumbnailSelectBoxOrigin.top=b.pageY-dvJQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,b={display:"block",left:a.dom.thumbnailSelectBoxOrigin.left+"px",top:a.dom.thumbnailSelectBoxOrigin.top+
"px",width:"1px",height:"1px"},a.dom.thumbnailSelectBox.addClass("active").css(b),a.events.isDragMultipleSelecting=!0))}},onThumbnailAreaMouseMoveHandler:function(b){if(a.dom.thumbnailSelectBox.is(".active")){var c=b.pageX-dvJQuery(a.dom.thumbnailArea).offset().left+a.dom.thumbnailArea.scrollLeft,e=b.pageY-dvJQuery(a.dom.thumbnailArea).offset().top+a.dom.thumbnailArea.scrollTop,g=c,k=e,p=a.dom.thumbnailSelectBoxOrigin.left-g,n=a.dom.thumbnailSelectBoxOrigin.top-k;c>a.dom.thumbnailSelectBoxOrigin.left&&
(g=a.dom.thumbnailSelectBoxOrigin.left,p=c-a.dom.thumbnailSelectBoxOrigin.left);e>a.dom.thumbnailSelectBoxOrigin.top&&(k=a.dom.thumbnailSelectBoxOrigin.top,n=e-a.dom.thumbnailSelectBoxOrigin.top);a.dom.thumbnailSelectBox.css({left:g+"px",top:k+"px",width:p+"px",height:n+"px"});c=a.getVisibleThumbnails(!1);p=dvJQuery(a.dom.thumbnailSelectBox).position();e=p.left;g=p.top;k=p.left+dvJQuery(a.dom.thumbnailSelectBox).width();p=p.top+dvJQuery(a.dom.thumbnailSelectBox).height();for(n=0;n<c.length;n++){var w=
dvJQuery(a.dom.thumbnailArea.children[c[n]-1]),B=w.position(),I=B.left,E=B.top,V=B.left+w.width();B=B.top+w.height();(w=a.Internal.Thumbnails.getThumbnailPage(w.get(0)))&&(a.Internal.Coordinates.hasIntersection(e,g,k,p,I,E,V,B)?a.Internal.Thumbnails.selectThumbnail(w):b.ctrlKey||a.Internal.Thumbnails.unselectThumbnail(w))}c=document.getElementById(a.FindSnapIn("thumbnails").snapInID);b.pageY+20>dvJQuery(c).offset().top+dvJQuery(c).height()&&(c.scrollTop+=20);b.pageY-20<dvJQuery(c).offset().top&&(c.scrollTop-=
20);b.preventDefault()}},onThumbnailAreaMouseUpHandler:function(b){a.dom.thumbnailSelectBox.is(".active")&&(a.dom.thumbnailSelectBox.removeClass("active").css("display","none"),a.events.isDragMultipleSelecting=!1);b.preventDefault()},onThumbnailItemClickHandler:function(b){if(!a.events.isResizingUI&&(b.stopImmediatePropagation(),b&&b.target)){var c=a.Internal.Thumbnails.getThumbnailPage(b.target);c&&a.serverCtx.documentLoaded&&0<c&&c<=a.serverCtx.pageCount&&(a.dom.UIconfig.enableMultipleThumbnailSelection&&
b.ctrlKey?a.Internal.Thumbnails.toggleThumbnailSelection(c):0==a.dom.viewerArea.offsetWidth||0==a.dom.viewerArea.offsetHeight?(a.ajax.latestSelectedPage=c,a.dom.updateThumbsStyle(!1,!1)):(b=a.Internal.Thumbnails.isThumbnailSelected(c),a.SelectPageEx(c,!1,!0,!0,!0),a.Internal.Thumbnails.setThumbnailSelected(c,!b)))}},onThumbnailItemMouseOverHandler:function(b){!a.events.isResizingUI&&!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over",
"true"),a.dom.updateThumbStyle(b))},onThumbnailItemMouseOutHandler:function(b){!a.events.isResizingUI&&!a.events.isDragMultipleSelecting&&b&&b.target&&(b=a.Internal.Thumbnails.getThumbnailPage(b.target))&&(a.Internal.Thumbnails.getThumbnailFromPageNo(b)[0].setAttribute("mouse-over","false"),a.dom.updateThumbStyle(b))},onBookmarkItemClickHandler:function(b){!a.events.isResizingUI&&b&&b.target&&(a.dom.selectBookmark(b.target),b.target.action&&(-1<b.target.action.indexOf("PdfPageDest")?a.Internal.Pages.selectByDestination(b.target.action):
-1<b.target.action.indexOf("uri")&&window.open(b.target.action.replace("uri:","").trim(),"_blank")))},onBookmarkItemMouseOverHandler:function(b){a.events.isResizingUI||(b.stopPropagation(),b&&b.currentTarget&&a.dom.setBookmarkOverStyle(b.currentTarget,!0))},onBookmarkItemMouseOutHandler:function(b){a.events.isResizingUI||b&&b.currentTarget&&a.dom.setBookmarkOverStyle(b.currentTarget,!1)},onBookmarkTogglerClickHandler:function(b){if(!a.events.isResizingUI&&b&&b.target){var c=dvJQuery(b.target).parent().find("ul");
dvJQuery(b.target).hasClass("collapsed")?(dvJQuery(b.target).removeClass("collapsed").addClass("expanded"),c.show(),0!=dvJQuery(b.target).parent().children("ul").children("li").children("span.placeholder").length&&b.target.bookmarkID&&(b={url:a.appControllerPath+"/baserequest"+(a.useIdInRoot?"/1":""),data:JSON.stringify({requestName:"bookmarks",requestData:{sessionID:a.ajax.sessionID,contextID:a.ajax.contextID,bookmarkID:b.target.bookmarkID}}),contentType:"application/json",success:function(e){var g=
"string"===typeof e?JSON.parse(e):e;if(g&&g.status===DocuViewareAPI.Status.OK){if(c.empty(),g.bookmarks)for(e=0;e<g.bookmarks.length;e++)a.dom.createBookmarkNode(c,g.bookmarks[e])}else a.ajax.HandleError(e)},error:function(e){a.ajax.HandleError(e)}},a.ajax.PostAjaxRequestForDocuViewareAction(b,!1,!0))):(dvJQuery(b.target).removeClass("expanded").addClass("collapsed"),c.hide())}}},doNextPageViewProcess:function(){if(!this.serverCtx.documentLoaded||!this.cache.canvas)return DocuViewareAPI.Status.GenericError;
if(!a.IsZoomSynchronized())return 0;var b=0;this.serverCtx.singlePageView||(b=this.showVisiblePages(a.GetCurrentPage()));if(!(0==this.serverCtx.pagePreload||this.serverCtx.hasVariableZoomRange&&this.serverCtx.singlePageView)){var c=this.serverCtx.minPagesPreloadPerRequest,e=this.serverCtx.maxPagesForAllPagesPreloadingMode,g=[];if(0==b&&1==(this.serverCtx.pagePreload&1)){var k=this.Internal.Pages.getVisiblePageNumbers();if(0<k.length){var p=k[k.length-1]+1;k=k[0]-1;var n=0==k,w=p==this.serverCtx.pageCount+
1;if(null!=a.cache.Pages)for(var B=0;B<a.cache.Pages.length&&(0==n&&a.cache.Pages[B].pageNo==k?(a.cache.Pages[B].bitmap||a.cache.Pages[B].renderStatus==DocuViewareAPI.Status.OK&&g.push(k),n=!0):a.cache.Pages[B].pageNo==p&&(a.cache.Pages[B].bitmap||a.cache.Pages[B].renderStatus==DocuViewareAPI.Status.OK&&g.push(p),w=!0),!n||!w);B++);n||g.push(k);w||g.push(p)}}if(g.length<c&&2==(this.serverCtx.pagePreload&2)&&e>=this.serverCtx.pageCount)for(e=1;e<=this.serverCtx.pageCount&&(p=!1,(k=a.Internal.Pages.getPage(e))&&
(k.bitmap||k.renderStatus!=DocuViewareAPI.Status.OK)&&(p=!0),p||(g.push(e),g.length!=c));e++);0<g.length&&(b=this.Internal.Pages.pageView(g,!1,!1))}return b},showVisiblePages:function(b){var c=this.Internal.Pages.getVisiblePageNumbers();if(null!=b)for(var e=0;e<c.length;e++)if(c[e]==b){c.splice(e,1);break}return this.Internal.Pages.pageView(c,!0,!1)},previewVisiblePages:function(){for(var b=this.Internal.Pages.getVisiblePageNumbers(),c=0;c<b.length;c++){var e=a.Internal.Pages.getPage(b[c]);e&&(!e.bitmap||
e.drawing||e.drawn||e.drawnPreview||a.DrawPage(e,!0))}},showVisibleThumbnails:function(){this.Internal.Files.uploading||this.ajax.downloading||a.events.isResizingUI||this.dom.thumbnailArea&&1==this.serverCtx.documentLoaded&&this.updateThumbnails(a.getVisibleThumbnails(!0))},getVisibleThumbnails:function(b){var c=this.dom.thumbnailArea,e=this.FindSnapIn("thumbnails");if(e){var g=dvJQuery(document.getElementById(e.snapInID)),k=null;g.is(":visible")||(k=dvJQuery(document.getElementById(e.snapInID)).css(["position",
"visibility","display"]),dvJQuery(g).css({position:"absolute",visibility:"hidden",display:"block"}))}e=this.dom.thumbnailArea.scrollLeft;var p=this.dom.thumbnailArea.scrollTop,n=e+dvJQuery(c).innerWidth();c=p+dvJQuery(c).innerHeight();for(var w=this.dom.thumbnailArea.childElementCount,B=[],I=!1,E=0;E<w;E++){var V=this.dom.thumbnailArea.children[E];if(0!=a.Internal.Thumbnails.getThumbnailPage(V)){var ba=dvJQuery(V).position().left,da=dvJQuery(V).position().top,ea=ba+dvJQuery(V).innerWidth(),la=da+
dvJQuery(V).innerHeight();if(a.Internal.Coordinates.hasIntersection(e,p,n,c,ba,da,ea,la))b?"false"==V.getAttribute("data-moving")&&"false"==V.getAttribute("data-loaded")&&"false"==V.getAttribute("data-loading")&&B.push(E+1):B.push(E+1),I=!0;else if(I)break}}null!==k&&dvJQuery(g).css(k);return B},sortCommentsBy:function(b){var c=function(e,g,k,p){var n=function(B,I){if(I){I=I.split(".");for(var E=0,V=I.length-1;E<V;E++)B=B[I[E]];return B[I[V]]}return B},w=function(B){return k?k(n(B,e)):n(B,e)};return function(B,
I){var E=w(B),V=w(I);return(E<V?-1:E>V?1:"function"===typeof p?p(B,I):0)*[1,-1][+!!g]}};switch(dvJQuery(a.dom.commentsSortBySelect).find("option:selected").val()){case "page":b.sort(c("comment.annotApp.pageNo",!1,null,c("comment.annotApp.zorder",!1,parseFloat)));break;case "author":b.sort(c("comment.annotApp.author",!1,function(e){return e.toUpperCase()}));break;case "date":b.sort(c("comment.annotApp.creationTime",!1,function(e){return new Date(e)}))}},refreshCommentsPanel:function(){null!=a.cache.AnnotsComments&&
0<a.cache.AnnotsComments.length?(dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display","none"),dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity","1")):(dvJQuery(a.dom.commentsSearchActionContainerOverlayDisable).css("display","block"),dvJQuery(a.dom.commentsSortBySelectContainer).css("opacity","0.5"));var b=dvJQuery(a.dom.commentsArea).find("#commentsContainer"+a.uniqueID),c=b.clone();b.empty();b=a.Internal.Annotations.getAllFirstAnnotationComments(a.sortCommentsBy);
for(var e=0;e<b.length;e++)for(var g=a.Internal.Annotations.getFirstAnnotationCommentAnswerOfDiscussion(b[e].comment.annotApp.id);null!=g;)null==b[e].answers?b[e].answers=[g]:b[e].answers.push(g),g=a.Internal.Annotations.getAnnotationCommentFromId(g.annotApp.properties.nextGuid);for(e=0;e<b.length;e++)a.dom.createCommentItem(b[e].comment,b[e].answers,c.find("#dvcomment-"+b[e].comment.annotApp.id+"-"+a.uniqueID));dvJQuery(function(){dvJQuery(".dvtoggle").off();dvJQuery(".dvtoggle").click(function(k){k.stopPropagation();
dvJQuery(this).parents(".dvcomment-header").next(".dvcomment-content").slideToggle();dvJQuery(this).toggleClass("dvcolapsed")})})},updateThumbnails:function(b,c){if(0!==b.length&&a.dom.thumbnailArea&&a.dom.thumbnailArea.children){if(c){for(var e=0;e<b.length;e++){var g=a.Internal.Thumbnails.getThumbnailFromPageNo(b[e]);if(null==g||"false"===g.attr("data-loaded")||"true"===g.attr("data-loading"))b.splice(e,1),e--}if(0===b.length)return}for(e=0;e<b.length;e++)g=a.Internal.Thumbnails.getThumbnailFromPageNo(b[e]),
null!=g&&g.attr("data-loading","true");var k=function(){if(a.dom.thumbnailArea&&a.dom.thumbnailArea.children)for(var p=0;p<b.length;p++){var n=a.Internal.Thumbnails.getThumbnailFromPageNo(b[p]);null!=n&&(n.attr("data-loaded","false"),n.attr("data-loading","false"))}};a.debug&&console.log("DocuVieware: showing visible thumbnails: "+JSON.stringify(b)+"onlyIfLoaded "+(c?"true":"false"));this.ajax.thumbnailRequestNo+=1;a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/baserequest"+
(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({requestName:"thumbnails",requestData:{sessionID:this.ajax.sessionID,contextID:this.ajax.contextID,entries:b,requestNo:this.ajax.thumbnailRequestNo}}),contentType:"application/json",success:function(p){if((p="string"===typeof p?JSON.parse(p):p)&&p.status===DocuViewareAPI.Status.OK){if(p.contextID===a.ajax.contextID&&a.dom.thumbnailArea&&(p=p.images)&&0<p.length){for(var n=0;n<p.length;n++){var w=a.Internal.Thumbnails.getThumbnailFromPageNo(p[n].pageNo);
if(null!=w){w.attr("data-loaded","true");w.attr("data-loading","false");w=w.children("canvas");w.removeClass("spinner-thumb");w.css("backgroundColor","rgba(0,0,0,0)");"dv-pspdfkitlight"===a.dom.getTheme()&&w.css("display","block");var B=new Image;B.owner=w.get(0);B.setAttribute("data-pageNo",p[n].pageNo);B.src="data:"+p[n].mime+";base64,"+p[n].data;var I=p[n].scale;B.onload=function(){var E=this.owner.getContext("2d");E.clearRect(0,0,this.owner.width,this.owner.height);E.save();1==I?(E.mozImageSmoothingEnabled=
!1,E.msImageSmoothingEnabled=!1,E.imageSmoothingEnabled=!1):E.transform(1/I,0,0,1/I,0,0);E.shadowColor=a.Internal.Thumbnails.getThumbnailShadow().THUMBNAIL_SHADOW_COLOR;E.shadowBlur=a.Internal.Thumbnails.getThumbnailShadow().THUMBNAIL_SHADOW_BLUR;E.shadowOffsetX=a.Internal.Thumbnails.getThumbnailShadow().THUMBNAIL_SHADOW_OFFSETX;E.shadowOffsetY=a.Internal.Thumbnails.getThumbnailShadow().THUMBNAIL_SHADOW_OFFSETY;if(a.isIE9){var V=this;window.setTimeout(function(){E.drawImage(V,0,0);E.restore();E=null},
100)}else E.drawImage(this,0,0),E.restore(),E=null}}}a.dom.updateThumbsStyle(!1,!1)}}else k()},error:function(p){a.ajax.HandleError(p);k()}})}},ResetScrollConfig:function(b){a.isIOS?2!==a.GetMouseMode()&&(a.dom.viewerArea.style.overflow="auto"):a.serverCtx.scrollBars?a.dom.viewerArea.style.overflow="auto":(a.dom.viewerArea.style.overflowY="hidden",a.dom.viewerArea.style.overflowX="hidden")},ClearUI:function(){a.ajax.SetNewServerCtx(null)},IsZoomSynchronized:function(){return Math.round(1E3*a.serverCtx.zoom)===
Math.round(1E3*a.cache.pageCanvasZoom)},SetupViewerArea:function(b,c,e,g){var k=Math.round(1E3*a.serverCtx.zoom)!=Math.round(1E3*c);k||g||(a.cache.pageCanvasSizeNoPreview=DocuViewareUtilities.clonePageCanvasSizes(b));var p=!0;if(Math.round(1E3*a.cache.pageCanvasZoom)==Math.round(1E3*c)&&null!=b&&null!=a.cache.pageCanvasSize&&a.cache.pageCanvasSize.length==b.length){p=!1;g=!0;for(var n=0;n<b.length;n++){var w=b[n].PageNo==a.cache.pageCanvasSize[n].PageNo&&1>=Math.abs(b[n].Width-a.cache.pageCanvasSize[n].Width)&&
1>=Math.abs(b[n].Height-a.cache.pageCanvasSize[n].Height);w||(p=!0);if(!w||1<Math.abs(b[n].OffsetX-a.cache.pageCanvasSize[n].OffsetX)||1<Math.abs(b[n].OffsetY-a.cache.pageCanvasSize[n].OffsetY))g=!1}if(g)return}g=a.isIOS?1024:2048;e=!p||e&&Math.round(1E3*a.cache.pageCanvasZoom)==Math.round(1E3*c);e||(a.cache.emptyCanvas(),a.cache.canvas=[],a.cache.pageCanvasZoom=c);a.cache.pageCanvasSize=b;n=DocuViewareUtilities.getPageCanvasSize(a.cache.pageCanvasSize);c=a.dom.viewerArea.clientWidth;p=a.dom.viewerArea.clientHeight;
w=c<n.width;p<n.height&&(c-=a.dom.sbWidth);w&&(p-=a.dom.sbWidth);a.dom.panDiv.style.width=Math.round(Math.max(n.width,c)-2).toString()+"px";a.dom.panDiv.style.height=Math.round(Math.max(n.height,p)-2).toString()+"px";c=e?null:document.createDocumentFragment();for(n=0;n<b.length;n++){p=b[n].OffsetX;w=b[n].OffsetY;var B=b[n].Width+p,I=b[n].Height+w,E=e?a.cache.canvas[n]:[],V=Math.ceil(b[n].Width/g),ba=Math.ceil(b[n].Height/g),da=b[n].Width*b[n].Height>g*g,ea=DocuViewareUtilities.getDevicePixelRatio();
if(da&&(1<V||1<ba))for(var la=da=0,Ha=0;Ha<ba;Ha++){la+=g;la-1>b[n].Height&&(la=b[n].Height-1);var wa=la-da;if(0>=wa)break;for(var va=0,ua=0,Da=0;Da<V;Da++){ua+=g;ua-1>b[n].Width&&(ua=b[n].Width-1);var Ua=ua-va,Ka=e?E.canvas[Ha*V+Da].tile:document.createElement("canvas");e||(Ka.width=Ua*ea,Ka.height=wa*ea,Ka.style.width=Ua+"px",Ka.style.height=wa+"px",Ka.style.display="block",Ka.style.position="absolute",Ka.style.padding="0px",Ka.style.margin="0px",Ka.style.backgroundColor="white");Ka.style.left=
p+va+"px";Ka.style.top=w+da+"px";e?(E.canvas[Ha*V+Da].tx=-(va*ea),E.canvas[Ha*V+Da].ty=-(da*ea)):(c.appendChild(Ka),E.push({tile:Ka,tx:-(va*ea),ty:-(da*ea)}));va+=Ua}da+=wa}else Ka=e?E.canvas[0].tile:document.createElement("canvas"),e||(Ka.width=Math.ceil(b[n].Width*ea),Ka.height=Math.ceil(b[n].Height*ea),Ka.style.width=Math.ceil(b[n].Width)+"px",Ka.style.height=Math.ceil(b[n].Height)+"px",Ka.style.display="block",Ka.style.position="absolute",Ka.style.padding="0px",Ka.style.margin="0px",Ka.style.backgroundColor=
"white",Ka.style.boxShadow="3px 3px 8px rgba(0,0,0,.1)",c.appendChild(Ka),E.push({tile:Ka,tx:0,ty:0})),Ka.style.left=p+"px",Ka.style.top=w+"px";e?(a.cache.canvas[n].top=w,a.cache.canvas[n].left=p,a.cache.canvas[n].right=B,a.cache.canvas[n].bottom=I):a.cache.canvas.push({canvas:E,top:w,left:p,right:B,bottom:I,pageNo:b[n].PageNo})}e||(a.SetMouseMode(a.events.mouseMode),a.dom.viewerArea.insertBefore(c,a.dom.panDiv),a.dom.freehandCan||(a.dom.freehandCan=document.createElement("canvas")),a.dom.freehandCan.style.position=
"absolute",a.dom.freehandCan.style.padding="0px",a.dom.freehandCan.style.margin="0px",a.dom.freehandCan.style.display="none",a.dom.freehandCan.style.zIndex=a.dom.zindexManager.getFreehandDrawingCanvasZindex(),window.PointerEvent?(dvJQuery(a.dom.freehandCan).css("touch-action","none"),a.dom.freehandCan.onpointerup=function(pa){switch(pa.pointerType){case "mouse":a.events.mouseup(pa);break;case "pen":a.events.mouseup(pa);break;case "touch":a.events.mouseup(pa);break;default:a.events.mouseup(pa)}},a.dom.freehandCan.onpointerdown=
function(pa){switch(pa.pointerType){case "mouse":a.events.mousedown(pa,!1,!1);break;case "pen":a.events.mousedown(pa,!1,!0);break;case "touch":a.events.mousedown(pa,!0,!1);break;default:a.events.mousedown(pa,!1,!1)}},a.dom.freehandCan.onpointermove=function(pa){switch(pa.pointerType){case "mouse":a.events.mousemove(pa,!1);break;case "pen":pa.preventDefault();a.events.mousemove(pa,!0);break;case "touch":pa.preventDefault();a.events.mousemove(pa,!0);break;default:a.events.mousemove(pa,!1)}},a.dom.freehandCan.onpointerleave=
function(pa){switch(pa.pointerType){case "mouse":a.events.mouseleave(pa);break;case "pen":a.events.mouseleave(pa);break;default:a.events.mouseleave(pa)}},a.dom.freehandCan.onpointerenter=function(pa){switch(pa.pointerType){case "mouse":a.events.mouseenter(pa);break;case "pen":a.events.mouseenter(pa);break;default:a.events.mouseenter(pa)}}):(a.dom.freehandCan.onmouseup=function(pa){a.events.mouseup(pa)},a.dom.freehandCan.onmousedown=function(pa){a.events.mousedown(pa)},a.dom.freehandCan.onmousemove=
function(pa){a.events.mousemove(pa)},a.dom.freehandCan.onmouseleave=function(pa){a.events.mouseleave(pa)},a.dom.freehandCan.onmouseenter=function(pa){a.events.mouseenter(pa)},a.dom.freehandCan.ontouchstart=function(pa){1==pa.changedTouches.length&&a.events.mousedown(pa.changedTouches[0])},a.dom.freehandCan.ontouchmove=function(pa){1==pa.changedTouches.length&&(pa.preventDefault(),a.events.mousemove(pa.changedTouches[0],!0))},a.dom.freehandCan.ontouchend=function(pa){1==pa.changedTouches.length&&a.events.mouseup(pa.changedTouches[0])}),
a.dom.freehandCan.ondblclick=function(pa){a.events.dblclick(pa)},a.dom.viewerArea.appendChild(a.dom.freehandCan),null!=a.dom.annotationsActionButtons&&a.dom.viewerArea.appendChild(a.dom.annotationsActionButtons));a.Internal.Selection.clearSelectionArea();a.UpdatePageBoundsDiv(a.GetCurrentPage());a.dom.SelectedTextRegions.onPageBoundsChanged();a.dom.handleLinkRectVisibility();if(k)null!=a.dom.annotationsActionButtons&&dvJQuery(a.dom.annotationsActionButtons).hide();else if(null!=a.cache.Annots)for(b=
0;b<a.cache.Annots.length;b++)k=a.cache.Annots[b],k.annotApp.visible&&(g=a.cache.getPageCanvas(k.annotApp.pageNo),null!=g&&(k.updatePageInfo(g.left,g.top,null),k.render()));if(null!=a.cache.FormFields)for(b=0;b<a.cache.FormFields.length;b++)a.cache.FormFields[b].render()},UpdateUI:function(b,c,e,g,k,p,n){a.Internal.Annotations.hoveredAnnot=null;var w=null!=a.serverCtx&&a.serverCtx.documentLoaded;b&&(this.ajax.latestSelectedPage=this.serverCtx.selectedPage,this.CloseDialogForm());this.dom.singlePageView!=
this.serverCtx.singlePageView&&(this.dom.singlePageView=this.serverCtx.singlePageView,this.dom.updateSinglePageModeButton());k||!a.serverCtx.clearCachedBitmap&&!a.serverCtx.clearCachedPages||(a.serverCtx.clearCachedPages?(a.debug&&console.log("DocuVieware: Cached pages removed. zoom: "+a.serverCtx.zoom),a.cache.clearCachedPages()):a.serverCtx.clearCachedBitmap&&(a.debug&&console.log("DocuVieware: Cached bitmap removed. zoom: "+a.serverCtx.zoom),a.cache.clearCachedBitmap()),a.serverCtx.clearCachedBitmap=
!1,a.serverCtx.clearCachedPages=!1);this.ResetScrollConfig(!1);if(w){var B=[];if(null!=a.serverCtx.pageCanvasSize){a.SetupViewerArea(a.serverCtx.pageCanvasSize,a.serverCtx.zoom,n);a.serverCtx.pageCanvasSize=null;if(a.cache.viewRotation!=a.serverCtx.viewRotation&&a.serverCtx.applyViewRotationToThumbnails)for(n=1;n<=a.serverCtx.pageCount;n++)a.Internal.Thumbnails.resetThumbnailFromPageNo(n);if(a.serverCtx.thumbnailsReset){for(n=0;n<a.serverCtx.thumbnailsReset.length;n++)a.Internal.Thumbnails.resetThumbnailFromPageNo(a.serverCtx.thumbnailsReset[n]);
a.serverCtx.thumbnailsReset=null}a.cache.viewRotation=a.serverCtx.viewRotation}if(a.serverCtx.pagesReset){for(n=0;n<a.serverCtx.pagesReset.length;n++)a.cache.clearPage(a.serverCtx.pagesReset[n]);a.serverCtx.pagesReset=null}c||(a.debug&&console.log("DocuVieware: Setting scrollbar values of page: "+a.GetCurrentPage()+" / "+a.GetLastPageNoRequest()+" v: "+a.serverCtx.vScrollbarVal.toString()),a.events.freezeScrollEvents=!0,setTimeout(function(){a.events.freezeScrollEvents=!1},1E3),a.serverCtx.vScrollbarVisible&&
a.serverCtx.hScrollbarVisible?(a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal,2),a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal,2)):a.serverCtx.vScrollbarVisible?a.Internal.Coordinates.setViewerScrollTop(a.serverCtx.vScrollbarVal,2):a.serverCtx.hScrollbarVisible&&a.Internal.Coordinates.setViewerScrollLeft(a.serverCtx.hScrollbarVal,2));null!=a.serverCtx.annotsComments&&a.dom.commentsArea&&(a.Internal.Annotations.setAnnotationsComments(a.serverCtx.annotsComments),
a.refreshCommentsPanel());null!=a.serverCtx.annotsRedactionReferences&&a.dom.redactionsPanel&&(a.Internal.Annotations.setAnnotsRedactionReferences(a.serverCtx.annotsRedactionReferences),a.Internal.Redaction.refreshRedactionPanel(!1));if(null!=a.serverCtx.page)for(n=0;n<a.serverCtx.page.length;n++){var I=!1;c=a.serverCtx.page[n].pageNo;var E=a.Internal.Pages.getPage(c);E&&(I=!0,!k&&a.serverCtx.page[n].data&&(E.bitmap=null));I||(E={pageNo:c,drawn:!1,drawnPreview:!1,drawing:!1},a.cache.cachePage(E));
E.renderStatus=a.serverCtx.page[n].renderStatus;k||(p||(E.renderRotation=a.serverCtx.page[n].renderRotation,E.pageRotation=a.serverCtx.page[n].pageRotation,E.viewRotation=a.serverCtx.page[n].viewRotation,E.drawn&&!a.Internal.Matrix.equal(E.matrix,a.serverCtx.page[n].matrix)&&(E.drawn=!1),E.matrix=a.serverCtx.page[n].matrix,E.contentMatrix=a.serverCtx.page[n].contentMatrix,E.zoom=a.serverCtx.page[n].zoom,E.viewRotation=a.serverCtx.page[n].viewRotation),E.width=a.serverCtx.page[n].width,E.height=a.serverCtx.page[n].height);
if(a.serverCtx.page[n].formFields&&(I=a.serverCtx.page[n].formFields,I.firstAccess&&(a.Internal.FormFields.removePageFormFields(E.pageNo),E.drawn&&(E.drawn=!1)),I.formFieldsApp)){for(var V=0;V<I.formFieldsApp.length;V++)a.Internal.FormFields.newController(I.formFieldsApp[V]);E.drawn&&(E.drawn=!1)}if(a.serverCtx.page[n].annots&&(I=a.serverCtx.page[n].annots,I.firstAccess&&(a.Internal.Annotations.removePageAnnots(E.pageNo),E.drawn&&(E.drawn=!1)),I.annotsApp)){V=a.cache.getPageCanvas(E.pageNo);for(var ba=
0;ba<I.annotsApp.length;ba++)a.Internal.Annotations.newController(I.annotsApp[ba],null!=V?V.left:0,null!=V?V.top:0,E.contentMatrix);E.drawn&&(E.drawn=!1)}a.serverCtx.page[n].text&&(E.text=a.serverCtx.page[n].text);a.serverCtx.page[n].links&&(E.links=a.serverCtx.page[n].links);a.GetCurrentPage()===E.pageNo&&a.UpdatePageBoundsDiv(E.pageNo);k||(a.serverCtx.page[n].data?(I=new Image,I.src="data:"+a.serverCtx.page[n].mime+";base64,"+a.serverCtx.page[n].data,a.cache.attachImageToPage(E,I,a.serverCtx.page[n].scale,
a.serverCtx.page[n].hasTransparency),E.drawn=!1,I.setAttribute("data-pageNo",c),e&&(E.drawing=!0,I.onload=function(da){da=parseInt(this.getAttribute("data-pageNo"));a.DrawPage(a.cache.getPageObject(da),!1)})):e&&(null!=E.bitmap?a.Internal.Pages.isPageVisible(E.pageNo)&&(E.drawing=!0,a.DrawPage(E,!1)):(a.debug&&console.log("DocuVieware: draw page request without attached bitmap "+c+". render status: "+E.renderStatus),E.renderStatus==DocuViewareAPI.Status.OK&&(E.renderStatus=DocuViewareAPI.Status.GenericError))),
a.serverCtx.page[n].updateThumbnail&&B.push(c));a.serverCtx.page[n]=null;null==E.bitmap&&(E.TransferRetries||(E.TransferRetries=0),E.TransferRetries++<DocuViewareConstants.MAX_PAGE_TRANSFER_RETRIES&&(a.debug&&console.log("DocuVieware: new page content received without attached bitmap "+c+". Total retries: "+parseFloat(E.TransferRetries)),a.Internal.Pages.pageView([E.pageNo],!1,!0)))}a.updateThumbnails(B,!0)}if(b){if(0<a.serverCtx.pageCount&&a.dom.thumbnailArea){e=document.createDocumentFragment();
for(k=0;k<a.serverCtx.pageCount;k++)e.appendChild(a.Internal.Thumbnails.createThumbnail(k+1));a.dom.thumbnailArea.appendChild(e);a.dom.updateThumbsStyle(!0,!0);a.Internal.Thumbnails.setThumbnailSelected(this.serverCtx.selectedPage,!0)}if(null!=a.serverCtx.bookmarks&&a.dom.bookmarksArea){for(n=0;n<a.serverCtx.bookmarks.length;n++)e=a.serverCtx.bookmarks[n],a.dom.createBookmarkNode(dvJQuery(a.dom.bookmarksTree),e);a.SetSnapInVisibility("bookmarks",!0)}}if(!w||b||g)a.SetSnapInVisibility("annotations",
w&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("comments",w&&a.serverCtx.annotationEditorMode),a.SetSnapInVisibility("thumbnails",w),a.SetSnapInVisibility("bookmarks",w&&0<dvJQuery(a.dom.bookmarksTree).children().length),a.SetSnapInVisibility("search",w&&a.serverCtx.enableTextSearch),a.SetSnapInVisibility("redaction",w&&a.serverCtx.hasRedactionSupport),a.SetSnapInVisibility("digisign",w&&a.serverCtx.enableDigiSign&&3===a.serverCtx.documentType);a.dom.leftSideArea&&(a.isIE9||a.isIE10)&&
dvJQuery(a.dom.leftSideContainerPanelsArea).height(dvJQuery(a.dom.controlArea).height()-dvJQuery(a.dom.snapinsHeader).height());w&&(a.isIEorEdge&&!a.serverCtx.singlePageView&&a.serverCtx.vScrollbarMax>DocuViewareConstants.IE_MAX_SCROLL_TOP_LIMIT?a.ToggleSinglePageViewMode():(a.showVisibleThumbnails(),a.doNextPageViewProcess()))},UpdatePageBoundsDiv:function(b){a.dom.pageBoundsDiv.style.display="none"},DrawPage:function(b,c){if(null!==b&&null!==b.matrix&&null!=b.bitmap){var e=a.cache.getPageCanvas(b.pageNo);
b.drawing=!1;if(null!==e){var g=b.zoom,k=Math.round(1E3*g)!==Math.round(1E3*a.cache.pageCanvasZoom),p;(p=c?!b.drawnPreview:!b.drawn)&&b.viewRotation!==a.cache.viewRotation&&(p=!1);if(p){var n=null;p=b.matrix;var w=DocuViewareUtilities.getDevicePixelRatio(),B=a.serverCtx.enableSmoothing,I=!(a.isIE||a.isFirefox),E="high";k&&(B=!0,1!==w&&(E="medium"),g=a.cache.pageCanvasZoom/g,p=a.Internal.Matrix.combine(p,{a:g,b:0,c:0,d:g,e:0,f:0}));1!==w&&a.Internal.Matrix.isRotatedOrFlipped(p)&&(p=a.Internal.Matrix.combine({a:1/
w,b:0,c:0,d:1/w,e:0,f:0},p),p=a.Internal.Matrix.combine(p,{a:w,b:0,c:0,d:w,e:0,f:0}));g=b.scale;1!==g&&(p=a.Internal.Matrix.combine({a:1/g,b:0,c:0,d:1/g,e:0,f:0},p));a.debug&&console.log("DocuVieware: drawing page: "+b.pageNo+". mat: "+JSON.stringify(p)+" previewmode: "+(c?"true":"false"));var V=Math.abs(p.a)+Math.abs(p.c),ba=Math.abs(p.b)+Math.abs(p.d);try{var da=B&&!I?.15>=Math.min(V,ba)?3:.5>=Math.min(V,ba)?2:1:1;if(1!==da){var ea=b.bitmap.width,la=b.bitmap.height;if(a.attachedDebugger&&a.isIE)if(9437184>
b.bitmap.width*b.bitmap.height)if(p={a:p.a*Math.pow(2,da-1),b:p.b*Math.pow(2,da-1),c:p.c*Math.pow(2,da-1),d:p.d*Math.pow(2,da-1),e:p.e,f:p.f},b.hasTransparency)if(2==da)va=document.createElement("canvas"),va.width=ea/2,va.height=la/2,ua=va.getContext("2d"),ua.drawImage(b.bitmap,0,0,ea/2,la/2),ua=null,n=va;else{va=document.createElement("canvas");va.width=ea/2;va.height=la/2;ua=va.getContext("2d");ua.drawImage(b.bitmap,0,0,ea/2,la/2);ua=null;var Ha=document.createElement("canvas");Ha.width=ea/4;Ha.height=
la/4;var wa=Ha.getContext("2d");wa.drawImage(va,0,0,ea/4,la/4);wa=null;n=Ha}else{var va=document.createElement("canvas");va.width=ea/2;va.height=la/2;for(var ua=va.getContext("2d"),Da=0;Da<da-1;Da++)ua.drawImage(0==Da?b.bitmap:va,0,0,ea/Math.pow(2,Da+1),la/Math.pow(2,Da+1));n=va}else n=b.bitmap;else{var Ua=document.createElement("canvas");Ua.width=ea;Ua.height=la;var Ka=Ua.getContext("2d");Ka.mozImageSmoothingEnabled=!1;Ka.msImageSmoothingEnabled=!1;Ka.imageSmoothingEnabled=!1;Ka.drawImage(b.bitmap,
0,0,ea,la);var pa=document.createElement("canvas");pa.width=Math.ceil(ea*V);pa.height=Math.ceil(la*ba);var Fa=pa.getContext("2d"),gb=Fa.getImageData(0,0,pa.width,pa.height);p=a.Internal.Matrix.combine({a:1/V,b:0,c:0,d:1/ba,e:0,f:0},p);var sb=Ka.getImageData(0,0,Ua.width,Ua.height).data;Ka=null;a.Internal.Libs.pica.resize({src:sb,dest:gb.data,width:Ua.width,height:Ua.height,toWidth:pa.width,toHeight:pa.height,alpha:b.hasTransparency,quality:da-2});Fa.putImageData(gb,0,0);sb=Ua=Fa=gb=null;n=pa}}else n=
b.bitmap;if(n){for(Da=0;Da<e.canvas.length;Da++){var mb=e.canvas[Da].tile;if(null!==mb){mb.style.backgroundColor="transparent";var Va=mb.getContext("2d");if(null===Va)console.log("Can not obtain 2d context for the tile "+(Da+1).toString()+"\r\nTile count: "+e.canvas.length.toString());else if(Va.save(),Va.clearRect(0,0,mb.width,mb.height),Va.mozImageSmoothingEnabled=B,Va.msImageSmoothingEnabled=B,(Va.imageSmoothingEnabled=B)&&I&&(Va.imageSmoothingQuality=E),1===p.a&&0===p.b&&0===p.c&&1===p.d&&0===
p.e+e.canvas[Da].tx&&0===p.f+e.canvas[Da].ty||Va.transform(p.a,p.b,p.c,p.d,p.e+e.canvas[Da].tx,p.f+e.canvas[Da].ty),a.isIE9)window.setTimeout(function(){if(9437184<n.width*n.height){var Ma=Math.round(n.width/2),kb=Math.round(n.height/2),Hb=1/V,aa=1/ba;Va.drawImage(n,0,0,Ma,kb,0,0,Ma,kb);Va.drawImage(n,Ma,0,Ma,kb,Ma-Hb,0,Ma,kb);Va.drawImage(n,0,kb,Ma,kb,0,kb-aa,Ma,kb);Va.drawImage(n,Ma,kb,Ma,kb,Ma-Hb,kb-aa,Ma,kb)}else Va.drawImage(n,0,0);Va.restore();Va=null},100);else{if(9437184<=n.width*n.height){var Ya=
Math.round(n.width/2),jb=Math.round(n.height/2);ea=1/V;la=1/ba;Va.drawImage(n,0,0,Ya,jb,0,0,Ya,jb);Va.drawImage(n,Ya,0,Ya,jb,Ya-ea,0,Ya,jb);Va.drawImage(n,0,jb,Ya,jb,0,jb-la,Ya,jb);Va.drawImage(n,Ya,jb,Ya,jb,Ya-ea,jb-la,Ya,jb)}else Va.drawImage(n,0,0);Va.restore();Va=null}}}c?b.drawnPreview=!0:b.drawn=!0}}catch(Ma){Da="DocuVieware page drawing exception: "+Ma.message+"\r\nDownscales: "+da.toString(),a.debug?alert(Da):console.log(Da)}}if(!k){if(null!=a.cache.FormFields)for(Da=0;Da<a.cache.FormFields.length;Da++)k=
a.cache.FormFields[Da],k.control&&k.formFieldApp.pageNo==b.pageNo&&(a.Internal.FormFields.existFormField(k)||a.dom.viewerArea.appendChild(k.control),k.render());if(null!=a.cache.Annots)for(Da=0;Da<a.cache.Annots.length;Da++)if(k=a.cache.Annots[Da],k.annotApp.pageNo==b.pageNo&&(k.updatePageInfo(e.left,e.top,b.contentMatrix),k.annotApp.visible)){c=!0;if(a.dom.viewerArea.hasChildNodes())for(da=a.dom.viewerArea.children.length-1;0<=da;da--)if(a.dom.viewerArea.children[da]===k.canvas){c=!1;break}c&&a.dom.viewerArea.appendChild(k.canvas);
k.render()}a.Internal.Search.highlightResults(b.pageNo)}}}},resetServerCtx:function(){this.serverCtx={zoomMode:0,zoom:0,documentLoaded:!1,pageCount:0,selectedPage:0,imageCanvasSize:null,enableSmoothing:!1,hScrollbarVal:0,hScrollbarMax:0,hScrollbarVisible:!1,vScrollbarVal:0,vScrollbarMax:0,vScrollbarVisible:!1,image:null}},setDialogAnnotationFontNamePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family",dvJQuery(a.dom.annotationDialogFormFontNameSelect).find("option:selected").val());
this.setDialogAnnotationLineAlignmentPropertiesPreview()},setDialogAnnotationFontSizePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size",dvJQuery(a.dom.annotationDialogFormFontSizeInput).val()+"px");this.setDialogAnnotationLineAlignmentPropertiesPreview()},setDialogAnnotationFontColorPropertiesPreview:function(){},setDialogAnnotationFontStylePropertiesPreview:function(){dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","none");dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style",
"normal");dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight","normal");var b=parseInt(dvJQuery(a.dom.annotationDialogFormFontStyleSelect).find("option:selected").val());if(!1===isNaN(b))switch(b){case 0:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","none");break;case 1:dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight","bold");break;case 2:dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style","italic");break;case 4:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration",
"underline");break;case 8:dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration","line-through")}else{b=0;dvJQuery(a.dom.annotationDialogFormFontStyleCheckboxContainer).find("* :checked").each(function(){b|=parseInt(this.value)});1===(b&1)&&dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight","bold");2===(b&2)&&dvJQuery(a.dom.annotationDialogFormTextInput).css("font-style","italic");var c="";4===(b&4)&&(c+="underline");8===(b&8)&&(c+=" line-through");""!==c&&dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration",
c)}},setDialogAnnotationAlignmentPropertiesPreview:function(){switch(parseInt(dvJQuery(a.dom.annotationDialogFormAlignmentSelect).filter(":checked").val())){case 0:var b="left";break;case 1:b="center";break;case 2:b="right";break;default:b="left"}dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align",b)},setDialogAnnotationLineAlignmentPropertiesPreview:function(){var b=dvJQuery("<div>");b.css("width",dvJQuery(a.dom.annotationDialogFormTextInput).width());b.css("font-size",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-size"));
b.css("font-family",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-family"));b.css("font-weight",dvJQuery(a.dom.annotationDialogFormTextInput).css("font-weight"));b.css("text-decoration",dvJQuery(a.dom.annotationDialogFormTextInput).css("text-decoration"));b.css("text-align",dvJQuery(a.dom.annotationDialogFormTextInput).css("text-align"));b.css("display","none");var c=dvJQuery(a.dom.annotationDialogFormTextInput).val();b.html((c+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));
dvJQuery(a.dom.annotationDialogForm).append(b);c="top";switch(parseInt(dvJQuery("[name='annotation_line_alignment_select"+a.uniqueID+"']:checked").val())){case 0:c="top";break;case 1:c="middle";break;case 2:c="bottom"}dvJQuery(a.dom.annotationDialogFormTextInput).css("vertical-align",c);b.remove()},setDialogSignatureFontNamePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("font-family",dvJQuery(a.dom.signatureDialogFormFontNameSelect).find("option:selected").val());this.setDialogSignatureLineAlignmentPropertiesPreview()},
setDialogSignatureFontSizePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("font-size",dvJQuery(a.dom.signatureDialogFormFontSizeInput).val()+"px");this.setDialogSignatureLineAlignmentPropertiesPreview()},setDialogSignatureFontColorPropertiesPreview:function(){"legacy"===a.dom.mainArea.attributes["data-theme-layout"].value&&dvJQuery(a.dom.signatureDialogFormTextInput).css("color",dvJQuery(dvJQuery(a.dom.signatureDialogFormForeColorInput)).minicolors("rgbaString"))},setDialogSignatureFontStylePropertiesPreview:function(){dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration",
"none");dvJQuery(a.dom.signatureDialogFormTextInput).css("font-style","normal");dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight","normal");var b=parseInt(dvJQuery(a.dom.signatureDialogFormFontStyleSelect).find("option:selected").val());if(!1===isNaN(b))switch(b){case 0:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","none");break;case 1:dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight","bold");break;case 2:dvJQuery(a.dom.signatureDialogFormTextInput).css("font-style",
"italic");break;case 4:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","underline");break;case 8:dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration","line-through")}else{b=0;dvJQuery(a.dom.signatureDialogFormFontStyleCheckboxes).find("* :checked").each(function(){b|=parseInt(this.value)});1===(b&1)&&dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight","bold");2===(b&2)&&dvJQuery(a.dom.signatureDialogFormTextInput).css("font-style","italic");var c="";4===
(b&4)&&(c+="underline");8===(b&8)&&(c+=" line-through");""!==c&&dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration",c)}},setDialogSignatureAlignmentPropertiesPreview:function(){switch(parseInt(dvJQuery(a.dom.signatureDialogFormAlignmentSelect).filter(":checked").val())){case 0:var b="left";break;case 1:b="center";break;case 2:b="right";break;default:b="left"}dvJQuery(a.dom.signatureDialogFormTextInput).css("text-align",b)},setDialogSignatureLineAlignmentPropertiesPreview:function(){var b=
dvJQuery("<div>");b.css("width",dvJQuery(a.dom.signatureDialogFormTextInput).width());b.css("font-size",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-size"));b.css("font-family",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-family"));b.css("font-weight",dvJQuery(a.dom.signatureDialogFormTextInput).css("font-weight"));b.css("text-decoration",dvJQuery(a.dom.signatureDialogFormTextInput).css("text-decoration"));b.css("text-align",dvJQuery(a.dom.signatureDialogFormTextInput).css("text-align"));
b.css("display","none");var c=dvJQuery(a.dom.signatureDialogFormTextInput).val();b.html((c+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"));dvJQuery(a.dom.signatureTextDialogForm).append(b);switch(parseInt(dvJQuery("[name='signature_line_alignment_select"+a.uniqueID+"']:checked").val())){case 0:c="dv-pspdfkitlight"===a.dom.getTheme()?"top":0;break;case 1:c="dv-pspdfkitlight"===a.dom.getTheme()?"middle":Math.max(0,(dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-
b.height())/2);break;case 2:c="dv-pspdfkitlight"===a.dom.getTheme()?"bottom":Math.max(0,dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-b.height()-1);break;default:c="dv-pspdfkitlight"===a.dom.getTheme()?"top":0}"dv-pspdfkitlight"===a.dom.getTheme()?(dvJQuery(a.dom.signatureDialogFormTextInput).css("vertical-align",c),dvJQuery(a.dom.signatureDialogFormTextInput).css("height","100px")):(dvJQuery(a.dom.signatureDialogFormTextInput).css("height",dvJQuery(a.dom.signatureDialogFormTextInput).attr("data-original-height")-
c+"px"),dvJQuery(a.dom.signatureDialogFormTextInput).css("padding-top",c+"px"));b.remove()},inputControl:function(b,c,e,g){var k=b.val().split(""),p="",n="";if("int"==c)w=/^([0-9])$/,B=/^([0-9][0-9]*)$/;else if("float"==c)var w=/(^\d+$)|(^\d+\.\d+$)|[,\.]/,B=/^([0-9][0-9]*[,\.]?\d{0,3})$/;for(var I in k)1==w.test(k[I])&&""!=k[I]&&(n+=""+k[I].replace(",","."),1==B.test(n)&&(p+=""+k[I].replace(",",".")));"undefined"!==typeof e&&null!==e&&p<e&&(p=e);"undefined"!==typeof g&&null!==g&&p>g&&(p=g);b.val(p)},
inputPageRangeControl:function(b){var c=b.value.split(""),e=/^([0-9|;-])$/,g="",k;for(k in c)1==e.test(c[k])&&(g+=c[k]);b.value=g},ToggleSinglePageViewMode_Click:function(){this.ToggleSinglePageViewMode()},pageRangeSelection:function(b,c){switch(parseInt(b)){case 0:c.value="1-"+a.GetPageCount();c.disabled=!0;break;case 1:c.value=a.GetCurrentPage();c.disabled=!0;break;case 2:c.disabled=!1}},SelectFirstPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,1),this.EnsurePageVisibility(1),
a.SelectPage(1))},SelectNextPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectNextPageTimeout&&(clearTimeout(this.selectNextPageTimeout),this.selectNextPageTimeout=null);this.selectNextPageActions?this.selectNextPageActions++:this.selectNextPageActions=1;var b=Math.min(this.GetLastPageNoRequest()+this.selectNextPageActions,this.serverCtx.pageCount);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);this.selectNextPageTimeout=setTimeout(function(){a.GetLastPageNoRequest()+
1<=a.serverCtx.pageCount&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectNextPageActions=0},300)}},SelectPreviousPage_Click:function(){if(this.serverCtx.documentLoaded){this.selectPreviousPageTimeout&&(clearTimeout(this.selectPreviousPageTimeout),this.selectPreviousPageTimeout=null);this.selectPreviousPageActions?this.selectPreviousPageActions++:this.selectPreviousPageActions=1;var b=Math.max(this.GetLastPageNoRequest()-this.selectPreviousPageActions,1);this.dom.updateSelectedPageFader(0,b);this.EnsurePageVisibility(b);
this.selectPreviousPageTimeout=setTimeout(function(){1<a.GetLastPageNoRequest()&&a.SelectPageEx(b,!0,!1,!0,!0);a.selectPreviousPageActions=0},300)}},SelectLastPage_Click:function(){this.serverCtx.documentLoaded&&(this.dom.updateSelectedPageFader(0,a.serverCtx.pageCount),this.EnsurePageVisibility(a.serverCtx.pageCount),a.SelectPage(a.serverCtx.pageCount))},ToggleMobileToolbar_Click:function(){a.dom.mobileToolbarContainer&&dvJQuery(a.dom.mobileToolbarContainer).slideToggle("fast")},ZoomMode_Click:function(){a.dom.subMenuZoomMode&&
(this.hideAllSubMenus(),dvJQuery(a.dom.subMenuZoomMode).show().position({my:"left top",at:"left bottom",of:dvJQuery(a.dom.zoomModeButton)}),this.hideAllSubMenusOnNextClick());a.dom.mobileToolbarContainer&&a.dom.subMenuZoomModeMobile&&(dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).addClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active"),"-60px"===dvJQuery(a.dom.mobileToolbarContainer).css("margin-right")?
(dvJQuery(a.dom.subMenuZoomModeMobile).show(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==dvJQuery(a.dom.subMenuZoomModeMobile).css("display")?(dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+
a.uniqueID).removeClass("button_active")):(dvJQuery(a.dom.subMenuZoomModeMobile).show(),dvJQuery(a.dom.subMenuMouseModeMobile).hide()),a.dom.updateButtons())},MouseMode_Click:function(){a.dom.subMenuMouseMode&&(this.hideAllSubMenus(),dvJQuery(a.dom.subMenuMouseMode).show().position({my:"left top",at:"left bottom",of:dvJQuery(a.dom.mouseModeButton)}));this.hideAllSubMenusOnNextClick();a.dom.mobileToolbarContainer&&a.dom.subMenuMouseModeMobile&&(dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+
a.uniqueID).addClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),"-60px"===dvJQuery(a.dom.mobileToolbarContainer).css("margin-right")?(dvJQuery(a.dom.subMenuMouseModeMobile).show(),dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","")):"none"!==dvJQuery(a.dom.subMenuMouseModeMobile).css("display")?(dvJQuery(a.dom.mobileToolbarContainer).css("margin-right","-60px"),
dvJQuery(a.dom.subMenuZoomModeMobile).hide(),dvJQuery(a.dom.subMenuMouseModeMobile).hide(),dvJQuery(a.dom.mobileToolbarContainer).find("#zoomModeButtonMobile"+a.uniqueID).removeClass("button_active"),dvJQuery(a.dom.mobileToolbarContainer).find("#mouseModeButtonMobile"+a.uniqueID).removeClass("button_active")):(dvJQuery(a.dom.subMenuMouseModeMobile).show(),dvJQuery(a.dom.subMenuZoomModeMobile).hide()),a.dom.updateButtons())},hideAllSubMenusOnNextClick(){dvJQuery(document).one("click",this.hideAllSubMenus)},
hideAllSubMenus(b){b&&b.preventDefault();a.dom.subMenuZoomMode&&dvJQuery(a.dom.subMenuZoomMode).hide();a.dom.subMenuMouseMode&&dvJQuery(a.dom.subMenuMouseMode).hide();a.dom.subMenuPageViewMode&&dvJQuery(a.dom.subMenuPageViewMode).hide()},restartZoomInTimeout:function(b){b&&(a.events.enableZoomPreviewAutoSubmitter(),a.zoomInActions=1,a.ZoomINPreview(1));a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null);a.events.isZoomingPreview&&(a.zoomInTimeout=setTimeout(function(){a.zoomInActions++;
a.ZoomINPreview(a.zoomInActions);a.restartZoomInTimeout(!1)},250))},ZoomIN_MouseUp:function(){a.ZoomINMouseDown=!1;null!=a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null,a.events.isZoomingPreview=!1)},ZoomIN_MouseLeave:function(){null!=a.zoomInTimeout&&(clearTimeout(a.zoomInTimeout),a.zoomInTimeout=null,a.ZoomINMouseDown&&(a.ZoomINMouseDown=!1,a.events.isZoomingPreview=!1,a.ZoomIN_Click()))},ZoomIN_MouseDown:function(){a.ZoomINMouseDown=!0;a.events.isZoomingPreview=!0;a.restartZoomInTimeout(!0)},
ZoomIN_Click:function(){a.ZoomIN(null!=a.zoomInActions?a.zoomInActions:1,!0,!0,null,null)},ZoomOUT_MouseUp:function(){a.ZoomOUTMouseDown=!1;null!=a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null,a.events.isZoomingPreview=!1)},ZoomOUT_MouseLeave:function(){null!=a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null,a.ZoomOUTMouseDown&&(a.ZoomOUTMouseDown=!1,a.events.isZoomingPreview=!1,a.ZoomOUT_Click()))},restartZoomOutTimeout:function(b){b&&(a.events.enableZoomPreviewAutoSubmitter(),
a.zoomOutActions=1,a.ZoomOUTPreview(1));a.zoomOutTimeout&&(clearTimeout(a.zoomOutTimeout),a.zoomOutTimeout=null);a.events.isZoomingPreview&&(a.zoomOutTimeout=setTimeout(function(){a.zoomOutActions++;a.ZoomOUTPreview(a.zoomOutActions);a.restartZoomOutTimeout(!1)},250))},ZoomOUT_MouseDown:function(){a.ZoomOUTMouseDown=!0;a.events.isZoomingPreview=!0;a.restartZoomOutTimeout(!0)},ZoomOUT_Click:function(){a.ZoomOUT(null!=a.zoomOutActions?a.zoomOutActions:1,!0,!0,null,null)},Rotate90_Click:function(){this.rotate90Timeout&&
(clearTimeout(this.rotate90Timeout),this.rotate90Timeout=null);this.rotate90Actions?this.rotate90Actions++:this.rotate90Actions=1;this.rotate90Timeout=setTimeout(function(){var b=a.rotate90Actions%4;0!=b%4&&a.Rotate(b%4,-1);a.rotate90Actions=0},300)},Rotate270_Click:function(){this.rotate270Timeout&&(clearTimeout(this.rotate270Timeout),this.rotate270Timeout=null);this.rotate270Actions?this.rotate270Actions++:this.rotate270Actions=1;this.rotate270Timeout=setTimeout(function(){var b=a.rotate270Actions%
4;0!=b%4&&a.Rotate(4-b%4,-1);a.rotate270Actions=0},300)},Print_Click:function(){this.TogglePrintDialog(null,null)},LoadFromFile_Click:function(){this.LoadFromFile(null,null)},LoadFromUriDialog_Click:function(){this.ToggleLoadFromUriDialog()},SaveDialog_Click:function(){this.ToggleSaveDialog(null,null)},TwainAcquisitionDialog_Click:function(){this.TwainToggleAcquisitionDialog(null,null)},CopyDialog_Click:function(b){b.preventDefault();this.CopySelectedTextToClipboard()},HighlightContextMenu_Click:function(b){b.preventDefault();
this.HighlightSelectedText()},StrikeoutContextMenu_Click:function(b){b.preventDefault();this.StrikethroughSelectedText()},UnderlineContextMenu_Click:function(b){b.preventDefault();this.UnderlineSelectedText()},RedactionMarkContextMenu_Click:function(b){b.preventDefault();b=a.dom.redactionFill?dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']")).minicolors("value"):null;this.RedactSelectedText(b)},RemoveTextContextMenu_Click:function(b){b.preventDefault();
this.Internal.Text.removeSelectedText()},LoadFromUri_Click:function(){this.LoadFromUri(dvJQuery(this.dom.addressBar).val(),"",null,null,null,!0)},ExitDrawingMode_Click:function(){this.ExitAnnotationDrawingMode()},UndoDrawing_Click:function(){this.Internal.Annotations.dropPendingFreenhandAnnotLastSubPath()},AnnotationActionEditButton_Click:function(){this.Internal.Annotations.editSelectedAnnotation()},AnnotationActionRemoveButton_Click:function(){this.Internal.Annotations.removeSelectedAnnotations()},
AnnotationActionCommentButton_Click:function(){this.ToggleCommentDialog("comment")},CommentAnswer_Click:function(b){this.ToggleCommentDialog("answer",b)},CommentProperties_Click:function(b){this.ToggleCommentDialog("edit",b)},ZoomWidth_Click:function(){this.SetZoomMode(3)},ZoomFit_Click:function(){this.SetZoomMode(2)},Fullscreen_Click:function(){this.ToggleFullscreen()},MagnifierMouseMode_Click:function(){this.EnableMagnifier()},PanMouseMode_Click:function(){this.SetMouseMode(0)},SelectMouseMode_Click:function(){this.SetMouseMode(3)},
MarqueeZoomMouseMode_Click:function(){this.SetMouseMode(4)},AddRubberStampAnnot_Click:function(){this.AddAnnotInteractive(0)},AddRectangleAnnot_Click:function(){this.AddAnnotInteractive(1)},AddRectangleHighlighterAnnot_Click:function(){this.AddAnnotInteractive(2)},AddLineAnnot_Click:function(){this.AddAnnotInteractive(3)},AddConnectedLineAnnot_Click:function(){null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(5)},
AddLineArrowAnnot_Click:function(){this.AddAnnotInteractive(4)},AddEllipseAnnot_Click:function(){this.AddAnnotInteractive(6)},AddTextAnnot_Click:function(){this.AddAnnotInteractive(8)},AddStickyNoteAnnot_Click:function(){this.AddAnnotInteractive(9)},AddFreeHandAnnot_Click:function(){null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(10)},AddFreeHandHighlighterAnnot_Click:function(){null!=a.dom.freehandhighlighterAnnotButton&&
dvJQuery(a.dom.freehandhighlighterAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(11)},AddLinkAnnot_Click:function(){this.AddAnnotInteractive(13)},AddRulerAnnot_Click:function(){this.AddAnnotInteractive(15)},AddPolyRulerAnnot_Click:function(){null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).hasClass("button_active")?a.ExitAnnotationDrawingMode():this.AddAnnotInteractive(16)},ClosePanelButton_Click:function(){this.SetSnapinsPanelVisibility(!1)},
SearchSubmit_Click:function(){var b=this.dom.searchValueInput.value,c=this.dom.searchWholeWordInput.checked,e=this.dom.searchCaseSensitiveInput.checked,g=this.dom.searchAnyWordInput.checked,k=this.dom.fuzzySearchInput.checked,p=dvJQuery(this.dom.searchPageSelect);p="checkbox"===p.attr("type")?p.is(":checked"):p.filter(":checked").val();this.SubmitSearch(b,c,e,g,p,k)},DownloadTwainServiceSetup_Click:function(){this.DownloadTwainServiceSetup();dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},
SearchClearResult_Click:function(){this.ClearSearch()},CommentHeader_Click:function(b){a.Internal.Annotations.selectAnnotationCommentById(b,!1,!1);if(null!=a.cache.AnnotsComments)for(var c=0;c<a.cache.AnnotsComments.length;c++){var e=a.cache.AnnotsComments[c];if(e.annotApp.id===b){var g=e.annotApp.pageNo;a.SelectPage(g,function(){var k=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(e.annotApp,!0);null!=k&&(k.visible&&(a.Internal.Annotations.unselectAll(),a.Internal.Annotations.selectById(k.id)),
a.EnsurePageRegionVisibility(g,k.bbox.Left,k.bbox.Top,k.bbox.Width,k.bbox.Height))});break}}},CommentsSearchClearResult_Click:function(){this.CommentsClearSearch()},CommentsSearchSubmit_Click:function(){this.SubmitCommentsSearch(this.dom.commentsSearchValueInput.value)},CommentsExpandCollapseAll_Click:function(){this.CommentsExpandCollapseAll()},CommentsSortBySelect_Change:function(){this.refreshCommentsPanel()},RedactionAddAreas_Click:function(){a.events.isAddingRedactionMarksMode?a.Internal.Redaction.disableAddRedactionMarksMode():
a.Internal.Redaction.enableAddRedactionMarksMode()},RedactionApply_Click:function(){var b=this;a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_apply_redaction_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_apply_redaction_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_button_annotation_edit"),"class":"btn-valid",
click:function(){b.ApplyAllRedactions();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},RemoveSelectedRedactionMarks_Click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_selected_redactions_warning"),null,function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redactions_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},
{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){for(var b=a.dom.redactionsPanel.getElementsByClassName("activeRedactionArea"),c=[],e=0;e<b.length;e++)c.push(b[e].id.split("_").pop());for(e=0;e<c.length;e++)a.Internal.Redaction.deleteRedactionMarkById(c[e]);dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},RemoveAllRedactionMarks_Click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("title_delete_redactions_warning"),null,
function(){dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("text_delete_redactions_warning"))},null,[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.Internal.Redaction.removeAllRedactionMarks();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close")}}])},DigiSignAppearanceMenu_Click:function(){var b=a.dom.digisignAppearanceMenuToggle.getElementsByClassName("dv-signature-menu-toggle")[0];
b.classList.contains("dv-signature-menu-toggle-collapsed")?(b.classList.remove("dv-signature-menu-toggle-collapsed"),a.dom.digisignAppearanceMenuContent.style.display="block"):(b.classList.add("dv-signature-menu-toggle-collapsed"),a.dom.digisignAppearanceMenuContent.style.display="none")},DigiSignCertificateMenu_Click:function(){var b=a.dom.digisignCertificateMenuToggle.getElementsByClassName("dv-signature-menu-toggle")[0];b.classList.contains("dv-signature-menu-toggle-collapsed")?(b.classList.remove("dv-signature-menu-toggle-collapsed"),
a.dom.digisignCertificateMenuContent.style.display="block"):(b.classList.add("dv-signature-menu-toggle-collapsed"),a.dom.digisignCertificateMenuContent.style.display="none")},DigiSignAppearanceText_Click:function(){a.Internal.DigiSign.setSignatureAppearanceTextInteractive()},DigiSignAppearanceImg_Click:function(){a.Internal.DigiSign.setSignatureAppearanceImgInteractive()},DigiSignAppearanceFreehand_Click:function(){a.Internal.DigiSign.setSignatureAppearanceFreehandInteractive()},DigiSignAppearanceDeleteSignatureAppearance_Click:function(){a.Internal.DigiSign.resetSignatureConfiguration()},
DigiSignAddTimeStamp_Click:function(){a.Internal.DigiSign.setTimeStampInteractive()},DigiSignAddCertificate_Click:function(){a.Internal.DigiSign.setCertificateInteractive()},DigiSignPlaceSignature_Click:function(){a.Internal.DigiSign.beginAddSignatureInteractive()},DigiSignDeleteCertificate_Click:function(b){b.stopPropagation&&b.stopPropagation();a.Internal.DigiSign.setCertificate(null,null,null)},DigiSignDeleteTimeStamp_Click:function(b){b.stopPropagation&&b.stopPropagation();a.Internal.DigiSign.setTimeStamp(null,
null,null)},SnapInButton_Click:function(b){this.SelectSnapIn(b,!1)},IsTwainSupportAvailable:function(){return this.isWindows&&5.1<this.windowsVersion},ToggleSinglePageViewMode:function(){if(a.dom.subMenuPageViewMode&&a.dom.visibleToolbar===DocuViewareAPI.Toolbar.Standard)this.hideAllSubMenus(),dvJQuery(a.dom.subMenuPageViewMode).show().position({my:"left top",at:"left bottom",of:dvJQuery(a.dom.singlePageModeButton)}),this.hideAllSubMenusOnNextClick();else return this.ToggleSinglePageViewModeInternal()},
ToggleSinglePageViewModeInternal:function(b){isNaN(b)&&(b=this.serverCtx.singlePageView);return this.ajax.PostBaseRequest("singlepageviewmode",{data:{enabled:b},success:function(c){a.ajax.HandleServerContextResponse("string"===typeof c?JSON.parse(c):c,!1)}},!0)},RegisterOnViewerScroll:function(b){this.callbacks.onViewerScroll=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationSelectedStateChanged:function(b){this.callbacks.onAnnotationSelectedStateChanged=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationAdded:function(b){this.callbacks.onAnnotationAdded=
b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationEdited:function(b){this.callbacks.onAnnotationEdited=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMoved:function(b){this.callbacks.onAnnotationMoved=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationDeleted:function(b){this.callbacks.onAnnotationDeleted=b;return DocuViewareAPI.Status.OK},RegisterOnCommentAdded:function(b){this.callbacks.onCommentAdded=b;return DocuViewareAPI.Status.OK},RegisterOnCommentEdited:function(b){this.callbacks.onCommentEdited=
b;return DocuViewareAPI.Status.OK},RegisterOnCommentDeleted:function(b){this.callbacks.onCommentDeleted=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentSigned:function(b){this.callbacks.onDocumentSigned=b;return DocuViewareAPI.Status.OK},RegisterOnFormFieldChanged:function(b){this.callbacks.onFormFieldChanged=b;return DocuViewareAPI.Status.OK},RegisterOnPageChanged:function(b){this.callbacks.onPageChanged=b;return DocuViewareAPI.Status.OK},RegisterOnZoomChanged:function(b){this.callbacks.onZoomChanged=
b;return DocuViewareAPI.Status.OK},RegisterOnRotationChanged:function(b){this.callbacks.onRotationChanged=b;return DocuViewareAPI.Status.OK},RegisterOnNewDocumentLoaded:function(b){this.callbacks.onNewDocumentLoaded=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentClosed:function(b){this.callbacks.onDocumentClosed=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentPrinted:function(b){this.callbacks.onDocumentPrinted=b;return DocuViewareAPI.Status.OK},RegisterOnDocumentSaved:function(b){this.callbacks.onDocumentSaved=
b;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogAcquireButtonClick:function(b){this.callbacks.onTwainAcquisitionDialogAcquireButtonClick=b;return DocuViewareAPI.Status.OK},RegisterOnTwainAcquisitionDialogCancelButtonClick:function(b){this.callbacks.onTwainAcquisitionDialogCancelButtonClick=b;return DocuViewareAPI.Status.OK},RegisterOnThumbnailsOrderChanged:function(b){this.callbacks.onThumbnailsOrderChanged=b;return DocuViewareAPI.Status.OK},RegisterOnTextSelected:function(b){this.callbacks.onTextSelected=
b;return DocuViewareAPI.Status.OK},RegisterOnTextUnselected:function(b){this.callbacks.onTextUnselected=b;return DocuViewareAPI.Status.OK},RegisterOnTextAnnotated:function(b){this.callbacks.onTextAnnotated=b;return DocuViewareAPI.Status.OK},RegisterOnAreaSelected:function(b){this.callbacks.onAreaSelected=b;return DocuViewareAPI.Status.OK},RegisterOnFullscreenModeChanged:function(b){this.callbacks.onFullscreenModeChanged=b;return DocuViewareAPI.Status.OK},RegisterOnSearchInvoked:function(b){this.callbacks.onSearchInvoked=
b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMouseEnter:function(b){this.callbacks.onAnnotationMouseEnter=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationMouseLeave:function(b){this.callbacks.onAnnotationMouseLeave=b;return DocuViewareAPI.Status.OK},RegisterOnThumbnailsSnapInSelected:function(b){this.callbacks.onThumbnailsSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnBookmarksSnapInSelected:function(b){this.callbacks.onBookmarksSnapInSelected=b;return DocuViewareAPI.Status.OK},
RegisterOnSearchSnapInSelected:function(b){this.callbacks.onSearchSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnAnnotationsSnapInSelected:function(b){this.callbacks.onAnnotationsSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnCommentsSnapInSelected:function(b){this.callbacks.onCommentsSnapInSelected=b;return DocuViewareAPI.Status.OK},RegisterOnSnapInPanelResized:function(b){this.callbacks.onSnapInPanelResized=b;return DocuViewareAPI.Status.OK},RegisterOnSnapInPanelToggle:function(b){this.callbacks.onSnapInPanelToggle=
b;return DocuViewareAPI.Status.OK},RegisterOnRedactionMarksApplied:function(b){this.callbacks.onRedactionMarksApplied=b;return DocuViewareAPI.Status.OK},RegisterOnUriNavigation:function(b){this.callbacks.onURINavigation=b;return DocuViewareAPI.Status.OK},RegisterOnUnknownLinkNavigation:function(b){this.callbacks.onUnknownLinkNavigation=b;return DocuViewareAPI.Status.OK},RegisterOnAttachmentClick:function(b){this.callbacks.onAttachmentClick=b;return DocuViewareAPI.Status.OK},RegisterOnPageDeleted:function(b){this.callbacks.onPageDeleted=
b;return DocuViewareAPI.Status.OK},RegisterOnDocuViewareControlLoaded:function(b){this.callbacks.onDocuViewareControlLoaded=b;return DocuViewareAPI.Status.OK},DisplayMessageBox:function(b){return"object"===typeof b&&null!==b&&b.hasOwnProperty("text")&&b.hasOwnProperty("icon")?(this.ShowMessage(b),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},SetAjaxCustomHeaders:function(b,c){return a.ajax.SetCustomHeaders(b,c)},PostCustomServerAction:function(b,c,e,g,k){return this.ajax.PostCustomServerAction(b,
c,e,g,k)},SetMaxUploadThreads:function(b){return 0<b&&16>=b?(a.Internal.Files.MAX_UPLOAD_THREADS=b,DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},LoadFromBase64:function(b,c,e,g,k){return this.LoadFromByteArray(DocuViewareEncodingUtilities.base64.base64toArrayBuffer(b),c,e,g,k)},LoadFromByteArray:function(b,c,e,g,k){if(this.hasPendingAction())return DocuViewareAPI.Status.DocuViewarePendingAction;this.callbacks.onFileOpenError=k;this.callbacks.onFileOpenSuccess=g;a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(b,
c,e),0);return DocuViewareAPI.Status.OK},LoadFromFile:function(b,c){if(this.hasPendingAction())return DocuViewareAPI.Status.DocuViewarePendingAction;this.SetLoadFromUriDialogVisibility(!1);this.callbacks.onFileOpenError=c;this.callbacks.onFileOpenSuccess=b;dvJQuery(this.dom.openfile).click();return DocuViewareAPI.Status.OK},GetDocumentType:function(){return this.serverCtx?this.serverCtx.documentType:0},GetDocumentFormat:function(){return this.serverCtx?this.serverCtx.documentFormat:0},GetDocumentName:function(){return this.serverCtx?
this.serverCtx.fileName:""},GetPageCount:function(){return this.serverCtx?this.serverCtx.pageCount:0},GetCurrentPage:function(){return this.serverCtx?this.serverCtx.selectedPage:0},GetPageWidth:function(b){return this.serverCtx?this.Internal.Pages.getPageWidth(b):0},GetPageHeight:function(b){return this.serverCtx?this.Internal.Pages.getPageHeight(b):0},GetSelectedTextArea:function(){return this.serverCtx?this.Internal.Text.getSelectedTextAreas():0},GetLastPageNoRequest:function(){return this.ajax.latestSelectedPage},
GetDisplayedArea:function(){if(this.serverCtx){var b=a.dom.viewerArea.getBoundingClientRect(),c=this.GetCurrentPage(),e=a.Internal.Pages.getPageWidth(c),g=a.Internal.Pages.getPageHeight(c),k=this.Internal.Coordinates.clienttodocument(c,b.left,b.top,1),p=this.Internal.Coordinates.clienttodocument(c,b.left+b.width,b.top,1),n=this.Internal.Coordinates.clienttodocument(c,b.left+b.width,b.top+b.height,1);b=this.Internal.Coordinates.clienttodocument(c,b.left,b.top+b.height,1);c=Math.max(Math.min(k.x,Math.min(p.x,
Math.min(n.x,b.x))),0);var w=Math.max(Math.min(k.y,Math.min(p.y,Math.min(n.y,b.y))),0);return{left:c,top:w,width:Math.min(Math.max(k.x,Math.max(p.x,Math.max(n.x,b.x))),e)-c,height:Math.min(Math.max(k.y,Math.max(p.y,Math.max(n.y,b.y))),g)-w}}return{left:0,top:0,width:0,height:0}},GetSelectionAreaCoordinates:function(){return this.serverCtx?this.Internal.Selection.getSelectionAreaCoordinates():{left:0,top:0,width:0,height:0}},SetSelectionAreaCoordinates:function(b){return this.serverCtx?this.Internal.Selection.setSelectionAreaCoordinates(b):
DocuViewareAPI.Status.GenericError},GetViewerScrollLeft:function(){return this.Internal.Coordinates.getViewerScrollLeft()},GetViewerScrollTop:function(){return this.Internal.Coordinates.getViewerScrollTop()},SetViewerScrollLeft:function(b){return this.Internal.Coordinates.setViewerScrollLeft(b)},SetViewerScrollTop:function(b){return this.Internal.Coordinates.setViewerScrollTop(b)},ClearSelectionArea:function(){return this.serverCtx?(this.Internal.Selection.clearSelectionArea(),DocuViewareAPI.Status.OK):
DocuViewareAPI.Status.GenericError},GetSelectedThumbnailItems:function(){return this.serverCtx?this.Internal.Thumbnails.getSelectedThumbnails(!0):null},SetThumbnailSelected:function(b,c){return this.serverCtx?this.Internal.Thumbnails.setThumbnailSelected(b,c):DocuViewareAPI.Status.GenericError},GetCurrentZoom:function(){return this.serverCtx?this.serverCtx.zoom:0},SetCurrentZoom:function(b,c,e){return Math.round(1E3*b)===Math.round(1E3*a.serverCtx.zoom)?DocuViewareAPI.Status.OK:a.ajax.PostBaseRequest("zoomset",
{data:{zoom:b},success:function(g){a.ajax.HandleServerContextResponse("string"===typeof g?JSON.parse(g):g,!1);"function"===typeof c&&c()},error:function(){"function"===typeof e&&e()}},!1)},GetCurrentViewRotation:function(){return this.serverCtx?this.serverCtx.viewRotation:0},GetCurrentPageRotation:function(){return this.serverCtx?this.serverCtx.pageRotation:0},GetCurrentPageRenderRotation:function(){return this.serverCtx?this.serverCtx.renderRotation:0},ToggleLoadFromUriDialog:function(b){if(this.hasPendingAction())return DocuViewareAPI.Status.DocuViewarePendingAction;
this.SetLoadFromUriDialogVisibility(!this.dom.isLoadFromUriDialogVisible,b);return DocuViewareAPI.Status.OK},DirectSave:function(b,c,e){var g="*"===a.serverCtx.allowedExportFormats?"pdf":a.serverCtx.allowedExportFormats.split(",")[0];if(null==b)b={fileName:a.serverCtx.fileName,format:g,range:"*",dropAnnotations:!1,flattenAnnotations:!1};else{if(null==b.format)b.format=g;else if(null!=b.format&&"*"!==a.serverCtx.allowedExportFormats){g=a.serverCtx.allowedExportFormats.split(",");for(var k=!1,p=0;p<
g.length;p++)b.format.toLowerCase()===g[p].toLowerCase()&&(k=!0);if(!1===k)return DocuViewareAPI.Status.GenericError}null==b.range&&(b.range="*");null==b.fileName&&(b.fileName=a.serverCtx.fileName);null==b.dropAnnotations&&(b.dropAnnotations=!1);null==b.flattenAnnotations&&(b.flattenAnnotations=!1)}return a.Save(b.fileName,b.format,b.range,b.dropAnnotations,b.flattenAnnotations,c,e)},ToggleSaveDialog:function(b,c){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;
a.DisplayDialogForm(dvJQuery(a.dom.saveDialog),a.Localize("_title_save_dialog"),null,function(){dvJQuery("[name='savePageRangeInput"+a.uniqueID+"']").val("");if(1===a.dom.UIconfig.saveDefaultPageRange)dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change");else if(2===a.dom.UIconfig.saveDefaultPageRange)dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change");else{var e=a.GetSelectedThumbnailItems();
1==e.length&&e[0]===a.GetCurrentPage()?dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):0<e.length?(dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),dvJQuery("[name='savePageRangeInput"+a.uniqueID+"']").val(e.join())):dvJQuery("[name='inputSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change")}dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+
a.uniqueID+"']").val(a.serverCtx.fileName)},null,[{text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.saveDialog).dvDialog("close")}},{text:a.Localize("_label_save"),"class":"btn-valid",click:function(){var e=dvJQuery(a.dom.saveDialog).find("input[name='saving_filename_input"+a.uniqueID+"']").val(),g=dvJQuery(a.dom.saveDialog).find("select[name='save_extension_select"+a.uniqueID+"']").find("option:selected").val(),k=dvJQuery(a.dom.saveDialog).find("input[name='savePageRangeInput"+a.uniqueID+
"']").val(),p=1===parseInt(dvJQuery(a.dom.saveDialog).find("select[name='save_content_select"+a.uniqueID+"']").find("option:selected").val())?!0:!1,n=dvJQuery(a.dom.saveDialog).find("input[name='save_content_burn_annot"+a.uniqueID+"']").is(":checked");1==n&&(p=!0);a.Save(e,g,k,p,n,b,c)==DocuViewareAPI.Status.OK&&dvJQuery(a.dom.saveDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainToggleAcquisitionDialog:function(b,c){if(this.hasPendingAction())return DocuViewareAPI.Status.DocuViewarePendingAction;
a.DisplayDialogForm(dvJQuery(a.dom.twainAcquisitionDialog),a.Localize("button__twain_acquisition"),null,function(){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox();dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",.3).hide();dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");var e=
function(g){a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(g.twainStatus,g.message);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show();dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0);dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")};a.GetTwainAcquisitionServiceInfo(function(g){parseInt(g.ServiceVersionResult)>=a.twainServiceSupportedVersion?
a.GetTwainAcquisitionSources(function(k){if(k.GetTwainSourcesResult&&k.GetTwainSourcesResult.sources.length){dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!1);dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").removeClass("dvUi-state-disabled").removeClass("dvUi-dvSelectmenu-disabled").css("opacity",1);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).find("option").remove().end();if(k.GetTwainSourcesResult.sources&&0<k.GetTwainSourcesResult.sources.length){for(var p=
0;p<k.GetTwainSourcesResult.sources.length;p++){var n=dvJQuery("<option>"),w=k.GetTwainSourcesResult.sources[p];n.attr("value",w.sourceName);n.html(w.sourceName);(!k.GetTwainSourcesResult.defaultSource&&1==p||k.GetTwainSourcesResult.defaultSource&&(k.GetTwainSourcesResult.defaultSource==w.sourceName||k.GetTwainSourcesResult.defaultSource+" (64-bit)"==w.sourceName))&&n.prop("selected",!0);dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).append(n)}dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+
a.uniqueID).dvSelectmenu&&dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu("destroy");dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionSourceSelect"+a.uniqueID).dvSelectmenu();dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-menu").css("background-color",a.dom.UIconfig.inputBackgroundColor);dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-text").css("text-overflow","ellipsis");dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-text").css("overflow",
"hidden");dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-text").parent().parent().parent().find("div").css("vertical-align","middle");dvJQuery(a.dom.twainAcquisitionDialog).parent().find(".dvUi-selectmenu-button").css("vertical-align","middle");dvJQuery(a.dom.twainAcquisitionDialog).parent().find(a.dom.twainAcquisitionDestinationAppendDocBox).click(function(){dvJQuery(".dvUi-selectmenu-menu .dvUi-menu-item").hover(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.miscBorderColor)},
function(){dvJQuery(this).css("background-color","")})})}a.serverCtx.enablePageAppending?dvJQuery("[name='inputTwainAcquisitionDestination"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):(dvJQuery("[name='inputTwainAcquisitionDestination"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change"),dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("*").prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity",.3));
dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).hide();dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled")}else a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.WARNING,a.Localize("_twain_connector_no_sources")),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",
!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled")},e):(g=a.Localize("_twain_connector_bad_version"),a.Internal.Twain.updateTwainAcquisitionDialogMessageBox(a.Internal.Twain.Status.BAD_VERSION,g),dvJQuery(a.dom.twainAcquisitionDialogPanel).find("*").prop("disabled",!0),dvJQuery(a.dom.twainAcquisitionDialog).find("#twainAcquisitionMessageBox"+a.uniqueID).css("opacity",1).show(),dvJQuery(a.dom.twainAcquisitionDialogAcquireButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled"))},
e)!=DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")},null,[{text:a.Localize("_label_cancel"),click:function(){if(a.callbacks.onTwainAcquisitionDialogCancelButtonClick)a.callbacks.onTwainAcquisitionDialogCancelButtonClick();dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}},{id:"twainAcquisitionDialogAcquireButton"+a.uniqueID,text:a.Localize("button__twain_acquire"),"class":"btn-valid",click:function(){if(a.callbacks.onTwainAcquisitionDialogAcquireButtonClick)a.callbacks.onTwainAcquisitionDialogAcquireButtonClick();
var e=dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionSourceSelect"+a.uniqueID+"']").find("option:selected").val();0==dvJQuery(a.dom.twainAcquisitionDialog).find("input[name='inputTwainAcquisitionDestination"+a.uniqueID+"']:checked").val()?a.TwainAcquireToNewDocument(e,b,c)==DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close"):a.TwainAcquireToCurrentDocument(e,dvJQuery(a.dom.twainAcquisitionDialog).find("select[name='twainAcquisitionDestinationAppendSelect"+
a.uniqueID+"']").find("option:selected").val(),b,c)==DocuViewareAPI.Status.OK&&dvJQuery(a.dom.twainAcquisitionDialog).dvDialog("close")}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},TwainAcquireToNewDocument:function(b,c,e){return a.Internal.Twain.acquire(b,function(g){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(g.fileData,"image/tiff",g.fileName),0,"",g.fileContentEncoding);c&&"function"===typeof c&&c()},function(g){e&&"function"===typeof e&&e(g)})},TwainAcquireToCurrentDocument:function(b,
c,e,g){return!c||0>c||3<c||!a.serverCtx.enablePageAppending?DocuViewareAPI.Status.GenericError:a.Internal.Twain.acquire(b,function(k){a.Internal.Files.uploadFile(DocuViewareEncodingUtilities.File.New(k.fileData,"image/tiff",k.fileName),c,"",k.fileContentEncoding);e&&"function"===typeof e&&e()},function(k){g&&"function"===typeof g&&g(k)})},TwainSetConfig:function(b,c,e,g,k,p,n,w){"boolean"===typeof b&&(a.twainSourceConfig.enableCustomConfiguration=b);"boolean"===typeof c&&(a.twainSourceConfig.selectFeeder=
c);Number.isInteger(e)&&(a.twainSourceConfig.resolution=e);Number.isInteger(g)&&(a.twainSourceConfig.bitDepth=g);"boolean"===typeof k&&(a.twainSourceConfig.enableDuplex=k);"boolean"===typeof p&&(a.twainSourceConfig.hideUI=p);Number.isInteger(w)?a.twainSourceConfig.xferCount=w:a.twainSourceConfig.xferCount=0;if(n)if(Array.isArray(n)){b=[];for(c=0;c<n.length;c++)n[c].hasOwnProperty("capability")&&n[c].hasOwnProperty("value")&&Number.isInteger(n[c].capability)&&"string"===typeof n[c].value&&b.push(n[c]);
a.twainSourceConfig.extConfig=0!==b.length?b:null}else a.twainSourceConfig.extConfig=null;else a.twainSourceConfig.extConfig=null;return DocuViewareAPI.Status.OK},ToggleCommentDialog:function(b,c){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;"comment"===b?a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog"),null,function(){var e=null!=a.Internal.Annotations.defaultAuthor?a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");
dvJQuery(a.dom.commentsAuthorInput).val(e);dvJQuery(a.dom.commentAnswerBox).hide();dvJQuery(a.dom.commentContentBox).show();dvJQuery(a.dom.commentStatusBox).hide();dvJQuery(a.dom.commentMessageInput).val("").focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),"class":"btn-valid",click:function(){var e=dvJQuery(a.dom.commentsAuthorInput).val(),
g=a.Internal.Annotations.defaultProperties[2048];g.previousGuid=a.dom.selectedAnnotation.annotApp.id;g.text=dvJQuery(a.dom.commentMessageInput).val();a.ajax.PostBaseRequest("newannotationcomment",{data:{annots:[{extProperties:{author:e},properties:g,ownerAnnotType:a.dom.selectedAnnotation.annotApp.properties.type,pageNo:a.dom.selectedAnnotation.annotApp.pageNo}]},success:function(k){if((k="string"===typeof k?JSON.parse(k):k)&&null!=k.annotApp&&k.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(k),
a.refreshCommentsPanel(),a.SelectSnapIn("comments",!0),a.Internal.Annotations.selectAnnotationCommentById(k.annotApp.id,!0,!1),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:k.annotApp.id,pageNo:k.annotApp.pageNo})}else a.ajax.HandleError(k)}},!1);dvJQuery(a.dom.commentDialog).dvDialog("close")}}]):"edit"===b?a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog_edit"),null,function(){dvJQuery(a.dom.commentAnswerBox).hide();dvJQuery(a.dom.commentContentBox).show();
dvJQuery(a.dom.commentStatusBox).show();for(var e=0;e<a.cache.AnnotsComments.length;e++){var g=a.cache.AnnotsComments[e];if(g.annotApp.id===c){dvJQuery(a.dom.commentMessageInput).val(g.annotApp.properties.text);dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+a.uniqueID+"']").find("option[value='"+g.annotApp.properties.reviewStatus+"']").prop("selected",!0);dvJQuery(a.dom.commentsAuthorInput).val(g.annotApp.author);g.annotApp.properties.allowReview?dvJQuery(a.dom.commentStatusSelect).attr("disabled",
!1):dvJQuery(a.dom.commentStatusSelect).attr("disabled",!0);g.annotApp.canDelete?dvJQuery(":button:contains('"+a.Localize("_label_delete")+"')").prop("disabled",!1).removeClass("ui-state-disabled"):dvJQuery(":button:contains('"+a.Localize("_label_delete")+"')").prop("disabled",!0).addClass("ui-state-disabled");break}}dvJQuery(a.dom.commentMessageInput).focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),"class":"dv-btn-secondary",click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},
{id:"commentDialogDeleteButton"+a.uniqueID,text:a.Localize("_label_delete"),"class":"dv-btn-secondary",click:function(){a.DisplayDialogForm(dvJQuery(a.dom.annotationActionRemoveConfirm),a.Localize("_title_confirm_comment_removal"),null,function(){dvJQuery(a.dom.commentDialogModalOverlay).show();dvJQuery(a.dom.annotationRemoveConfirmMessage).html(a.Localize("_message_confirm_comment_removal"))},function(){dvJQuery(a.dom.commentDialogModalOverlay).hide()},[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.commentDialogModalOverlay).hide();
dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");dvJQuery(a.dom.modalOverlayArea).show()}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){if(null!=a.cache.AnnotsComments)for(var e=a.GetCurrentPage(),g=0;g<a.cache.AnnotsComments.length;g++)if(a.cache.AnnotsComments[g].annotApp.pageNo===e&&a.cache.AnnotsComments[g].annotApp.id===c){a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annots:[{properties:a.cache.AnnotsComments[g].annotApp.properties,
"delete":!0,pageNo:a.cache.AnnotsComments[g].annotApp.pageNo,id:a.cache.AnnotsComments[g].annotApp.id}],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID}),contentType:"application/json",success:function(k){if((k="string"===typeof k?JSON.parse(k):k)&&null!=k.annots)for(var p=0;p<k.annots.length;p++){if(null!=k.annots[p].deletedAnnotsCommentId)for(var n=0;n<k.annots[p].deletedAnnotsCommentId.length;n++)a.Internal.Annotations.deleteAnnotationComment(k.annots[p].deletedAnnotsCommentId[n],!1);a.Internal.Annotations.deleteAnnotationComment(c,
!0);if(a.callbacks.onCommentDeleted)a.callbacks.onCommentDeleted({id:k.annots[p].id,pageNo:k.annots[p].pageNo})}else a.ajax.HandleError(k)},error:function(k){a.ajax.HandleError(k)}});break}dvJQuery(a.dom.commentDialogModalOverlay).hide();dvJQuery(a.dom.annotationActionRemoveConfirm).dvDialog("close");dvJQuery(a.dom.commentDialog).dvDialog("close")}}])}},{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_button_annotation_edit"),"class":"btn-valid",click:function(){var e=dvJQuery(a.dom.commentMessageInput).val(),
g=dvJQuery(a.dom.commentDialog).find("select[name='commentStatusSelect"+a.uniqueID+"']").find("option:selected").val(),k=dvJQuery(a.dom.commentsAuthorInput).val();if(null!=a.cache.AnnotsComments){for(var p=a.GetCurrentPage(),n=null,w=0;w<a.cache.AnnotsComments.length;w++)if(a.cache.AnnotsComments[w].annotApp.pageNo===p&&a.cache.AnnotsComments[w].annotApp.id===c){n=a.cache.AnnotsComments[w].annotApp.properties;n.text=e;n.reviewStatus=parseInt(g);break}a.ajax.PostAjaxRequestForDocuViewareAction({url:a.appControllerPath+
"/annotupdate"+(a.useIdInRoot?"/1":""),async:!0,data:JSON.stringify({annots:[{extProperties:{author:k},properties:n,pageNo:p,id:c,clientTag:a.cache.AnnotsComments[w].annotApp.clientTag}],sessionID:a.ajax.sessionID,contextID:a.ajax.contextID}),contentType:"application/json",success:function(B){if((B="string"===typeof B?JSON.parse(B):B)&&null!=B.annots)for(var I=0;I<B.annots.length;I++){for(var E=0;E<a.cache.AnnotsComments.length;E++)if(a.cache.AnnotsComments[E].annotApp.pageNo===p&&a.cache.AnnotsComments[E].annotApp.id===
c){a.cache.AnnotsComments[E].annotApp=B.annots[I].annotApp;break}a.refreshCommentsPanel();a.Internal.Annotations.selectAnnotationCommentById(B.annots[I].annotApp.id,!0,!1);if(a.callbacks.onCommentEdited)a.callbacks.onCommentEdited({id:B.annots[I].annotApp.id,pageNo:B.annots[I].annotApp.pageNo})}else a.ajax.HandleError(B)},error:function(B){a.ajax.HandleError(B)}})}dvJQuery(a.dom.commentDialog).dvDialog("close")}}]):"answer"===b&&a.DisplayDialogForm(dvJQuery(a.dom.commentDialog),a.Localize("_title_comment_dialog_answer"),
null,function(){var e=null!=a.Internal.Annotations.defaultAuthor?a.Internal.Annotations.defaultAuthor:a.Localize("label_comment_anonymous");dvJQuery(a.dom.commentsAuthorInput).val(e);dvJQuery(a.dom.commentContentBox).hide();dvJQuery(a.dom.commentAnswerBox).show();dvJQuery(a.dom.commentStatusBox).hide();dvJQuery(a.dom.commentAnswerInput).val("").focus()},null,[{id:"commentDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){dvJQuery(a.dom.commentDialog).dvDialog("close")}},
{id:"commentDialogPublishButton"+a.uniqueID,text:a.Localize("_label_publish"),"class":"btn-valid",click:function(){for(var e=1,g=-1,k=0;k<a.cache.AnnotsComments.length;k++)a.cache.AnnotsComments[k].annotApp.id===c&&(e=a.cache.AnnotsComments[k].annotApp.pageNo,g=a.cache.AnnotsComments[k].ownerAnnotType);k=dvJQuery(a.dom.commentsAuthorInput).val();var p=a.Internal.Annotations.defaultProperties[2048];p.text=dvJQuery(a.dom.commentAnswerInput).val();p.pageNo=e;p.previousGuid=c;a.ajax.PostBaseRequest("newannotationcomment",
{data:{annots:[{extProperties:{author:k},properties:p,ownerAnnotType:g,pageNo:e}]},success:function(n){if((n="string"===typeof n?JSON.parse(n):n)&&null!=n.annotApp&&n.annotApp.status===DocuViewareAPI.Status.OK){if(a.Internal.Annotations.addAnnotationComment(n),a.refreshCommentsPanel(),a.Internal.Annotations.selectAnnotationCommentById(n.annotApp.id,!0,!1),a.callbacks.onCommentAdded)a.callbacks.onCommentAdded({id:n.annotApp.id,pageNo:n.annotApp.pageNo})}else a.ajax.HandleError(n)}},!1);dvJQuery(a.dom.commentDialog).dvDialog("close")}}]);
return DocuViewareAPI.Status.OK},TogglePrintDialog:function(b,c){if("undefined"===typeof e)var e=null;if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;a.DisplayDialogForm(dvJQuery(a.dom.printDialog),a.Localize("_title_print_dialog"),null,function(){dvJQuery("[name='printPageRangeInput"+a.uniqueID+"']").val("");if(1===a.dom.UIconfig.printDefaultPageRange)dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change");
else if(2===a.dom.UIconfig.printDefaultPageRange)dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change");else{var g=a.GetSelectedThumbnailItems();1==g.length&&g[0]===a.GetCurrentPage()?dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=1]:radio").prop("checked",!0).trigger("change"):0<g.length?(dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=2]:radio").prop("checked",!0).trigger("change"),dvJQuery("[name='printPageRangeInput"+
a.uniqueID+"']").val(g.join())):dvJQuery("[name='inputPrintSelectedPages"+a.uniqueID+"'][value=0]:radio").prop("checked",!0).trigger("change")}},null,[{id:"printDialogCancelButton"+a.uniqueID,text:a.Localize("_label_cancel"),click:function(){if(a.Internal.Print.isPrinting){a.Internal.Print.isPrinting=!1;dvJQuery(a.dom.printProgressbarDiv).remove();var g=document.getElementById("printProgressionText"+a.uniqueID);g.parentNode.removeChild(g)}dvJQuery(a.dom.printDialog).dvDialog("close")}},{id:"printDialogPrintButton"+
a.uniqueID,text:a.Localize("_label_print"),"class":"btn-valid",click:function(){null===a.dom.printDialogPrintButton&&(a.dom.printDialogPrintButton=dvJQuery("#printDialogPrintButton"+a.uniqueID));var g=dvJQuery(a.dom.printDialog).find("select[name='print_content_select"+a.uniqueID+"']").find("option:selected").val(),k=dvJQuery(a.dom.printDialog).find("select[name='print_destination_select"+a.uniqueID+"']").find("option:selected").val(),p=a.dom.printPageRangeInput.value;dvJQuery(".dvUi-dialog-buttonset").before("<div id='printProgressionText"+
a.uniqueID+"'></div>");dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled");var n=dvJQuery("<div>").css({width:"100%"}).attr("id","printProgressbarDiv"+a.uniqueID).append("<div>");n.insertBefore(a.dom.printDialog);var w=new DocuViewareProgressbar({bg:"#acf",target:n.get(0),id:"printProgressbar"+a.uniqueID});w.go(0);a.Internal.Print.printPages(0==g,p,k,function(B,I){document.getElementById("printProgressionText"+a.uniqueID).innerHTML=
a.Localize("label_printing_progess").replace("#",B).replace("@",I);w.go(100*B/I)},function(){n.remove();var B=document.getElementById("printProgressionText"+a.uniqueID);B.parentNode.removeChild(B);dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");dvJQuery(a.dom.printDialog).dvDialog("close");b&&b()},function(){n.remove();var B=document.getElementById("printProgressionText"+a.uniqueID);B.parentNode.removeChild(B);dvJQuery(a.dom.printDialogPrintButton).prop("disabled",
!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled");dvJQuery(a.dom.printDialog).dvDialog("close");c&&c()})!=DocuViewareAPI.Status.OK&&(n.remove(),g=document.getElementById("printProgressionText"+a.uniqueID),g.parentNode.removeChild(g),dvJQuery(a.dom.printDialogPrintButton).prop("disabled",!1).addClass("dvUi-state-default").removeClass("dvUi-state-disabled"))}}]);this.dom.updateButtons();return DocuViewareAPI.Status.OK},LaunchDirectPrint:function(b,c,e){"undefined"===typeof b&&(b=
{removeAnnontations:!1,range:"*",destination:0});var g=b.removeAnnontations||!1,k=b.range||"*";b=b.destination||0;a.DisplayPendingActionNotification();a.Internal.Print.printPages(!g,k,b,function(p,n){p===n&&a.HidePendingActionNotification()},c,e)},CopySelectedTextToClipboard:function(){var b=this.GetSelectedText();if(null!=b&&""!=b){var c=Array.isArray(a.cache.FormFields)&&a.cache.FormFields.find(k=>k.isEditing()),e=dvJQuery("<textarea>");e.css({position:"absolute",left:"-1000px",top:"-1000px"});
e.addClass("dvTemporaryTextToCopy"+a.uniqueID);e.text(b);dvJQuery(a.dom.mainArea).append(e);document.querySelector(".dvTemporaryTextToCopy"+a.uniqueID).select();try{var g=document.execCommand("copy");e.remove();if(!g)throw"failed";}catch(k){a.dom.copyTextInput.value=b,a.DisplayDialogForm(dvJQuery(a.dom.copyDialog),a.Localize("_title_copy_dialog"),null,function(){a.dom.copyTextInput.focus()},null,[{text:a.Localize("_label_close"),"class":"btn-valid",click:function(){dvJQuery(a.dom.copyDialog).dvDialog("close")}}])}this.dom.updateButtons();
c&&c.control.focus();return DocuViewareAPI.Status.OK}},HighlightSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;var c=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<c.length){for(var e=[],g=0;g<c.length;g++)e.push({type:2,pageNo:c[g].pageNo,coordinates:{left:c[g].left,top:c[g].top,height:c[g].height,width:c[g].width},appearance:{fillColor:null!=b?b:"#FFFF00",rotation:0,squaredBox:!1},common:{canResize:!1,canMove:!1,canRotate:!1,
canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:""}});this.AddAnnot(e,!1,null,null,"highlight");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},StrikethroughSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;
var c=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<c.length){for(var e=[],g=0;g<c.length;g++)e.push({type:3,pageNo:c[g].pageNo,coordinates:{left:c[g].left,top:c[g].top+c[g].height/2,height:.001,width:c[g].width},appearance:{borderWidth:.02,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:null!=b?b:"#FF0000"},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,
canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:"",publicTag:""}});this.AddAnnot(e,!1,null,null,"strikeout");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},UnderlineSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;var c=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<c.length){for(var e=[],g=0;g<c.length;g++)e.push({type:3,
pageNo:c[g].pageNo,coordinates:{left:c[g].left,top:c[g].top+c[g].height,height:.001,width:c[g].width},appearance:{borderWidth:.02,dashCap:0,dashStyle:0,endCap:0,opacity:1,rotation:0,startCap:0,strokeColor:null!=b?b:"#FF0000"},common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:"",publicTag:""}});this.AddAnnot(e,!1,
null,null,"underline");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},RedactSelectedText:function(b){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;var c=this.Internal.Text.getSelectedTextCoordinatesOnDocument(1);if(0<c.length){for(var e=[],g=0;g<c.length;g++){var k={type:17,pageNo:c[g].pageNo,coordinates:{left:c[g].left,top:c[g].top,height:c[g].height,width:c[g].width},
appearance:null,common:{canResize:!1,canMove:!1,canRotate:!1,canSelect:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canEdit:this.dom.UIconfig.enableSelectedTextAnnotationEdition,canDelete:this.dom.UIconfig.enableSelectedTextAnnotationEdition,tag:""}};k.appearance=a.Internal.Annotations.getAnnotPropertiesValues(17);b&&(k.appearance.fillColor=b);e.push(k)}this.AddAnnot(e,!1,null,null,"redaction mark");this.Internal.Text.clearSelection();this.dom.SelectedTextRegions.clear(1);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},
GetSelectedText:function(){return a.Internal.Text.getSelectedText()},AddSelectedTextContextMenuItem:function(b,c,e){if(b&&"function"===typeof c&&this.dom.viewerContextMenu){var g=document.createElement("button");g.className="dv-list-group-item";g.title=b;g.style.color=this.dom.UIconfig.strokeColor;var k=document.createElement("span");k.className="context-menu-icon";e&&e.nodeName&&"svg"===e.nodeName?(e.setAttribute("width","100%"),e.setAttribute("height","100%"),k.appendChild(e)):k.innerHTML="string"===
typeof e?e:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><path d="M71.6,110.7h60.3v76.1H71.6L71.6,110.7z M296.4,81.6h39.8v49.8h-39.8V81.6z M141.5,275.4h43.9v55.4h-43.9V275.4z\t M321.1,435.9H354v41.5h-32.9V435.9z M295.1,27.7h23.3v29.1h-23.3V27.7z M177.2,142.5h38.4v49.8h-38.4V142.5z M256.7,357h50.7v65\th-50.7V357z M78.5,345.9h23.3V375H78.5V345.9z M192.3,365.3h34.3v42.9h-34.3V365.3z M345.8,351.5h20.6v26.3h-20.6V351.5z\t M207.3,232.5h23.3v29.1h-23.3V232.5z M400.6,182.7h23.3v29.1h-23.3V182.7z M129.2,408.2h34.3v42.9h-34.3V408.2z M114.1,47h23.3\tv29.1h-23.3V47z M386.9,390.2h35.6v44.3h-35.6V390.2z M256.7,0h-60.3v92.7H269V11.1C269,11.1,256.7,0,256.7,0z M247.1,76.1h-38.4V72\th38.4V76.1z M256.7,59.5h-48V54h48V59.5z M256.7,41.5h-48V36h48C256.7,36,256.7,41.5,256.7,41.5z M256.7,23.5h-48V18h48V23.5z\t M256.7,11.1V2.8l9.6,8.3C266.3,11.1,256.7,11.1,256.7,11.1z M94.9,215.9H34.6v92.7h72.7v-81.6C107.3,226.9,94.9,215.9,94.9,215.9z\t M86.7,293.4H48.3v-5.5h38.4V293.4z M94.9,275.4h-48v-5.5h48V275.4z M94.9,257.4h-48v-5.5h48V257.4z M94.9,240.8h-48v-5.5h48\tC94.9,235.2,94.9,240.8,94.9,240.8z M94.9,226.9v-8.3l9.6,8.3H94.9z M374.6,177.1l-21.9-19.4H240.2v171.6h134.4\tC374.6,329.3,374.6,177.1,374.6,177.1z M336.2,296.1h-71.3v-5.5h71.3C336.2,290.6,336.2,296.1,336.2,296.1z M352.7,272.6h-87.7v-5.5\th87.7V272.6z M352.7,247.7h-87.7v-5.5h87.7V247.7z M352.7,222.8h-87.7v-5.5h87.7V222.8z M352.7,197.9h-87.7v-4.2h87.7\tC352.7,193.7,352.7,197.9,352.7,197.9z M352.7,177.1v-15.2l17.8,15.2H352.7z M465.1,244.9h-60.3v92.7h72.7V256\tC477.4,256,465.1,244.9,465.1,244.9z M455.5,322.4h-38.4v-5.5h38.4V322.4z M465.1,304.4h-48v-5.5h48V304.4z M465.1,286.4h-48v-5.5\th48V286.4z M465.1,268.5h-48v-5.5h48C465.1,262.9,465.1,268.5,465.1,268.5z M465.1,256v-8.3l9.6,8.3H465.1z M402,96.9h-35.6v54H413\tv-44.3C413,106.6,402,96.9,402,96.9z M393.8,139.8h-19.2v-5.5h19.2V139.8z M404.7,128.7h-30.2v-5.5h30.2V128.7z M404.7,116.2h-30.2\tv-5.5h30.2C404.7,110.7,404.7,116.2,404.7,116.2z M402,106.6v-8.3l9.6,8.3H402z M260.8,458h-35.6v54h46.6v-44.3\tC271.8,467.7,260.8,458,260.8,458z M252.6,500.9h-19.2v-5.5h19.2V500.9z M263.5,489.9h-30.2v-5.5h30.2 C263.5,484.3,263.5,489.9,263.5,489.9z M263.5,477.4h-30.2v-5.5h30.2V477.4z M259.4,467.7v-8.3l9.6,8.3H259.4z"/></svg>';
g.appendChild(k);e=document.createElement("span");e.className="context-menu-label";e.innerText=b;g.appendChild(e);g.addEventListener("click",function(){var p=a.Internal.Text.getSelectedTextAreas(1);c(p);a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1)});a.cache.addedSelectedTextContextMenuItem.push(g);this.dom.viewerContextMenu.firstChild.appendChild(g);return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},ResetSelectedTextContextMenu:function(){for(;0!=a.cache.addedSelectedTextContextMenuItem.length;)a.cache.addedSelectedTextContextMenuItem[0].parentNode.removeChild(a.cache.addedSelectedTextContextMenuItem[0]),
a.cache.addedSelectedTextContextMenuItem.splice(0,1);return DocuViewareAPI.Status.OK},AddAnnotationsActionButton:function(b,c,e){if(b&&c&&"function"===typeof e&&this.dom.annotationsActionButtons){var g=0,k=document.createElement("div"),p=dvJQuery("div[id^='annotationActionButtonsSplitter']").length+1;k.id="annotationActionButtonsSplitter"+p+this.uniqueID;k.style.fill=this.dom.UIconfig.strokeColor;k.style.height="16px";k.style.width="1px";k.style.marginLeft="8px";k.style.marginRight="8px";k.style.float=
"left";k.style.borderRight="solid";k.style.borderRightWidth="1px";k.style.borderRightColor=this.UIconfig.strokeColor;g+=dvJQuery(k).outerWidth()+2;this.dom.annotationsActionButtons.appendChild(k);g=document.createElement("div");p=dvJQuery("div[id^='annotationActionCustomButtons']").length+1;g.id="annotationActionCustom"+p+this.uniqueID;g.title=b;g.style.fill=this.dom.UIconfig.strokeColor;g.style.height="16px";g.style.width="16px";g.style.float="left";g.innerHTML=c;g.addEventListener("mouseenter",
function(){dvJQuery(this).css("cursor","pointer");dvJQuery(this).css("fill",a.dom.UIconfig.hoverColor)});g.addEventListener("mouseleave",function(){dvJQuery(this).css("cursor","default");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});g.addEventListener("click",function(){e({id:a.dom.selectedAnnotation.annotApp.id})});this.dom.annotationsActionButtons.appendChild(g);this.Internal.Annotations.unselectAll();return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},AddCustomToolbarButton:function(b,
c,e,g){b=document.createElement("div");b.className="dv-buttons-container";b.style.paddingRight=a.UIconfig.toolbarButtonsSpacing+"px";var k="function"===typeof g?g:a.Internal.Utilities.parseFunction(g);b.addEventListener("click",function(){k()});g=document.createElement("button");g.innerHTML=("object"===typeof HTMLElement?e instanceof HTMLElement:e&&"object"===typeof o&&null!==e&&1===e.nodeType&&"string"===typeof e)?e.outerHTML:e;b.appendChild(g);a.dom.toolbarButtonContainer.appendChild(b);return DocuViewareAPI.Status.OK},
ShowThumbnailsSnapIn:function(){return this.dom.thumbnailArea?this.SelectSnapIn("thumbnails",!1):DocuViewareAPI.Status.GenericError},ShowBookmarksSnapIn:function(){return this.dom.bookmarksArea?this.SelectSnapIn("bookmarks",!1):DocuViewareAPI.Status.GenericError},ShowSearchSnapIn:function(){if(this.dom.searchArea){var b=this.SelectSnapIn("search",!1);b==DocuViewareAPI.Status.OK&&(a.dom.searchResultsContainer.style.height=dvJQuery(a.dom.searchArea).outerHeight(!0)-dvJQuery(a.dom.searchPanelForm).outerHeight(!0)+
"px",dvJQuery(this.dom.searchValueInput).focus());return b}return DocuViewareAPI.Status.GenericError},ShowAnnotationsSnapIn:function(){return this.dom.annotationsArea?this.SelectSnapIn("annotations",!1):DocuViewareAPI.Status.GenericError},ShowCommentsSnapIn:function(){return this.dom.commentsArea?this.SelectSnapIn("comments",!1):DocuViewareAPI.Status.GenericError},ShowRedactionSnapIn:function(){return this.dom.commentsArea?this.SelectSnapIn("redaction",!1):DocuViewareAPI.Status.GenericError},IsSnapinsPanelVisible:function(){return this.dom.leftSideArea?
"none"!==dvJQuery(this.dom.leftSideContainerPanelsArea).css("display"):!1},SetSnapinsPanelVisibility:function(b,c,e){if(!this.dom.leftSideArea)return DocuViewareAPI.Status.GenericError;var g=dvJQuery(this.dom.leftSideContainerPanelsArea).css("display");if(b){if(!this.IsSnapinsPanelVisible()||c)c&&=Math.max(c,dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width()),dvJQuery(a.dom.leftSideArea).animate({width:c?c:a.dom.leftSideArea.oldWidth},100,"linear",function(){dvJQuery(a.dom.leftsideContainer).css("width",
"");a.dom.updateResizeBarVisibility();dvJQuery(a.dom.leftSideContainerPanelsArea).show(0,function(){if(g!==dvJQuery(a.dom.leftSideContainerPanelsArea).css("display")||e)a.events.onNewViewerSize(),a.dom.ensureSelectedThumbnailVisibility(!1)});dvJQuery(a.dom.leftSideArea).resizable("enable");c?a.dom.sidePanelResized():a.dom.sidePanelToggled(!1)})}else this.IsSnapinsPanelVisible()&&(this.UnselectSelectedSnapin(),a.dom.leftSideArea.oldWidth=c?c+"px":dvJQuery(a.dom.leftSideArea).css("width"),dvJQuery(a.dom.leftSideArea).animate({width:dvJQuery(a.dom.leftsideContainer).width()-
dvJQuery(a.dom.leftSideContainerPanelsArea).width()},100,"linear",function(){a.dom.updateResizeBarVisibility();dvJQuery(a.dom.leftSideContainerPanelsArea).hide(0,function(){if(g!==dvJQuery(a.dom.leftSideContainerPanelsArea).css("display")||e)a.events.onNewViewerSize()});dvJQuery(a.dom.leftSideArea).resizable("disable");a.dom.sidePanelToggled(!0)}));return DocuViewareAPI.Status.OK},GetSnapInPanelWidth:function(){return this.IsSnapinsPanelVisible()?parseInt(dvJQuery(a.dom.leftSideArea).css("width")):
0},SetSnapInPanelWidth:function(b){return this.dom.leftSideArea&&b===parseInt(b)?null==a.dom.selectedSnapin?(a.dom.leftSideArea.oldWidth=Math.max(b,dvJQuery(a.dom.leftsideContainer).width()-dvJQuery(a.dom.leftSideContainerPanelsArea).width()),this.SelectFirstAvailableSnapin()):this.SetSnapinsPanelVisibility(!0,b,!0):DocuViewareAPI.Status.GenericError},AddCustomSnapIn:function(b,c,e,g,k,p){function n(B){return"object"===typeof HTMLElement?B instanceof HTMLElement:B&&"object"===typeof B&&null!==B&&
1===B.nodeType&&"string"===typeof B.nodeName}if(!this.dom.leftSideArea)return DocuViewareAPI.Status.GenericError;var w=document.createElement("div");w.id=a.uniqueID+"_snapin_button_"+b;w.className="leftsidebutton";w.title=c;w.style.display=!0===k?"block":"none";w.style.borderTop="1px solid "+a.dom.UIconfig.snapInButtonBorderTop;n(e)?w.innerHTML=e.outerHTML:w.innerHTML=e;w.addEventListener("click",function(){a.SnapInButton_Click(b)});w.addEventListener("mouseenter",function(){a.events.onSnapInButtonMouseEnter(this)});
w.addEventListener("mouseleave",function(){a.events.onSnapInButtonMouseLeave(this)});document.getElementById("snapinButtonStrip"+a.uniqueID).appendChild(w);e=document.createElement("div");e.id=a.uniqueID+"_snapin_panel_"+b;e.className="dv-panel";n(g)?e.innerHTML=g.outerHTML:e.innerHTML=g;document.getElementById("leftsidePanels"+a.uniqueID).appendChild(e);a.snapIns.push({snapInID:a.uniqueID+"_snapin_panel_"+b,buttonID:a.uniqueID+"_snapin_button_"+b,name:b,label:c,onSelection:null==p?null:p});return DocuViewareAPI.Status.OK},
FindSnapIn:function(b){if(null!=a.snapIns)for(var c=0;c<a.snapIns.length;c++)if(a.snapIns[c].name==b)return a.snapIns[c];return null},IsSnapInAvailable:function(b){return(b=a.FindSnapIn(b))?dvJQuery("#"+b.buttonID).is(":visible")||dvJQuery("#"+b.snapInID).is(":visible"):!1},ToggleSnapIn:function(b,c){var e=a.FindSnapIn(b);if(e){c?dvJQuery("#"+e.buttonID).show():(dvJQuery("#"+e.buttonID).hide(),!0===a.IsSnapinsPanelVisible()&&0!==a.SelectFirstAvailableSnapin()&&a.SetSnapinsPanelVisibility(!1));switch(b){case "comments":a.dom.selectedAnnotation&&
(a.Internal.Annotations.unselectById(a.dom.selectedAnnotation.annotApp.id),a.Internal.Annotations.selectById(a.dom.selectedAnnotation.annotApp.id))}return DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},UnselectSelectedSnapin:function(){if(this.dom.selectedSnapin){var b=this.FindSnapIn(this.dom.selectedSnapin);if(b){var c=document.getElementById(b.snapInID);b=document.getElementById(b.buttonID);if(c&&b)return this.dom.selectedSnapin=null,null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=
""),dvJQuery(c).removeClass("active"),dvJQuery(b).removeClass("active"),dvJQuery(b).attr("aria-selected","false"),c.style.display="",b.style.fill="",b.style.backgroundColor="",b.style.borderBottomColor=this.dom.UIconfig.snapInButtonBorderBottom,b.style.borderTopColor=this.dom.UIconfig.snapInButtonBorderTop,DocuViewareAPI.Status.OK}this.dom.selectedSnapin=null}return DocuViewareAPI.Status.GenericError},SelectFirstAvailableSnapin:function(b){if(null!=a.snapIns)for(b=0;b<a.snapIns.length;b++){var c=
document.getElementById(a.snapIns[b].snapInID),e=document.getElementById(a.snapIns[b].buttonID);if(c&&e&&"none"!==dvJQuery(e).css("display"))return this.SelectSnapIn(a.snapIns[b].name,!0)}return DocuViewareAPI.Status.GenericError},SelectSnapIn:function(b,c){if(this.dom.selectedSnapin===b)return DocuViewareAPI.Status.OK;var e=this.SetSnapInVisibility(b,!0);if(e===DocuViewareAPI.Status.OK){if(e=this.FindSnapIn(b)){var g=document.getElementById(e.buttonID),k=document.getElementById(e.snapInID);if(g&&
k&&"none"!==dvJQuery(g).css("display")){this.UnselectSelectedSnapin();null!=this.dom.snapinsHeaderLabel&&(this.dom.snapinsHeaderLabel.innerHTML=e.label);dvJQuery(g).addClass("active");g.style.fill="legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?this.dom.UIconfig.headerColor:this.dom.UIconfig.snapinButtonActiveColor;g.style.fill=this.dom.UIconfig.snapinButtonActiveColor;g.style.backgroundColor=this.dom.UIconfig.panelBackColor;"dv-pspdfkitlight"===a.dom.getTheme()&&(g.style.backgroundColor=
this.dom.UIconfig.activeSelectedBackgroundColor);g.style.borderBottomColor=this.dom.UIconfig.panelBackColor;g.style.borderTopColor=this.dom.UIconfig.panelBackColor;dvJQuery(k).addClass("active");k.style.display="block";if(e.onSelection)if("function"===typeof e.onSelection)e.onSelection();else a.Internal.Utilities.parseFunction(e.onSelection).call(this);dvJQuery(k).focus();this.SetSnapinsPanelVisibility(!0);this.dom.selectedSnapin=b;if(!c)if("thumbnails"===b){if(a.callbacks.onThumbnailsSnapInSelected)a.callbacks.onThumbnailsSnapInSelected()}else if("bookmarks"===
b){if(a.callbacks.onBookmarksSnapInSelected)a.callbacks.onBookmarksSnapInSelected()}else if("search"===b){if(a.callbacks.onSearchSnapInSelected)a.callbacks.onSearchSnapInSelected()}else if("annotations"===b){if(a.callbacks.onAnnotationsSnapInSelected)a.callbacks.onAnnotationsSnapInSelected()}else if("comments"===b&&a.callbacks.onCommentsSnapInSelected)a.callbacks.onCommentsSnapInSelected();return DocuViewareAPI.Status.OK}}return DocuViewareAPI.Status.GenericError}return e},SetSnapInVisibility:function(b,
c){if(c&&"annotations"===b&&!1===this.serverCtx.annotationEditorMode)return DocuViewareAPI.Status.GenericError;var e=this.FindSnapIn(b);if(e){var g=this.dom.selectedSnapin;g!==b||c||this.UnselectSelectedSnapin();"redaction"===g&&g!==b&&a.events.isAddingRedactionMarksMode&&a.Internal.Redaction.disableAddRedactionMarksMode();g=document.getElementById(e.buttonID);e=document.getElementById(e.snapInID);"redaction"===b&&c&&(dvJQuery(dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+
a.uniqueID+"']")).minicolors({defaultValue:"#000000",letterCase:"uppercase"}),dvJQuery([document]).on("mousedown.minicolors touchstart.minicolors",function(k){dvJQuery(k.target).parents().add(k.target).hasClass("minicolors")||dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("margin-bottom","0px")}),dvJQuery(a.dom.redactionFill).find("input[name='redaction_fill_color_input"+a.uniqueID+"']").parent().click(function(){dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("margin-bottom",
"175px");event.stopPropagation()}),dvJQuery(a.dom.redactionFill).find("#redaction_background_fieldset"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.redactionFill).find("#redaction_fill_color_control"+a.uniqueID).css("display","inline-block"),dvJQuery(a.dom.redactionFill).find("#redaction_fill"+a.uniqueID).css("display","inline-block"),"dv-pspdfkitlight"===a.dom.getTheme()&&dvJQuery(a.dom.redactionFill).find("#redaction_fill_color_control"+a.uniqueID).css("display","flex"));if(g&&e)return"none"!==
dvJQuery(g).css("display")!==c&&(g.style.display=c?"block":"none"),DocuViewareAPI.Status.OK}return DocuViewareAPI.Status.GenericError},Search:function(b,c,e,g,k,p){this.ClearSearch();this.SubmitSearch(b,c,e,g,k,p);this.dom.searchArea&&(this.dom.searchValueInput.value=b,this.dom.searchWholeWordInput.checked=c,this.dom.searchCaseSensitiveInput.checked=e,this.dom.searchAnyWordInput.checked=g,dvJQuery(this.dom.searchPageSelect).filter("[value='"+k+"']").prop("checked",!0),dvJQuery(this.dom.searchPageSelect).dvButton("refresh"));
return DocuViewareAPI.Status.OK},SetSearchSettings:function(b,c,e,g,k,p,n){this.dom.searchWholeWordInput.checked=b;this.dom.searchCaseSensitiveInput.checked=c;this.dom.searchAnyWordInput.checked=e;this.dom.fuzzySearchInput.checked=n;k&&(a.dom.UIconfig.searchResultBackColor=k);p&&(a.dom.UIconfig.searchResultBorderColor=k);dvJQuery(this.dom.searchPageSelect).filter("[value='"+g+"']").prop("checked",!0);dvJQuery(this.dom.searchPageSelect).dvButton("refresh");return DocuViewareAPI.Status.OK},SearchNavigateToOccurrence:function(b){return a.Internal.Search.occurences[b]&&
(b=document.getElementById(a.uniqueID+"searchResultItem"+b))?(a.Internal.Search.navigateToResult(b),DocuViewareAPI.Status.OK):DocuViewareAPI.Status.GenericError},GetSearchResultsCount:function(){return a.Internal.Search._occurences?a.Internal.Search._occurences.length:0},GetCurrentSearchOccurrenceIdx:function(){return a.Internal.Search._currentOccurence?parseInt(a.Internal.Search._currentOccurence.dataset.idx):-1},SubmitSearch:function(b,c,e,g,k,p){this.ShowSearchSnapIn();if(b){var n=[];n.push(0==
k?a.GetCurrentPage():-1);return this.ajax.PostBaseRequest("textsearch",{data:{text:b,pages:n,wholeWord:c,caseSensitive:e,anyWord:g,enableFuzzyMatch:p},success:function(w){w="string"===typeof w?JSON.parse(w):w;var B=0;w&&w.status==DocuViewareAPI.Status.OK?(a.Internal.Search.addResults(b,w.occurences),0==w.occurences.length?a.callbacks.onSearchInvoked||a.ShowMessage({text:a.Localize("no_result"),backgroundColor:a.dom.UIconfig.headerColor,icon:64,delay:5E3}):(B=w.occurences.length,a.Internal.Search.navigateToFirstResult(),
a.dom.searchArea&&(a.dom.searchClearResultsButton.style.display="block","dv-pspdfkitlight"===a.dom.getTheme()&&(a.dom.searchClearResultsButton.style.display="none")))):(a.callbacks.onSearchInvoked||a.ShowMessage({text:a.Localize("no_result"),backgroundColor:a.dom.UIconfig.headerColor,icon:64,delay:5E3}),a.Internal.Search.addResults(null,null),a.ajax.HandleError(w));if(a.callbacks.onSearchInvoked)a.callbacks.onSearchInvoked({occurrences:B})}},!1)}return DocuViewareAPI.Status.GenericError},UpdateLayout:function(){this.events.onResize();
return DocuViewareAPI.Status.OK},ClearSearch:function(){this.Internal.Search.clearResults();this.dom.searchArea&&(this.dom.searchValueInput.value="",this.dom.searchClearResultsButton.style.display="none");return DocuViewareAPI.Status.OK},CommentsClearSearch:function(){this.dom.commentsSearchArea&&(this.dom.commentsSearchValueInput.value="",this.dom.commentsSearchClearResultsButton.style.display="none");a.refreshCommentsPanel();return DocuViewareAPI.Status.OK},SubmitCommentsSearch:function(b){this.ShowCommentsSnapIn();
if(!b)return DocuViewareAPI.Status.GenericError},CommentsExpandCollapseAll:function(){dvJQuery(a.dom.commentsCollapseExpandAllButton).hasClass("dvcolapsed")?(dvJQuery(a.dom.commentsCollapseExpandAllButton).removeClass("dvcolapsed"),dvJQuery(".dvcomment-user .dvtoggle").removeClass("dvcolapsed"),dvJQuery(".dvcomment-content").slideDown(),"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" style="height:16px;width:16px;" viewBox="0 0 512 512" xml:space="preserve"><path d="m87 254.3 169-169 169 169-30.3 30.1L277.3 167v302.3h-42.7V167L117.3 284.4 87 254.3m169-169h213.3V42.7H42.7v42.7H256z"/></svg>'):
"material"===a.dom.mainArea.attributes["data-theme-icon"].value?dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" style="height:16px;width:16px;" viewBox="0 0 512 512" xml:space="preserve"><path d="m87 254.3 169-169 169 169-30.3 30.1L277.3 167v302.3h-42.7V167L117.3 284.4 87 254.3m169-169h213.3V42.7H42.7v42.7H256z"/></svg>'):"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 504 504" style="enable-background:new 0 0 504 504" xml:space="preserve"><path d="M44 96.4c.3 14.4 11.5 25.8 25.4 25.6h365.3c13.8.1 25.1-11.3 25.4-25.6.3-14.4-10.8-26.1-24.6-26.4h-366c-14-.1-25.2 11.3-25.5 25.6v.8zM44 415.9c0 9.9 7.7 18 17.3 18 4.7 0 9.2-1.9 12.4-5.5l178.2-185 178.2 185.1c6.6 7.2 17.6 7.4 24.5.5 6.9-6.9 7.1-18.3.5-25.5l-.5-.5-190.4-197.8c-6.7-7-17.7-7-24.5 0L49.3 403c-3.4 3.3-5.3 8-5.3 12.9z"/></svg>')):
(dvJQuery(a.dom.commentsCollapseExpandAllButton).addClass("dvcolapsed"),dvJQuery(".dvcomment-user .dvtoggle").addClass("dvcolapsed"),dvJQuery(".dvcomment-content").slideUp(),"legacy"===a.dom.mainArea.attributes["data-theme-icon"].value?dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" style="height:16px;width:16px;" viewBox="0 0 512 512" xml:space="preserve"><path d="m425 257.7-169 169-169-169 30.3-30.1L234.7 345V42.7h42.7V345l117.3-117.5 30.3 30.2m-169 169H42.7v42.7h426.7v-42.7H256z"/></svg>'):
"material"===a.dom.mainArea.attributes["data-theme-icon"].value?dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" style="height:16px;width:16px;" viewBox="0 0 512 512" xml:space="preserve"><path d="m425 257.7-169 169-169-169 30.3-30.1L234.7 345V42.7h42.7V345l117.3-117.5 30.3 30.2m-169 169H42.7v42.7h426.7v-42.7H256z"/></svg>'):"bitonal"===a.dom.mainArea.attributes["data-theme-icon"].value&&dvJQuery(a.dom.commentsCollapseExpandAllButton).html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 504 504" style="enable-background:new 0 0 504 504" xml:space="preserve"><path d="M460 407.6c-.3-14.4-11.5-25.8-25.4-25.6H69.4c-13.8-.1-25.1 11.3-25.4 25.6s10.8 26.1 24.6 26.4h366c13.8.1 25.1-11.3 25.4-25.6v-.8zM460 88.1c0-9.9-7.7-18-17.3-18-4.7 0-9.2 1.9-12.4 5.5l-178.2 185L73.9 75.5c-6.6-7.2-17.6-7.4-24.5-.5-6.9 6.9-7.1 18.3-.5 25.5l.5.5 190.4 197.8c6.7 7 17.7 7 24.5 0L454.7 101c3.4-3.3 5.3-8 5.3-12.9z"/></svg>'))},
SetLoadFromUriDialogVisibility:function(b,c){this.dom.isLoadFromUriDialogVisible!=b&&(b?(dvJQuery(this.dom.openFromUriArea).slideDown({complete:function(){dvJQuery(document).on("mousedown.toggleOpenUriEvent",function(e){dvJQuery(a.dom.openFromUriArea).is(dvJQuery(e.target))||0!=dvJQuery(a.dom.openFromUriArea).has(dvJQuery(e.target)).length||a.ToggleLoadFromUriDialog()});a.dom.isLoadFromUriDialogVisible=b;"undefined"!==typeof c&&!0!==c||dvJQuery(a.dom.addressBar).focus()}}),dvJQuery(this.dom.openFromUriButton).addClass("button_active")):
(dvJQuery(document).unbind("mousedown.toggleOpenUriEvent"),dvJQuery(this.dom.openFromUriArea).slideUp({complete:function(){a.dom.isLoadFromUriDialogVisible=b}}),dvJQuery(this.dom.openFromUriButton).removeClass("button_active")),this.dom.updateButtons())},LoadFromUri:function(b,c,e,g,k,p){function n(I){a.ajax.downloading=!1;0!=a.dom.progressbar.value()&&(a.dom.progressbar.go(100),a.dom.progressbar.value100=100);dvJQuery(a.dom.mainSpinner).hide();a.SetLoadFromUriDialogVisibility(!1);if(I){if(a.callbacks.onURIOpenSuccess)a.callbacks.onURIOpenSuccess()}else if(a.callbacks.onURIOpenError)a.callbacks.onURIOpenError()}
function w(I){a.ajax.HandleError(I);n(!1)}function B(I){if(a.ajax.downloading&&(I="string"===typeof I?JSON.parse(I):I,!I||!I.ignoreResponse))if(I&&I.status==DocuViewareAPI.Status.OK)if(I.isTransfering){if(0<I.progress&&100>=I.progress){100!=I.progress&&(a.dom.progressbar.go(I.progress),a.dom.progressbar.value100=I.progress);var E=dvJQuery(a.dom.mainSpinnerContent);E.children(E.children.length-1).text(a.Localize("label__downloading_document")+" ("+I.progress+"%)")}a.ajax.PostBaseRequest("loadfromuri",
{data:{transferID:a.ajax.transferID,progressRequest:!0,URI:b,fileName:c,password:k,ignoreFileHostingURI:null!=p?p:!1},success:B,error:w},!1,!0)}else n(!0),a.ajax.SetNewServerCtx(I);else n(!1),a.ajax.HandleError(I)}if(this.hasPendingAction())return DocuViewareAPI.Status.DocuViewarePendingAction;this.callbacks.onURIOpenError=g;this.callbacks.onURIOpenSuccess=e;this.ajax.downloading=!0;this.ajax.transferID=Date.now();e=dvJQuery(this.dom.mainSpinnerContent);e.children(e.children.length-1).text(this.Localize("label__loading_progress"));
a.SetLoadFromUriDialogVisibility(!1);dvJQuery(this.dom.mainSpinner).show();a.ajax.PostBaseRequest("loadfromuri",{data:{transferID:a.ajax.transferID,progressRequest:!1,URI:b,fileName:c,clientConfiguration:a.getConfig(),password:k,ignoreFileHostingURI:null!=p?p:!1},success:B,error:w},!1,!0);return DocuViewareAPI.Status.OK},ExitAnnotationDrawingMode:function(){2==this.events.mouseMode&&this.events.isDrawingPath&&(this.ResetScrollConfig(!1),this.dom.freehandCan.style.display="none",this.events.isDrawingPath=
!1,this.Internal.Annotations.addAnnotInteractive(),this.dom.drawingModeArea.style.display="none",this.dom.modalOverlayArea.style.display="none",this.dom.controlArea.style.zIndex="1");a.dom.UIconfig.disableAnnotationDrawingModePanel&&(null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).removeClass("button_active"),null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).removeClass("button_active"),null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).removeClass("button_active"),
null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).removeClass("button_active"));this.dom.addViewAreaTouchAction();this.Internal.Annotations.stopAnnotInteractiveAdd();return DocuViewareAPI.Status.OK},IsFullScreenMode:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},ToggleFullscreen:function(){if(a.isSafari||a.isIOS||a.isIE9||a.isIE10)return DocuViewareAPI.Status.GenericError;if(this.hasPendingAction(!1,
!1,!1))return DocuViewareAPI.Status.DocuViewarePendingAction;var b=this.IsFullScreenMode();if(b)document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{dvJQuery(a.dom.fullscreenButton).addClass("button_active");var c=a.dom.mainArea;c.requestFullscreen?(DocuViewareUtilities.addEvent(document,"fullscreenchange",function k(g){document.fullscreenElement||
(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"fullscreenchange",k,!1))},!1),c.requestFullscreen()):c.msRequestFullscreen?(DocuViewareUtilities.addEvent(document,"MSFullscreenChange",function k(g){document.msFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"MSFullscreenChange",k,!1))},!1),c.msRequestFullscreen()):c.mozRequestFullScreen?(DocuViewareUtilities.addEvent(document,"mozfullscreenchange",function k(g){document.mozFullScreenElement||(a.ExitFullscreen(),
DocuViewareUtilities.removeEvent(document,"mozfullscreenchange",k,!1))},!1),c.mozRequestFullScreen()):c.webkitRequestFullScreen&&(DocuViewareUtilities.addEvent(document,"webkitfullscreenchange",function k(g){document.webkitFullscreenElement||(a.ExitFullscreen(),DocuViewareUtilities.removeEvent(document,"webkitfullscreenchange",k,!1))},!1),c.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT));if(a.callbacks.onFullscreenModeChanged){if(!b)a.callbacks.onFullscreenModeChanged({newMode:!0})}else return DocuViewareAPI.Status.GenericError;
a.dom.UIconfig.old_viewer_width=a.width;a.dom.UIconfig.old_viewer_height=a.height;a.dom.leftSideArea&&"none"!==dvJQuery(a.dom.leftSideContainerPanelsArea).style("display")&&(b=window.screen.width/a.width,a.dom.leftSideArea.style.width=Math.round((parseInt(dvJQuery(a.dom.leftSideArea).css("width"))||a.dom.leftSideArea.offsetWidth)*b)+"px");a.events.onNewViewerSize();a.dom.updateButtons()}return DocuViewareAPI.Status.OK},ExitFullscreen:function(){if(this.hasPendingAction(!1,!1,!1))return DocuViewareAPI.Status.DocuViewarePendingAction;
dvJQuery(a.dom.fullscreenButton).removeClass("button_active");a.dom.updateButtons();var b=a.dom.UIconfig.old_viewer_width/a.width;a.dom.leftSideArea&&("none"!==dvJQuery(a.dom.leftSideContainerPanelsArea).css("display")?a.dom.leftSideArea.style.width=Math.round((parseInt(dvJQuery(a.dom.leftSideArea).css("width"))||a.dom.leftSideArea.offsetWidth)*b)+"px":a.dom.leftSideContainerPanelsArea.style.width=Math.round(parseFloat(dvJQuery(a.dom.leftSideContainerPanelsArea).css("width"))*b)+"px");a.events.onNewViewerSize();
if(a.callbacks.onFullscreenModeChanged)a.callbacks.onFullscreenModeChanged({newMode:!1})},SetZoomMode:function(b){return a.ajax.PostBaseRequest("zoommode",{data:{zoomMode:b},success:function(c){a.ajax.HandleServerContextResponse("string"===typeof c?JSON.parse(c):c,!1)}},!1)},IsMagnifierEnabled:function(){return a.Internal.Magnifier.isMagnifying},ToggleMagnifier:function(){return a.Internal.Magnifier.toggle()},EnableMagnifier:function(){return a.Internal.Magnifier.enable()},DisableMagnifier:function(){return a.Internal.Magnifier.disable()},
SetMouseMode:function(b){a.events.mouseMode=b;var c=DocuViewareAPI.Status.OK;a.events.setCursor();a.Internal.Selection.selectionArea.hide();this.IsMagnifierEnabled()&&this.DisableMagnifier();switch(b){case 0:this.dom.addViewAreaTouchAction();case 1:a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!1);a.events.ownMouseEvents=!1;break;case 3:this.dom.removeViewAreaTouchAction();a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);
a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;case 4:this.dom.removeViewAreaTouchAction();a.Internal.Selection.selectionArea.setSelectionRectangleStyle(!0);a.Internal.Selection.selectionArea.setLineMode(0);a.events.ownMouseEvents=!0;a.Internal.Annotations.unselectAll();a.Internal.Text.clearSelection();a.dom.SelectedTextRegions.clear(1);break;case 5:this.dom.removeViewAreaTouchAction(),a.events.ownMouseEvents=
!0;default:c=DocuViewareAPI.Status.GenericError}a.dom.udpateMouseModeButtons(b);a.dom.updateButtons();return c},GetMouseMode:function(){return a.events.mouseMode},NewViewerSizePreview:function(){if(!this.serverCtx.singlePageView||2==this.serverCtx.documentPosition){var b=DocuViewareUtilities.clonePageCanvasSizes(a.cache.pageCanvasSize);if(null!=b){var c=a.dom.getViewerContainer(),e=c.offsetWidth;c=c.offsetHeight;a.serverCtx.vScrollbarVisible&&(e-=a.dom.sbWidth);a.serverCtx.hScrollbarVisible&&(c-=
a.dom.sbWidth);for(var g=b.length,k=!0,p=0,n=0;n<g;n++){n+1<g&&(p+=a.serverCtx.itemsVerticalSpacing);var w=b[n].Width,B=b[n].Height;k&&w>e&&(k=!1);p+=B}var I=p<c;if(I||k){var E=0;for(n=0;n<g;n++)w=b[n].Width,B=b[n].Height,k&&(b[n].OffsetX=(e-w)/2),I&&(b[n].OffsetY=E+(c-p)/2),E+=B+a.serverCtx.itemsVerticalSpacing}a.SetupViewerArea(b,a.cache.pageCanvasZoom,!0,!0)}}},CanChangeZoom:function(b,c){return a.hasPendingAction(!0,!0,!0,!1)?DocuViewareAPI.Status.DocuViewarePendingAction:c?DocuViewareAPI.Status.OK:
isNaN(b)?DocuViewareAPI.Status.InvalidZoomLevelRequested:a.serverCtx.zoomMin<=b&&b<=a.serverCtx.zoomMax?DocuViewareAPI.Status.OK:DocuViewareAPI.Status.InvalidZoomLevelRequested},ZoomPreview:function(b){b>a.serverCtx.zoomMax?b=a.serverCtx.zoomMax:b<a.serverCtx.zoomMin&&(b=a.serverCtx.zoomMin);if(Math.round(1E3*b)!==Math.round(1E3*a.cache.pageCanvasZoom)){a.events.restartZoomPreviewAutoSubmitter();var c=DocuViewareUtilities.clonePageCanvasSizes(a.cache.pageCanvasSizeNoPreview);if(null!=c){var e=a.dom.getViewerContainer(),
g=e.offsetWidth,k=e.offsetHeight;a.serverCtx.vScrollbarVisible&&(g-=a.dom.sbWidth);a.serverCtx.hScrollbarVisible&&(k-=a.dom.sbWidth);e=c.length;for(var p=b/a.serverCtx.zoom,n=0,w=0,B=0;B<e;B++)c[B].Width>w&&(w=c[B].Width);var I=w=0;for(B=0;B<e;B++){var E=c[B].Width*p,V=c[B].Height*p;E>w&&(w=E);c[B].OffsetY=n;c[B].OffsetX=0;c[B].Width=E;c[B].Height=V;B==e-1&&(I=n+V);n+=V+a.serverCtx.itemsVerticalSpacing}switch(a.serverCtx.documentPosition){case 0:p=0;n=k>I&&0==c[0].OffsetY?(k-I)/2:0;break;case 1:p=
g>w?g-w:0;n=k>I&&0==c[0].OffsetY?(k-I)/2:0;break;default:p=g>w?(g-w)/2:0;n=k>I&&0==c[0].OffsetY?(k-I)/2:0;break;case 4:n=p=0;break;case 5:p=g>w?g-w:0;n=0;break;case 6:p=g>w?(g-w)/2:0;n=0;break;case 7:p=0;n=k>I&&0==c[0].OffsetY?k-I:0;break;case 8:p=g>w?g-w:0;n=k>I&&0==c[0].OffsetY?k-I:0;break;case 9:p=g>w?(g-w)/2:0,n=k>I&&0==c[0].OffsetY?k-I:0}B=a.serverCtx.forceScrollBars||a.viewerHeight<I||!a.serverCtx.singlePageView&&1<a.serverCtx.pageCount;Math.round(w)<Math.round(g)&&(B?a.serverCtx.vScrollbarVisible||
(p-=a.dom.sbWidth/2):a.serverCtx.vScrollbarVisible&&(p+=a.dom.sbWidth/2));g=a.serverCtx.forceScrollBars||Math.round(a.viewerWidth)<Math.round(w);Math.round(I)<Math.round(k)&&(g?a.serverCtx.hScrollbarVisible||(n-=a.dom.sbWidth/2):a.serverCtx.hScrollbarVisible&&(n+=a.dom.sbWidth/2));for(B=0;B<e;B++)g=p,c[B].Width<w&&(g+=(w-c[B].Width)/2),0!=g&&(c[B].OffsetX+=g),0!=n&&(c[B].OffsetY+=n);e=a.Internal.Coordinates.getViewerScrollTop();w=a.Internal.Coordinates.getViewerScrollTopMax();g=a.Internal.Coordinates.getViewerScrollLeft();
k=a.Internal.Coordinates.getViewerScrollLeftMax();a.SetupViewerArea(c,b);a.dom.viewerArea.scrollLeft=a.Internal.Coordinates.getViewerScrollLeftMax()*(g/k);a.dom.viewerArea.scrollTop=a.Internal.Coordinates.getViewerScrollTopMax()*(e/w);c=this.Internal.Pages.getVisiblePageNumbers();if(null!=c)for(e=0;e<c.length;e++)a.DrawPage(a.cache.getPageObject(c[e]),b!==a.serverCtx.zoom);a.dom.updateZoomUI(b,!0)}}},ComputeNextZoom:function(b,c){for(var e=a.serverCtx.zoom,g=0;g<b;g++)e=c?e+a.serverCtx.zoomStep/100*
e:e/(a.serverCtx.zoomStep/100+1);return e},ZoomINPreview:function(b){b=a.ComputeNextZoom(b,!0);var c=a.CanChangeZoom(b);if(c!==DocuViewareAPI.Status.OK)return c;a.ZoomPreview(b);return DocuViewareAPI.Status.OK},ZoomIN:function(b,c,e,g,k){var p=a.ComputeNextZoom(b,!0),n=a.CanChangeZoom(p);if(n!==DocuViewareAPI.Status.OK)return"function"==typeof k&&k(),n;c&&a.ZoomINPreview(b);return e?(this.zoomInTimeout&&(clearTimeout(this.zoomInTimeout),this.zoomInTimeout=null),this.zoomInTimeout=setTimeout(function(){a.ZoomIN(b,
!1,!1,g,k)},0),DocuViewareAPI.Status.OK):this.SetCurrentZoom(p,g,k)},ZoomOUTPreview:function(b){b=a.ComputeNextZoom(b,!1);var c=a.CanChangeZoom(b);if(c!==DocuViewareAPI.Status.OK)return c;a.ZoomPreview(b);return DocuViewareAPI.Status.OK},ZoomOUT:function(b,c,e,g,k){var p=a.ComputeNextZoom(b,!1),n=a.CanChangeZoom(p);if(n!==DocuViewareAPI.Status.OK)return"function"==typeof k&&k(),n;c&&a.ZoomOUTPreview(b);return e?(this.zoomOutTimeout&&(clearTimeout(this.zoomOutTimeout),this.zoomOutTimeout=null),this.zoomOutTimeout=
setTimeout(function(){a.ZoomOUT(b,!1,!1,g,k)},0),DocuViewareAPI.Status.OK):this.SetCurrentZoom(p,g,k)},ZoomRect:function(b,c,e){var g=a.CanChangeZoom(null,!0);return g!==DocuViewareAPI.Status.OK?("function"==typeof e&&e(),g):b&&Number.isFinite(b.left)&&Number.isFinite(b.top)&&Number.isFinite(b.width)&&Number.isFinite(b.height)?(b={data:{pageNo:this.GetCurrentPage(),left:b.left,top:b.top,width:b.width,height:b.height},success:function(k){a.ajax.HandleServerContextResponse("string"===typeof k?JSON.parse(k):
k,!1);c&&c()},error:function(){e&&e()}},this.ajax.PostBaseRequest("zoomrect",b,!1)):DocuViewareAPI.Status.GenericError},Rotate:function(b,c){return this.ajax.PostBaseRequest("rotate",{data:{rotation:b,mode:c},success:function(e){a.ajax.HandleServerContextResponse("string"===typeof e?JSON.parse(e):e,!1);if(a.callbacks.onRotationChanged)a.callbacks.onRotationChanged(a.serverCtx.renderRotation)}})},RotatePage:function(b,c,e,g){"number"==typeof b&&(b=[b]);return this.ajax.PostBaseRequest("rotate",{data:{rotation:c,
pages:b,mode:2},success:function(k){a.ajax.HandleServerContextResponse("string"===typeof k?JSON.parse(k):k,!1);if(e)e();else if(a.callbacks.onRotationChanged)a.callbacks.onRotationChanged(a.serverCtx.renderRotation)},error:function(){g&&g()}})},DeletePageInteractive:function(b,c,e){a.DisplayDialogForm(dvJQuery(a.dom.pageActionRemoveConfirm),a.Localize("_title_confirm_page_removal"),null,function(){dvJQuery(a.dom.pageActionRemoveConfirmMessage).html(a.Localize("_message_confirm_page_removal"))},null,
[{text:a.Localize("_label_no"),click:function(){dvJQuery(a.dom.pageActionRemoveConfirm).dvDialog("close")}},{text:a.Localize("_label_yes"),"class":"btn-valid",click:function(){a.DeletePage(b,c,e);dvJQuery(a.dom.pageActionRemoveConfirm).dvDialog("close")}}])},DeletePage:function(b,c,e){"number"==typeof b&&(b=[b]);return this.ajax.PostBaseRequest("deletepage",{data:{pages:b},success:function(g){a.ajax.HandleServerContextResponse("string"===typeof g?JSON.parse(g):g,!1,!0,!0);c&&c();if(a.callbacks.onPageDeleted)a.callbacks.onPageDeleted({pages:b})},
error:function(){e&&e()}})},SwapPages:function(b,c,e,g){return"number"==typeof b&&"number"==typeof c?this.ajax.PostBaseRequest("swappages",{data:{page1:b,page2:c},success:function(k){a.ajax.HandleServerContextResponse("string"===typeof k?JSON.parse(k):k,!1);e&&e()},error:function(){g&&g()}}):DocuViewareAPI.Status.GenericError},SelectPage:function(b,c){if(!(this.serverCtx.documentLoaded&&0<b&&b<=this.serverCtx.pageCount))return DocuViewareAPI.Status.GenericError;b!=this.GetLastPageNoRequest()?this.SelectPageEx(b,
!0,!0,!0,!1,!1,c):c&&c();return DocuViewareAPI.Status.OK},EnsurePageVisibility:function(b){if(!this.serverCtx.singlePageView&&null!=this.cache.canvas)for(var c=0;c<this.cache.canvas.length;c++)if(this.cache.canvas[c].pageNo==b){var e=this.cache.canvas[c].top;c=this.cache.canvas[c].bottom-e;var g=this.dom.viewerArea.offsetHeight;e=g<c?Math.round(e):Math.round(e+(c-g)/2);a.Internal.Coordinates.getViewerScrollTop()!=e&&(a.events.freezeScrollEvents=!0,setTimeout(function(){a.events.freezeScrollEvents=
!1},1E3),a.Internal.Coordinates.setViewerScrollTop(e),a.showVisiblePages(b));break}},EnsurePageRegionVisibility:function(b,c,e,g,k){if((!this.serverCtx.singlePageView||b==a.GetCurrentPage())&&null!=this.cache.canvas)for(var p=0;p<this.cache.canvas.length;p++)if(this.cache.canvas[p].pageNo==b){var n=this.cache.canvas[p].top,w=this.cache.canvas[p].bottom-n,B=this.dom.viewerArea.offsetHeight,I=this.dom.viewerArea.offsetWidth;p=0;B<w?(w=a.Internal.Pages.getRenderingState(b),c={left:c,top:e,width:g,height:k},
e=a.Internal.Matrix.scale(w.contentMatrix,96,96,!1),a.Internal.Matrix.transformBBox(e,0,c),e=c.top+c.height,e>B&&(n+=e-B+2,a.serverCtx.hScrollbarVisible&&(n+=a.dom.sbWidth)),B=c.left+c.width,B>I&&(p=B-I+2,a.serverCtx.vScrollbarVisible&&(p+=a.dom.sbWidth)),n=Math.round(n)):n=Math.round(n+(w-B)/2);a.Internal.Coordinates.getViewerScrollTop()!=n&&(a.events.freezeScrollEvents=!0,setTimeout(function(){a.events.freezeScrollEvents=!1},1E3),a.Internal.Coordinates.setViewerScrollTop(n),0!=p&&a.Internal.Coordinates.setViewerScrollLeft(p),
a.showVisiblePages(b));break}},EnsureCurrentPageVisibility:function(){this.EnsurePageVisibility(this.GetLastPageNoRequest())},SelectPageEx:function(b,c,e,g,k,p,n){a.debug&&console.log("DocuVieware: Select page: "+b);a.Internal.Thumbnails.reinitThumbnailsSelection();a.Internal.Thumbnails.setThumbnailSelected(b,!0);if(b!=a.GetLastPageNoRequest())return g&&this.dom.updateSelectedPageFader(500,b),e&&!a.serverCtx.singlePageView&&a.EnsurePageVisibility(b),k&&a.serverCtx.singlePageView&&(k=!1),e=this.ajax.latestSelectedPage,
this.ajax.latestSelectedPage=b,b=this.ajax.PostBaseRequest("selectpage",{data:{page:b},success:function(w){a.ajax.HandleServerContextResponse("string"===typeof w?JSON.parse(w):w,k)&&a.dom.updateThumbsStyle(c,!1);n&&n()},error:function(){}},!1,!0),b!=DocuViewareAPI.Status.OK&&(this.ajax.latestSelectedPage=e),b;p&&a.DrawPage(a.cache.getPageObject(b),!1);n&&n();return DocuViewareAPI.Status.OK},Save:function(b,c,e,g,k,p,n){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;
if(""==b)return a.DisplayError(a.Localize("error__saving_filename")),DocuViewareAPI.Status.GenericError;if(""==c)return a.DisplayError(a.Localize("error__saving_file_format")),DocuViewareAPI.Status.GenericError;window.location=a.appControllerPath+"/save"+(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID+"&fileName="+encodeURIComponent(b)+"&format="+c+"&pageRange="+(e?e:"*")+"&dropAnnotations="+g+"&flattenAnnotations="+k;p&&p();if(a.callbacks.onDocumentSaved)a.callbacks.onDocumentSaved();return DocuViewareAPI.Status.OK},
CloseDocument:function(){return this.serverCtx.documentLoaded?this.ajax.PostBaseRequest("close",{data:{},success:function(b){a.ajax.SetNewServerCtx(null)}},!0):DocuViewareAPI.Status.GenericError},AddAnnot:function(b,c,e,g,k){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;var p=[],n=null;null!=this.Internal.Annotations.defaultAuthor&&(n={},n.author=this.Internal.Annotations.defaultAuthor);for(var w=0;w<b.length;w++){var B=this.Internal.Annotations.mergeAnnotationProperties(b[w].type,
b[w].appearance);B.left=b[w].coordinates.left;B.top=b[w].coordinates.top;B.height=b[w].coordinates.height;B.width=b[w].coordinates.width;null!=b[w].appearance.flipX&&(B.flipX=b[w].appearance.flipX,B.useClientFlipX=!0);null!=b[w].appearance.flipY&&(B.flipY=b[w].appearance.flipY,B.useClientFlipY=!0);for(var I in b[w].common)b[w].common.hasOwnProperty(I)&&(null==n&&(n={}),n[I]=b[w].common[I]);p.push({extProperties:n,properties:B,pageNo:b[w].pageNo})}this.ajax.PostBaseRequest("newannotation",{data:{annots:p},
success:function(E){if((E="string"===typeof E?JSON.parse(E):E)&&null!=E.annots){for(var V=[],ba=[],da=0;da<E.annots.length;da++){var ea=a.Internal.Pages.getRenderingState(E.annots[da].annotApp.pageNo);ea=a.Internal.Annotations.newController(E.annots[da].annotApp,ea.pageLeft,ea.pageTop,ea.contentMatrix);ba.push(E.annots[da].annotApp.pageNo);a.dom.singlePageView&&E.annots[da].annotApp.pageNo!==a.GetCurrentPage()||a.Internal.Pages.isPageRendered(E.annots[da].annotApp.pageNo)&&ea.render();if(!c&&a.callbacks.onAnnotationAdded)a.callbacks.onAnnotationAdded({id:E.annots[da].annotApp.id,
pageNo:E.annots[da].annotApp.pageNo});V.push({id:E.annots[da].annotApp.id,pageNo:E.annots[da].annotApp.pageNo});17==E.annots[da].annotApp.properties.type&&(ea=E.annots[da].annotApp,a.Internal.Annotations.addAnnotsRedactionReferences({id:ea.id,pageNo:ea.pageNo,title:ea.properties.title,fillColor:ea.properties.fillColor}),a.dom.redactionsPanel&&a.Internal.Redaction.refreshRedactionPanel(!0))}a.updateThumbnails(ba,!0);if(a.callbacks.onTextAnnotated&&k)a.callbacks.onTextAnnotated({userAction:k,resultAnnots:V})}else a.ajax.HandleError(E);
e&&e()},error:function(){g&&g()}},!1);return DocuViewareAPI.Status.OK},GetPageFormFields:function(b){if(b){var c=[];if(null!=a.cache.FormFields){for(var e=0;e<a.cache.FormFields.length;e++)a.cache.FormFields[e].formFieldApp.pageNo!==b&&"*"!==b||c.push({id:a.cache.FormFields[e].formFieldApp.id,pageNo:a.cache.FormFields[e].formFieldApp.pageNo,properties:a.cache.FormFields[e].formFieldApp.properties});return c}}return DocuViewareAPI.Status.GenericError},UpdateFormFields:function(b,c,e){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;
for(var g=[],k=0;k<b.length;k++)g.push({id:b[k].id,pageNo:b[k].pageNo,updateNo:k,properties:b[k].properties});this.ajax.PostBaseRequest("formfieldsdupdate",{data:{items:g},success:function(p){if(p="string"===typeof p?JSON.parse(p):p){for(var n=[],w=0;w<p.length;w++){a.Internal.FormFields.removeFormFieldFromCache(p[w].formFieldApp.id);var B=a.Internal.FormFields.newController(p[w].formFieldApp);a.dom.singlePageView&&p[w].formFieldApp.pageNo!==a.GetCurrentPage()||B.render();-1===n.indexOf(p[w].formFieldApp.pageNo)&&
n.push(p[w].formFieldApp.pageNo);if(a.callbacks.onFormFieldChanged)a.callbacks.onFormFieldChanged({id:p[w].formFieldApp.id,pageNo:p[w].formFieldApp.pageNo})}0<n.length&&a.updateThumbnails(n)}else a.ajax.HandleError(p);c&&c()},error:function(){e&&e()}},!1);return DocuViewareAPI.Status.OK},SetAnnotationsInteractionState:function(b){b?a.Internal.Annotations.enableAll():a.Internal.Annotations.disableAll();return DocuViewareAPI.Status.OK},SetAnnotationsVisibility:function(b){return a.Internal.Annotations.setAnnotationsVisibility(b)},
AddAnnotInteractive:function(b,c,e,g){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;a.ExitAnnotationDrawingMode();a.dom.UIconfig.disableAnnotationDrawingModePanel&&(5==b?null!=a.dom.connectedLinesAnnotButton&&dvJQuery(a.dom.connectedLinesAnnotButton).addClass("button_active"):10==b?null!=a.dom.freehandAnnotButton&&dvJQuery(a.dom.freehandAnnotButton).addClass("button_active"):11==b?null!=a.dom.freehandhighlighterAnnotButton&&dvJQuery(a.dom.freehandhighlighterAnnotButton).addClass("button_active"):
16==b&&null!=a.dom.polyRulerAnnotButton&&dvJQuery(a.dom.polyRulerAnnotButton).addClass("button_active"));c?(b=this.Internal.Annotations.mergeAnnotationProperties(b,c),e?this.Internal.Annotations.showAnnotationPropertiesUI(b,null,null,g):this.Internal.Annotations.beginAddAnnotInteractive(b)):this.Internal.Annotations.defaultProperties[b].autoCreate?this.Internal.Annotations.beginAddAnnotInteractive(this.Internal.Annotations.defaultProperties[b]):this.Internal.Annotations.showAnnotationPropertiesUI(this.Internal.Annotations.defaultProperties[b],
null);return DocuViewareAPI.Status.OK},EditAnnotInteractive:function(b,c){if(this.hasPendingAction(!0))return DocuViewareAPI.Status.DocuViewarePendingAction;var e=dvJQuery.extend(!0,{},this.Internal.Annotations.defaultProperties[b.annotApp.properties.type]);dvJQuery.each(e,function(g,k){e[g]=b.annotApp.properties[g]});return this.Internal.Annotations.showAnnotationPropertiesUI(e,!0,b,c)},DeleteAnnotationById:function(b,c){c="undefined"===typeof c?!0:c;if(b&&null!=a.cache.Annots)for(var e=c?this.GetCurrentPage():
-1,g=0;g<a.cache.Annots.length;g++){var k=a.cache.Annots[g];if((!c||k.annotApp.pageNo==e)&&k.annotApp.id==b)return this.DeleteAnnotations([k])}return DocuViewareAPI.Status.GenericError},DeleteAnnotations:function(b){if(b&&0<b.length){for(var c=[],e=1;e<b.length;e++)c.push(b[e]);return b[0].updateAnnotation(!0,null,!1,c)}return DocuViewareAPI.Status.GenericError},UnselectAllAnnotations:function(){a.Internal.Annotations.unselectAll();return DocuViewareAPI.Status.OK},UpdateAnnotationById:function(b,
c){if(b&&null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++){var g=a.cache.Annots[e];if(g.annotApp.id==b)return g.updateAnnotationDeferred(!1,c)}return DocuViewareAPI.Status.GenericError},GetAnnotationProperties:function(b){if(b&&null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];if(e.annotApp.id==b)return e.annotApp.properties}return DocuViewareAPI.Status.GenericError},GetPageAnnotCount:function(b){var c=0;if(null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++)a.cache.Annots[e].annotApp.pageNo===
b&&c++;return c},GetPageAnnotId:function(b,c){var e=0;if(null!=a.cache.Annots)for(var g=0;g<a.cache.Annots.length;g++){var k=a.cache.Annots[g];if(k.annotApp.pageNo===b){if(e===c)return k.annotApp.id;e++}}return DocuViewareAPI.Status.GenericError},GetAnnotationClientTag:function(b){if(b&&null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];if(e.annotApp.id==b)return e.annotApp.clientTag}return DocuViewareAPI.Status.GenericError},SetAnnotationClientTag:function(b,c){if(b&&
null!=a.cache.Annots)for(var e=0;e<a.cache.Annots.length;e++){var g=a.cache.Annots[e];if(g.annotApp.id==b)return g.annotApp.clientTag=c,g.updateAnnotationDeferred(!1,g.annotApp.properties)}return DocuViewareAPI.Status.GenericError},ApplyAllRedactions:function(){a.Internal.Redaction.disableAddRedactionMarksMode();return a.ajax.PostBaseRequest("redact",{data:{},success:function(b){var c="string"===typeof b?JSON.parse(b):b;if(c&&c.status===DocuViewareAPI.Status.OK){if(a.callbacks.onRedactionMarksApplied)a.callbacks.onRedactionMarksApplied();
a.ajax.HandleServerContextResponse(c,!1)}else a.ajax.HandleError(b)},error:function(b){a.ajax.HandleError(b)}},!1)},HasPendingRedactionMark:function(){return a.Internal.Redaction.hasPendingRedactionMark()},EnableAnnotEditionOnDblClick:function(b){if("boolean"==typeof b)this.dom.enableAnnotEditionOnDblClick=b;else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotAutoCreate:function(b){if(0<b.length)for(var c=0;c<b.length;c++)this.Internal.Annotations.defaultProperties[b[c]].autoCreate=
!1;else for(c=0;c<Object.keys(this.Internal.Annotations.defaultProperties).length;c++)this.Internal.Annotations.defaultProperties[c].autoCreate=!1;return DocuViewareAPI.Status.OK},ResetAnnotToDefault:function(b){if(0<b.length)for(var c=0;c<b.length;c++)this.Internal.Annotations.defaultProperties[b[c]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties([b[c]]);else for(c=0;c<Object.keys(this.Internal.Annotations.defaultProperties).length;c++)this.Internal.Annotations.defaultProperties[c]=
DocuViewareAnnotationsUtilities.getAnnotationDefaultProperties(c);return DocuViewareAPI.Status.OK},SetAnnotDefaultAuthor:function(b,c){this.Internal.Annotations.setDefaultAuthor(b);this.dom.commentsAuthorInput.disabled=!0===c?!0:!1;return DocuViewareAPI.Status.OK},SetAnnotPropertiesValues:function(b,c){if(c)this.Internal.Annotations.setDefaultPropertiesValues(b,c);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},GetAnnotPropertiesValues:function(b){return null!=b&&0<=
b&&17>=b?this.Internal.Annotations.getAnnotPropertiesValues(b):DocuViewareAPI.Status.GenericError},SetAnnotPropertiesToDisplay:function(b,c){if(c)this.Internal.Annotations.setDefaultPropertiesToDisplay(b,c);else return DocuViewareAPI.Status.GenericError;return DocuViewareAPI.Status.OK},ResetAnnotPropertiesToDisplayDefault:function(b){if(0<b.length)for(var c=0;c<b.length;c++)this.Internal.Annotations.defaultPropertiesDisplay[b[c]]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay([b[c]]);
else for(c=0;c<Object.keys(this.Internal.Annotations.defaultPropertiesDisplay).length;c++)this.Internal.Annotations.defaultPropertiesDisplay[c]=DocuViewareAnnotationsUtilities.getAnnotationDefaultPropertiesDisplay(c);return DocuViewareAPI.Status.OK},EnableAnnotMultiSelect:function(b){a.Internal.Annotations.multiSelectionEnabled=b},FocusAnnot:function(b,c,e){if(b&&null!=a.cache.Annots){if(null!=a.cache.AnnotsComments&&0<a.cache.AnnotsComments.length&&null!=a.cache.AnnotsComments)for(var g=0;g<a.cache.AnnotsComments.length;g++){var k=
a.cache.AnnotsComments[g];if(k.annotApp.id===b){c&&a.Internal.Annotations.selectAnnotationCommentById(b,e,e);var p=k.annotApp.pageNo;return a.SelectPage(p,function(){var w=a.Internal.Annotations.getAnnotationCommentOwnerAnnotApp(k.annotApp,!0);null!=w&&(c&&w.visible&&(a.Internal.Annotations.unselectAll(),a.Internal.Annotations.selectById(w.id)),e&&a.EnsurePageRegionVisibility(p,w.bbox.Left,w.bbox.Top,w.bbox.Width,w.bbox.Height))})}}for(g=0;g<a.cache.Annots.length;g++){var n=a.cache.Annots[g];if(n.annotApp.id===
b){if(n.annotApp.visible)return p=n.annotApp.pageNo,a.SelectPage(p,function(){e&&a.EnsurePageRegionVisibility(p,n.annotApp.bbox.Left,n.annotApp.bbox.Top,n.annotApp.bbox.Width,n.annotApp.bbox.Height);c&&a.Internal.Annotations.selectById(n.annotApp.id)});break}}}return DocuViewareAPI.Status.GenericError},UnselectAnnot:function(b){if(b&&null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];if(e.annotApp.id===b)return a.Internal.Annotations.unselectById(e.annotApp.id)}return DocuViewareAPI.Status.GenericError},
GetAnnotBBoxOnViewer:function(b){if(b&&null!=a.cache.Annots)for(var c=0;c<a.cache.Annots.length;c++){var e=a.cache.Annots[c];if(e.annotApp.id===b)return e.getBBoxOnViewer()}return DocuViewareAPI.Status.GenericError},GetTwainAcquisitionServiceInfo:function(b,c){a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"ServiceVersion/",success:function(e){e?b&&b(e):c&&c()},error:function(){c&&c({status:DocuViewareAPI.Status.GenericError,message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}});
return DocuViewareAPI.Status.OK},GetTwainAcquisitionSources:function(b,c){a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"GetTwainSources/",success:function(e){if(e){if(b){if(null!=e.GetTwainSourcesResult&&null!=e.GetTwainSourcesResult.sources)for(var g=0;g<e.GetTwainSourcesResult.sources.length;g++)e.GetTwainSourcesResult.sources[g].is64bit&&(e.GetTwainSourcesResult.sources[g].sourceName+=" (64-bit)");b(e)}}else c&&c(e)},error:function(){c&&c({status:DocuViewareAPI.Status.GenericError,
message:a.Localize("_twain_connector_unavailable"),twainStatus:a.Internal.Twain.Status.NOT_RESPONDING})}})},GetTwainSourceList:function(){var b=null;a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"GetTwainSources/",async:!1,timeout:5E3,success:function(c){if(c&&c.GetTwainSourcesResult){if(null!=c.GetTwainSourcesResult&&null!=c.GetTwainSourcesResult.sources)for(var e=0;e<c.GetTwainSourcesResult.sources.length;e++)c.GetTwainSourcesResult.sources[e].is64bit&&(c.GetTwainSourcesResult.sources[e].sourceName+=
" (64-bit)");b=c.GetTwainSourcesResult}}});return b},TwainGetClientInfo:function(){var b=null;a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"GetTwainClientInfo/",async:!1,timeout:5E3,success:function(c){c&&c.GetTwainClientInfoResult&&(b=c.GetTwainClientInfoResult)}});return b},TwainGetLocalServiceStatus:function(){var b=DocuViewareAPI.LocalServiceStatus.NotFound;a.ajax.PostAjaxRequestForLocalService({url:a.twainServiceUri32+"ServiceVersion/",async:!1,timeout:5E3,success:function(c){b=
c&&c.ServiceVersionResult?parseInt(c.ServiceVersionResult)>=a.twainServiceSupportedVersion?DocuViewareAPI.LocalServiceStatus.Ready:DocuViewareAPI.LocalServiceStatus.WrongVersion:DocuViewareAPI.LocalServiceStatus.NotFound}});return b},DownloadTwainServiceSetup:function(){window.location=a.appControllerPath+"/twainservicesetupdownload"+(a.useIdInRoot?"/1":"")+"?sessionID="+this.ajax.sessionID;return DocuViewareAPI.Status.OK}};a.resetServerCtx();if(a.dom.thumbnailArea){d=document.getElementById(a.FindSnapIn("thumbnails").snapInID);
a.isIOS&&(d.style.overflow="auto");var C=null;dvJQuery(d).bind("scroll",function(b){null!=C&&clearTimeout(C);C=setTimeout(function(){a.showVisibleThumbnails()},a.fastMode?50:400)});a.dom.UIconfig.enableMultipleThumbnailSelection&&(a.dom.thumbnailSelectBox=dvJQuery("<div/>").appendTo(d).css("position","absolute").css("border","1px solid "+a.dom.UIconfig.activeSelectedColorHover).css("background-color",a.dom.UIconfig.activeSelectedBackgroundColor).css("display","none"),d.onmousedown=a.events.onThumbnailAreaMouseDownHandler,
d.onmousemove=a.events.onThumbnailAreaMouseMoveHandler,d.onmouseup=a.events.onThumbnailAreaMouseUpHandler);a.dom.UIconfig.enableThumbnailDragDrop&&dvJQuery(a.dom.thumbnailArea).sortable({placeholder:"highlight",forcePlaceholderSize:!0,tolerance:"pointer",helper:function(b,c){b=dvJQuery("<div>");var e=dvJQuery("<div>");e.css({position:"relative",width:"100%",height:"100%"});c=c.find("canvas");var g=c.get(0).toDataURL("image/png");g=dvJQuery('<img src="'+g+'"/>');g.css({position:"absolute",left:"0px",
top:"0px",opacity:"0.5",width:c.width()/2+"px",height:c.height()/2+"px"});e.html(g);b.html(e);b.width(c.width()/2);b.height(c.height()/2);return b},start:function(b,c){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()&&(a.dom.resetThumbStyle(c.placeholder,!0),c.placeholder.width(c.item.width()),c.item.attr("data-moving","true"),b=a.Internal.Thumbnails.getThumbnailPage(c.item.get(0)),a.Internal.Thumbnails.isThumbnailSelected(b)||(a.Internal.Thumbnails.reinitThumbnailsSelection(),a.Internal.Thumbnails.selectThumbnail(b)),
b=a.GetSelectedThumbnailItems(),0!=b.length)){for(var e=0;e<b.length;e++){var g=a.Internal.Thumbnails.getThumbnailFromPageNo(b[e]);null!=g&&g.css("opacity","0.5")}b=dvJQuery("<span>"+b.length+"</span>");b.css({padding:"6px",color:"white",border:"1px solid white",position:"absolute",opacity:"0.95","background-color":a.dom.UIconfig.activeSelectedColor,right:"10%",bottom:"10%","-webkit-border-radius":"4px","-moz-border-radius":"4px","border-radius":"4px"});dvJQuery(c.helper).children(0).append(b)}},
update:function(b,c){if(a.serverCtx.enablePageMoving&&!a.hasPendingAction()){var e=c.item.index()+1,g=a.GetSelectedThumbnailItems();if(1!=g.length||g[0]!==e)dvJQuery(a.dom.thumbnailArea).sortable("disable"),a.ajax.PostBaseRequest("movepage",{data:{source:g,dest:e},success:function(k){dvJQuery(a.dom.thumbnailArea).sortable("enable");a.ajax.HandleServerContextResponse("string"===typeof k?JSON.parse(k):k,!1,!0,!0);if(a.callbacks.onThumbnailsOrderChanged)a.callbacks.onThumbnailsOrderChanged({source:g,
destination:e})},error:function(){dvJQuery(a.dom.thumbnailArea).sortable("enable")}},!1)}},stop:function(b,c){c.item.attr("data-moving","false");b=a.GetSelectedThumbnailItems();if(0!=b.length)for(var e=a.Internal.Thumbnails.getThumbnailPage(c.item.get(0)),g=c.item,k=0;k<b.length;k++){var p=b[k],n=a.Internal.Thumbnails.getThumbnailFromPageNo(p);p!=e&&(p<e?c.item.before(n):g.after(n));g=n;g.css("opacity","1")}}})}a.events.pageRequestTimeout=null;a.events.onViewScroll=function(){a.events.pageRequestTimeout&&
clearTimeout(a.events.pageRequestTimeout);if(null!=a.serverCtx&&!a.serverCtx.singlePageView&&a.serverCtx.documentLoaded&&!(a.Internal.Files.uploading||a.ajax.downloading||a.events.isZoomingPreview||null!=a.selectNextPageActions&&0!=a.selectNextPageActions||null!=a.selectPreviousPageActions&&0!=a.selectPreviousPageActions)){if(!a.events.freezeScrollEvents){var b=-1;if(null!=a.cache.canvas)for(var c=!1,e=a.Internal.Coordinates.getViewerScrollTop()+a.dom.viewerArea.offsetHeight/2,g=0;g<a.cache.canvas.length;g++){for(var k=
0;k<a.cache.canvas[g].canvas.length;k++){var p=parseFloat(dvJQuery(a.cache.canvas[g].canvas[k].tile).css("top")),n=p+parseFloat(dvJQuery(a.cache.canvas[g].canvas[k].tile).css("height"));if(p<e&&n>e){b=a.cache.canvas[g].pageNo;a.dom.updateSelectedPageFader(0,b);c=!0;break}}if(c)break}a.events.pageRequestTimeout=setTimeout(function(){0<b&&b<=a.serverCtx.pageCount&&b!=a.GetLastPageNoRequest()?a.SelectPageEx(b,!0,!1,!0,!0):a.showVisiblePages(b)},a.fastMode?50:500)}a.previewVisiblePages();if(a.callbacks.onViewerScroll)a.callbacks.onViewerScroll()}};
dvJQuery(a.dom.viewerArea).bind("scroll",a.events.onViewScroll);dvJQuery(a.dom.viewerArea).dvContextMenu({idMenu:"viewerContextMenu"+a.uniqueID,referrer:a.dom.viewerArea,dependsOnTextSelection:!0,beforeShow:function(){return null!=a.Internal.Text.getSelectedText()},translateMouse:function(b){var c=a.dom.viewerArea.getBoundingClientRect(),e=dvJQuery(a.dom.viewerContextMenu);b.x=b.x-c.left+a.dom.viewerArea.offsetLeft+5;b.y=b.y-c.top+a.dom.viewerArea.offsetTop-5;c=e.width();b.x+c>a.dom.viewerArea.clientWidth&&
(b.x-=b.x+c-a.dom.viewerArea.clientWidth+15);e=e.height();b.y+e>a.dom.viewerArea.clientHeight-e&&(b.y-=b.y-a.dom.viewerArea.clientHeight+e+10)}});ra(a);dvJQuery("#"+t).on("dragenter",function(b){b.stopPropagation();b.preventDefault()});dvJQuery("#"+t).on("dragover",function(b){b.stopPropagation();b.preventDefault()});if(ja)dvJQuery("#"+t).on("drop",function(b){b.originalEvent&&b.originalEvent.dataTransfer&&b.originalEvent.dataTransfer.files&&(b.preventDefault(),(b=b.originalEvent.dataTransfer.files)&&
1<=b.length&&a.Internal.Files.uploadFile(b[0],0))});else dvJQuery("#"+t).on("drop",function(b){b.preventDefault()});dvJQuery(a.dom.viewerArea).on("keydown",function(b){(b.metaKey||b.ctrlKey)&&"c"===String.fromCharCode(b.which).toLowerCase()?(a.CopySelectedTextToClipboard(),b.preventDefault()):(b.metaKey||b.ctrlKey)&&"a"===String.fromCharCode(b.which).toLowerCase()?(a.dom.SelectedTextRegions.clear(1),a.Internal.Text.captureAndHighlightSelectedText(-1,-1,-1,-1,!0,!1),b.preventDefault()):a.events.isDrawingPath&&
(b.metaKey||b.ctrlKey)&&"z"===String.fromCharCode(b.which).toLowerCase()&&(a.Internal.Annotations.dropPendingFreenhandAnnotLastSubPath(),b.preventDefault())});a.dom.pageNavBox&&a.dom.pageNavBox.id&&dvJQuery(a.dom.pageNavBox).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),b=parseInt(a.dom.pageNavBox.value),a.serverCtx.documentLoaded&&b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?(a.dom.pageNavBox.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+
" [1 - "+a.serverCtx.pageCount.toString()+"]"):a.dom.pageNavBox.value=b)});a.dom.pageNavBoxMobile&&a.dom.pageNavBoxMobile.id&&dvJQuery(a.dom.pageNavBoxMobile).keypress(function(b){13==(b.keyCode||b.which)&&(b.preventDefault(),b=parseInt(a.dom.pageNavBoxMobile.value),a.serverCtx.documentLoaded&&b!=a.GetLastPageNoRequest()?0<b&&b<=a.serverCtx.pageCount?(a.dom.pageNavBoxMobile.value=b,a.SelectPage(b)):a.DisplayError(a.Localize("error_invalid_pages_number")+" [1 - "+a.serverCtx.pageCount.toString()+"]"):
a.dom.pageNavBoxMobile.value=b)});a.dom.searchValueInput&&dvJQuery(a.dom.searchValueInput).keypress(function(b){if(13==(b.keyCode||b.which)){b.preventDefault();b=a.dom.searchValueInput.value;var c=a.dom.searchWholeWordInput.checked,e=a.dom.searchCaseSensitiveInput.checked,g=a.dom.searchAnyWordInput.checked,k=dvJQuery(a.dom.searchPageSelect);k="checkbox"===k.attr("type")?k.is(":checked"):k.filter(":checked").val();a.SubmitSearch(b,c,e,g,k)}});a.dom.addressBar&&dvJQuery(a.dom.addressBar).keypress(function(b){13==
(b.keyCode||b.which)&&(b.preventDefault(),a.LoadFromUri(a.dom.addressBar.value,"",null,null,null,!0))});"ontouchstart"in document.documentElement?(dvJQuery(a.dom.mainArea).find(".dv-button").on("touchstart",function(b){dvJQuery(this).addClass("button_hover");a.dom.updateButtons()}),dvJQuery(a.dom.mainArea).find(".dv-button").on("touchend",function(b){dvJQuery(this).removeClass("button_hover");a.dom.updateButtons()})):dvJQuery(a.dom.mainArea).find(".dv-button").hover(function(){dvJQuery(this).addClass("button_hover");
a.dom.updateButtons()},function(){dvJQuery(this).removeClass("button_hover");a.dom.updateButtons()});a.dom.leftSideArea&&(dvJQuery(a.dom.leftSideArea).resizable({containment:dvJQuery(a.dom.controlArea),handles:{e:dvJQuery(a.dom.leftSideResizeBar)},minWidth:null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0,start:function(b,c){a.hasPendingAction()?b.preventDefault():a.events.isResizingUI=!0},resize:function(b,c){b=null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0;
c.size.width<b+30&&(c.size.width=b);a.NewViewerSizePreview()},stop:function(b,c){a.events.isResizingUI=!1;c.size.width<(null!=a.dom.snapinButtonStrip?a.dom.snapinButtonStrip.offsetWidth:0)+30&&a.SetSnapinsPanelVisibility(!1,c.originalSize.width);a.events.onNewViewerSize();a.dom.sidePanelResized()}}),a.dom.searchArea&&("legacy"===a.dom.mainArea.attributes["data-theme-layout"].value?dvJQuery(a.dom.searchArea).find(".dv-jqueryRadio").dvButtonset({setActive:function(){dvJQuery(a.dom.searchArea).find(".dvUi-button").each(function(){dvJQuery(this).css("background-color",
"transparent");dvJQuery(this).css("background-image","none");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});dvJQuery(a.dom.searchArea).find(".dvUi-state-active").each(function(){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("background-image","-moz-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image",
"-webkit-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image","-ms-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+" 0%,"+a.dom.UIconfig.panelDarkerBackColor+" 100%)");dvJQuery(this).css("background-image","-o-linear-gradient(top, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+")");dvJQuery(this).css("background-image","linear-gradient(to bottom, "+a.dom.UIconfig.panelBackColor+","+a.dom.UIconfig.panelDarkerBackColor+
")");dvJQuery(this).css("background-repeat","repeat-x");dvJQuery(this).css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("fill",a.dom.UIconfig.activeSelectedColor)})}}):dvJQuery(a.dom.searchArea).find(".dv-jqueryRadio").dvButtonset({setActive:function(){dvJQuery(a.dom.searchArea).find(".dvUi-button").each(function(){dvJQuery(this).css("background-color","transparent");dvJQuery(this).css("border","1px solid transparent");dvJQuery(this).css("fill",a.dom.UIconfig.strokeColor)});
dvJQuery(a.dom.searchArea).find(".dvUi-state-active").each(function(){dvJQuery(this).css("background-color",a.dom.UIconfig.activeSelectedColor);dvJQuery(this).css("border","1px solid "+a.dom.UIconfig.miscBorderColor);dvJQuery(this).css("fill",a.dom.UIconfig.toolbarIconActiveColor)})}})),a.dom.UIconfig.collapsedSnapInPanel&&(dvJQuery(a.dom.leftSideArea).resizable("disable"),a.dom.leftSideArea.oldWidth=a.dom.UIconfig.snapInPanelDefaultWidth));d=document.getElementsByName("inputSelectedPages"+a.uniqueID);
for(var J=0;J<d.length;J++)d[J].onchange=function(b){a.pageRangeSelection(this.value,document.getElementById("savePageRangeInput"+a.uniqueID))};document.getElementById("savePageRangeInput"+a.uniqueID).onkeyup=function(b){a.inputPageRangeControl(b.target)};document.getElementById("save_extension_select"+a.uniqueID).onchange=Ca;document.getElementById("save_content_select"+a.uniqueID).onchange=Ca;document.getElementById("save_extension_select"+a.uniqueID).onchange();d=document.getElementsByName("inputPrintSelectedPages"+
a.uniqueID);for(J=0;J<d.length;J++)d[J].onchange=function(b){a.pageRangeSelection(this.value,a.dom.printPageRangeInput)};d=document.getElementsByName("inputTwainAcquisitionDestination"+a.uniqueID);for(J=0;J<d.length;J++)d[J].onchange=function(b){"1"===b.target.value&&b.target.checked?dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("select,span").prop("disabled",!1).removeClass("dvUi-state-disabled").addClass("dvUi-state-default").css("opacity",1):dvJQuery(a.dom.twainAcquisitionDestinationAppendDocBox).find("select,span").prop("disabled",
!0).removeClass("dvUi-state-default").addClass("dvUi-state-disabled").css("opacity",.3)};a.dom.printPageRangeInput.onkeyup=function(b){a.inputPageRangeControl(b.target)};a.dom.progressbar=new DocuViewareProgressbar({bg:"#acf",target:a.dom.controlArea,id:"progressbar"+a.uniqueID});"undefined"!=typeof a.dom.toolBarArea&&null!=a.dom.toolBarArea&&dvJQuery(a.dom.toolBarArea).bind("touchstart",function(b){var c=b.timeStamp,e=dvJQuery(this).data("lastTouch")||c;e=c-e;var g=b.originalEvent.touches.length;
dvJQuery(this).data("lastTouch",c);!e||500<e||1<g||(b.preventDefault(),dvJQuery(this).trigger("click").trigger("click"))});a.dom.viewerArea.cursorMgr=CreateDocuViewareCursorManager(a.dom.viewerArea,a.isIEorEdge);a.dom.updateSinglePageModeButton();null!=a.dom.zoomInButton&&(dvJQuery(a.dom.zoomInButton).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomInButton).bind("touchend",function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");
dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomInButtonMobile&&(dvJQuery(a.dom.zoomInButtonMobile).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomInButtonMobile).bind("touchend",function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomOutButton&&(dvJQuery(a.dom.zoomOutButton).bind("touchstart",function(b){b.preventDefault();
dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomOutButton).bind("touchend",function(b){b.preventDefault();dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));null!=a.dom.zoomOutButtonMobile&&(dvJQuery(a.dom.zoomOutButtonMobile).bind("touchstart",function(b){b.preventDefault();dvJQuery(this).trigger("mousedown").trigger("mousedown")}),dvJQuery(a.dom.zoomOutButtonMobile).bind("touchend",function(b){b.preventDefault();
dvJQuery(this).trigger("mouseup").trigger("mouseup");dvJQuery(this).trigger("click").trigger("click")}));a.dom.panDiv=document.createElement("div");a.dom.panDiv.style.display="block";a.dom.panDiv.style.position="absolute";a.dom.panDiv.style.height="100%";a.dom.panDiv.style.width="100%";a.dom.panDiv.style.left="0px";a.dom.panDiv.style.top="0px";a.dom.panDiv.style.padding="0px";a.dom.panDiv.style.margin="0px";a.isIE&&(a.dom.panDiv.style.backgroundColor="rgba(255,255,255,0.01)");a.dom.mainArea.addEventListener("touchstart",
function(b){1<b.touches.length&&(a.events.disableSingleInputEvents=!0,a.Internal.Annotations.unselectAll());2===b.touches.length&&(a.events.isZoomingPreview||a.CanChangeZoom(null,!0)!==DocuViewareAPI.Status.OK||(a.events.isZoomingPreview=!0,a.events.isZoomingPreviewTouchMode=!0,a.events.enableZoomPreviewAutoSubmitter(),a.events.twoFingersDistStart=Math.hypot(b.touches[0].pageX-b.touches[1].pageX,b.touches[0].pageY-b.touches[1].pageY),a.events.prevTwoFingersDist=null),b.cancelable&&b.preventDefault())});
a.dom.mainArea.addEventListener("touchend",function(b){a.events.disableSingleInputEvents&&(a.events.disableSingleInputEvents=!1);a.events.isZoomingPreview&&a.events.isZoomingPreviewTouchMode&&(a.events.isZoomingPreview=!1,a.events.isZoomingPreviewTouchMode=null,a.SetCurrentZoom(a.cache.pageCanvasZoom),b.cancelable&&b.preventDefault())});a.dom.mainArea.addEventListener("touchmove",function(b){if(2===b.touches.length){if(a.events.isZoomingPreview&&a.events.isZoomingPreviewTouchMode){var c=Math.hypot(b.touches[0].pageX-
b.touches[1].pageX,b.touches[0].pageY-b.touches[1].pageY),e=!0;null!=a.events.prevTwoFingersDist&&(e=5<Math.abs(c-a.events.prevTwoFingersDist));e&&(a.ZoomPreview(c/a.events.twoFingersDistStart*a.serverCtx.zoom),a.events.prevTwoFingersDist=c)}b.cancelable&&b.preventDefault()}});a.dom.mainArea.addEventListener("wheel",function(b){b.ctrlKey&&(b.preventDefault(),!1!==a.UIconfig.allowWheelZoom&&(a.events.isZoomingPreview||a.CanChangeZoom(null,!0)!==DocuViewareAPI.Status.OK||(a.events.enableZoomPreviewAutoSubmitter(),
a.events.isZoomingPreview=!0,a.events.zoomPreviewWheelValue=0),a.events.isZoomingPreview&&null!=a.events.zoomPreviewWheelValue&&(0>b.deltaY?a.events.zoomPreviewWheelValue++:a.events.zoomPreviewWheelValue--,b=0<=a.events.zoomPreviewWheelValue?a.ComputeNextZoom(a.events.zoomPreviewWheelValue,!0):a.ComputeNextZoom(Math.abs(a.events.zoomPreviewWheelValue),!1),a.ZoomPreview(b))))});window.addEventListener("keyup",function(b){"Control"==b.key&&a.events.zoomPreviewWheelValue&&a.events.isZoomingPreview&&
(a.events.zoomPreviewWheelValue=null,a.events.isZoomingPreview=!1,a.SetCurrentZoom(a.cache.pageCanvasZoom),b.preventDefault())});a.dom.snapinButtonStrip&&(a.dom.snapinButtonStrip.tabFocus=0,a.dom.snapinButtonStrip.addEventListener("keydown",function(b){if(38===b.keyCode||40===b.keyCode){var c=a.dom.snapinButtonStrip.childNodes;c[a.dom.snapinButtonStrip.tabFocus].setAttribute("tabindex",-1);40===b.keyCode?(a.dom.snapinButtonStrip.tabFocus++,a.dom.snapinButtonStrip.tabFocus>=c.length&&(a.dom.snapinButtonStrip.tabFocus=
0)):38===b.keyCode&&(a.dom.snapinButtonStrip.tabFocus--,0>a.dom.snapinButtonStrip.tabFocus&&(a.dom.snapinButtonStrip.tabFocus=c.length-1));c[a.dom.snapinButtonStrip.tabFocus].setAttribute("tabindex",0);c[a.dom.snapinButtonStrip.tabFocus].focus()}}));a.dom.pageBoundsDiv=document.createElement("div");a.dom.pageBoundsDiv.style.display="block";a.dom.pageBoundsDiv.style.position="absolute";a.dom.pageBoundsDiv.style.padding="0px";a.dom.pageBoundsDiv.style.margin="0px";a.dom.pageBoundsDiv.style.display=
"none";a.dom.pageBoundsDiv.style.borderStyle="solid";a.dom.pageBoundsDiv.style.borderColor=a.dom.UIconfig.strokeColor;a.dom.pageBoundsDiv.style.borderWidth="1px";a.dom.panDiv.appendChild(a.dom.pageBoundsDiv);a.dom.rlink=document.createElement("canvas");a.dom.rlink.style.zIndex=a.dom.zindexManager.getFirstAnnotZindex()-1;a.dom.rlink.style.position="absolute";a.dom.rlink.style.height="0px";a.dom.rlink.style.width="0px";a.dom.rlink.style.left="0px";a.dom.rlink.style.top="0px";a.dom.rlink.style.padding=
"0px";a.dom.rlink.style.margin="0px";a.dom.rlink.style.borderStyle="solid";a.dom.rlink.style.borderStyle="solid";a.dom.rlink.style.borderColor="red";a.dom.rlink.style.borderWidth="1px";a.dom.rlink.style.display="none";a.dom.panDiv.appendChild(a.dom.rlink);a.Internal.Selection.selectionArea.init(a.dom.panDiv);a.events.forwardMouseEventsToViewer(a.dom.panDiv);a.dom.viewerArea.appendChild(a.dom.panDiv);a.events.onLoad(R);DocuViewareUtilities.addEvent(window,"resize",a.events.onResize);setTimeout(a.events.UIStateVerifier,
1E3);document.getElementById(t).control=a}};
